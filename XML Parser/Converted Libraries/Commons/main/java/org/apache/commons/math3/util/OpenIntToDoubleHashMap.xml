<?xml version="1.0" encoding="UTF-8"?>
<source package="org.apache.commons.math3.util">
  <import name="java.io.IOException" />
  <import name="java.io.ObjectInputStream" />
  <import name="java.io.Serializable" />
  <import name="java.util.ConcurrentModificationException" />
  <import name="java.util.NoSuchElementException" />
  <class name="OpenIntToDoubleHashMap" startLine="26">
    <implements name="Serializable" />
    <javadoc>
      <text>* Open addressed map from int to double.
 * <p>This class provides a dedicated map from integers to doubles with a
 * much smaller memory overhead than standard <code>java.util.Map</code>.</p>
 * <p>This class is not synchronized. The specialized iterators returned by{@link #iterator()} are fail-fast: they throw a
 * <code>ConcurrentModificationException</code> when they detect the map has been
 * modified during iteration.</p></text>
      <version>$Id: OpenIntToDoubleHashMap.java 1421448 2012-12-13 19:45:57Z tn $</version>
      <since>2.0</since>
    </javadoc>
    <javadoc>
      <text>* Status indicator for free table entries.</text>
    </javadoc>
    <declaration type="byte" name="FREE" />
    <javadoc>
      <text>* Status indicator for full table entries.</text>
    </javadoc>
    <declaration type="byte" name="FULL" />
    <javadoc>
      <text>* Status indicator for removed table entries.</text>
    </javadoc>
    <declaration type="byte" name="REMOVED" />
    <javadoc>
      <text>* Serializable version identifier</text>
    </javadoc>
    <declaration type="long" name="serialVersionUID" />
    <javadoc>
      <text>* Load factor for the map.</text>
    </javadoc>
    <declaration type="float" name="LOAD_FACTOR" />
    <javadoc>
      <text>* Default starting size.
 * <p>This must be a power of two for bit mask to work properly. </p></text>
    </javadoc>
    <declaration type="int" name="DEFAULT_EXPECTED_SIZE" />
    <javadoc>
      <text>* Multiplier for size growth when map fills up.
 * <p>This must be a power of two for bit mask to work properly. </p></text>
    </javadoc>
    <declaration type="int" name="RESIZE_MULTIPLIER" />
    <javadoc>
      <text>* Number of bits to perturb the index when probing for collision resolution.</text>
    </javadoc>
    <declaration type="int" name="PERTURB_SHIFT" />
    <javadoc>
      <text>* Keys table.</text>
    </javadoc>
    <declaration type="int[]" name="keys" />
    <javadoc>
      <text>* Values table.</text>
    </javadoc>
    <declaration type="double[]" name="values" />
    <javadoc>
      <text>* States table.</text>
    </javadoc>
    <declaration type="byte[]" name="states" />
    <javadoc>
      <text>* Return value for missing entries.</text>
    </javadoc>
    <declaration type="double" name="missingEntries" />
    <javadoc>
      <text>* Current size of the map.</text>
    </javadoc>
    <declaration type="int" name="size" />
    <javadoc>
      <text>* Bit mask for hash values.</text>
    </javadoc>
    <declaration type="int" name="mask" />
    <javadoc>
      <text>* Modifications count.</text>
    </javadoc>
    <declaration type="int" name="count" />
    <javadoc>
      <text>* Build an empty map with default size and using NaN for missing entries.</text>
    </javadoc>
    <method type="constructor" name="OpenIntToDoubleHashMap" startLine="91" endLine="93" />
    <javadoc>
      <text>* Build an empty map with default size</text>
      <param>missingEntries value to return when a missing entry is fetched</param>
    </javadoc>
    <method type="constructor" name="OpenIntToDoubleHashMap" startLine="99" endLine="101" />
    <javadoc>
      <text>* Build an empty map with specified size and using NaN for missing entries.</text>
      <param>expectedSize expected number of elements in the map</param>
    </javadoc>
    <method type="constructor" name="OpenIntToDoubleHashMap" startLine="107" endLine="109" />
    <javadoc>
      <text>* Build an empty map with specified size.</text>
      <param>expectedSize expected number of elements in the map</param>
      <param>missingEntries value to return when a missing entry is fetched</param>
    </javadoc>
    <method type="constructor" name="OpenIntToDoubleHashMap" startLine="117" endLine="124">
      <declaration type="int" name="capacity" />
    </method>
    <javadoc>
      <text>* Copy constructor.</text>
      <param>source map to copy</param>
    </javadoc>
    <method type="constructor" name="OpenIntToDoubleHashMap" startLine="130" endLine="142">
      <declaration type="int" name="length" />
    </method>
    <javadoc>
      <text>* Compute the capacity needed for a given size.</text>
      <param>expectedSize expected size of the map</param>
      <return>capacity to use for the specified size</return>
    </javadoc>
    <method type="int" name="computeCapacity" startLine="149" endLine="159">
      <scope startLine="150" endLine="152" />
      <declaration type="int" name="capacity" />
      <declaration type="int" name="powerOfTwo" />
      <scope startLine="155" endLine="157" />
    </method>
    <javadoc>
      <text>* Find the smallest power of two greater than the input value</text>
      <param>i input value</param>
      <return>smallest power of two greater than the input value</return>
    </javadoc>
    <method type="int" name="nextPowerOfTwo" startLine="166" endLine="168" />
    <javadoc>
      <text>* Get the stored value associated with the given key</text>
      <param>key key associated with the data</param>
      <return>data associated with the key</return>
    </javadoc>
    <method type="double" name="get" startLine="175" endLine="198">
      <declaration type="int" name="hash" />
      <declaration type="int" name="index" />
      <scope startLine="179" endLine="181" />
      <scope startLine="183" endLine="185" />
      <declaration type="int" name="j" />
      <scope startLine="188" endLine="194">
        <scope startLine="191" endLine="193" />
      </scope>
    </method>
    <javadoc>
      <text>* Check if a value is associated with a key.</text>
      <param>key key to check</param>
      <return>true if a value is associated with key</return>
    </javadoc>
    <method type="boolean" name="containsKey" startLine="205" endLine="228">
      <declaration type="int" name="hash" />
      <declaration type="int" name="index" />
      <scope startLine="209" endLine="211" />
      <scope startLine="213" endLine="215" />
      <declaration type="int" name="j" />
      <scope startLine="218" endLine="224">
        <scope startLine="221" endLine="223" />
      </scope>
    </method>
    <javadoc>
      <text>* Get an iterator over map elements.
 * <p>The specialized iterators returned are fail-fast: they throw a
 * <code>ConcurrentModificationException</code> when they detect the map
 * has been modified during iteration.</p></text>
      <return>iterator over the map elements</return>
    </javadoc>
    <method type="Iterator" name="iterator" startLine="237" endLine="239" />
    <javadoc>
      <text>* Perturb the hash for starting probing.</text>
      <param>hash initial hash</param>
      <return>perturbed hash</return>
    </javadoc>
    <method type="int" name="perturb" startLine="246" endLine="248" />
    <javadoc>
      <text>* Find the index at which a key should be inserted</text>
      <param>key key to lookup</param>
      <return>index at which key should be inserted</return>
    </javadoc>
    <method type="int" name="findInsertionIndex" startLine="255" endLine="257" />
    <javadoc>
      <text>* Find the index at which a key should be inserted</text>
      <param>keys keys table</param>
      <param>states states table</param>
      <param>key key to lookup</param>
      <param>mask bit mask for hash values</param>
      <return>index at which key should be inserted</return>
    </javadoc>
    <method type="int" name="findInsertionIndex" startLine="268" endLine="314">
      <declaration type="int" name="hash" />
      <declaration type="int" name="index" />
      <scope startLine="271" endLine="273" />
      <scope startLine="273" endLine="275" />
      <declaration type="int" name="perturb" />
      <declaration type="int" name="j" />
      <scope startLine="279" endLine="289">
        <scope startLine="280" endLine="288">
          <scope startLine="285" endLine="287" />
        </scope>
      </scope>
      <scope startLine="291" endLine="293" />
      <scope startLine="293" endLine="297">
        <comment>due to the loop exit condition,</comment>
        <comment>if (states[index] == FULL) then keys[index] == key</comment>
      </scope>
      <declaration type="int" name="firstRemoved" />
      <scope startLine="300" endLine="312">
        <scope startLine="304" endLine="306" />
        <scope startLine="306" endLine="308" />
      </scope>
    </method>
    <javadoc>
      <text>* Compute next probe for collision resolution</text>
      <param>perturb perturbed hash</param>
      <param>j previous probe</param>
      <return>next probe</return>
    </javadoc>
    <method type="int" name="probe" startLine="322" endLine="324" />
    <javadoc>
      <text>* Change the index sign</text>
      <param>index initial index</param>
      <return>changed index</return>
    </javadoc>
    <method type="int" name="changeIndexSign" startLine="331" endLine="333" />
    <javadoc>
      <text>* Get the number of elements stored in the map.</text>
      <return>number of elements stored in the map</return>
    </javadoc>
    <method type="int" name="size" startLine="339" endLine="341" />
    <javadoc>
      <text>* Remove the value associated with a key.</text>
      <param>key key to which the value is associated</param>
      <return>removed value</return>
    </javadoc>
    <method type="double" name="remove" startLine="349" endLine="372">
      <declaration type="int" name="hash" />
      <declaration type="int" name="index" />
      <scope startLine="353" endLine="355" />
      <scope startLine="357" endLine="359" />
      <declaration type="int" name="j" />
      <scope startLine="362" endLine="368">
        <scope startLine="365" endLine="367" />
      </scope>
    </method>
    <javadoc>
      <text>* Check if the tables contain an element associated with specified key
 * at specified index.</text>
      <param>key key to check</param>
      <param>index index to check</param>
      <return>true if an element is associated with key at index</return>
    </javadoc>
    <method type="boolean" name="containsKey" startLine="381" endLine="383" />
    <javadoc>
      <text>* Remove an element at specified index.</text>
      <param>index index of the element to remove</param>
      <return>removed value</return>
    </javadoc>
    <method type="double" name="doRemove" startLine="390" endLine="398">
      <declaration type="double" name="previous" />
    </method>
    <javadoc>
      <text>* Put a value associated with a key in the map.</text>
      <param>key key to which value is associated</param>
      <param>value value to put in the map</param>
      <return>previous value associated with the key</return>
    </javadoc>
    <method type="double" name="put" startLine="406" endLine="427">
      <declaration type="int" name="index" />
      <declaration type="double" name="previous" />
      <declaration type="boolean" name="newMapping" />
      <scope startLine="410" endLine="414" />
      <scope startLine="418" endLine="424">
        <scope startLine="420" endLine="422" />
      </scope>
    </method>
    <javadoc>
      <text>* Grow the tables.</text>
    </javadoc>
    <method type="void" name="growTable" startLine="432" endLine="459">
      <declaration type="int" name="oldLength" />
      <declaration type="int[]" name="oldKeys" />
      <declaration type="double[]" name="oldValues" />
      <declaration type="byte[]" name="oldStates" />
      <declaration type="int" name="newLength" />
      <declaration type="int[]" name="newKeys" />
      <declaration type="double[]" name="newValues" />
      <declaration type="byte[]" name="newStates" />
      <declaration type="int" name="newMask" />
      <scope startLine="444" endLine="452">
        <scope startLine="445" endLine="451">
          <declaration type="int" name="key" />
          <declaration type="int" name="index" />
        </scope>
      </scope>
    </method>
    <javadoc>
      <text>* Check if tables should grow due to increased size.</text>
      <return>true if  tables should grow</return>
    </javadoc>
    <method type="boolean" name="shouldGrowTable" startLine="465" endLine="467" />
    <javadoc>
      <text>* Compute the hash value of a key</text>
      <param>key key to hash</param>
      <return>hash value of the key</return>
    </javadoc>
    <method type="int" name="hashOf" startLine="474" endLine="477">
      <declaration type="int" name="h" />
    </method>
    <class name="Iterator" startLine="480">
      <javadoc>
        <text>* Iterator class for the map.</text>
      </javadoc>
      <javadoc>
        <text>* Reference modification count.</text>
      </javadoc>
      <declaration type="int" name="referenceCount" />
      <javadoc>
        <text>* Index of current element.</text>
      </javadoc>
      <declaration type="int" name="current" />
      <javadoc>
        <text>* Index of next element.</text>
      </javadoc>
      <declaration type="int" name="next" />
      <javadoc>
        <text>* Simple constructor.</text>
      </javadoc>
      <method type="constructor" name="Iterator" startLine="495" endLine="508">
        <scope startLine="502" endLine="504">
          <comment>NOPMD</comment>
        </scope>
        <scope startLine="504" endLine="506">
          <comment>ignored</comment>
        </scope>
        <comment>preserve the modification count of the map to detect concurrent modifications later</comment>
        <comment>initialize current index</comment>
      </method>
      <javadoc>
        <text>* Check if there is a next element in the map.</text>
        <return>true if there is a next element</return>
      </javadoc>
      <method type="boolean" name="hasNext" startLine="514" endLine="516" />
      <javadoc>
        <text>* Get the key of current entry.</text>
        <return>key of current entry</return>
        <exception>ConcurrentModificationException if the map is modified during iteration</exception>
        <exception>NoSuchElementException if there is no element left in the map</exception>
      </javadoc>
      <method type="int" name="key" startLine="525" endLine="533">
        <scope startLine="526" endLine="528" />
        <scope startLine="529" endLine="531" />
      </method>
      <javadoc>
        <text>* Get the value of current entry.</text>
        <return>value of current entry</return>
        <exception>ConcurrentModificationException if the map is modified during iteration</exception>
        <exception>NoSuchElementException if there is no element left in the map</exception>
      </javadoc>
      <method type="double" name="value" startLine="542" endLine="550">
        <scope startLine="543" endLine="545" />
        <scope startLine="546" endLine="548" />
      </method>
      <javadoc>
        <text>* Advance iterator one step further.</text>
        <exception>ConcurrentModificationException if the map is modified during iteration</exception>
        <exception>NoSuchElementException if there is no element left in the map</exception>
      </javadoc>
      <method type="void" name="advance" startLine="558" endLine="579">
        <scope startLine="560" endLine="562" />
        <scope startLine="568" endLine="572">
          <scope startLine="569" endLine="571" />
          <comment>NOPMD</comment>
          <comment>nothing to do</comment>
        </scope>
        <scope startLine="572" endLine="577">
          <scope startLine="574" endLine="576" />
        </scope>
        <comment>advance on step</comment>
        <comment>prepare next step</comment>
      </method>
      <javadoc>
        <text>* Read a serialized object.</text>
        <param>stream input stream</param>
        <throws>IOException if object cannot be read</throws>
        <throws>ClassNotFoundException if the class corresponding
 * to the serialized object cannot be found</throws>
      </javadoc>
      <method type="void" name="readObject" startLine="591" endLine="594" />
    </class>
  </class>
</source>
