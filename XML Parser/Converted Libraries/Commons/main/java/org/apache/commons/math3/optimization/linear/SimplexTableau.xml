<?xml version="1.0" encoding="UTF-8"?>
<source package="org.apache.commons.math3.optimization.linear">
  <import name="java.io.IOException" />
  <import name="java.io.ObjectInputStream" />
  <import name="java.io.ObjectOutputStream" />
  <import name="java.io.Serializable" />
  <import name="java.util.ArrayList" />
  <import name="java.util.Collection" />
  <import name="java.util.HashSet" />
  <import name="java.util.List" />
  <import name="java.util.Set" />
  <import name="java.util.TreeSet" />
  <import name="org.apache.commons.math3.linear.Array2DRowRealMatrix" />
  <import name="org.apache.commons.math3.linear.MatrixUtils" />
  <import name="org.apache.commons.math3.linear.RealMatrix" />
  <import name="org.apache.commons.math3.linear.RealVector" />
  <import name="org.apache.commons.math3.optimization.GoalType" />
  <import name="org.apache.commons.math3.optimization.PointValuePair" />
  <import name="org.apache.commons.math3.util.FastMath" />
  <import name="org.apache.commons.math3.util.Precision" />
  <class name="SimplexTableau" startLine="40">
    <implements name="Serializable" />
    <javadoc>
      <text>* A tableau for use in the Simplex method.
 * <p>
 * Example:
 * <pre>
 * W |  Z |  x1 |  x2 |  x- | s1 |  s2 |  a1 |  RHS
 * ---------------------------------------------------
 * -1    0    0     0     0     0     0     1     0   &lt;= phase 1 objective
 * 0    1   -15   -10    0     0     0     0     0   &lt;= phase 2 objective
 * 0    0    1     0     0     1     0     0     2   &lt;= constraint 1
 * 0    0    0     1     0     0     1     0     3   &lt;= constraint 2
 * 0    0    1     1     0     0     0     1     4   &lt;= constraint 3
 * </pre>
 * W: Phase 1 objective function</br>
 * Z: Phase 2 objective function</br>
 * x1 &amp; x2: Decision variables</br>
 * x-: Extra decision variable to allow for negative values</br>
 * s1 &amp; s2: Slack/Surplus variables</br>
 * a1: Artificial variable</br>
 * RHS: Right hand side</br>
 * </p></text>
      <version>$Id: SimplexTableau.java 1422230 2012-12-15 12:11:13Z erans $</version>
      <deprecated>As of 3.1 (to be removed in 4.0).</deprecated>
      <since>2.0</since>
    </javadoc>
    <javadoc>
      <text>* Column label for negative vars.</text>
    </javadoc>
    <declaration type="String" name="NEGATIVE_VAR_COLUMN_LABEL" />
    <javadoc>
      <text>* Default amount of error to accept in floating point comparisons (as ulps).</text>
    </javadoc>
    <declaration type="int" name="DEFAULT_ULPS" />
    <javadoc>
      <text>* The cut-off threshold to zero-out entries.</text>
    </javadoc>
    <declaration type="double" name="CUTOFF_THRESHOLD" />
    <javadoc>
      <text>* Serializable version identifier.</text>
    </javadoc>
    <declaration type="long" name="serialVersionUID" />
    <javadoc>
      <text>* Linear objective function.</text>
    </javadoc>
    <declaration type="LinearObjectiveFunction" name="f" />
    <javadoc>
      <text>* Linear constraints.</text>
    </javadoc>
    <declaration type="List<LinearConstraint>" name="constraints" />
    <javadoc>
      <text>* Whether to restrict the variables to non-negative values.</text>
    </javadoc>
    <declaration type="boolean" name="restrictToNonNegative" />
    <javadoc>
      <text>* The variables each column represents</text>
    </javadoc>
    <declaration type="List<String>" name="columnLabels" />
    <javadoc>
      <text>* Simple tableau.</text>
    </javadoc>
    <declaration type="RealMatrix" name="tableau" />
    <javadoc>
      <text>* Number of decision variables.</text>
    </javadoc>
    <declaration type="int" name="numDecisionVariables" />
    <javadoc>
      <text>* Number of slack variables.</text>
    </javadoc>
    <declaration type="int" name="numSlackVariables" />
    <javadoc>
      <text>* Number of artificial variables.</text>
    </javadoc>
    <declaration type="int" name="numArtificialVariables" />
    <javadoc>
      <text>* Amount of error to accept when checking for optimality.</text>
    </javadoc>
    <declaration type="double" name="epsilon" />
    <javadoc>
      <text>* Amount of error to accept in floating point comparisons.</text>
    </javadoc>
    <declaration type="int" name="maxUlps" />
    <javadoc>
      <text>* Build a tableau for a linear problem.</text>
      <param>f linear objective function</param>
      <param>constraints linear constraints</param>
      <param>goalType type of optimization goal: either {@link GoalType#MAXIMIZE} or {@link GoalType#MINIMIZE}</param>
      <param>restrictToNonNegative whether to restrict the variables to non-negative values</param>
      <param>epsilon amount of error to accept when checking for optimality</param>
    </javadoc>
    <method type="constructor" name="SimplexTableau" startLine="121" endLine="123" />
    <javadoc>
      <text>* Build a tableau for a linear problem.</text>
      <param>f linear objective function</param>
      <param>constraints linear constraints</param>
      <param>goalType type of optimization goal: either {@link GoalType#MAXIMIZE} or {@link GoalType#MINIMIZE}</param>
      <param>restrictToNonNegative whether to restrict the variables to non-negative values</param>
      <param>epsilon amount of error to accept when checking for optimality</param>
      <param>maxUlps amount of error to accept in floating point comparisons</param>
    </javadoc>
    <method type="constructor" name="SimplexTableau" startLine="138" endLine="152" />
    <javadoc>
      <text>* Initialize the labels for the columns.</text>
    </javadoc>
    <method type="void" name="initializeColumnLabels" startLine="157" endLine="175">
      <scope startLine="158" endLine="160" />
      <scope startLine="162" endLine="164" />
      <scope startLine="165" endLine="167" />
      <scope startLine="168" endLine="170" />
      <scope startLine="171" endLine="173" />
    </method>
    <javadoc>
      <text>* Create the tableau by itself.</text>
      <param>maximize if true, goal is to maximize the objective function</param>
      <return>created tableau</return>
    </javadoc>
    <method type="RealMatrix" name="createTableau" startLine="182" endLine="243">
      <declaration type="int" name="width" />
      <declaration type="int" name="height" />
      <declaration type="Array2DRowRealMatrix" name="matrix" />
      <scope startLine="191" endLine="193" />
      <declaration type="int" name="zIndex" />
      <declaration type="RealVector" name="objectiveCoefficients" />
      <scope startLine="202" endLine="205" />
      <declaration type="int" name="slackVar" />
      <declaration type="int" name="artificialVar" />
      <scope startLine="210" endLine="240">
        <declaration type="LinearConstraint" name="constraint" />
        <declaration type="int" name="row" />
        <scope startLine="218" endLine="221" />
        <scope startLine="227" endLine="229" />
        <scope startLine="229" endLine="231" />
        <scope startLine="235" endLine="239" />
        <comment>decision variable coefficients</comment>
        <comment>x-</comment>
        <comment>RHS</comment>
        <comment>slack variables</comment>
        <comment>slack</comment>
        <comment>excess</comment>
        <comment>artificial variables</comment>
      </scope>
      <comment>create a matrix of the correct size</comment>
      <comment>+ 1 is for RHS</comment>
      <comment>initialize the objective function rows</comment>
      <comment>initialize the constraint rows</comment>
    </method>
    <javadoc>
      <text>* Get new versions of the constraints which have positive right hand sides.</text>
      <param>originalConstraints original (not normalized) constraints</param>
      <return>new versions of the constraints</return>
    </javadoc>
    <method type="List<LinearConstraint>" name="normalizeConstraints" startLine="250" endLine="256">
      <declaration type="List<LinearConstraint>" name="normalized" />
      <scope startLine="252" endLine="254" />
    </method>
    <javadoc>
      <text>* Get a new equation equivalent to this one with a positive right hand side.</text>
      <param>constraint reference constraint</param>
      <return>new equation</return>
    </javadoc>
    <method type="LinearConstraint" name="normalize" startLine="263" endLine="271">
      <scope startLine="264" endLine="268" />
    </method>
    <javadoc>
      <text>* Get the number of objective functions in this tableau.</text>
      <return>2 for Phase 1.  1 for Phase 2.</return>
    </javadoc>
    <method type="int" name="getNumObjectiveFunctions" startLine="277" endLine="279" />
    <javadoc>
      <text>* Get a count of constraints corresponding to a specified relationship.</text>
      <param>relationship relationship to count</param>
      <return>number of constraint with the specified relationship</return>
    </javadoc>
    <method type="int" name="getConstraintTypeCounts" startLine="286" endLine="294">
      <declaration type="int" name="count" />
      <scope startLine="288" endLine="292">
        <scope startLine="289" endLine="291" />
      </scope>
    </method>
    <javadoc>
      <text>* Get the -1 times the sum of all coefficients in the given array.</text>
      <param>coefficients coefficients to sum</param>
      <return>the -1 times the sum of all coefficients in the given array.</return>
    </javadoc>
    <method type="double" name="getInvertedCoefficientSum" startLine="301" endLine="307">
      <declaration type="double" name="sum" />
      <scope startLine="303" endLine="305" />
    </method>
    <javadoc>
      <text>* Checks whether the given column is basic.</text>
      <param>col index of the column to check</param>
      <return>the row that the variable is basic in.  null if the column is not basic</return>
    </javadoc>
    <method type="Integer" name="getBasicRow" startLine="314" endLine="325">
      <declaration type="Integer" name="row" />
      <scope startLine="316" endLine="323">
        <declaration type="double" name="entry" />
        <scope startLine="318" endLine="320" />
        <scope startLine="320" endLine="322" />
      </scope>
    </method>
    <javadoc>
      <text>* Removes the phase 1 objective function, positive cost non-artificial variables,
 * and the non-basic artificial variables from this tableau.</text>
    </javadoc>
    <method type="void" name="dropPhase1Objective" startLine="331" endLine="373">
      <scope startLine="332" endLine="334" />
      <declaration type="Set<Integer>" name="columnsToDrop" />
      <scope startLine="340" endLine="345">
        <declaration type="double" name="entry" />
        <scope startLine="342" endLine="344" />
      </scope>
      <scope startLine="348" endLine="353">
        <declaration type="int" name="col" />
        <scope startLine="350" endLine="352" />
      </scope>
      <declaration type="double[][]" name="matrix" />
      <scope startLine="356" endLine="363">
        <declaration type="int" name="col" />
        <scope startLine="358" endLine="362">
          <scope startLine="359" endLine="361" />
        </scope>
      </scope>
      <declaration type="Integer[]" name="drop" />
      <scope startLine="367" endLine="369" />
      <comment>positive cost non-artificial variables</comment>
      <comment>non-basic artificial variables</comment>
      <comment>remove the columns in reverse order so the indices are correct</comment>
    </method>
    <javadoc>
      <param>src the source array</param>
      <param>dest the destination array</param>
    </javadoc>
    <method type="void" name="copyArray" startLine="379" endLine="381" />
    <javadoc>
      <text>* Returns whether the problem is at an optimal state.</text>
      <return>whether the model has been solved</return>
    </javadoc>
    <method type="boolean" name="isOptimal" startLine="387" endLine="395">
      <scope startLine="388" endLine="393">
        <declaration type="double" name="entry" />
        <scope startLine="390" endLine="392" />
      </scope>
    </method>
    <javadoc>
      <text>* Get the current solution.</text>
      <return>current solution</return>
    </javadoc>
    <method type="PointValuePair" name="getSolution" startLine="401" endLine="432">
      <declaration type="int" name="negativeVarColumn" />
      <declaration type="Integer" name="negativeVarBasicRow" />
      <declaration type="double" name="mostNegative" />
      <declaration type="Set<Integer>" name="basicRows" />
      <declaration type="double[]" name="coefficients" />
      <scope startLine="408" endLine="430">
        <declaration type="int" name="colIndex" />
        <scope startLine="410" endLine="413" />
        <declaration type="Integer" name="basicRow" />
        <scope startLine="415" endLine="420" />
        <scope startLine="420" endLine="424" />
        <scope startLine="424" endLine="429" />
        <comment>if the basic row is found to be the objective function row</comment>
        <comment>set the coefficient to 0 -> this case handles unconstrained</comment>
        <comment>variables that are still part of the objective function</comment>
        <comment>if multiple variables can take a given value</comment>
        <comment>then we choose the first and set the rest equal to 0</comment>
      </scope>
    </method>
    <javadoc>
      <text>* Subtracts a multiple of one row from another.
 * <p>
 * After application of this operation, the following will hold:
 * <pre>minuendRow = minuendRow - multiple * subtrahendRow</pre></text>
      <param>dividendRow index of the row</param>
      <param>divisor value of the divisor</param>
    </javadoc>
    <method type="void" name="divideRow" startLine="443" endLine="447">
      <scope startLine="444" endLine="446" />
    </method>
    <javadoc>
      <text>* Subtracts a multiple of one row from another.
 * <p>
 * After application of this operation, the following will hold:
 * <pre>minuendRow = minuendRow - multiple * subtrahendRow</pre></text>
      <param>minuendRow row index</param>
      <param>subtrahendRow row index</param>
      <param>multiple multiplication factor</param>
    </javadoc>
    <method type="void" name="subtractRow" startLine="460" endLine="469">
      <scope startLine="461" endLine="468">
        <declaration type="double" name="result" />
        <scope startLine="464" endLine="466" />
        <comment>cut-off values smaller than the CUTOFF_THRESHOLD, otherwise may lead to numerical instabilities</comment>
      </scope>
    </method>
    <javadoc>
      <text>* Get the width of the tableau.</text>
      <return>width of the tableau</return>
    </javadoc>
    <method type="int" name="getWidth" startLine="475" endLine="477" />
    <javadoc>
      <text>* Get the height of the tableau.</text>
      <return>height of the tableau</return>
    </javadoc>
    <method type="int" name="getHeight" startLine="483" endLine="485" />
    <javadoc>
      <text>* Get an entry of the tableau.</text>
      <param>row row index</param>
      <param>column column index</param>
      <return>entry at (row, column)</return>
    </javadoc>
    <method type="double" name="getEntry" startLine="493" endLine="495" />
    <javadoc>
      <text>* Set an entry of the tableau.</text>
      <param>row row index</param>
      <param>column column index</param>
      <param>value for the entry</param>
    </javadoc>
    <method type="void" name="setEntry" startLine="504" endLine="506" />
    <javadoc>
      <text>* Get the offset of the first slack variable.</text>
      <return>offset of the first slack variable</return>
    </javadoc>
    <method type="int" name="getSlackVariableOffset" startLine="512" endLine="514" />
    <javadoc>
      <text>* Get the offset of the first artificial variable.</text>
      <return>offset of the first artificial variable</return>
    </javadoc>
    <method type="int" name="getArtificialVariableOffset" startLine="520" endLine="522" />
    <javadoc>
      <text>* Get the offset of the right hand side.</text>
      <return>offset of the right hand side</return>
    </javadoc>
    <method type="int" name="getRhsOffset" startLine="528" endLine="530" />
    <javadoc>
      <text>* Get the number of decision variables.
 * <p>
 * If variables are not restricted to positive values, this will include 1 extra decision variable to represent
 * the absolute value of the most negative variable.</text>
      <return>number of decision variables</return>
      <see>#getOriginalNumDecisionVariables()</see>
    </javadoc>
    <method type="int" name="getNumDecisionVariables" startLine="541" endLine="543" />
    <javadoc>
      <text>* Get the original number of decision variables.</text>
      <return>original number of decision variables</return>
      <see>#getNumDecisionVariables()</see>
    </javadoc>
    <method type="int" name="getOriginalNumDecisionVariables" startLine="550" endLine="552" />
    <javadoc>
      <text>* Get the number of slack variables.</text>
      <return>number of slack variables</return>
    </javadoc>
    <method type="int" name="getNumSlackVariables" startLine="558" endLine="560" />
    <javadoc>
      <text>* Get the number of artificial variables.</text>
      <return>number of artificial variables</return>
    </javadoc>
    <method type="int" name="getNumArtificialVariables" startLine="566" endLine="568" />
    <javadoc>
      <text>* Get the tableau data.</text>
      <return>tableau data</return>
    </javadoc>
    <method type="double[][]" name="getData" startLine="574" endLine="576" />
    <method type="boolean" name="equals" startLine="579" endLine="598">
      <scope startLine="581" endLine="583" />
      <scope startLine="585" endLine="596">
        <declaration type="SimplexTableau" name="rhs" />
      </scope>
    </method>
    <method type="int" name="hashCode" startLine="601" endLine="611" />
    <javadoc>
      <text>* Serialize the instance.</text>
      <param>oos stream where object should be written</param>
      <throws>IOException if object cannot be written to stream</throws>
    </javadoc>
    <method type="void" name="writeObject" startLine="619" endLine="622" />
    <javadoc>
      <text>* Deserialize the instance.</text>
      <param>ois stream from which the object should be read</param>
      <throws>ClassNotFoundException if a class in the stream cannot be found</throws>
      <throws>IOException if object cannot be read from the stream</throws>
    </javadoc>
    <method type="void" name="readObject" startLine="631" endLine="634" />
  </class>
</source>
