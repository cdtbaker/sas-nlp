<?xml version="1.0" encoding="UTF-8"?>
<source package="org.apache.commons.math3.analysis.differentiation">
  <import name="org.apache.commons.math3.TestUtils" />
  <import name="org.apache.commons.math3.analysis.QuinticFunction" />
  <import name="org.apache.commons.math3.analysis.UnivariateFunction" />
  <import name="org.apache.commons.math3.analysis.UnivariateMatrixFunction" />
  <import name="org.apache.commons.math3.analysis.UnivariateVectorFunction" />
  <import name="org.apache.commons.math3.analysis.function.Gaussian" />
  <import name="org.apache.commons.math3.analysis.function.Sin" />
  <import name="org.apache.commons.math3.exception.MathInternalError" />
  <import name="org.apache.commons.math3.exception.NotPositiveException" />
  <import name="org.apache.commons.math3.exception.NumberIsTooLargeException" />
  <import name="org.apache.commons.math3.exception.NumberIsTooSmallException" />
  <import name="org.apache.commons.math3.util.FastMath" />
  <import name="org.junit.Assert" />
  <import name="org.junit.Test" />
  <class name="FiniteDifferencesDifferentiatorTest" startLine="35">
    <javadoc>
      <text>* Test for class {@link FiniteDifferencesDifferentiator}.</text>
    </javadoc>
    <method type="void" name="testWrongNumberOfPoints" startLine="41" endLine="43" />
    <method type="void" name="testWrongStepSize" startLine="46" endLine="48" />
    <method type="void" name="testSerialization" startLine="51" endLine="58">
      <declaration type="FiniteDifferencesDifferentiator" name="differentiator" />
      <declaration type="FiniteDifferencesDifferentiator" name="recovered" />
    </method>
    <method type="void" name="testConstant" startLine="61" endLine="76">
      <declaration type="FiniteDifferencesDifferentiator" name="differentiator" />
      <declaration type="UnivariateDifferentiableFunction" name="f" />
      <method type="double" name="value" startLine="66" endLine="68" />
      <scope startLine="70" endLine="75">
        <declaration type="DerivativeStructure" name="y" />
      </scope>
    </method>
    <method type="void" name="testLinear" startLine="79" endLine="94">
      <declaration type="FiniteDifferencesDifferentiator" name="differentiator" />
      <declaration type="UnivariateDifferentiableFunction" name="f" />
      <method type="double" name="value" startLine="84" endLine="86" />
      <scope startLine="88" endLine="93">
        <declaration type="DerivativeStructure" name="y" />
      </scope>
    </method>
    <method type="void" name="testGaussian" startLine="97" endLine="121">
      <declaration type="FiniteDifferencesDifferentiator" name="differentiator" />
      <declaration type="UnivariateDifferentiableFunction" name="gaussian" />
      <declaration type="UnivariateDifferentiableFunction" name="f" />
      <declaration type="double[][]" name="expectedError" />
      <declaration type="double[]" name="maxError" />
      <scope startLine="107" endLine="117">
        <declaration type="DerivativeStructure" name="dsX" />
        <declaration type="DerivativeStructure" name="yRef" />
        <declaration type="DerivativeStructure" name="y" />
        <scope startLine="112" endLine="116" />
      </scope>
      <scope startLine="118" endLine="120" />
    </method>
    <method type="void" name="testStepSizeUnstability" startLine="124" endLine="164">
      <declaration type="UnivariateDifferentiableFunction" name="quintic" />
      <declaration type="UnivariateDifferentiableFunction" name="goodStep" />
      <declaration type="UnivariateDifferentiableFunction" name="badStep" />
      <declaration type="double[]" name="maxErrorGood" />
      <declaration type="double[]" name="maxErrorBad" />
      <scope startLine="132" endLine="145">
        <declaration type="DerivativeStructure" name="dsX" />
        <declaration type="DerivativeStructure" name="yRef" />
        <declaration type="DerivativeStructure" name="yGood" />
        <declaration type="DerivativeStructure" name="yBad" />
        <scope startLine="137" endLine="144" />
      </scope>
      <declaration type="double[][]" name="expectedGood" />
      <declaration type="double[][]" name="expectedBad" />
      <scope startLine="159" endLine="162" />
      <comment>the 0.25 step size is good for finite differences in the quintic on this abscissa range for 7 points</comment>
      <comment>the errors are fair</comment>
      <comment>the 1.0e-6 step size is far too small for finite differences in the quintic on this abscissa range for 7 points</comment>
      <comment>the errors are huge!</comment>
    </method>
    <method type="void" name="testWrongOrder" startLine="167" endLine="177">
      <declaration type="UnivariateDifferentiableFunction" name="f" />
      <method type="double" name="value" startLine="170" endLine="174" />
      <comment>this exception should not be thrown because wrong order</comment>
      <comment>should be detected before function call</comment>
    </method>
    <method type="void" name="testWrongOrderVector" startLine="180" endLine="190">
      <declaration type="UnivariateDifferentiableVectorFunction[]" name="f" />
      <method type="double[]" name="value" startLine="183" endLine="187" />
      <comment>this exception should not be thrown because wrong order</comment>
      <comment>should be detected before function call</comment>
    </method>
    <method type="void" name="testWrongOrderMatrix" startLine="193" endLine="203">
      <declaration type="UnivariateDifferentiableMatrixFunction[]" name="f" />
      <method type="double[][]" name="value" startLine="196" endLine="200" />
      <comment>this exception should not be thrown because wrong order</comment>
      <comment>should be detected before function call</comment>
    </method>
    <method type="void" name="testTooLargeStep" startLine="206" endLine="208" />
    <method type="void" name="testBounds" startLine="211" endLine="263">
      <declaration type="double" name="slope" />
      <declaration type="UnivariateFunction" name="f" />
      <method type="double" name="value" startLine="215" endLine="223">
        <scope startLine="216" endLine="218" />
        <scope startLine="218" endLine="220" />
        <scope startLine="220" endLine="222" />
      </method>
      <declaration type="UnivariateDifferentiableFunction" name="missingBounds" />
      <declaration type="UnivariateDifferentiableFunction" name="properlyBounded" />
      <declaration type="DerivativeStructure" name="tLow" />
      <declaration type="DerivativeStructure" name="tHigh" />
      <scope startLine="233" endLine="238">
        <comment>here, we did not set the bounds, so the differences are evaluated out of domain</comment>
        <comment>using f(-0.05), f(0.05), f(0.15)</comment>
      </scope>
      <scope startLine="238" endLine="240" />
      <scope startLine="240" endLine="242" />
      <scope startLine="244" endLine="249">
        <comment>here, we did not set the bounds, so the differences are evaluated out of domain</comment>
        <comment>using f(0.85), f(0.95), f(1.05)</comment>
      </scope>
      <scope startLine="249" endLine="251" />
      <scope startLine="251" endLine="253" />
      <comment>here, we did set the bounds, so evaluations are done within domain</comment>
      <comment>using f(0.0), f(0.1), f(0.2)</comment>
      <comment>here, we did set the bounds, so evaluations are done within domain</comment>
      <comment>using f(0.8), f(0.9), f(1.0)</comment>
    </method>
    <method type="void" name="testBoundedSqrt" startLine="266" endLine="284">
      <declaration type="UnivariateFunctionDifferentiator" name="differentiator" />
      <declaration type="UnivariateDifferentiableFunction" name="sqrt" />
      <method type="double" name="value" startLine="271" endLine="273" />
      <declaration type="DerivativeStructure" name="t001" />
      <declaration type="DerivativeStructure" name="t01" />
      <declaration type="DerivativeStructure" name="t03" />
      <comment>we are able to compute derivative near 0, but the accuracy is much poorer there</comment>
    </method>
    <method type="void" name="testVectorFunction" startLine="287" endLine="319">
      <declaration type="FiniteDifferencesDifferentiator" name="differentiator" />
      <declaration type="UnivariateDifferentiableVectorFunction[]" name="f" />
      <method type="double[]" name="value" startLine="294" endLine="296" />
      <scope startLine="300" endLine="317">
        <declaration type="DerivativeStructure" name="dsX" />
        <declaration type="DerivativeStructure[]" name="y" />
        <declaration type="double" name="cos" />
        <declaration type="double" name="sin" />
        <declaration type="double[]" name="f1" />
        <declaration type="DerivativeStructure[]" name="f2" />
        <scope startLine="308" endLine="310" />
      </scope>
    </method>
    <method type="void" name="testMatrixFunction" startLine="322" endLine="368">
      <declaration type="FiniteDifferencesDifferentiator" name="differentiator" />
      <declaration type="UnivariateDifferentiableMatrixFunction[]" name="f" />
      <method type="double[][]" name="value" startLine="329" endLine="334" />
      <scope startLine="338" endLine="366">
        <declaration type="DerivativeStructure" name="dsX" />
        <declaration type="DerivativeStructure[][]" name="y" />
        <declaration type="double" name="cos" />
        <declaration type="double" name="sin" />
        <declaration type="double" name="cosh" />
        <declaration type="double" name="sinh" />
        <declaration type="double[][]" name="f1" />
        <declaration type="DerivativeStructure[][]" name="f2" />
        <scope startLine="348" endLine="353">
          <scope startLine="350" endLine="352" />
        </scope>
      </scope>
    </method>
    <method type="void" name="testSeveralFreeParameters" startLine="371" endLine="402">
      <declaration type="FiniteDifferencesDifferentiator" name="differentiator" />
      <declaration type="UnivariateDifferentiableFunction" name="sine" />
      <declaration type="UnivariateDifferentiableFunction" name="f" />
      <declaration type="double[][]" name="expectedError" />
      <declaration type="double[]" name="maxError" />
      <scope startLine="381" endLine="398">
        <scope startLine="382" endLine="397">
          <declaration type="DerivativeStructure" name="dsX" />
          <declaration type="DerivativeStructure" name="dsY" />
          <declaration type="DerivativeStructure" name="dsT" />
          <declaration type="DerivativeStructure" name="sRef" />
          <declaration type="DerivativeStructure" name="s" />
          <scope startLine="388" endLine="396">
            <scope startLine="389" endLine="395">
              <scope startLine="390" endLine="394" />
            </scope>
          </scope>
        </scope>
      </scope>
      <scope startLine="399" endLine="401" />
    </method>
  </class>
</source>
