<?xml version="1.0" encoding="UTF-8"?>
<source package="org.apache.commons.math3.optim.nonlinear.scalar.noderiv">
  <import name="java.util.Arrays" />
  <import name="java.util.Random" />
  <import name="org.apache.commons.math3.analysis.MultivariateFunction" />
  <import name="org.apache.commons.math3.exception.DimensionMismatchException" />
  <import name="org.apache.commons.math3.exception.TooManyEvaluationsException" />
  <import name="org.apache.commons.math3.exception.NumberIsTooLargeException" />
  <import name="org.apache.commons.math3.exception.NumberIsTooSmallException" />
  <import name="org.apache.commons.math3.optim.MaxEval" />
  <import name="org.apache.commons.math3.optim.nonlinear.scalar.ObjectiveFunction" />
  <import name="org.apache.commons.math3.optim.nonlinear.scalar.GoalType" />
  <import name="org.apache.commons.math3.optim.PointValuePair" />
  <import name="org.apache.commons.math3.optim.InitialGuess" />
  <import name="org.apache.commons.math3.optim.SimpleBounds" />
  <import name="org.junit.Assert" />
  <import name="org.junit.Ignore" />
  <import name="org.junit.Test" />
  <class name="BOBYQAOptimizerTest" startLine="36">
    <javadoc>
      <text>* Test for {@link BOBYQAOptimizer}.</text>
    </javadoc>
    <declaration type="int" name="DIM" />
    <method type="void" name="testInitOutOfBounds" startLine="44" endLine="50">
      <declaration type="double[]" name="startPoint" />
      <declaration type="double[][]" name="boundaries" />
    </method>
    <method type="void" name="testBoundariesDimensionMismatch" startLine="53" endLine="59">
      <declaration type="double[]" name="startPoint" />
      <declaration type="double[][]" name="boundaries" />
    </method>
    <method type="void" name="testProblemDimensionTooSmall" startLine="62" endLine="67">
      <declaration type="double[]" name="startPoint" />
    </method>
    <method type="void" name="testMaxEvaluations" startLine="70" endLine="77">
      <declaration type="int" name="lowMaxEval" />
      <declaration type="double[]" name="startPoint" />
      <declaration type="double[][]" name="boundaries" />
    </method>
    <method type="void" name="testRosen" startLine="80" endLine="87">
      <declaration type="double[]" name="startPoint" />
      <declaration type="double[][]" name="boundaries" />
      <declaration type="PointValuePair" name="expected" />
    </method>
    <method type="void" name="testMaximize" startLine="90" endLine="102">
      <declaration type="double[]" name="startPoint" />
      <declaration type="double[][]" name="boundaries" />
      <declaration type="PointValuePair" name="expected" />
    </method>
    <method type="void" name="testEllipse" startLine="105" endLine="113">
      <declaration type="double[]" name="startPoint" />
      <declaration type="double[][]" name="boundaries" />
      <declaration type="PointValuePair" name="expected" />
    </method>
    <method type="void" name="testElliRotated" startLine="116" endLine="124">
      <declaration type="double[]" name="startPoint" />
      <declaration type="double[][]" name="boundaries" />
      <declaration type="PointValuePair" name="expected" />
    </method>
    <method type="void" name="testCigar" startLine="127" endLine="135">
      <declaration type="double[]" name="startPoint" />
      <declaration type="double[][]" name="boundaries" />
      <declaration type="PointValuePair" name="expected" />
    </method>
    <method type="void" name="testTwoAxes" startLine="138" endLine="146">
      <declaration type="double[]" name="startPoint" />
      <declaration type="double[][]" name="boundaries" />
      <declaration type="PointValuePair" name="expected" />
    </method>
    <method type="void" name="testCigTab" startLine="149" endLine="157">
      <declaration type="double[]" name="startPoint" />
      <declaration type="double[][]" name="boundaries" />
      <declaration type="PointValuePair" name="expected" />
    </method>
    <method type="void" name="testSphere" startLine="160" endLine="168">
      <declaration type="double[]" name="startPoint" />
      <declaration type="double[][]" name="boundaries" />
      <declaration type="PointValuePair" name="expected" />
    </method>
    <method type="void" name="testTablet" startLine="171" endLine="179">
      <declaration type="double[]" name="startPoint" />
      <declaration type="double[][]" name="boundaries" />
      <declaration type="PointValuePair" name="expected" />
    </method>
    <method type="void" name="testDiffPow" startLine="182" endLine="190">
      <declaration type="double[]" name="startPoint" />
      <declaration type="double[][]" name="boundaries" />
      <declaration type="PointValuePair" name="expected" />
    </method>
    <method type="void" name="testSsDiffPow" startLine="193" endLine="201">
      <declaration type="double[]" name="startPoint" />
      <declaration type="double[][]" name="boundaries" />
      <declaration type="PointValuePair" name="expected" />
    </method>
    <method type="void" name="testAckley" startLine="204" endLine="212">
      <declaration type="double[]" name="startPoint" />
      <declaration type="double[][]" name="boundaries" />
      <declaration type="PointValuePair" name="expected" />
    </method>
    <method type="void" name="testRastrigin" startLine="215" endLine="224">
      <declaration type="double[]" name="startPoint" />
      <declaration type="double[][]" name="boundaries" />
      <declaration type="PointValuePair" name="expected" />
    </method>
    <method type="void" name="testConstrainedRosen" startLine="227" endLine="236">
      <declaration type="double[]" name="startPoint" />
      <declaration type="double[][]" name="boundaries" />
      <declaration type="PointValuePair" name="expected" />
    </method>
    <method type="void" name="testConstrainedRosenWithMoreInterpolationPoints" startLine="242" endLine="262">
      <declaration type="double[]" name="startPoint" />
      <declaration type="double[][]" name="boundaries" />
      <declaration type="PointValuePair" name="expected" />
      <declaration type="int" name="maxAdditionalPoints" />
      <scope startLine="254" endLine="261" />
      <comment>This should have been 78 because in the code the hard limit is</comment>
      <comment>said to be</comment>
      <comment>((DIM + 1) * (DIM + 2)) / 2 - (2 * DIM + 1)</comment>
      <comment>i.e. 78 in this case, but the test fails for 48, 59, 62, 63, 64,</comment>
      <comment>65, 66, ...</comment>
    </method>
    <javadoc>
      <param>func Function to optimize.</param>
      <param>startPoint Starting point.</param>
      <param>boundaries Upper / lower point limit.</param>
      <param>goal Minimization or maximization.</param>
      <param>fTol Tolerance relative error on the objective function.</param>
      <param>pointTol Tolerance for checking that the optimum is correct.</param>
      <param>maxEvaluations Maximum number of evaluations.</param>
      <param>expected Expected point / value.</param>
    </javadoc>
    <method type="void" name="doTest" startLine="281" endLine="292" />
    <javadoc>
      <param>func Function to optimize.</param>
      <param>startPoint Starting point.</param>
      <param>boundaries Upper / lower point limit.</param>
      <param>goal Minimization or maximization.</param>
      <param>fTol Tolerance relative error on the objective function.</param>
      <param>pointTol Tolerance for checking that the optimum is correct.</param>
      <param>maxEvaluations Maximum number of evaluations.</param>
      <param>additionalInterpolationPoints Number of interpolation to used
 * in addition to the default (2 * dim + 1).</param>
      <param>expected Expected point / value.</param>
    </javadoc>
    <method type="void" name="doTest" startLine="315" endLine="345">
      <declaration type="int" name="dim" />
      <declaration type="int" name="numIterpolationPoints" />
      <declaration type="BOBYQAOptimizer" name="optim" />
      <declaration type="PointValuePair" name="result" />
      <scope startLine="339" endLine="342" />
      <comment>System.out.println(func.getClass().getName() + " BEGIN");  XXX</comment>
      <comment>System.out.println(func.getClass().getName() + " = "</comment>
      <comment>+ optim.getEvaluations() + " f(");</comment>
      <comment>for (double x: result.getPoint())  System.out.print(x + " ");</comment>
      <comment>System.out.println(") = " +  result.getValue());</comment>
      <comment>System.out.println(func.getClass().getName() + " END");  XXX</comment>
    </method>
    <method type="double[]" name="point" startLine="347" endLine="351">
      <declaration type="double[]" name="ds" />
    </method>
    <method type="double[][]" name="boundaries" startLine="354" endLine="361">
      <declaration type="double[][]" name="boundaries" />
    </method>
    <class name="Sphere" startLine="363">
      <implements name="MultivariateFunction" />
      <method type="double" name="value" startLine="365" endLine="370">
        <declaration type="double" name="f" />
      </method>
      <class name="Cigar" startLine="373">
        <implements name="MultivariateFunction" />
        <declaration type="double" name="factor" />
        <method type="constructor" name="Cigar" startLine="376" endLine="378" />
        <method type="constructor" name="Cigar" startLine="380" endLine="382" />
        <method type="double" name="value" startLine="384" endLine="389">
          <declaration type="double" name="f" />
        </method>
        <class name="Tablet" startLine="392">
          <implements name="MultivariateFunction" />
          <declaration type="double" name="factor" />
          <method type="constructor" name="Tablet" startLine="395" endLine="397" />
          <method type="constructor" name="Tablet" startLine="399" endLine="401" />
          <method type="double" name="value" startLine="403" endLine="408">
            <declaration type="double" name="f" />
          </method>
          <class name="CigTab" startLine="411">
            <implements name="MultivariateFunction" />
            <declaration type="double" name="factor" />
            <method type="constructor" name="CigTab" startLine="414" endLine="416" />
            <method type="constructor" name="CigTab" startLine="418" endLine="420" />
            <method type="double" name="value" startLine="422" endLine="428">
              <declaration type="int" name="end" />
              <declaration type="double" name="f" />
            </method>
            <class name="TwoAxes" startLine="431">
              <implements name="MultivariateFunction" />
              <declaration type="double" name="factor" />
              <method type="constructor" name="TwoAxes" startLine="435" endLine="437" />
              <method type="constructor" name="TwoAxes" startLine="439" endLine="441" />
              <method type="double" name="value" startLine="443" endLine="448">
                <declaration type="double" name="f" />
              </method>
              <class name="ElliRotated" startLine="451">
                <implements name="MultivariateFunction" />
                <declaration type="Basis" name="B" />
                <declaration type="double" name="factor" />
                <method type="constructor" name="ElliRotated" startLine="455" endLine="457" />
                <method type="constructor" name="ElliRotated" startLine="459" endLine="461" />
                <method type="double" name="value" startLine="463" endLine="469">
                  <declaration type="double" name="f" />
                </method>
                <class name="Elli" startLine="472">
                  <implements name="MultivariateFunction" />
                  <declaration type="double" name="factor" />
                  <method type="constructor" name="Elli" startLine="476" endLine="478" />
                  <method type="constructor" name="Elli" startLine="480" endLine="482" />
                  <method type="double" name="value" startLine="484" endLine="489">
                    <declaration type="double" name="f" />
                  </method>
                  <class name="MinusElli" startLine="492">
                    <implements name="MultivariateFunction" />
                    <declaration type="Elli" name="elli" />
                    <method type="double" name="value" startLine="494" endLine="496" />
                    <class name="DiffPow" startLine="499">
                      <implements name="MultivariateFunction" />
                      <method type="double" name="value" startLine="501" endLine="511">
                        <declaration type="double" name="f" />
                        <comment>System.out.print("" + (fcount++) + ") ");</comment>
                        <comment>for (int i = 0; i < x.length; i++)</comment>
                        <comment>System.out.print(x[i] +  " ");</comment>
                        <comment>System.out.println(" = " + f);</comment>
                      </method>
                      <class name="SsDiffPow" startLine="514">
                        <implements name="MultivariateFunction" />
                        <method type="double" name="value" startLine="516" endLine="519">
                          <declaration type="double" name="f" />
                        </method>
                        <class name="Rosen" startLine="522">
                          <implements name="MultivariateFunction" />
                          <method type="double" name="value" startLine="524" endLine="530">
                            <declaration type="double" name="f" />
                          </method>
                          <class name="Ackley" startLine="533">
                            <implements name="MultivariateFunction" />
                            <declaration type="double" name="axisratio" />
                            <method type="constructor" name="Ackley" startLine="536" endLine="538" />
                            <method type="constructor" name="Ackley" startLine="540" endLine="542" />
                            <method type="double" name="value" startLine="544" endLine="556">
                              <declaration type="double" name="f" />
                              <declaration type="double" name="res2" />
                              <declaration type="double" name="fac" />
                              <scope startLine="548" endLine="552" />
                            </method>
                            <class name="Rastrigin" startLine="559">
                              <implements name="MultivariateFunction" />
                              <declaration type="double" name="axisratio" />
                              <declaration type="double" name="amplitude" />
                              <method type="constructor" name="Rastrigin" startLine="564" endLine="566" />
                              <method type="constructor" name="Rastrigin" startLine="568" endLine="571" />
                              <method type="double" name="value" startLine="573" endLine="584">
                                <declaration type="double" name="f" />
                                <declaration type="double" name="fac" />
                                <scope startLine="576" endLine="582" />
                              </method>
                              <class name="Basis" startLine="587">
                                <declaration type="double[][]" name="basis" />
                                <declaration type="Random" name="rand" />
                                <method type="double[]" name="Rotate" startLine="591" endLine="600">
                                  <declaration type="double[]" name="y" />
                                  <scope startLine="594" endLine="598" />
                                </method>
                                <method type="void" name="GenBasis" startLine="602" endLine="628">
                                  <declaration type="double" name="sp" />
                                  <declaration type="int" name="i" />
                                  <scope startLine="611" endLine="627">
                                    <scope startLine="616" endLine="621" />
                                    <comment>sample components gaussian</comment>
                                    <comment>substract projection of previous vectors</comment>
                                    <comment>sp += basis[i][k]  basis[j][k];  scalar product</comment>
                                    <comment>basis[i][k] -= sp  basis[j][k];  substract</comment>
                                    <comment>normalize</comment>
                                    <comment>sp += basis[i][k]  basis[i][k];  squared norm</comment>
                                  </scope>
                                  <comment>generate orthogonal basis</comment>
                                </method>
                              </class>
                            </class>
                          </class>
                        </class>
                      </class>
                    </class>
                  </class>
                </class>
              </class>
            </class>
          </class>
        </class>
      </class>
    </class>
    <comment>See MATH-728</comment>
    <comment>TODO: this test is temporarily disabled for 3.2 release as a bug in Cobertura</comment>
    <comment>makes it run for several hours before completing</comment>
    <comment>private int fcount = 0;</comment>
    <comment>use not always the same basis</comment>
  </class>
</source>
