<?xml version="1.0" encoding="UTF-8"?>
<source package="org.apache.commons.math3.ode.nonstiff">
  <import name="org.apache.commons.math3.exception.DimensionMismatchException" />
  <import name="org.apache.commons.math3.exception.MaxCountExceededException" />
  <import name="org.apache.commons.math3.exception.NoBracketingException" />
  <import name="org.apache.commons.math3.exception.NumberIsTooSmallException" />
  <import name="org.apache.commons.math3.ode.FirstOrderDifferentialEquations" />
  <import name="org.apache.commons.math3.ode.FirstOrderIntegrator" />
  <import name="org.apache.commons.math3.ode.TestProblem1" />
  <import name="org.apache.commons.math3.ode.TestProblem3" />
  <import name="org.apache.commons.math3.ode.TestProblem4" />
  <import name="org.apache.commons.math3.ode.TestProblem5" />
  <import name="org.apache.commons.math3.ode.TestProblemHandler" />
  <import name="org.apache.commons.math3.ode.events.EventHandler" />
  <import name="org.apache.commons.math3.ode.sampling.StepHandler" />
  <import name="org.apache.commons.math3.ode.sampling.StepInterpolator" />
  <import name="org.apache.commons.math3.util.FastMath" />
  <import name="org.junit.Assert" />
  <import name="org.junit.Test" />
  <class name="DormandPrince853IntegratorTest" startLine="39">
    <method type="void" name="testMissedEndEvent" startLine="44" endLine="101">
      <declaration type="double" name="t0" />
      <declaration type="double" name="tEvent" />
      <declaration type="double[]" name="k" />
      <declaration type="FirstOrderDifferentialEquations[]" name="ode" />
      <method type="int" name="getDimension" startLine="50" endLine="52" />
      <method type="void" name="computeDerivatives" startLine="54" endLine="58">
        <scope startLine="55" endLine="57" />
      </method>
      <declaration type="DormandPrince853Integrator" name="integrator" />
      <declaration type="double[]" name="y0" />
      <scope startLine="65" endLine="67" />
      <declaration type="double[]" name="y" />
      <declaration type="double" name="finalT" />
      <scope startLine="73" endLine="75" />
      <method type="void" name="init" startLine="80" endLine="81" />
      <method type="void" name="resetState" startLine="83" endLine="84" />
      <method type="double" name="g" startLine="86" endLine="88" />
      <method type="Action" name="eventOccurred" startLine="90" endLine="93" />
      <scope startLine="97" endLine="99" />
    </method>
    <method type="void" name="testDimensionCheck" startLine="106" endLine="114">
      <declaration type="TestProblem1" name="pb" />
      <declaration type="DormandPrince853Integrator" name="integrator" />
    </method>
    <method type="void" name="testNullIntervalCheck" startLine="119" endLine="127">
      <declaration type="TestProblem1" name="pb" />
      <declaration type="DormandPrince853Integrator" name="integrator" />
    </method>
    <method type="void" name="testMinStep" startLine="132" endLine="150">
      <declaration type="TestProblem1" name="pb" />
      <declaration type="double" name="minStep" />
      <declaration type="double" name="maxStep" />
      <declaration type="double[]" name="vecAbsoluteTolerance" />
      <declaration type="double[]" name="vecRelativeTolerance" />
      <declaration type="FirstOrderIntegrator" name="integ" />
      <declaration type="TestProblemHandler" name="handler" />
    </method>
    <method type="void" name="testIncreasingTolerance" startLine="155" endLine="188">
      <declaration type="int" name="previousCalls" />
      <declaration type="AdaptiveStepsizeIntegrator" name="integ" />
      <scope startLine="161" endLine="186">
        <declaration type="TestProblem1" name="pb" />
        <declaration type="double" name="minStep" />
        <declaration type="double" name="maxStep" />
        <declaration type="double" name="scalAbsoluteTolerance" />
        <declaration type="double" name="scalRelativeTolerance" />
        <declaration type="TestProblemHandler" name="handler" />
        <declaration type="int" name="calls" />
        <comment>the 1.3 factor is only valid for this test</comment>
        <comment>and has been obtained from trial and error</comment>
        <comment>there is no general relation between local and global errors</comment>
      </scope>
    </method>
    <method type="void" name="testTooLargeFirstStep" startLine="193" endLine="216">
      <declaration type="AdaptiveStepsizeIntegrator" name="integ" />
      <declaration type="double" name="start" />
      <declaration type="double" name="end" />
      <declaration type="FirstOrderDifferentialEquations[]" name="equations" />
      <method type="int" name="getDimension" startLine="201" endLine="203" />
      <method type="void" name="computeDerivatives" startLine="205" endLine="209" />
    </method>
    <method type="void" name="testBackward" startLine="221" endLine="241">
      <declaration type="TestProblem5" name="pb" />
      <declaration type="double" name="minStep" />
      <declaration type="double" name="maxStep" />
      <declaration type="double" name="scalAbsoluteTolerance" />
      <declaration type="double" name="scalRelativeTolerance" />
      <declaration type="FirstOrderIntegrator" name="integ" />
      <declaration type="TestProblemHandler" name="handler" />
    </method>
    <method type="void" name="testEvents" startLine="246" endLine="275">
      <declaration type="TestProblem4" name="pb" />
      <declaration type="double" name="minStep" />
      <declaration type="double" name="maxStep" />
      <declaration type="double" name="scalAbsoluteTolerance" />
      <declaration type="double" name="scalRelativeTolerance" />
      <declaration type="FirstOrderIntegrator" name="integ" />
      <declaration type="TestProblemHandler" name="handler" />
      <declaration type="EventHandler[]" name="functions" />
      <declaration type="double" name="convergence" />
      <scope startLine="261" endLine="263" />
    </method>
    <method type="void" name="testKepler" startLine="280" endLine="299">
      <declaration type="TestProblem3" name="pb" />
      <declaration type="double" name="minStep" />
      <declaration type="double" name="maxStep" />
      <declaration type="double" name="scalAbsoluteTolerance" />
      <declaration type="double" name="scalRelativeTolerance" />
      <declaration type="FirstOrderIntegrator" name="integ" />
    </method>
    <method type="void" name="testVariableSteps" startLine="304" endLine="321">
      <declaration type="TestProblem3" name="pb" />
      <declaration type="double" name="minStep" />
      <declaration type="double" name="maxStep" />
      <declaration type="double" name="scalAbsoluteTolerance" />
      <declaration type="double" name="scalRelativeTolerance" />
      <declaration type="FirstOrderIntegrator" name="integ" />
      <declaration type="double" name="stopTime" />
    </method>
    <method type="void" name="testUnstableDerivative" startLine="326" endLine="334">
      <declaration type="StepProblem" name="stepProblem" />
      <declaration type="FirstOrderIntegrator" name="integ" />
      <declaration type="double[]" name="y" />
    </method>
    <method type="void" name="testEventsScheduling" startLine="337" endLine="367">
      <declaration type="FirstOrderDifferentialEquations[]" name="sincos" />
      <method type="int" name="getDimension" startLine="341" endLine="343" />
      <method type="void" name="computeDerivatives" startLine="345" endLine="348" />
      <declaration type="SchedulingChecker" name="sinChecker" />
      <declaration type="SchedulingChecker" name="cosChecker" />
      <declaration type="FirstOrderIntegrator" name="integ" />
      <declaration type="double" name="t0" />
      <declaration type="double[][]" name="y0" />
      <declaration type="double" name="t" />
      <declaration type="double[]" name="y" />
      <comment>events at 0, PI, 2PI ...</comment>
      <comment>events at PI/2, 3PI/2, 5PI/2 ...</comment>
    </method>
    <class name="SchedulingChecker" startLine="369">
      <implements name="StepHandler" />
      <implements name="EventHandler" />
      <declaration type="int" name="index" />
      <declaration type="double" name="tMin" />
      <method type="constructor" name="SchedulingChecker" startLine="374" endLine="376" />
      <method type="void" name="init" startLine="378" endLine="380" />
      <method type="void" name="handleStep" startLine="382" endLine="384" />
      <method type="double" name="g" startLine="386" endLine="391">
        <comment>once a step has been handled by handleStep,</comment>
        <comment>events checking should only refer to dates after the step</comment>
      </method>
      <method type="Action" name="eventOccurred" startLine="393" endLine="395" />
      <method type="void" name="resetState" startLine="397" endLine="399">
        <comment>in fact, we don't need to reset anything for the test</comment>
      </method>
      <class name="KeplerHandler" startLine="403">
        <implements name="StepHandler" />
        <method type="constructor" name="KeplerHandler" startLine="404" endLine="406" />
        <method type="void" name="init" startLine="407" endLine="410" />
        <method type="void" name="handleStep" startLine="412" endLine="435">
          <scope startLine="415" endLine="430">
            <declaration type="double" name="prev" />
            <declaration type="double" name="curr" />
            <declaration type="double" name="interp" />
            <declaration type="double[]" name="interpolatedY" />
            <declaration type="double[]" name="theoreticalY" />
            <declaration type="double" name="dx" />
            <declaration type="double" name="dy" />
            <declaration type="double" name="error" />
            <scope startLine="427" endLine="429" />
          </scope>
          <scope startLine="431" endLine="434" />
        </method>
        <declaration type="int" name="nbSteps" />
        <declaration type="double" name="maxError" />
        <declaration type="TestProblem3" name="pb" />
        <class name="VariableHandler" startLine="441">
          <implements name="StepHandler" />
          <method type="constructor" name="VariableHandler" startLine="442" endLine="446" />
          <method type="void" name="init" startLine="447" endLine="451" />
          <method type="void" name="handleStep" startLine="453" endLine="474">
            <declaration type="double" name="step" />
            <scope startLine="457" endLine="461" />
            <scope startLine="461" endLine="468">
              <scope startLine="462" endLine="464" />
              <scope startLine="465" endLine="467" />
            </scope>
            <scope startLine="470" endLine="473" />
          </method>
          <declaration type="boolean" name="firstTime" />
          <declaration type="double" name="minStep" />
          <declaration type="double" name="maxStep" />
        </class>
      </class>
    </class>
  </class>
</source>
