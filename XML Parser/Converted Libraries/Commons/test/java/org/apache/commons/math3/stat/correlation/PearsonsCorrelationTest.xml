<?xml version="1.0" encoding="UTF-8"?>
<source package="org.apache.commons.math3.stat.correlation">
  <import name="org.apache.commons.math3.TestUtils" />
  <import name="org.apache.commons.math3.distribution.TDistribution" />
  <import name="org.apache.commons.math3.linear.RealMatrix" />
  <import name="org.apache.commons.math3.linear.BlockRealMatrix" />
  <import name="org.apache.commons.math3.util.FastMath" />
  <import name="org.junit.Assert" />
  <import name="org.junit.Test" />
  <class name="PearsonsCorrelationTest" startLine="28">
    <declaration type="double[]" name="longleyData" />
    <declaration type="double[]" name="swissData" />
    <javadoc>
      <text>* Test Longley dataset against R.</text>
    </javadoc>
    <method type="void" name="testLongly" startLine="104" endLine="137">
      <declaration type="RealMatrix" name="matrix" />
      <declaration type="PearsonsCorrelation" name="corrInstance" />
      <declaration type="RealMatrix" name="correlationMatrix" />
      <declaration type="double[][]" name="rData" />
      <declaration type="double[][]" name="rPvalues" />
      <declaration type="RealMatrix" name="rPMatrix" />
    </method>
    <javadoc>
      <text>* Test R Swiss fertility dataset against R.</text>
    </javadoc>
    <method type="void" name="testSwissFertility" startLine="143" endLine="165">
      <declaration type="RealMatrix" name="matrix" />
      <declaration type="PearsonsCorrelation" name="corrInstance" />
      <declaration type="RealMatrix" name="correlationMatrix" />
      <declaration type="double[][]" name="rData" />
      <declaration type="double[][]" name="rPvalues" />
      <declaration type="RealMatrix" name="rPMatrix" />
    </method>
    <javadoc>
      <text>* Test p-value near 0. JIRA: MATH-371</text>
    </javadoc>
    <method type="void" name="testPValueNearZero" startLine="171" endLine="186">
      <declaration type="int" name="dimension" />
      <declaration type="double[][]" name="data" />
      <scope startLine="180" endLine="183" />
      <declaration type="PearsonsCorrelation" name="corrInstance" />
      <comment>Create a dataset that has r -> 1, p -> 0 as dimension increases.
 Prior to the fix for MATH-371, p vanished for dimension >= 14.
 Post fix, p-values diminish smoothly, vanishing at dimension = 127.
 Tested value is ~1E-303.</comment>
    </method>
    <javadoc>
      <text>* Constant column</text>
    </javadoc>
    <method type="void" name="testConstant" startLine="193" endLine="197">
      <declaration type="double[][]" name="noVariance" />
      <declaration type="double[][]" name="values" />
    </method>
    <javadoc>
      <text>* Insufficient data</text>
    </javadoc>
    <method type="void" name="testInsufficientData" startLine="205" endLine="221">
      <declaration type="double[][]" name="one" />
      <declaration type="double[][]" name="two" />
      <scope startLine="208" endLine="211" />
      <scope startLine="211" endLine="213">
        <comment>Expected</comment>
      </scope>
      <declaration type="RealMatrix[]" name="matrix" />
      <scope startLine="215" endLine="218" />
      <scope startLine="218" endLine="220">
        <comment>Expected</comment>
      </scope>
    </method>
    <javadoc>
      <text>* Verify that direct t-tests using standard error estimates are consistent
 * with reported p-values</text>
    </javadoc>
    <method type="void" name="testStdErrorConsistency" startLine="228" endLine="242">
      <declaration type="TDistribution" name="tDistribution" />
      <declaration type="RealMatrix" name="matrix" />
      <declaration type="PearsonsCorrelation" name="corrInstance" />
      <declaration type="RealMatrix" name="rValues" />
      <declaration type="RealMatrix" name="pValues" />
      <declaration type="RealMatrix" name="stdErrors" />
      <scope startLine="235" endLine="241">
        <scope startLine="236" endLine="240">
          <declaration type="double" name="t" />
          <declaration type="double" name="p" />
        </scope>
      </scope>
    </method>
    <javadoc>
      <text>* Verify that creating correlation from covariance gives same results as
 * direct computation from the original matrix</text>
    </javadoc>
    <method type="void" name="testCovarianceConsistency" startLine="249" endLine="269">
      <declaration type="RealMatrix" name="matrix" />
      <declaration type="PearsonsCorrelation" name="corrInstance" />
      <declaration type="Covariance" name="covInstance" />
      <declaration type="PearsonsCorrelation" name="corrFromCovInstance" />
      <declaration type="PearsonsCorrelation" name="corrFromCovInstance2" />
    </method>
    <method type="void" name="testConsistency" startLine="273" endLine="283">
      <declaration type="RealMatrix" name="matrix" />
      <declaration type="PearsonsCorrelation" name="corrInstance" />
      <declaration type="double[][]" name="data" />
      <declaration type="double[]" name="x" />
      <declaration type="double[]" name="y" />
    </method>
    <method type="RealMatrix" name="createRealMatrix" startLine="285" endLine="293">
      <declaration type="double[][]" name="matrixData" />
      <declaration type="int" name="ptr" />
      <scope startLine="288" endLine="291" />
    </method>
    <method type="RealMatrix" name="createLowerTriangularRealMatrix" startLine="295" endLine="305">
      <declaration type="int" name="ptr" />
      <declaration type="RealMatrix" name="result" />
      <scope startLine="298" endLine="303">
        <scope startLine="299" endLine="302" />
      </scope>
    </method>
    <method type="void" name="fillUpper" startLine="307" endLine="315">
      <declaration type="int" name="dimension" />
      <scope startLine="309" endLine="314">
        <scope startLine="311" endLine="313" />
      </scope>
    </method>
  </class>
</source>
