<?xml version="1.0" encoding="UTF-8"?>
    <source package="org.apache.commons.math3.optim.nonlinear.scalar">
        <import package="org.apache.commons.math3.analysis.MultivariateFunction"/>
        <import package="org.apache.commons.math3.analysis.MultivariateVectorFunction"/>
        <import package="org.apache.commons.math3.exception.DimensionMismatchException"/>
        <import package="org.apache.commons.math3.linear.RealMatrix"/>
        <class name="LeastSquaresConverter" line="25">
            <implements interface="MultivariateFunction"/>
            <javadoc line="25">
                This class converts{@link MultivariateVectorFunction vectorial objective functions} to{@link MultivariateFunction scalar objective functions}when the goal is to minimize them.
                  &lt;br/&gt;
                  This class is mostly used when the vectorial objective function represents
                  a theoretical result computed from a point set applied to a model and
                  the models point must be adjusted to fit the theoretical result to some
                  reference observations. The observations may be obtained for example from
                  physical measurements whether the model is built from theoretical
                  considerations.
                  &lt;br/&gt;
                  This class computes a possibly weighted squared sum of the residuals, which is
                  a scalar value. The residuals are the difference between the theoretical model
                  (i.e. the output of the vectorial objective function) and the observations. The
                  class implements the {@link MultivariateFunction} interface and can therefore be
                  minimized by any optimizer supporting scalar objectives functions.This is one way
                  to perform a least square estimation. There are other ways to do this without using
                  this converter, as some optimization algorithms directly support vectorial objective
                  functions.
                  &lt;br/&gt;
                  This class support combination of residuals with or without weights and correlations.                
                <@see>
                    e MultivariateFunction                    
                </@see>
                <@see>
                    e MultivariateVectorFunction                    
                </@see>
                <@version>
                    n $Id: LeastSquaresConverter.java 1435539 2013-01-19 13:27:24Z tn $                    
                </@version>
                <@since>
                    e 2.0                    
                </@since>
            </javadoc>
            <declaration name="function" type="MultivariateVectorFunction" line="56"/>
            <javadoc line="56">
                Underlying vectorial function.                
            </javadoc>
            <declaration name="observations" type="double[]" line="58"/>
            <javadoc line="58">
                Observations to be compared to objective function to compute residuals.                
            </javadoc>
            <declaration name="weights" type="double[]" line="60"/>
            <javadoc line="60">
                Optional weights for the residuals.                
            </javadoc>
            <declaration name="scale" type="RealMatrix" line="62"/>
            <javadoc line="62">
                Optional scaling matrix (weight and correlations) for the residuals.                
            </javadoc>
            <javadoc line="65">
                Builds a simple converter for uncorrelated residuals with identical
                  weights.                
                <@param>
                    m function vectorial residuals function to wrap                    
                </@param>
                <@param>
                    m observations observations to be compared to objective function to compute residuals                    
                </@param>
            </javadoc>
            <method name="LeastSquaresConverter" type="constructor" line="73">
                <params>
                    <param name="function" type="MultivariateVectorFunction"/>
                    <param name="observations" type="double[]"/>
                </params>
            </method>
            <javadoc line="80">
                Builds a simple converter for uncorrelated residuals with the
                  specified weights.
                  &lt;p&gt;
                  The scalar objective function value is computed as:
                  &lt;pre&gt;
                  objective = &amp;sum;weight&lt;sub&gt;i&lt;/sub&gt;(observation&lt;sub&gt;i&lt;/sub&gt;-objective&lt;sub&gt;i&lt;/sub&gt;)&lt;sup&gt;2&lt;/sup&gt;
                  &lt;/pre&gt;
                  &lt;/p&gt;
                  &lt;p&gt;
                  Weights can be used for example to combine residuals with different standard
                  deviations. As an example, consider a residuals array in which even elements
                  are angular measurements in degrees with a 0.01&amp;deg; standard deviation and
                  odd elements are distance measurements in meters with a 15m standard deviation.
                  In this case, the weights array should be initialized with value
                  1.0/(0.01&lt;sup&gt;2&lt;/sup&gt;) in the even elements and 1.0/(15.0&lt;sup&gt;2&lt;/sup&gt;) in the
                  odd elements (i.e. reciprocals of variances).
                  &lt;/p&gt;
                  &lt;p&gt;
                  The array computed by the objective function, the observations array and the
                  weights array must have consistent sizes or a {@link DimensionMismatchException}will be triggered while computing the scalar objective.
                  &lt;/p&gt;                
                <@param>
                    m function vectorial residuals function to wrap                    
                </@param>
                <@param>
                    m observations observations to be compared to objective function to compute residuals                    
                </@param>
                <@param>
                    m weights weights to apply to the residuals                    
                </@param>
                <@throws>
                    s DimensionMismatchException if the observations vector and the weights
                      vector dimensions do not match (objective function dimension is checked only when
                      the {@link #value(double[])} method is called)                    
                </@throws>
            </javadoc>
            <method name="LeastSquaresConverter" type="constructor" line="113">
                <params>
                    <param name="function" type="MultivariateVectorFunction"/>
                    <param name="observations" type="double[]"/>
                    <param name="weights" type="double[]"/>
                </params>
                <scope line="114"/>
            </method>
            <javadoc line="123">
                Builds a simple converter for correlated residuals with the
                  specified weights.
                  &lt;p&gt;
                  The scalar objective function value is computed as:
                  &lt;pre&gt;
                  objective = y&lt;sup&gt;T&lt;/sup&gt;y with y = scale&amp;times;(observation-objective)
                  &lt;/pre&gt;
                  &lt;/p&gt;
                  &lt;p&gt;
                  The array computed by the objective function, the observations array and the
                  the scaling matrix must have consistent sizes or a {@link DimensionMismatchException}will be triggered while computing the scalar objective.
                  &lt;/p&gt;                
                <@param>
                    m function vectorial residuals function to wrap                    
                </@param>
                <@param>
                    m observations observations to be compared to objective function to compute residuals                    
                </@param>
                <@param>
                    m scale scaling matrix                    
                </@param>
                <@throws>
                    s DimensionMismatchException if the observations vector and the scale
                      matrix dimensions do not match (objective function dimension is checked only when
                      the {@link #value(double[])} method is called)                    
                </@throws>
            </javadoc>
            <method name="LeastSquaresConverter" type="constructor" line="147">
                <params>
                    <param name="function" type="MultivariateVectorFunction"/>
                    <param name="observations" type="double[]"/>
                    <param name="scale" type="RealMatrix"/>
                </params>
                <scope line="148"/>
            </method>
            <javadoc line="157">
                {@inheritDoc}                
            </javadoc>
            <method name="value" type="double" line="158">
                <params>
                    <param name="point" type="double[]"/>
                </params>
                <comment line="159">
                    compute residuals                    
                </comment>
                <comment line="159">
                    compute sum of squares                    
                </comment>
                <declaration name="residuals" type="double[]" line="160"/>
                <scope line="161"/>
                <scope line="164"/>
                <declaration name="sumSquares" type="double" line="169"/>
                <scope line="170">
                    <scope line="171">
                        <declaration name="ri" type="double" line="172"/>
                    </scope>
                </scope>
                <scope line="175">
                    <scope line="176"/>
                </scope>
                <scope line="179">
                    <scope line="180"/>
                </scope>
            </method>
        </class>
    </source>