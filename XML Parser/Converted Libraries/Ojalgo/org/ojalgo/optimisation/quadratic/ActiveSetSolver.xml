<?xml version="1.0" encoding="UTF-8"?>
<source package="org.ojalgo.optimisation.quadratic">
  <import name="static org.ojalgo.constant.PrimitiveMath.*" />
  <import name="java.util.HashSet" />
  <import name="org.ojalgo.matrix.store.AboveBelowStore" />
  <import name="org.ojalgo.matrix.store.MatrixStore" />
  <import name="org.ojalgo.matrix.store.RowsStore" />
  <import name="org.ojalgo.optimisation.ExpressionsBasedModel" />
  <import name="org.ojalgo.optimisation.ModelEntity" />
  <import name="org.ojalgo.optimisation.Optimisation" />
  <import name="org.ojalgo.type.IndexSelector" />
  <class name="ActiveSetSolver" extends="QuadraticSolver" startLine="36">
    <javadoc>
      <author>apete</author>
    </javadoc>
    <declaration type="IndexSelector" name="myActivator" />
    <method type="constructor" name="ActiveSetSolver" startLine="43" endLine="60">
      <scope startLine="47" endLine="49" />
      <scope startLine="49" endLine="51" />
      <declaration type="int" name="tmpIterationsLimit" />
      <comment>BasicLogger.logDebug("AS solver innequalities: " + this.countInequalityConstraints());</comment>
    </method>
    <method type="QuadraticSolver" name="buildIterationSolver" startLine="62" endLine="94">
      <declaration type="MatrixStore<Double>" name="tmpSubAE" />
      <declaration type="MatrixStore<Double>" name="tmpSubBE" />
      <declaration type="MatrixStore<Double>" name="tmpSubQ" />
      <declaration type="MatrixStore<Double>" name="tmpSubC" />
      <declaration type="int[]" name="tmpActivator" />
      <scope startLine="71" endLine="79">
        <scope startLine="72" endLine="75" />
        <scope startLine="75" endLine="78" />
      </scope>
      <scope startLine="79" endLine="87">
        <scope startLine="80" endLine="83" />
        <scope startLine="83" endLine="86" />
      </scope>
      <declaration type="Builder" name="retVal" />
      <scope startLine="90" endLine="92" />
    </method>
    <javadoc>
      <text>* Find the minimum (largest negative) lagrange multiplier - for the active inequalities - to potentially
 * deactivate.</text>
    </javadoc>
    <method type="int" name="suggestConstraintToExclude" startLine="100" endLine="150">
      <declaration type="int" name="retVal" />
      <declaration type="int[]" name="tmpIncluded" />
      <declaration type="int" name="tmpLastIncluded" />
      <declaration type="int" name="tmpIndexOfLast" />
      <declaration type="double" name="tmpMin" />
      <declaration type="double" name="tmpVal" />
      <declaration type="MatrixStore<Double>" name="tmpLI" />
      <scope startLine="113" endLine="115" />
      <scope startLine="117" endLine="134">
        <scope startLine="118" endLine="130">
          <scope startLine="122" endLine="128">
            <scope startLine="125" endLine="127" />
          </scope>
        </scope>
        <scope startLine="130" endLine="133" />
      </scope>
      <scope startLine="136" endLine="147">
        <scope startLine="140" endLine="146">
          <scope startLine="143" endLine="145" />
        </scope>
      </scope>
    </method>
    <javadoc>
      <text>* Find minimum (largest negative) slack - for the inactive inequalities - to potentially activate. Negative slack
 * means the constraint is violated. Need to make sure it is enforced by activating it.</text>
    </javadoc>
    <method type="int" name="suggestConstraintToInclude" startLine="156" endLine="206">
      <declaration type="int" name="retVal" />
      <declaration type="int[]" name="tmpExcluded" />
      <declaration type="int" name="tmpLastExcluded" />
      <declaration type="int" name="tmpIndexOfLast" />
      <declaration type="double" name="tmpMin" />
      <declaration type="double" name="tmpVal" />
      <declaration type="MatrixStore<Double>" name="tmpSI" />
      <scope startLine="169" endLine="171" />
      <scope startLine="173" endLine="190">
        <scope startLine="174" endLine="186">
          <scope startLine="178" endLine="184">
            <scope startLine="181" endLine="183" />
          </scope>
        </scope>
        <scope startLine="186" endLine="189" />
      </scope>
      <scope startLine="192" endLine="203">
        <scope startLine="196" endLine="202">
          <scope startLine="199" endLine="201" />
        </scope>
      </scope>
    </method>
    <method type="Result" name="buildResult" startLine="209" endLine="232">
      <declaration type="Result" name="retVal" />
      <declaration type="ExpressionsBasedModel" name="tmpModel" />
      <scope startLine="215" endLine="229">
        <declaration type="HashSet<ModelEntity<?>>" name="tmpActiveInequalityEntities" />
        <declaration type="ModelEntity<?>[]" name="tmpInequalityEntities" />
        <declaration type="int[]" name="tmpActiveIndeces" />
        <scope startLine="224" endLine="226" />
        <comment>BasicLogger.logDebug("A S Iterations: " + this.countIterations());</comment>
      </scope>
    </method>
    <method type="MatrixStore<Double>" name="extractSolution" startLine="235" endLine="237" />
    <method type="boolean" name="initialise" startLine="240" endLine="265">
      <scope startLine="242" endLine="262">
        <scope startLine="247" endLine="250">
          <declaration type="int[]" name="tmpActiveSet" />
        </scope>
        <declaration type="int[]" name="tmpIncluded" />
        <declaration type="MatrixStore<Double>" name="tmpSlack" />
        <scope startLine="256" endLine="261">
          <declaration type="double" name="tmpVal" />
          <scope startLine="258" endLine="260" />
        </scope>
      </scope>
    </method>
    <method type="boolean" name="needsAnotherIteration" startLine="268" endLine="313">
      <scope startLine="270" endLine="273" />
      <declaration type="int" name="tmpToInclude" />
      <declaration type="int" name="tmpToExclude" />
      <scope startLine="278" endLine="281" />
      <scope startLine="283" endLine="286" />
      <scope startLine="288" endLine="299">
        <scope startLine="289" endLine="293" />
        <scope startLine="293" endLine="298" />
        <comment>Suggested to do nothing</comment>
        <comment>Only suggested to include</comment>
      </scope>
      <scope startLine="299" endLine="312">
        <scope startLine="300" endLine="305" />
        <scope startLine="305" endLine="311" />
        <comment>Only suggested to exclude</comment>
        <comment>Suggested both to exclude and include</comment>
      </scope>
    </method>
    <method type="void" name="performIteration" startLine="316" endLine="369">
      <declaration type="QuadraticSolver" name="tmpSolver" />
      <declaration type="Optimisation.Result" name="tmpResult" />
      <declaration type="int[]" name="tmpIncluded" />
      <declaration type="int" name="tmpCountVariables" />
      <declaration type="int" name="tmpCountEqualityConstraints" />
      <declaration type="int" name="tmpCountActiveInequalityConstraints" />
      <scope startLine="327" endLine="346">
        <declaration type="MatrixStore<Double>" name="tmpSolutionX" />
        <declaration type="MatrixStore<Double>" name="tmpSolutionLE" />
        <scope startLine="332" endLine="334" />
        <scope startLine="336" endLine="338" />
        <scope startLine="340" endLine="342" />
      </scope>
      <scope startLine="346" endLine="361">
        <scope startLine="348" endLine="350" />
        <scope startLine="354" endLine="357" />
      </scope>
      <scope startLine="361" endLine="367" />
    </method>
    <method type="boolean" name="validate" startLine="372" endLine="378">
      <declaration type="boolean" name="retVal" />
    </method>
  </class>
</source>
