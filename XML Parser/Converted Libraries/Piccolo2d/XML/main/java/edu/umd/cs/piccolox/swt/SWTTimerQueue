<?xml version="1.0" encoding="UTF-8"?>
    <source package="edu.umd.cs.piccolox.swt">
        <import package="org.eclipse.swt.widgets.Display"/>
        <class name="SWTTimerQueue" line="33">
            <implements interface="Runnable"/>
            <javadoc line="33">
                The SWTTimerQueue is a queue of timers. It has been implemented as a linked
                  list of SWTTimer objects.                
                <@author>
                    r Lance Good                    
                </@author>
            </javadoc>
            <declaration name="instance" type="SWTTimerQueue" line="40"/>
            <declaration name="display" type="Display" line="42"/>
            <declaration name="firstTimer" type="SWTTimer" line="44"/>
            <declaration name="running" type="boolean" line="45"/>
            <javadoc line="47">
                Creates a timer queue that will be attached the the provided display.
                  It&apos;s Timers are expected to modify only this display, or none.                
                <@param>
                    m display the display that will get updated by this queue's timers.                    
                </@param>
            </javadoc>
            <method name="SWTTimerQueue" type="constructor" line="53">
                <params>
                    <param name="display" type="Display"/>
                </params>
                <comment line="54">
                    Now start the TimerQueue thread.                    
                </comment>
            </method>
            <javadoc line="60">
                Returns the singleton instance of the SWTTimerQueue. Take note that even
                  when called with different displays it will always return the same result
                  as the first call.                
                <@param>
                    m display display to associate with this Timer Queue's Activities                    
                </@param>
                <@return>
                    n singleton instance of SWTTimerQueue                    
                </@return>
            </javadoc>
            <method name="sharedInstance" type="SWTTimerQueue" line="68">
                <params>
                    <param name="display" type="Display"/>
                </params>
                <scope line="69"/>
            </method>
            <javadoc line="75">
                Starts the timer queue. If it is already running, a RuntimeException will
                  be thrown.                
            </javadoc>
            <method name="start" type="void" line="79">
                <comment line="80">
                    Ensures that the Thread will be started from the display thread.                    
                </comment>
                <scope line="80"/>
                <anonymous_class line="85">
                    <method name="run" type="void" line="86">
                        <declaration name="timerThread" type="Thread" line="87"/>
                    </method>
                </anonymous_class>
            </method>
            <javadoc line="97">
                Stops the TimerQueue Thread.                
            </javadoc>
            <method name="stop" type="void" line="100"/>
            <javadoc line="105">
                Adds the provided timer to the queue of scheduled timers.                
                <@param>
                    m timer timer to add                    
                </@param>
                <@param>
                    m expirationTime time at which the timer is to be stopped and
                      removed from the queue. Given in unix time.                    
                </@param>
            </javadoc>
            <method name="addTimer" type="void" line="112">
                <params>
                    <param name="timer" type="SWTTimer"/>
                    <param name="expirationTime" type="long"/>
                </params>
                <comment line="113">
                    If the Timer is already in the queue, then do nothing                    
                </comment>
                <scope line="114"/>
            </method>
            <javadoc line="124">
                Insert the Timer into the queue in the order they will expire. If
                  multiple timers are set to expire at the same time, it will insert it
                  after the last one; that way they expire in the order they came in.                
                <@param>
                    m timer timer to insert into the queue                    
                </@param>
                <@param>
                    m expirationTime time in UNIX time at which the new timer should
                      expire                    
                </@param>
            </javadoc>
            <method name="insertTimer" type="void" line="133">
                <params>
                    <param name="timer" type="SWTTimer"/>
                    <param name="expirationTime" type="long"/>
                </params>
                <declaration name="previousTimer" type="SWTTimer" line="134"/>
                <scope line="135"/>
                <scope line="138"/>
            </method>
            <javadoc line="144">
                Finds the last timer that will expire before or at the given expiration
                  time. If there are multiple timers expiring at the same time, the last
                  one in the queue will be returned.                
                <@param>
                    m expirationTime expiration to compare against timers in the queue                    
                </@param>
                <@return>
                    n last timer that will expire before or at the given expiration
                      time                    
                </@return>
            </javadoc>
            <method name="findLastTimerExpiringBefore" type="SWTTimer" line="153">
                <params>
                    <param name="expirationTime" type="long"/>
                </params>
                <declaration name="previousTimer" type="SWTTimer" line="154"/>
                <declaration name="nextTimer" type="SWTTimer" line="155"/>
                <scope line="157"/>
            </method>
            <javadoc line="166">
                Removes the provided timer from the Timer Queue. If it is not found, then
                  nothing happens.                
                <@param>
                    m timer timer to remove from the queue                    
                </@param>
            </javadoc>
            <method name="removeTimer" type="void" line="172">
                <params>
                    <param name="timer" type="SWTTimer"/>
                </params>
                <scope line="173"/>
                <scope line="177"/>
                <scope line="180">
                    <declaration name="previousTimer" type="SWTTimer" line="181"/>
                    <scope line="182"/>
                </scope>
            </method>
            <javadoc line="192">
                Finds the timer that immediately precedes the provided timer in the
                  queue.                
                <@param>
                    m timer to search for                    
                </@param>
                <@return>
                    n timer immediately preceding found timer, or null if not found                    
                </@return>
            </javadoc>
            <method name="findLastTimerBefore" type="SWTTimer" line="199">
                <params>
                    <param name="timer" type="SWTTimer"/>
                </params>
                <declaration name="previousTimer" type="SWTTimer" line="200"/>
                <declaration name="currentTimer" type="SWTTimer" line="201"/>
                <scope line="203">
                    <scope line="204"/>
                </scope>
            </method>
            <javadoc line="215">
                Returns true if this timer queue contains the given timer.                
                <@param>
                    m timer timer being checked                    
                </@param>
                <@return>
                    n true if timer is scheduled in this queue                    
                </@return>
            </javadoc>
            <method name="containsTimer" type="boolean" line="221">
                <params>
                    <param name="timer" type="SWTTimer"/>
                </params>
                <comment line="222">
                    TODO: making this use isRunning without causing an infinite loop                    
                </comment>
            </method>
            <javadoc line="226">
                If there are a ton of timers, this method may never return. It loops
                  checking to see if the head of the Timer list has expired. If it has, it
                  posts the Timer and reschedules it if necessary.                
                <@return>
                    n how long the app can take before it should invoke this method
                      again.                    
                </@return>
            </javadoc>
            <method name="postExpiredTimers" type="long" line="234">
                <comment line="235">
                    The timeToWait we return should never be negative and only be zero                    
                </comment>
                <comment line="235">
                    when we have no Timers to wait for.                    
                </comment>
                <declaration name="timer" type="SWTTimer" line="235"/>
                <declaration name="currentTime" type="long" line="236"/>
                <declaration name="timeToWait" type="long" line="237"/>
                <scope line="242">
                    <scope line="244"/>
                    <scope line="251">
                        <scope line="252"/>
                        <scope line="255"/>
                        <scope line="264"/>
                        <scope line="273"/>
                        <scope line="276"/>
                    </scope>
                </scope>
            </method>
            <javadoc line="285">
                Dispatches work to timers until the queue is told to stop running.                
            </javadoc>
            <method name="run" type="void" line="288">
                <declaration name="timeToWait" type="long" line="289"/>
                <scope line="291">
                    <scope line="292">
                        <scope line="294"/>
                        <scope line="297"/>
                    </scope>
                </scope>
                <scope line="302">
                    <declaration name="timer" type="SWTTimer" line="305"/>
                    <scope line="306"/>
                </scope>
            </method>
            <javadoc line="315">
                Generates a string handy for debugging the contents of the timer queue.                
                <@return>
                    n String representation of the queue for use in debugging                    
                </@return>
            </javadoc>
            <method name="toString" type="String" line="320">
                <declaration name="buf" type="StringBuffer" line="321"/>
                <declaration name="nextTimer" type="SWTTimer" line="322"/>
                <scope line="328">
                    <scope line="332"/>
                </scope>
            </method>
            <class name="SWTTimerQueueRestart" line="341">
                <implements interface="Runnable"/>
                <javadoc line="341">
                    Runnable that will message the shared instance of the Timer Queue to
                      restart.                    
                </javadoc>
                <declaration name="attemptedStart" type="boolean" line="346"/>
                <javadoc line="346">
                    Tracks whether a restart has been attempted.                    
                </javadoc>
                <declaration name="display" type="Display" line="349"/>
                <javadoc line="351">
                    Constructs a QueueRestart Runnable that will message the Timer Queue
                      to Restart.                    
                    <@param>
                        m display display associated with the SWTTimerQueue                        
                    </@param>
                </javadoc>
                <method name="SWTTimerQueueRestart" type="constructor" line="357">
                    <params>
                        <param name="display" type="Display"/>
                    </params>
                </method>
                <javadoc line="361">
                    Attempts to restart the queue associated with the display.                    
                </javadoc>
                <method name="run" type="void" line="364">
                    <scope line="365"/>
                    <declaration name="q" type="SWTTimerQueue" line="369"/>
                    <scope line="371">
                        <scope line="372"/>
                    </scope>
                </method>
            </class>
        </class>
    </source>