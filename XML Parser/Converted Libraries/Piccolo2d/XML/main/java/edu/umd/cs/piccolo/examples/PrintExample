<?xml version="1.0" encoding="UTF-8"?>
    <source package="edu.umd.cs.piccolo.examples">
        <import package="java.awt.BorderLayout"/>
        <import package="java.awt.Color"/>
        <import package="java.awt.Graphics"/>
        <import package="java.awt.Graphics2D"/>
        <import package="java.awt.Point"/>
        <import package="java.awt.event.ActionEvent"/>
        <import package="java.awt.event.ActionListener"/>
        <import package="java.awt.geom.Point2D"/>
        <import package="java.awt.geom.Rectangle2D"/>
        <import package="java.awt.print.PageFormat"/>
        <import package="java.awt.print.Printable"/>
        <import package="java.awt.print.PrinterException"/>
        <import package="java.awt.print.PrinterJob"/>
        <import package="java.util.Iterator"/>
        <import package="java.util.List"/>
        <import package="javax.swing.ButtonGroup"/>
        <import package="javax.swing.JButton"/>
        <import package="javax.swing.JOptionPane"/>
        <import package="javax.swing.JPanel"/>
        <import package="javax.swing.JToggleButton"/>
        <import package="javax.swing.JToolBar"/>
        <import package="edu.umd.cs.piccolo.PCanvas"/>
        <import package="edu.umd.cs.piccolo.PLayer"/>
        <import package="edu.umd.cs.piccolo.nodes.PPath"/>
        <import package="edu.umd.cs.piccolo.util.PAffineTransform"/>
        <import package="edu.umd.cs.piccolo.util.PBounds"/>
        <import package="edu.umd.cs.piccolox.PFrame"/>
        <import package="edu.umd.cs.piccolox.swing.PDefaultScrollDirector"/>
        <import package="edu.umd.cs.piccolox.swing.PScrollDirector"/>
        <import package="edu.umd.cs.piccolox.swing.PScrollPane"/>
        <import package="edu.umd.cs.piccolox.swing.PViewport"/>
        <class name="PrintExample" line="65">
            <extends class="PFrame"/>
            <javadoc line="65">
                Adding print action to scrolling example.                
                <@author>
                    r Lance Good                    
                </@author>
                <@author>
                    r Ben Bederson                    
                </@author>
            </javadoc>
            <declaration name="serialVersionUID" type="long" line="73"/>
            <method name="PrintExample" type="constructor" line="75"/>
            <method name="PrintExample" type="constructor" line="79">
                <params>
                    <param name="aCanvas" type="PCanvas"/>
                </params>
            </method>
            <method name="initialize" type="void" line="83">
                <comment line="84">
                    Now, create the toolbar                    
                </comment>
                <declaration name="canvas" type="PCanvas" line="84"/>
                <declaration name="scrollPane" type="PScrollPane" line="85"/>
                <declaration name="viewport" type="PViewport" line="86"/>
                <declaration name="windowSD" type="PScrollDirector" line="87"/>
                <declaration name="documentSD" type="PScrollDirector" line="88"/>
                <declaration name="toolBar" type="JToolBar" line="93"/>
                <declaration name="window" type="JToggleButton" line="94"/>
                <declaration name="document" type="JToggleButton" line="95"/>
                <declaration name="print" type="JButton" line="96"/>
                <declaration name="bg" type="ButtonGroup" line="97"/>
                <anonymous_class line="106">
                    <method name="actionPerformed" type="void" line="107">
                        <params>
                            <param name="ae" type="ActionEvent"/>
                        </params>
                    </method>
                </anonymous_class>
                <anonymous_class line="114">
                    <method name="actionPerformed" type="void" line="115">
                        <params>
                            <param name="ae" type="ActionEvent"/>
                        </params>
                    </method>
                </anonymous_class>
                <anonymous_class line="122">
                    <method name="actionPerformed" type="void" line="123">
                        <params>
                            <param name="ae" type="ActionEvent"/>
                        </params>
                        <scope line="124"/>
                        <scope line="127"/>
                    </method>
                </anonymous_class>
                <declaration name="contentPane" type="JPanel" line="132"/>
            </method>
            <method name="addBackgroundShapes" type="void" line="140">
                <params>
                    <param name="canvas" type="PCanvas"/>
                </params>
                <scope line="141">
                    <declaration name="x" type="int" line="142"/>
                    <declaration name="y" type="int" line="143"/>
                    <scope line="145">
                        <declaration name="path" type="PPath" line="146"/>
                    </scope>
                    <scope line="151">
                        <declaration name="path" type="PPath" line="152"/>
                    </scope>
                </scope>
            </method>
            <class name="DocumentScrollDirector" line="161">
                <extends class="PDefaultScrollDirector"/>
                <javadoc line="161">
                    A modified scroll director that performs document based scroling rather
                      than window based scrolling (ie. the scrollbars act in the inverse
                      direction as normal)                    
                </javadoc>
                <javadoc line="168">
                    Get the View position given the specified camera bounds - modified
                      such that:
                      Rather than finding the distance from the upper left corner of the
                      window to the upper left corner of the document - we instead find the
                      distance from the lower right corner of the window to the upper left
                      corner of the document THEN we subtract that value from total
                      document width so that the position is inverted                    
                    <@param>
                        m viewBounds The bounds for which the view position will be
                          computed                        
                    </@param>
                    <@return>
                        n The view position                        
                    </@return>
                </javadoc>
                <method name="getViewPosition" type="Point" line="182">
                    <params>
                        <param name="viewBounds" type="Rectangle2D"/>
                    </params>
                    <declaration name="pos" type="Point" line="183"/>
                    <scope line="184">
                        <declaration name="layerBounds" type="PBounds" line="186"/>
                        <declaration name="layers" type="java.util.List" line="187"/>
                        <scope line="188">
                            <declaration name="layer" type="PLayer" line="189"/>
                        </scope>
                    </scope>
                </method>
                <javadoc line="214">
                    We do the same thing we did in getViewPosition above to flip the
                      document-window position relationship                    
                    <@param>
                        m x The new x position                        
                    </@param>
                    <@param>
                        m y The new y position                        
                    </@param>
                </javadoc>
                <method name="setViewPosition" type="void" line="221">
                    <params>
                        <param name="x" type="double"/>
                        <param name="y" type="double"/>
                    </params>
                    <comment line="222">
                        If a scroll is in progress - we ignore new scrolls - if we                        
                    </comment>
                    <comment line="222">
                        didn&apos;t, since the scrollbars depend on the camera location                        
                    </comment>
                    <comment line="222">
                        we can end up with an infinite loop                        
                    </comment>
                    <comment line="222">
                        Get the union of all the layers&apos; bounds                        
                    </comment>
                    <comment line="222">
                        Union the camera view bounds                        
                    </comment>
                    <comment line="222">
                        Now find the new view position in view coordinates -                        
                    </comment>
                    <comment line="222">
                        This is basically the distance from the lower right                        
                    </comment>
                    <comment line="222">
                        corner of the window to the upper left corner of the                        
                    </comment>
                    <comment line="222">
                        document                        
                    </comment>
                    <comment line="222">
                        We then measure the offset from the lower right corner                        
                    </comment>
                    <comment line="222">
                        of the document                        
                    </comment>
                    <comment line="222">
                        Now transform the new view position into global coords                        
                    </comment>
                    <comment line="222">
                        Compute the new matrix values to put the camera at the                        
                    </comment>
                    <comment line="222">
                        correct location                        
                    </comment>
                    <comment line="222">
                        Now actually set the camera&apos;s transform                        
                    </comment>
                    <declaration name="layerBounds" type="PBounds" line="234"/>
                    <declaration name="layers" type="List" line="235"/>
                    <scope line="236">
                        <declaration name="layer" type="PLayer" line="237"/>
                    </scope>
                    <declaration name="at" type="PAffineTransform" line="241"/>
                    <declaration name="viewBounds" type="PBounds" line="245"/>
                    <declaration name="newPoint" type="Point2D" line="254"/>
                    <declaration name="newX" type="double" line="263"/>
                    <declaration name="newY" type="double" line="264"/>
                </method>
            </class>
            <javadoc line="274">
                Print the canvas.                
                <@throws>
                    s PrinterException                    
                </@throws>
            </javadoc>
            <method name="print" type="void" line="279">
                <declaration name="printJob" type="PrinterJob" line="280"/>
                <anonymous_class line="281">
                    <method name="print" type="int" line="283">
                        <params>
                            <param name="graphics" type="Graphics"/>
                            <param name="pageFormat" type="PageFormat"/>
                            <param name="pageIndex" type="int"/>
                        </params>
                        <scope line="284"/>
                        <scope line="287">
                            <declaration name="g2" type="Graphics2D" line="288"/>
                        </scope>
                    </method>
                </anonymous_class>
                <scope line="295"/>
            </method>
            <method name="main" type="void" line="300">
                <params>
                    <param name="args" type="String[]"/>
                </params>
            </method>
        </class>
    </source>