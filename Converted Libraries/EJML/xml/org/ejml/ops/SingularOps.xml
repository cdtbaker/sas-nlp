<?xml version="1.0" encoding="UTF-8"?>
    <source package="org.ejml.ops">
        <import package="org.ejml.data.DenseMatrix64F"/>
        <import package="org.ejml.factory.SingularValueDecomposition"/>
        <class name="SingularOps" line="25">
            <javadoc line="25">
                Operations related to singular value decomposition.                
                <author>
                    Peter Abeles                    
                </author>
            </javadoc>
            <javadoc line="32">
                &lt;p&gt;
                  Adjusts the matrices so that the singular values are in descending order.
                  &lt;/p&gt;
                  &lt;p&gt;
                  In most implementations of SVD the singular values are automatically arranged in in descending
                  order.  In EJML this is not the case since it is often not needed and some computations can
                  be saved by not doing that.
                  &lt;/p&gt;                
                <param>
                    U Matrix. Modified.                    
                </param>
                <param>
                    tranU is U transposed or not.                    
                </param>
                <param>
                    W Diagonal matrix with singular values. Modified.                    
                </param>
                <param>
                    V Matrix. Modified.                    
                </param>
                <param>
                    tranV is V transposed or not.                    
                </param>
            </javadoc>
            <method name="descendingOrder" type="void" line="53">
                <params>
                    <param name="U" type="DenseMatrix64F"/>
                    <param name="tranU" type="boolean"/>
                    <param name="W" type="DenseMatrix64F"/>
                    <param name="V" type="DenseMatrix64F"/>
                    <param name="tranV" type="boolean"/>
                </params>
                <comment line="50">
                    TODO the number of copies can probably be reduced here                    
                </comment>
                <comment line="63">
                    find the smallest singular value in the submatrix                    
                </comment>
                <comment line="73">
                    only swap if the current index is not the smallest                    
                </comment>
                <comment line="78">
                    there is at least one uncountable singular value.  just stop here                    
                </comment>
                <declaration name="numSingular" type="int" line="54"/>
                <scope line="58">
                    <declaration name="bigValue" type="double" line="59"/>
                    <declaration name="bigIndex" type="int" line="60"/>
                    <scope line="63">
                        <declaration name="v" type="double" line="64"/>
                        <scope line="66"/>
                    </scope>
                    <scope line="76"/>
                    <declaration name="tmp" type="double" line="81"/>
                    <scope line="85"/>
                    <scope line="89"/>
                </scope>
            </method>
            <javadoc line="95">
                &lt;p&gt;
                  Similar to {@link #descendingOrder(org.ejml.data.DenseMatrix64F,boolean,org.ejml.data.DenseMatrix64F,org.ejml.data.DenseMatrix64F,boolean)}but takes in an array of singular values instead.
                  &lt;/p&gt;                
                <param>
                    U Matrix. Modified.                    
                </param>
                <param>
                    tranU is U transposed or not.                    
                </param>
                <param>
                    singularValues Array of singular values. Modified.                    
                </param>
                <param>
                    numSingularValues Number of elements in singularValues array                    
                </param>
                <param>
                    V Matrix. Modified.                    
                </param>
                <param>
                    tranV is V transposed or not.                    
                </param>
            </javadoc>
            <method name="descendingOrder" type="void" line="112">
                <params>
                    <param name="U" type="DenseMatrix64F"/>
                    <param name="tranU" type="boolean"/>
                    <param name="singularValues" type="double"/>
                    <param name="numSingularValues" type="int"/>
                    <param name="V" type="DenseMatrix64F"/>
                    <param name="tranV" type="boolean"/>
                </params>
                <comment line="114">
                    checkSvdMatrixSize(U, tranU, W, V, tranV);                    
                </comment>
                <comment line="120">
                    find the smallest singular value in the submatrix                    
                </comment>
                <comment line="130">
                    only swap if the current index is not the smallest                    
                </comment>
                <comment line="135">
                    there is at least one uncountable singular value.  just stop here                    
                </comment>
                <scope line="115">
                    <declaration name="bigValue" type="double" line="116"/>
                    <declaration name="bigIndex" type="int" line="117"/>
                    <scope line="120">
                        <declaration name="v" type="double" line="121"/>
                        <scope line="123"/>
                    </scope>
                    <scope line="133"/>
                    <declaration name="tmp" type="double" line="138"/>
                    <scope line="142"/>
                    <scope line="146"/>
                </scope>
            </method>
            <javadoc line="152">
                Checks to see if all the provided matrices are the expected size for an SVD.  If an error is encountered
                  then an exception is thrown.  This automatically handles compact and non-compact formats                
            </javadoc>
            <method name="checkSvdMatrixSize" type="void" line="156">
                <params>
                    <param name="U" type="DenseMatrix64F"/>
                    <param name="tranU" type="boolean"/>
                    <param name="W" type="DenseMatrix64F"/>
                    <param name="V" type="DenseMatrix64F"/>
                    <param name="tranV" type="boolean"/>
                </params>
                <declaration name="numSingular" type="int" line="157"/>
                <declaration name="compact" type="boolean" line="158"/>
                <scope line="160">
                    <scope line="161"/>
                    <scope line="168"/>
                </scope>
                <scope line="174"/>
            </method>
            <method name="swapRowOrCol" type="void" line="186">
                <params>
                    <param name="M" type="DenseMatrix64F"/>
                    <param name="tran" type="boolean"/>
                    <param name="i" type="int"/>
                    <param name="bigIndex" type="int"/>
                </params>
                <comment line="190">
                    swap the rows                    
                </comment>
                <comment line="197">
                    swap the columns                    
                </comment>
                <declaration name="tmp" type="double" line="187"/>
                <scope line="188">
                    <scope line="190"/>
                </scope>
                <scope line="195">
                    <scope line="197"/>
                </scope>
            </method>
            <javadoc line="205">
                &lt;p&gt;
                  Returns the null-space from the singular value decomposition. The null space is a set of non-zero vectors that
                  when multiplied by the original matrix return zero.
                  &lt;/p&gt;
                  &lt;p&gt;
                  The null space is found by extracting the columns in V that are associated singular values less than
                  or equal to the threshold. In some situations a non-compact SVD is required.
                  &lt;/p&gt;                
                <param>
                    svd A precomputed decomposition.  Not modified.                    
                </param>
                <param>
                    nullSpace Storage for null space.  Will be reshaped as needed.  Modified.                    
                </param>
                <param>
                    tol Threshold for selecting singular values.  Try UtilEjml.EPS.                    
                </param>
                <return>
                    The null space.                    
                </return>
            </javadoc>
            <method name="nullSpace" type="DenseMatrix64F" line="223">
                <params>
                    <param name="svd" type="SingularValueDecomposition<DenseMatrix64F>"/>
                    <param name="nullSpace" type="DenseMatrix64F"/>
                    <param name="tol" type="double"/>
                </params>
                <comment line="234">
                    first determine the size of the null space                    
                </comment>
                <comment line="243">
                    declare output data                    
                </comment>
                <comment line="250">
                    now extract the vectors                    
                </comment>
                <declaration name="N" type="int" line="224"/>
                <declaration name="s" type="double" line="225"/>
                <declaration name="V" type="DenseMatrix64F" line="227"/>
                <scope line="229"/>
                <declaration name="numVectors" type="int" line="234"/>
                <scope line="236">
                    <scope line="237"/>
                </scope>
                <scope line="243"/>
                <scope line="245"/>
                <declaration name="count" type="int" line="250"/>
                <scope line="251">
                    <scope line="252"/>
                </scope>
                <scope line="256"/>
            </method>
            <javadoc line="265">
                &lt;p&gt;
                  The vector associated will the smallest singular value is returned as the null space
                  of the decomposed system.  A right null space is returned if &apos;isRight&apos; is set to true,
                  and a left null space if false.
                  &lt;/p&gt;                
                <param>
                    svd A precomputed decomposition.  Not modified.                    
                </param>
                <param>
                    isRight true for right null space and false for left null space.  Right is more commonly used.                    
                </param>
                <param>
                    nullVector Optional storage for a vector for the null space.  Modified.                    
                </param>
                <return>
                    Vector in V associated with smallest singular value..                    
                </return>
            </javadoc>
            <method name="nullVector" type="DenseMatrix64F" line="280">
                <params>
                    <param name="svd" type="SingularValueDecomposition<DenseMatrix64F>"/>
                    <param name="isRight" type="boolean"/>
                    <param name="nullVector" type="DenseMatrix64F"/>
                </params>
                <comment line="312">
                    find the smallest singular value                    
                </comment>
                <comment line="323">
                    extract the null space                    
                </comment>
                <declaration name="N" type="int" line="281"/>
                <declaration name="s" type="double" line="282"/>
                <declaration name="A" type="DenseMatrix64F" line="284"/>
                <scope line="286">
                    <scope line="287"/>
                    <scope line="291"/>
                </scope>
                <scope line="294">
                    <scope line="295"/>
                    <scope line="299"/>
                </scope>
                <declaration name="smallestIndex" type="int" line="304"/>
                <scope line="310">
                    <declaration name="smallestValue" type="double" line="312"/>
                    <scope line="314">
                        <scope line="315"/>
                    </scope>
                </scope>
            </method>
            <javadoc line="331">
                Extracts the rank of a matrix using a preexisting decomposition.                
                <param>
                    svd A precomputed decomposition.  Not modified.                    
                </param>
                <param>
                    threshold Tolerance used to determine of a singular value is singular.                    
                </param>
                <return>
                    The rank of the decomposed matrix.                    
                </return>
            </javadoc>
            <method name="rank" type="int" line="338">
                <params>
                    <param name="svd" type="SingularValueDecomposition"/>
                    <param name="threshold" type="double"/>
                </params>
                <declaration name="numRank" type="int" line="339"/>
                <declaration name="w" type="double" line="341"/>
                <declaration name="N" type="int" line="343"/>
                <scope line="345"/>
            </method>
            <javadoc line="353">
                Extracts the nullity of a matrix using a preexisting decomposition.                
                <param>
                    svd A precomputed decomposition.  Not modified.                    
                </param>
                <param>
                    threshold Tolerance used to determine of a singular value is singular.                    
                </param>
                <return>
                    The nullity of the decomposed matrix.                    
                </return>
            </javadoc>
            <method name="nullity" type="int" line="360">
                <params>
                    <param name="svd" type="SingularValueDecomposition"/>
                    <param name="threshold" type="double"/>
                </params>
                <declaration name="ret" type="int" line="361"/>
                <declaration name="w" type="double" line="363"/>
                <declaration name="N" type="int" line="365"/>
                <declaration name="numCol" type="int" line="367"/>
                <scope line="369"/>
            </method>
        </class>
    </source>