<?xml version="1.0" encoding="UTF-8"?>
    <source package="sun.font">
        <import package="java.io"/>
        <import package="java.util"/>
        <import package="sun.awt"/>
        <import package="sun.java2d.xr"/>
        <class name="XRGlyphCache" line="6">
            <implements interface="GlyphDisposedListener"/>
            <javadoc line="6">
                Glyph cache used by the XRender pipeline.                
                <author>
                    Clemens Eisserer                    
                </author>
            </javadoc>
            <declaration name="con" type="XRBackend" line="11"/>
            <declaration name="maskBuffer" type="XRCompositeManager" line="12"/>
            <declaration name="cacheMap" type="HashMap&lt;MutableInteger,XRGlyphCacheEntry&gt;" line="13"/>
            <declaration name="nextID" type="int" line="14"/>
            <declaration name="tmp" type="MutableInteger" line="15"/>
            <declaration name="grayGlyphSet" type="int" line="16"/>
            <declaration name="lcdGlyphSet" type="int" line="17"/>
            <declaration name="time" type="int" line="18"/>
            <declaration name="cachedPixels" type="int" line="19"/>
            <declaration name="MAX_CACHED_PIXELS" type="int" line="20"/>
            <declaration name="freeGlyphIDs" type="ArrayList&lt;Integer&gt;" line="21"/>
            <declaration name="batchGlyphUpload" type="boolean" line="22"/>
            <method name="XRGlyphCache" type="constructor" line="23">
                <params>
                    <param name="maskBuf" type="XRCompositeManager"/>
                </params>
            </method>
            <method name="glyphDisposed" type="void" line="30">
                <params>
                    <param name="glyphPtrList" type="ArrayList<Long>"/>
                </params>
                <scope line="31">
                    <declaration name="glyphIDList" type="GrowableIntArray" line="33"/>
                    <scope line="34">
                        <declaration name="glyphID" type="int" line="35"/>
                        <scope line="36"/>
                    </scope>
                </scope>
                <scope line="42"/>
            </method>
            <method name="getFreeGlyphID" type="int" line="46">
                <scope line="47">
                    <declaration name="newID" type="int" line="48"/>
                </scope>
            </method>
            <method name="getEntryForPointer" type="XRGlyphCacheEntry" line="53">
                <params>
                    <param name="imgPtr" type="long"/>
                </params>
                <declaration name="id" type="int" line="54"/>
                <scope line="55"/>
            </method>
            <method name="cacheGlyphs" type="XRGlyphCacheEntry[]" line="61">
                <params>
                    <param name="glyphList" type="GlyphList"/>
                </params>
                <declaration name="entries" type="XRGlyphCacheEntry[]" line="63"/>
                <declaration name="imgPtrs" type="long[]" line="64"/>
                <declaration name="uncachedGlyphs" type="ArrayList&lt;XRGlyphCacheEntry&gt;" line="65"/>
                <scope line="66">
                    <declaration name="glyph" type="XRGlyphCacheEntry" line="67"/>
                    <scope line="68">
                        <scope line="72"/>
                    </scope>
                </scope>
                <scope line="80"/>
            </method>
            <method name="uploadGlyphs" type="void" line="85">
                <params>
                    <param name="glyphs" type="XRGlyphCacheEntry[]"/>
                    <param name="uncachedGlyphs" type="ArrayList<XRGlyphCacheEntry>"/>
                    <param name="gl" type="GlyphList"/>
                    <param name="glIndices" type="int[]"/>
                </params>
                <scope line="86"/>
                <scope line="89"/>
                <declaration name="containsLCDGlyphs" type="boolean" line="92"/>
                <declaration name="seperatedGlyphList" type="List&lt;XRGlyphCacheEntry&gt;[]" line="93"/>
                <declaration name="grayGlyphList" type="List&lt;XRGlyphCacheEntry&gt;" line="94"/>
                <declaration name="lcdGlyphList" type="List&lt;XRGlyphCacheEntry&gt;" line="95"/>
                <scope line="96">
                    <scope line="97"/>
                    <scope line="100"/>
                </scope>
                <scope line="104">
                    <declaration name="tmpList" type="ArrayList&lt;XRGlyphCacheEntry&gt;" line="105"/>
                    <scope line="107">
                        <scope line="109"/>
                        <scope line="112"/>
                    </scope>
                </scope>
            </method>
            <javadoc line="118">
                Seperates lcd and grayscale glyphs queued for upload, and sets the
                  appropriate glyphset for the cache entries.                
            </javadoc>
            <method name="seperateGlyphTypes" type="List<XRGlyphCacheEntry>[]" line="122">
                <params>
                    <param name="glyphList" type="List<XRGlyphCacheEntry>"/>
                    <param name="containsLCDGlyphs" type="boolean"/>
                </params>
                <declaration name="lcdGlyphs" type="ArrayList&lt;XRGlyphCacheEntry&gt;" line="123"/>
                <declaration name="grayGlyphs" type="ArrayList&lt;XRGlyphCacheEntry&gt;" line="124"/>
                <scope line="125">
                    <scope line="126">
                        <scope line="127"/>
                    </scope>
                    <scope line="133">
                        <scope line="134"/>
                    </scope>
                </scope>
            </method>
            <javadoc line="143">
                Copies the glyph-images into a continous buffer, required for uploading.                
            </javadoc>
            <method name="generateGlyphImageStream" type="byte[]" line="146">
                <params>
                    <param name="glyphList" type="List<XRGlyphCacheEntry>"/>
                </params>
                <declaration name="isLCDGlyph" type="boolean" line="147"/>
                <declaration name="stream" type="ByteArrayOutputStream" line="148"/>
                <scope line="149"/>
            </method>
            <method name="containsLCDGlyphs" type="boolean" line="154">
                <params>
                    <param name="entries" type="List<XRGlyphCacheEntry>"/>
                </params>
                <declaration name="containsLCDGlyphs" type="boolean" line="155"/>
                <scope line="156">
                    <scope line="158"/>
                </scope>
            </method>
            <method name="clearCache" type="void" line="164">
                <params>
                    <param name="glyps" type="XRGlyphCacheEntry[]"/>
                </params>
                <declaration name="cacheList" type="ArrayList&lt;XRGlyphCacheEntry&gt;" line="165"/>
                <anonymous_class line="166">
                    <method name="compare" type="int" line="167">
                        <params>
                            <param name="e1" type="XRGlyphCacheEntry"/>
                            <param name="e2" type="XRGlyphCacheEntry"/>
                        </params>
                    </method>
                </anonymous_class>
                <scope line="172"/>
                <declaration name="deleteGlyphList" type="GrowableIntArray" line="175"/>
                <declaration name="pixelsToRelease" type="int" line="176"/>
                <scope line="177">
                    <declaration name="entry" type="XRGlyphCacheEntry" line="178"/>
                    <scope line="179"/>
                </scope>
                <scope line="184"/>
            </method>
            <method name="freeGlyphs" type="void" line="189">
                <params>
                    <param name="glyphIdList" type="GrowableIntArray"/>
                </params>
                <declaration name="removedLCDGlyphs" type="GrowableIntArray" line="190"/>
                <declaration name="removedGrayscaleGlyphs" type="GrowableIntArray" line="191"/>
                <scope line="192">
                    <declaration name="glyphId" type="int" line="193"/>
                    <declaration name="entry" type="XRGlyphCacheEntry" line="196"/>
                    <scope line="199"/>
                    <scope line="202"/>
                </scope>
                <scope line="207"/>
                <scope line="210"/>
            </method>
        </class>
    </source>