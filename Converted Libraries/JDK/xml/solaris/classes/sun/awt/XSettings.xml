<?xml version="1.0" encoding="UTF-8"?>
    <source package="sun.awt">
        <import package="java.awt.Color"/>
        <import package="java.io.UnsupportedEncodingException"/>
        <import package="java.util.HashMap"/>
        <import package="java.util.Map"/>
        <class name="XSettings" line="36">
            <comment line="313">
                class XSettings.Update                
            </comment>
            <javadoc line="36">
                Per-screen XSETTINGS.                
            </javadoc>
            <declaration name="serial" type="long" line="41"/>
            <javadoc line="41">
                                
            </javadoc>
            <javadoc line="46">
                Update these settings with &lt;code&gt;data&lt;/code&gt; obtained from
                  XSETTINGS manager.                
                <param>
                    data settings data obtained from
                      <code>_XSETTINGS_SETTINGS</code> window property of the
                      settings manager.                    
                </param>
                <return>
                    a <code>Map</code> of changed settings.                    
                </return>
            </javadoc>
            <method name="update" type="Map" line="55">
                <params>
                    <param name="data" type="byte[]"/>
                </params>
            </method>
            <class name="Update" line="60">
                <comment line="66">
                                        
                </comment>
                <comment line="70">
                                        
                </comment>
                <javadoc line="60">
                    TBS ...                    
                </javadoc>
                <declaration name="LITTLE_ENDIAN" type="int" line="66"/>
                <declaration name="BIG_ENDIAN" type="int" line="67"/>
                <declaration name="TYPE_INTEGER" type="int" line="70"/>
                <declaration name="TYPE_STRING" type="int" line="71"/>
                <declaration name="TYPE_COLOR" type="int" line="72"/>
                <declaration name="data" type="byte[]" line="74"/>
                <declaration name="dlen" type="int" line="75"/>
                <declaration name="idx" type="int" line="76"/>
                <declaration name="isLittle" type="boolean" line="77"/>
                <declaration name="serial" type="long" line="78"/>
                <declaration name="nsettings" type="int" line="79"/>
                <declaration name="isValid" type="boolean" line="80"/>
                <declaration name="updatedSettings" type="HashMap" line="82"/>
                <javadoc line="85">
                    Construct an Update object for the data read from
                      &lt;code&gt;_XSETTINGS_SETTINGS&lt;/code&gt; property of the XSETTINGS
                      selection owner.                    
                    <param>
                        data <code>_XSETTINGS_SETTINGS</code> contents.                        
                    </param>
                </javadoc>
                <method name="Update" type="constructor" line="92">
                    <params>
                        <param name="data" type="byte[]"/>
                    </params>
                    <comment line="97">
                        XXX: debug trace?                        
                    </comment>
                    <comment line="101">
                        first byte gives endianness of the data                        
                    </comment>
                    <comment line="102">
                        next 3 bytes are unused (pad to 32 bit)                        
                    </comment>
                    <comment line="109">
                        N_SETTINGS is actually CARD32 (i.e. unsigned), but                        
                    </comment>
                    <comment line="110">
                        since java doesn&apos;t have an unsigned int type, and                        
                    </comment>
                    <comment line="111">
                        N_SETTINGS cannot realistically exceed 2^31 (so we                        
                    </comment>
                    <comment line="112">
                        gonna use int anyway), just read it as INT32.                        
                    </comment>
                    <scope line="96"/>
                </method>
                <method name="needBytes" type="void" line="124">
                    <params>
                        <param name="n" type="int"/>
                    </params>
                    <scope line="125"/>
                </method>
                <method name="getCARD8" type="int" line="137">
                    <declaration name="val" type="int" line="140"/>
                </method>
                <method name="getCARD16" type="int" line="149">
                    <declaration name="val" type="int" line="152"/>
                    <scope line="153"/>
                    <scope line="156"/>
                </method>
                <method name="getINT32" type="int" line="168">
                    <declaration name="val" type="int" line="171"/>
                    <scope line="172"/>
                    <scope line="177"/>
                </method>
                <method name="getCARD32" type="long" line="191"/>
                <method name="getString" type="String" line="198">
                    <params>
                        <param name="len" type="int"/>
                    </params>
                    <comment line="205">
                        XXX: cannot happen, &quot;UTF-8&quot; is always supported                        
                    </comment>
                    <declaration name="str" type="String" line="201"/>
                    <scope line="202"/>
                    <scope line="204"/>
                </method>
                <javadoc line="213">
                    Update settings.                    
                </javadoc>
                <method name="update" type="Map" line="216">
                    <scope line="217"/>
                    <scope line="221">
                        <declaration name="currentSerial" type="long" line="222"/>
                        <scope line="224"/>
                        <scope line="228"/>
                    </scope>
                </method>
                <javadoc line="239">
                    Parses a particular x setting.                    
                    <exception>
                        IndexOutOfBoundsException if there isn't enough
                          data for a setting.                        
                    </exception>
                </javadoc>
                <method name="updateOne" type="void" line="248">
                    <params>
                        <param name="currentSerial" type="long"/>
                    </params>
                    <comment line="250">
                        pad to next CARD16                        
                    </comment>
                    <comment line="252">
                        save position of the property name, skip to serial                        
                    </comment>
                    <comment line="256">
                        check if we should bother                        
                    </comment>
                    <comment line="257">
                        pad to 32 bit                        
                    </comment>
                    <comment line="260">
                        Avoid constructing garbage for properties that has not                        
                    </comment>
                    <comment line="261">
                        changed, skip the data for this property.                        
                    </comment>
                    <comment line="262">
                        skip                        
                    </comment>
                    <comment line="269">
                        4 CARD16                        
                    </comment>
                    <comment line="280">
                        skip serial, parsed above                        
                    </comment>
                    <comment line="305">
                        dtrace???                        
                    </comment>
                    <declaration name="type" type="int" line="249"/>
                    <declaration name="nameLen" type="int" line="253"/>
                    <declaration name="nameIdx" type="int" line="254"/>
                    <declaration name="lastChanged" type="long" line="258"/>
                    <scope line="262">
                        <scope line="263"/>
                        <scope line="265">
                            <declaration name="len" type="int" line="266"/>
                        </scope>
                        <scope line="268"/>
                        <scope line="270"/>
                    </scope>
                    <declaration name="name" type="String" line="279"/>
                    <declaration name="value" type="Object" line="282"/>
                    <scope line="283"/>
                    <scope line="286"/>
                    <scope line="289">
                        <declaration name="r" type="int" line="290"/>
                        <declaration name="g" type="int" line="291"/>
                        <declaration name="b" type="int" line="292"/>
                        <declaration name="a" type="int" line="293"/>
                    </scope>
                    <scope line="300"/>
                    <scope line="304"/>
                </method>
            </class>
        </class>
    </source>