<?xml version="1.0" encoding="UTF-8"?>
    <source package="sun.awt.X11">
        <import package="java.awt"/>
        <import package="java.awt.peer"/>
        <import package="java.awt.event"/>
        <import package="java.lang.reflect.Field"/>
        <import package="java.lang.reflect.Method"/>
        <import package="java.lang.reflect.InvocationTargetException"/>
        <import package="java.util.Vector"/>
        <import package="sun.util.logging.PlatformLogger"/>
        <import package="sun.awt.SunToolkit"/>
        <class name="XPopupMenuPeer" line="40">
            <extends class="XMenuWindow"/>
            <comment line="50">
                Primary members                
            </comment>
            <comment line="56">
                If mouse button is clicked on item showing submenu
                 we have to hide its submenu.
                 This member saves the submenu under cursor
                 Only if it&apos;s showing                
            </comment>
            <comment line="64">
                Painting constants                
            </comment>
            <comment line="70">
                Menu&apos;s fields &amp; methods                
            </comment>
            <comment line="73">
                Fix for 6184485: Popup menu is not disabled on XToolkit even when calling setEnabled (false)                
            </comment>
            <comment line="75">
                Fix for 6267144: PIT: Popup menu label is not shown, XToolkit                
            </comment>
            <comment line="112">
                From MenuItemPeer                
            </comment>
            <comment line="141">
                From MenuPeer                
            </comment>
            <comment line="153">
                From PopupMenuPeer                
            </comment>
            <comment line="216">
                Fix for 6184485: Popup menu is not disabled on XToolkit even when calling setEnabled (false)                
            </comment>
            <comment line="238">
                Utility functions                
            </comment>
            <comment line="244">
                Fix for 6267162: PIT: Popup Menu gets hidden below the screen when opened                
            </comment>
            <comment line="245">
                near the periphery of the screen, XToolkit                
            </comment>
            <comment line="279">
                Overriden XMenuWindow caption-painting functions
                 Necessary to fix 6267144: PIT: Popup menu label is not shown, XToolkit                
            </comment>
            <implements interface="PopupMenuPeer"/>
            <declaration name="log" type="PlatformLogger" line="42"/>
            <javadoc line="42">
                Data members                
            </javadoc>
            <declaration name="componentPeer" type="XComponentPeer" line="52"/>
            <declaration name="popupMenuTarget" type="PopupMenu" line="53"/>
            <declaration name="showingMousePressedSubmenu" type="XMenuPeer" line="61"/>
            <declaration name="CAPTION_MARGIN_TOP" type="int" line="66"/>
            <declaration name="CAPTION_SEPARATOR_HEIGHT" type="int" line="67"/>
            <declaration name="f_enabled" type="Field" line="73"/>
            <declaration name="f_label" type="Field" line="75"/>
            <declaration name="m_getFont" type="Method" line="76"/>
            <declaration name="f_items" type="Field" line="77"/>
            <scope line="79"/>
            <javadoc line="87">
                Construction                
            </javadoc>
            <method name="XPopupMenuPeer" type="constructor" line="92">
                <params>
                    <param name="target" type="PopupMenu"/>
                </params>
            </method>
            <javadoc line="97">
                Implementaion of interface methods                
            </javadoc>
            <method name="setFont" type="void" line="105">
                <params>
                    <param name="f" type="Font"/>
                </params>
                <comment line="102">
                    From MenuComponentPeer                    
                </comment>
            </method>
            <method name="setLabel" type="void" line="114">
                <params>
                    <param name="label" type="String"/>
                </params>
            </method>
            <method name="setEnabled" type="void" line="120">
                <params>
                    <param name="enabled" type="boolean"/>
                </params>
            </method>
            <javadoc line="124">
                DEPRECATED:  Replaced by setEnabled(boolean).                
                <see>
                    java.awt.peer.MenuItemPeer                    
                </see>
            </javadoc>
            <method name="enable" type="void" line="128"/>
            <javadoc line="132">
                DEPRECATED:  Replaced by setEnabled(boolean).                
                <see>
                    java.awt.peer.MenuItemPeer                    
                </see>
            </javadoc>
            <method name="disable" type="void" line="136"/>
            <javadoc line="143">
                addSeparator routines are not used
                  in peers. Shared code invokes addItem(&quot;-&quot;)
                  for adding separators                
            </javadoc>
            <method name="addSeparator" type="void" line="148"/>
            <method name="show" type="void" line="155">
                <params>
                    <param name="e" type="Event"/>
                </params>
                <comment line="157">
                    Get menus from the target.                    
                </comment>
                <comment line="161">
                    Fix for 6287092: JCK15a: api/java_awt/interactive/event/EventTests.html#EventTest0015 fails, mustang                    
                </comment>
                <comment line="164">
                    Fixed 6266513: Incorrect key handling in XAWT popup menu                    
                </comment>
                <comment line="165">
                    No item should be selected when showing popup menu                    
                </comment>
                <comment line="170">
                    Fix for 6267162: PIT: Popup Menu gets hidden below the screen when opened                    
                </comment>
                <comment line="171">
                    near the periphery of the screen, XToolkit                    
                </comment>
                <declaration name="targetItemVector" type="Vector" line="158"/>
                <scope line="159">
                    <declaration name="tl" type="Point" line="162"/>
                    <declaration name="pt" type="Point" line="163"/>
                    <scope line="166"/>
                    <declaration name="dim" type="Dimension" line="169"/>
                    <declaration name="bounds" type="Rectangle" line="172"/>
                </scope>
            </method>
            <javadoc line="181">
                Access to target&apos;s fields                
            </javadoc>
            <method name="getTargetFont" type="Font" line="188">
                <comment line="187">
                    Fix for 6267144: PIT: Popup menu label is not shown, XToolkit                    
                </comment>
                <scope line="189"/>
                <scope line="192"/>
                <scope line="194"/>
                <scope line="196"/>
            </method>
            <method name="getTargetLabel" type="String" line="202">
                <scope line="203"/>
                <scope line="206">
                    <declaration name="label" type="String" line="207"/>
                </scope>
                <scope line="209"/>
            </method>
            <method name="isTargetEnabled" type="boolean" line="216">
                <scope line="217"/>
                <scope line="220"/>
                <scope line="222"/>
            </method>
            <method name="getMenuTargetItems" type="Vector" line="228">
                <scope line="229"/>
                <scope line="231"/>
            </method>
            <javadoc line="246">
                Calculates placement of popup menu window
                  given origin in global coordinates and
                  size of menu window. Returns suggested
                  rectangle for menu window in global coordinates                
                <param>
                    origin the origin point specified in show()
                      function converted to global coordinates                    
                </param>
                <param>
                    windowSize the desired size of menu's window                    
                </param>
            </javadoc>
            <method name="getWindowBounds" type="Rectangle" line="255">
                <params>
                    <param name="origin" type="Point"/>
                    <param name="windowSize" type="Dimension"/>
                </params>
                <declaration name="globalBounds" type="Rectangle" line="256"/>
                <declaration name="screenSize" type="Dimension" line="257"/>
                <declaration name="res" type="Rectangle" line="258"/>
                <scope line="260"/>
                <scope line="264"/>
                <scope line="268"/>
                <scope line="272"/>
            </method>
            <javadoc line="284">
                Returns height of menu window&apos;s caption.
                  Can be overriden for popup menus and tear-off menus                
            </javadoc>
            <method name="getCaptionSize" type="Dimension" line="288">
                <declaration name="s" type="String" line="289"/>
                <scope line="290"/>
                <declaration name="g" type="Graphics" line="293"/>
                <scope line="294"/>
                <scope line="297">
                    <declaration name="fm" type="FontMetrics" line="299"/>
                    <declaration name="str" type="String" line="300"/>
                    <declaration name="width" type="int" line="301"/>
                    <declaration name="height" type="int" line="302"/>
                    <declaration name="textDimension" type="Dimension" line="303"/>
                </scope>
                <scope line="305"/>
            </method>
            <javadoc line="310">
                Paints menu window&apos;s caption.
                  Can be overriden for popup menus and tear-off menus.
                  Default implementation does nothing                
            </javadoc>
            <method name="paintCaption" type="void" line="315">
                <params>
                    <param name="g" type="Graphics"/>
                    <param name="rect" type="Rectangle"/>
                </params>
                <declaration name="s" type="String" line="316"/>
                <scope line="317"/>
                <declaration name="fm" type="FontMetrics" line="321"/>
                <declaration name="str" type="String" line="322"/>
                <declaration name="width" type="int" line="323"/>
                <declaration name="textx" type="int" line="324"/>
                <declaration name="texty" type="int" line="325"/>
                <declaration name="sepy" type="int" line="326"/>
            </method>
            <javadoc line="332">
                Overriden XBaseMenuWindow functions                
            </javadoc>
            <method name="doDispose" type="void" line="337"/>
            <method name="handleEvent" type="void" line="342">
                <params>
                    <param name="event" type="AWTEvent"/>
                </params>
            </method>
            <javadoc line="363">
                Overriden XWindow general-purpose functions                
            </javadoc>
            <method name="ungrabInputImpl" type="void" line="368"/>
            <javadoc line="372">
                Overriden XWindow keyboard processing                
            </javadoc>
            <method name="handleKeyPress" type="void" line="383">
                <params>
                    <param name="xev" type="XEvent"/>
                </params>
                <comment line="378">
                    In previous version keys were handled in handleKeyPress.
                     Now we override this function do disable F10 explicit
                     processing. All processing is done using KeyEvent.                    
                </comment>
                <declaration name="xkey" type="XKeyEvent" line="384"/>
                <scope line="385"/>
                <scope line="388"/>
                <declaration name="currentSource" type="Component" line="391"/>
            </method>
        </class>
    </source>