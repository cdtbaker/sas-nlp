<?xml version="1.0" encoding="UTF-8"?>
    <source package="sun.awt">
        <import package="java.awt.RenderingHints"/>
        <import package="java.awt.RenderingHints"/>
        <import package="java.awt.color.ColorSpace"/>
        <import package="java.awt.image"/>
        <import package="java.security.AccessController"/>
        <import package="java.security.PrivilegedAction"/>
        <import package="sun.security.action.GetIntegerAction"/>
        <import package="com.sun.java.swing.plaf.gtk.GTKConstants.TextDirection"/>
        <import package="sun.java2d.opengl.OGLRenderQueue"/>
        <import package="java.lang.reflect.InvocationTargetException"/>
        <class name="UNIXToolkit" line="38">
            <extends class="SunToolkit"/>
            <comment line="263">
                This returns the value for the desktop property &quot;awt.font.desktophints&quot;
                 It builds this by querying the Gnome desktop properties to return
                 them as platform independent hints.
                 This requires that the Gnome properties have already been gathered.                
            </comment>
            <declaration name="GTK_LOCK" type="Object" line="40"/>
            <javadoc line="40">
                All calls into GTK should be synchronized on this lock                
            </javadoc>
            <declaration name="BAND_OFFSETS" type="int[]" line="43"/>
            <declaration name="BAND_OFFSETS_ALPHA" type="int[]" line="44"/>
            <declaration name="DEFAULT_DATATRANSFER_TIMEOUT" type="int" line="45"/>
            <declaration name="nativeGTKAvailable" type="Boolean" line="47"/>
            <declaration name="nativeGTKLoaded" type="Boolean" line="48"/>
            <declaration name="tmpImage" type="BufferedImage" line="49"/>
            <method name="getDatatransferTimeout" type="int" line="51">
                <declaration name="dt" type="Integer" line="52"/>
                <scope line="54"/>
                <scope line="56"/>
            </method>
            <javadoc line="61">
                Returns true if the native GTK libraries are capable of being
                  loaded and are expected to work properly, false otherwise.  Note
                  that this method will not leave the native GTK libraries loaded if
                  they haven&apos;t already been loaded.  This allows, for example, Swing&apos;s
                  GTK L&amp;F to test for the presence of native GTK support without
                  leaving the native libraries loaded.  To attempt long-term loading
                  of the native GTK libraries, use the loadGTK() method instead.                
            </javadoc>
            <method name="isNativeGTKAvailable" type="boolean" line="71">
                <comment line="74">
                    We&apos;ve already attempted to load GTK, so just return the                    
                </comment>
                <comment line="75">
                    status of that attempt.                    
                </comment>
                <comment line="79">
                    We&apos;ve already checked the availability of the native GTK                    
                </comment>
                <comment line="80">
                    libraries, so just return the status of that attempt.                    
                </comment>
                <scope line="72">
                    <scope line="73"/>
                    <scope line="78"/>
                    <scope line="83">
                        <declaration name="success" type="boolean" line="84"/>
                    </scope>
                </scope>
            </method>
            <javadoc line="91">
                Loads the GTK libraries, if necessary.  The first time this method
                  is called, it will attempt to load the native GTK library.  If
                  successful, it leaves the library open and returns true; otherwise,
                  the library is left closed and returns false.  On future calls to
                  this method, the status of the first attempt is returned (a simple
                  lightweight boolean check, no native calls required).                
            </javadoc>
            <method name="loadGTK" type="boolean" line="99">
                <scope line="100">
                    <scope line="101">
                        <declaration name="success" type="boolean" line="102"/>
                    </scope>
                </scope>
            </method>
            <javadoc line="109">
                Overridden to handle GTK icon loading                
            </javadoc>
            <method name="lazilyLoadDesktopProperty" type="Object" line="112">
                <params>
                    <param name="name" type="String"/>
                </params>
                <scope line="113"/>
            </method>
            <javadoc line="119">
                Load a native Gtk stock icon.                
                <param>
                    longname a desktop property name. This contains icon name, size
                      and orientation, e.g. <code>"gtk.icon.gtk-add.4.rtl"</code>                    
                </param>
                <return>
                    an <code>Image</code> for the icon, or <code>null</code> if the
                      icon could not be loaded                    
                </return>
            </javadoc>
            <method name="lazilyLoadGTKIcon" type="Object" line="127">
                <params>
                    <param name="longname" type="String"/>
                </params>
                <comment line="128">
                    Check if we have already loaded it.                    
                </comment>
                <comment line="134">
                    We need to have at least gtk.icon.&lt;stock_id&gt;.&lt;size&gt;.&lt;orientation&gt;                    
                </comment>
                <comment line="140">
                    Parse out the stock icon size we are looking for.                    
                </comment>
                <comment line="148">
                    Direction.                    
                </comment>
                <comment line="152">
                    Load the stock icon.                    
                </comment>
                <comment line="155">
                    Create the desktop property for the icon.                    
                </comment>
                <declaration name="result" type="Object" line="129"/>
                <scope line="130"/>
                <declaration name="str" type="String" line="135"/>
                <scope line="136"/>
                <declaration name="size" type="int" line="141"/>
                <scope line="142"/>
                <scope line="144"/>
                <declaration name="dir" type="TextDirection" line="149"/>
                <declaration name="img" type="BufferedImage" line="153"/>
                <scope line="154"/>
            </method>
            <javadoc line="161">
                Returns a BufferedImage which contains the Gtk icon requested.  If no
                  such icon exists or an error occurs loading the icon the result will
                  be null.                
                <param>
                    filename                    
                </param>
                <return>
                    The icon or null if it was not found or loaded.                    
                </return>
            </javadoc>
            <method name="getGTKIcon" type="BufferedImage" line="169">
                <params>
                    <param name="filename" type="String"/>
                </params>
                <comment line="174">
                    Call the native method to load the icon.                    
                </comment>
                <comment line="181">
                    Return local image the callback loaded the icon into.                    
                </comment>
                <scope line="170"/>
                <scope line="173">
                    <scope line="175">
                        <scope line="176"/>
                    </scope>
                </scope>
            </method>
            <javadoc line="185">
                Returns a BufferedImage which contains the Gtk stock icon requested.
                  If no such stock icon exists the result will be null.                
                <param>
                    widgetType one of WidgetType values defined in GTKNativeEngine or
                      -1 for system default stock icon.                    
                </param>
                <param>
                    stockId String which defines the stock id of the gtk item.
                      For a complete list reference the API at www.gtk.org for StockItems.                    
                </param>
                <param>
                    iconSize One of the GtkIconSize values defined in GTKConstants                    
                </param>
                <param>
                    textDirection One of the TextDirection values defined in
                      GTKConstants                    
                </param>
                <param>
                    detail Render detail that is passed to the native engine (feel
                      free to pass null)                    
                </param>
                <return>
                    The stock icon or null if it was not found or loaded.                    
                </return>
            </javadoc>
            <method name="getStockIcon" type="BufferedImage" line="202">
                <params>
                    <param name="widgetType" type="int"/>
                    <param name="stockId" type="String"/>
                    <param name="iconSize" type="int"/>
                    <param name="direction" type="int"/>
                    <param name="detail" type="String"/>
                </params>
                <comment line="207">
                    Call the native method to load the icon.                    
                </comment>
                <comment line="214">
                    Return local image the callback loaded the icon into.                    
                </comment>
                <comment line="215">
                    set by loadIconCallback                    
                </comment>
                <scope line="203"/>
                <scope line="206">
                    <scope line="208">
                        <scope line="209"/>
                    </scope>
                </scope>
            </method>
            <javadoc line="218">
                This method is used by JNI as a callback from load_stock_icon.
                  Image data is passed back to us via this method and loaded into the
                  local BufferedImage and then returned via getStockIcon.
                  Do NOT call this method directly.                
            </javadoc>
            <method name="loadIconCallback" type="void" line="226">
                <params>
                    <param name="data" type="byte[]"/>
                    <param name="width" type="int"/>
                    <param name="height" type="int"/>
                    <param name="rowStride" type="int"/>
                    <param name="bps" type="int"/>
                    <param name="channels" type="int"/>
                    <param name="alpha" type="boolean"/>
                </params>
                <comment line="227">
                    Reset the stock image to null.                    
                </comment>
                <comment line="230">
                    Create a new BufferedImage based on the data returned from the                    
                </comment>
                <comment line="231">
                    JNI call.                    
                </comment>
                <comment line="233">
                    Maybe test # channels to determine band offsets?                    
                </comment>
                <comment line="241">
                    Set the local image so we can return it later from                    
                </comment>
                <comment line="242">
                    getStockIcon().                    
                </comment>
                <declaration name="dataBuf" type="DataBuffer" line="232"/>
                <declaration name="raster" type="WritableRaster" line="234"/>
                <declaration name="colorModel" type="ColorModel" line="237"/>
            </method>
            <method name="check_gtk" type="boolean" line="246"/>
            <method name="load_gtk" type="boolean" line="247"/>
            <method name="unload_gtk" type="boolean" line="248"/>
            <method name="load_gtk_icon" type="boolean" line="249"/>
            <method name="load_stock_icon" type="boolean" line="250"/>
            <method name="nativeSync" type="void" line="253"/>
            <method name="sync" type="void" line="255">
                <comment line="256">
                    flush the X11 buffer                    
                </comment>
                <comment line="258">
                    now flush the OGL pipeline (this is a no-op if OGL is not enabled)                    
                </comment>
            </method>
            <declaration name="FONTCONFIGAAHINT" type="String" line="268"/>
            <method name="getDesktopAAHints" type="RenderingHints" line="269">
                <comment line="274">
                    On a KDE desktop running KWin the rendering hint will
                     have been set as property &quot;fontconfigAntialias&quot;.
                     No need to parse further in this case.                    
                </comment>
                <comment line="282">
                    no Gnome or KDE Desktop properties available.                    
                </comment>
                <comment line="286">
                    0 means off, 1 means some ON. What would any other value mean?
                     If we require &quot;1&quot; to enable AA then some new value would cause
                     us to default to &quot;OFF&quot;. I don&apos;t think that&apos;s the best guess.
                     So if its !=0 then lets assume AA.                    
                </comment>
                <comment line="309">
                                        
                </comment>
                <declaration name="aaValue" type="Object" line="271"/>
                <scope line="273">
                    <scope line="279"/>
                    <scope line="281"/>
                </scope>
                <declaration name="aa" type="boolean" line="291"/>
                <declaration name="aaHint" type="Object" line="293"/>
                <scope line="294">
                    <declaration name="subpixOrder" type="String" line="295"/>
                    <scope line="298"/>
                    <scope line="300"/>
                    <scope line="302"/>
                    <scope line="304"/>
                    <scope line="306"/>
                    <scope line="308"/>
                </scope>
                <scope line="312"/>
            </method>
            <method name="gtkCheckVersionImpl" type="boolean" line="318"/>
            <javadoc line="321">
                Returns {@code true} if the GTK+ library is compatible with the given
                  version.                
                <param>
                    majorThe required major version.                    
                </param>
                <param>
                    minorThe required minor version.                    
                </param>
                <param>
                    microThe required micro version.                    
                </param>
                <return>
                    {@code true} if the GTK+ library is compatible with the given
                      version.                    
                </return>
            </javadoc>
            <method name="checkGtkVersion" type="boolean" line="334">
                <params>
                    <param name="major" type="int"/>
                    <param name="minor" type="int"/>
                    <param name="micro" type="int"/>
                </params>
                <scope line="335"/>
            </method>
        </class>
    </source>