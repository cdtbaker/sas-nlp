<?xml version="1.0" encoding="UTF-8"?>
    <source package="">
        <import package="java.util.Arrays"/>
        <import package="java.util.concurrent.ForkJoinPool"/>
        <import package="java.util.concurrent.ForkJoinTask"/>
        <import package="java.util.concurrent.RecursiveAction"/>
        <class name="MergeSort" line="37">
            <javadoc line="37">
                A class for sorting an array of {@code ints} in parallel.
                  A {@code ForkJoinPool} is used for the parallelism, using the merge sort
                  algorithm the array is split into halves and a new sub task is created
                  for each part. Each sub task is dispatched to the {@code ForkJoinPool}which will schedule the task to a {@code Thread}.
                  This happens until the size of the array is at most 2
                  elements long. At this point the array is sorted using a simple compare
                  and possibly a swap. The tasks then finish by using insert sort to
                  merge the two just sorted arrays.
                  The idea of this class is to demonstrate the usage of RecursiveAction not
                  to implement the best possible parallel merge sort. This version creates
                  a small array for each merge (creating a lot of objects), this could
                  be avoided by keeping a single array.                
            </javadoc>
            <declaration name="pool" type="ForkJoinPool" line="54"/>
            <class name="MergeSortTask" line="56">
                <extends class="RecursiveAction"/>
                <declaration name="array" type="int[]" line="57"/>
                <declaration name="low" type="int" line="58"/>
                <declaration name="high" type="int" line="59"/>
                <declaration name="THRESHOLD" type="int" line="60"/>
                <javadoc line="62">
                    Creates a {@code MergeSortTask} containing the array and the bounds of the array                    
                    <param>
                        array the array to sort                        
                    </param>
                    <param>
                        low the lower element to start sorting at                        
                    </param>
                    <param>
                        high the non-inclusive high element to sort to                        
                    </param>
                </javadoc>
                <method name="MergeSortTask" type="constructor" line="69">
                    <params>
                        <param name="array" type="int[]"/>
                        <param name="low" type="int"/>
                        <param name="high" type="int"/>
                    </params>
                </method>
                <method name="compute" type="void" line="76">
                    <comment line="81">
                        Execute the sub tasks and wait for them to finish                        
                    </comment>
                    <comment line="83">
                        Then merge the results                        
                    </comment>
                    <scope line="77"/>
                    <scope line="79">
                        <declaration name="middle" type="int" line="80"/>
                    </scope>
                </method>
                <javadoc line="88">
                    Merges the two sorted arrays this.low, middle - 1 and middle, this.high - 1                    
                    <param>
                        middle the index in the array where the second sorted list begins                        
                    </param>
                </javadoc>
                <method name="merge" type="void" line="92">
                    <params>
                        <param name="middle" type="int"/>
                    </params>
                    <comment line="94">
                        the arrays are already correctly sorted, so we can skip the merge                        
                    </comment>
                    <scope line="93"/>
                    <declaration name="copy" type="int[]" line="96"/>
                    <declaration name="copyLow" type="int" line="98"/>
                    <declaration name="copyHigh" type="int" line="99"/>
                    <declaration name="copyMiddle" type="int" line="100"/>
                    <scope line="102">
                        <scope line="103"/>
                        <scope line="105"/>
                    </scope>
                </method>
            </class>
            <javadoc line="112">
                Creates a {@code MergeSort} containing a ForkJoinPool with the indicated parallelism level                
                <param>
                    parallelism the parallelism level used                    
                </param>
            </javadoc>
            <method name="MergeSort" type="constructor" line="116">
                <params>
                    <param name="parallelism" type="int"/>
                </params>
            </method>
            <javadoc line="120">
                Sorts all the elements of the given array using the ForkJoin framework                
                <param>
                    array the array to sort                    
                </param>
            </javadoc>
            <method name="sort" type="void" line="124">
                <params>
                    <param name="array" type="int[]"/>
                </params>
                <declaration name="job" type="ForkJoinTask&lt;Void&gt;" line="125"/>
            </method>
        </class>
    </source>