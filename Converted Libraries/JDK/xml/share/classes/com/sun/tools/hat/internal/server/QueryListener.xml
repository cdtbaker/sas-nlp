<?xml version="1.0" encoding="UTF-8"?>
    <source package="com.sun.tools.hat.internal.server">
        <import package="java.net.Socket"/>
        <import package="java.net.ServerSocket"/>
        <import package="java.net.InetAddress"/>
        <import package="java.io.InputStream"/>
        <import package="java.io.BufferedInputStream"/>
        <import package="java.io.IOException"/>
        <import package="java.io.Writer"/>
        <import package="java.io.BufferedWriter"/>
        <import package="java.io.PrintWriter"/>
        <import package="java.io.OutputStream"/>
        <import package="java.io.OutputStreamWriter"/>
        <import package="java.io.BufferedOutputStream"/>
        <import package="com.sun.tools.hat.internal.model.Snapshot"/>
        <import package="com.sun.tools.hat.internal.oql.OQLEngine"/>
        <class name="QueryListener" line="58">
            <implements interface="Runnable"/>
            <declaration name="snapshot" type="Snapshot" line="61"/>
            <declaration name="engine" type="OQLEngine" line="62"/>
            <declaration name="port" type="int" line="63"/>
            <method name="QueryListener" type="constructor" line="65">
                <params>
                    <param name="port" type="int"/>
                </params>
                <comment line="67">
                    Client will setModel when it&apos;s ready                    
                </comment>
                <comment line="68">
                    created when snapshot is set                    
                </comment>
            </method>
            <method name="setModel" type="void" line="71">
                <params>
                    <param name="ss" type="Snapshot"/>
                </params>
                <scope line="73"/>
            </method>
            <method name="run" type="void" line="78">
                <scope line="79"/>
                <scope line="81"/>
            </method>
            <method name="waitForRequests" type="void" line="87">
                <comment line="102">
                    If the thread is no longer alive, we&apos;ll get a                    
                </comment>
                <comment line="103">
                    NullPointerException                    
                </comment>
                <declaration name="ss" type="ServerSocket" line="88"/>
                <declaration name="last" type="Thread" line="89"/>
                <scope line="90">
                    <declaration name="s" type="Socket" line="91"/>
                    <declaration name="t" type="Thread" line="92"/>
                    <scope line="93"/>
                    <scope line="95">
                        <scope line="97">
                            <scope line="98"/>
                            <scope line="100"/>
                        </scope>
                    </scope>
                </scope>
            </method>
        </class>
    </source>