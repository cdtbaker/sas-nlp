<?xml version="1.0" encoding="UTF-8"?>
    <source package="com.sun.tools.jdi">
        <import package="com.sun.jdi"/>
        <import package="com.sun.jdi.event"/>
        <import package="com.sun.jdi.connect.spi.Connection"/>
        <import package="com.sun.jdi.event.EventSet"/>
        <import package="java.util"/>
        <import package="java.io.IOException"/>
        <class name="TargetVM" line="8">
            <implements interface="Runnable"/>
            <declaration name="waitingQueue" type="Map&lt;String,Packet&gt;" line="9"/>
            <declaration name="shouldListen" type="boolean" line="10"/>
            <declaration name="eventQueues" type="List&lt;EventQueue&gt;" line="11"/>
            <declaration name="vm" type="VirtualMachineImpl" line="12"/>
            <declaration name="connection" type="Connection" line="13"/>
            <declaration name="readerThread" type="Thread" line="14"/>
            <declaration name="eventController" type="EventController" line="15"/>
            <declaration name="eventsHeld" type="boolean" line="16"/>
            <declaration name="OVERLOADED_QUEUE" type="int" line="17"/>
            <declaration name="UNDERLOADED_QUEUE" type="int" line="18"/>
            <method name="TargetVM" type="constructor" line="19">
                <params>
                    <param name="vm" type="VirtualMachineImpl"/>
                    <param name="connection" type="Connection"/>
                </params>
            </method>
            <method name="start" type="void" line="25"/>
            <method name="dumpPacket" type="void" line="28">
                <params>
                    <param name="packet" type="Packet"/>
                    <param name="sending" type="boolean"/>
                </params>
                <declaration name="direction" type="String" line="29"/>
                <scope line="30"/>
                <scope line="33">
                    <declaration name="type" type="String" line="34"/>
                </scope>
                <declaration name="line" type="StringBuffer" line="37"/>
                <scope line="39">
                    <scope line="40">
                        <declaration name="len" type="int" line="45"/>
                        <scope line="46"/>
                    </scope>
                    <declaration name="val" type="int" line="50"/>
                    <declaration name="str" type="String" line="51"/>
                    <scope line="52"/>
                </scope>
                <scope line="58"/>
            </method>
            <method name="run" type="void" line="62">
                <scope line="63"/>
                <declaration name="p" type="Packet" line="66"/>
                <declaration name="idString" type="String" line="67"/>
                <scope line="68">
                    <declaration name="done" type="boolean" line="69"/>
                    <scope line="70">
                        <declaration name="b" type="byte" line="71"/>
                        <scope line="72"/>
                    </scope>
                    <scope line="77"/>
                    <scope line="80">
                        <scope line="82"/>
                        <scope line="85"/>
                    </scope>
                    <scope line="89"/>
                    <scope line="92"/>
                    <scope line="95">
                        <scope line="98"/>
                        <scope line="102"/>
                        <scope line="109"/>
                    </scope>
                </scope>
                <scope line="115">
                    <declaration name="iter" type="Iterator" line="116"/>
                    <scope line="117"/>
                </scope>
                <scope line="121">
                    <declaration name="iter" type="Iterator" line="122"/>
                    <scope line="123">
                        <declaration name="packet" type="Packet" line="124"/>
                        <scope line="125"/>
                    </scope>
                </scope>
                <scope line="131"/>
            </method>
            <method name="handleVMCommand" type="void" line="135">
                <params>
                    <param name="p" type="Packet"/>
                </params>
            </method>
            <method name="handleEventCmdSet" type="void" line="145">
                <params>
                    <param name="p" type="Packet"/>
                </params>
                <declaration name="eventSet" type="EventSet" line="146"/>
                <scope line="147"/>
            </method>
            <method name="eventController" type="EventController" line="151">
                <scope line="152"/>
            </method>
            <method name="controlEventFlow" type="void" line="157">
                <params>
                    <param name="maxQueueSize" type="int"/>
                </params>
                <scope line="158"/>
                <scope line="162"/>
            </method>
            <method name="notifyDequeueEventSet" type="void" line="167">
                <declaration name="maxQueueSize" type="int" line="168"/>
                <scope line="169">
                    <declaration name="iter" type="Iterator" line="170"/>
                    <scope line="171">
                        <declaration name="queue" type="EventQueueImpl" line="172"/>
                    </scope>
                </scope>
            </method>
            <method name="queueEventSet" type="void" line="178">
                <params>
                    <param name="eventSet" type="EventSet"/>
                </params>
                <declaration name="maxQueueSize" type="int" line="179"/>
                <scope line="180">
                    <declaration name="iter" type="Iterator" line="181"/>
                    <scope line="182">
                        <declaration name="queue" type="EventQueueImpl" line="183"/>
                    </scope>
                </scope>
            </method>
            <method name="send" type="void" line="190">
                <params>
                    <param name="packet" type="Packet"/>
                </params>
                <declaration name="id" type="String" line="191"/>
                <scope line="192"/>
                <scope line="195"/>
                <scope line="198"/>
                <scope line="201"/>
            </method>
            <method name="waitForReply" type="void" line="205">
                <params>
                    <param name="packet" type="Packet"/>
                </params>
                <scope line="206">
                    <scope line="207">
                        <scope line="208"/>
                        <scope line="211"/>
                    </scope>
                    <scope line="215"/>
                </scope>
            </method>
            <method name="addEventQueue" type="void" line="220">
                <params>
                    <param name="queue" type="EventQueueImpl"/>
                </params>
                <scope line="221"/>
            </method>
            <method name="stopListening" type="void" line="226">
                <scope line="227"/>
                <scope line="231"/>
                <scope line="234"/>
            </method>
            <class name="EventController" line="237">
                <extends class="Thread"/>
                <declaration name="vm" type="VirtualMachineImpl" line="238"/>
                <declaration name="controlRequest" type="int" line="239"/>
                <method name="EventController" type="constructor" line="240">
                    <params>
                        <param name="vm" type="VirtualMachineImpl"/>
                    </params>
                </method>
                <method name="hold" type="void" line="247"/>
                <method name="release" type="void" line="251"/>
                <method name="run" type="void" line="255">
                    <scope line="256">
                        <declaration name="currentRequest" type="int" line="257"/>
                        <scope line="258">
                            <scope line="259">
                                <scope line="260"/>
                                <scope line="263"/>
                            </scope>
                        </scope>
                        <scope line="269">
                            <scope line="270"/>
                            <scope line="273"/>
                        </scope>
                        <scope line="277"/>
                    </scope>
                </method>
            </class>
        </class>
    </source>