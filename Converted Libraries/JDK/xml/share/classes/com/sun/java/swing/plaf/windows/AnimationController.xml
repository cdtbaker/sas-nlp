<?xml version="1.0" encoding="UTF-8"?>
    <source package="com.sun.java.swing.plaf.windows">
        <import package="java.security.AccessController"/>
        <import package="sun.security.action.GetBooleanAction"/>
        <import package="java.util"/>
        <import package="java.beans.PropertyChangeListener"/>
        <import package="java.beans.PropertyChangeEvent"/>
        <import package="java.awt"/>
        <import package="java.awt.event"/>
        <import package="javax.swing"/>
        <import package="sun.swing.UIClientPropertyKey"/>
        <import package="com.sun.java.swing.plaf.windows.TMSchema.State"/>
        <import package="com.sun.java.swing.plaf.windows.TMSchema.State"/>
        <import package="com.sun.java.swing.plaf.windows.TMSchema.Part"/>
        <import package="com.sun.java.swing.plaf.windows.TMSchema.Prop"/>
        <import package="com.sun.java.swing.plaf.windows.XPStyle.Skin"/>
        <import package="sun.awt.AppContext"/>
        <class name="AnimationController" line="49">
            <comment line="83">
                this timer is used to cause repaint on animated components                
            </comment>
            <comment line="84">
                30 repaints per second should give smooth animation affect                
            </comment>
            <comment line="145">
                for scrollbar up, down, left and right button pictures are                
            </comment>
            <comment line="146">
                defined by states.  It seems that theme has duration defined                
            </comment>
            <comment line="147">
                only for up button states thus we doing this translation here.                
            </comment>
            <implements interface="ActionListener"/>
            <implements interface="PropertyChangeListener"/>
            <javadoc line="49">
                A class to help mimic Vista theme animations.  The only kind of
                  animation it handles for now is &apos;transition&apos; animation (this seems
                  to be the only animation which Vista theme can do). This is when
                  one picture fadein over another one in some period of time.
                  According to
                  https://connect.microsoft.com/feedback/ViewFeedback.aspx?FeedbackID=86852&amp;SiteID=4
                  The animations are all linear.
                  This class has a number of responsibilities.
                  &lt;ul&gt;
                  &lt;li&gt; It trigger rapaint for the UI components involved in the animation
                  &lt;li&gt; It tracks the animation state for every UI component involved in the
                  animation and paints {@code Skin} in new {@code State} over the{@code Skin} in last {@code State} using{@code AlphaComposite.SrcOver.derive(alpha)} where {code alpha}
                  depends on the state of animation
                  &lt;/ul&gt;                
                <author>
                    Igor Kushnirskiy                    
                </author>
            </javadoc>
            <declaration name="VISTA_ANIMATION_DISABLED" type="boolean" line="72"/>
            <declaration name="ANIMATION_CONTROLLER_KEY" type="Object" line="76"/>
            <declaration name="animationStateMap" type="Map&lt;JComponent,Map&lt;Part,AnimationState&gt;&gt;" line="79"/>
            <declaration name="timer" type="javax.swing.Timer" line="84"/>
            <method name="getAnimationController" type="AnimationController" line="87">
                <declaration name="appContext" type="AppContext" line="88"/>
                <declaration name="obj" type="Object" line="89"/>
                <scope line="90"/>
            </method>
            <method name="AnimationController" type="constructor" line="97">
                <comment line="100">
                    we need to dispose the controller on l&amp;f change                    
                </comment>
            </method>
            <method name="triggerAnimation" type="void" line="105">
                <params>
                    <param name="c" type="JComponent"/>
                    <param name="part" type="Part"/>
                    <param name="newState" type="State"/>
                </params>
                <comment line="108">
                    idk: we can not handle tabs animation because                    
                </comment>
                <comment line="109">
                    the same (component,part) is used to handle all the tabs                    
                </comment>
                <comment line="110">
                    and we can not track the states                    
                </comment>
                <comment line="111">
                    Vista theme might have transition duration for toolbar buttons                    
                </comment>
                <comment line="112">
                    but native application does not seem to animate them                    
                </comment>
                <comment line="121">
                    it seems for DEFAULTED button state Vista does animation from                    
                </comment>
                <comment line="122">
                    HOT                    
                </comment>
                <comment line="128">
                    Only button might have DEFAULTED state                    
                </comment>
                <comment line="129">
                    idk: do not know how to get the value from Vista                    
                </comment>
                <comment line="130">
                    one second seems plausible value                    
                </comment>
                <scope line="107"/>
                <declaration name="controller" type="AnimationController" line="115"/>
                <declaration name="oldState" type="State" line="117"/>
                <scope line="118">
                    <scope line="120"/>
                    <scope line="125">
                        <declaration name="duration" type="long" line="126"/>
                        <scope line="127"/>
                        <scope line="132"/>
                    </scope>
                </scope>
            </method>
            <method name="normalizeState" type="State" line="147">
                <params>
                    <param name="state" type="State"/>
                </params>
                <comment line="151">
                                        
                </comment>
                <comment line="153">
                                        
                </comment>
                <comment line="159">
                                        
                </comment>
                <comment line="161">
                                        
                </comment>
                <comment line="167">
                                        
                </comment>
                <comment line="169">
                                        
                </comment>
                <comment line="175">
                                        
                </comment>
                <comment line="177">
                                        
                </comment>
                <declaration name="rv" type="State" line="148"/>
            </method>
            <method name="getState" type="State" line="189">
                <params>
                    <param name="component" type="JComponent"/>
                    <param name="part" type="Part"/>
                </params>
                <declaration name="rv" type="State" line="190"/>
                <declaration name="tmpObject" type="Object" line="191"/>
                <scope line="193"/>
            </method>
            <method name="putState" type="void" line="200">
                <params>
                    <param name="component" type="JComponent"/>
                    <param name="part" type="Part"/>
                    <param name="state" type="State"/>
                </params>
            </method>
            <method name="startAnimation" type="void" line="209">
                <params>
                    <param name="component" type="JComponent"/>
                    <param name="part" type="Part"/>
                    <param name="startState" type="State"/>
                    <param name="endState" type="State"/>
                    <param name="millis" type="long"/>
                </params>
                <declaration name="isForwardAndReverse" type="boolean" line="210"/>
                <scope line="211"/>
                <declaration name="map" type="Map&lt;Part,AnimationState&gt;" line="214"/>
                <scope line="215">
                    <scope line="216">
                        <scope line="218"/>
                    </scope>
                </scope>
                <scope line="224"/>
                <scope line="230"/>
            </method>
            <method name="paintSkin" type="void" line="236">
                <params>
                    <param name="component" type="JComponent"/>
                    <param name="skin" type="Skin"/>
                    <param name="g" type="Graphics"/>
                    <param name="dx" type="int"/>
                    <param name="dy" type="int"/>
                    <param name="dw" type="int"/>
                    <param name="dh" type="int"/>
                    <param name="state" type="State"/>
                </params>
                <scope line="237"/>
                <declaration name="controller" type="AnimationController" line="242"/>
                <scope line="243">
                    <declaration name="animationState" type="AnimationState" line="244"/>
                    <declaration name="map" type="Map&lt;Part,AnimationState&gt;" line="245"/>
                    <scope line="247"/>
                    <scope line="250"/>
                    <scope line="252"/>
                </scope>
            </method>
            <method name="propertyChange" type="void" line="258">
                <params>
                    <param name="e" type="PropertyChangeEvent"/>
                </params>
                <scope line="260"/>
            </method>
            <method name="actionPerformed" type="void" line="265">
                <params>
                    <param name="e" type="ActionEvent"/>
                </params>
                <comment line="293">
                    animation is done for the component                    
                </comment>
                <declaration name="componentsToRemove" type="java.util.List&lt;JComponent&gt;" line="266"/>
                <declaration name="partsToRemove" type="java.util.List&lt;Part&gt;" line="267"/>
                <scope line="268">
                    <scope line="270"/>
                    <declaration name="map" type="Map&lt;Part,AnimationState&gt;" line="273"/>
                    <scope line="276">
                        <scope line="277"/>
                    </scope>
                    <scope line="283">
                        <scope line="284">
                            <scope line="285"/>
                        </scope>
                    </scope>
                    <scope line="291">
                        <scope line="292">
                            <scope line="294"/>
                        </scope>
                        <scope line="298">
                            <scope line="299"/>
                        </scope>
                    </scope>
                </scope>
                <scope line="305">
                    <scope line="306"/>
                </scope>
                <scope line="310"/>
            </method>
            <method name="dispose" type="void" line="315">
                <scope line="318"/>
            </method>
            <class name="AnimationState" line="324">
                <comment line="328">
                    animation duration in nanoseconds                    
                </comment>
                <comment line="331">
                    animatin start time in nanoseconds                    
                </comment>
                <comment line="334">
                    direction the alpha value is changing                    
                </comment>
                <comment line="335">
                    forward  - from 0 to 1                    
                </comment>
                <comment line="336">
                    !forward - from 1 to 0                    
                </comment>
                <comment line="339">
                    if isForwardAndReverse the animation continually goes                    
                </comment>
                <comment line="340">
                    forward and reverse. alpha value is changing from 0 to 1 then                    
                </comment>
                <comment line="341">
                    from 1 to 0 and so forth                    
                </comment>
                <declaration name="startState" type="State" line="325"/>
                <declaration name="duration" type="long" line="328"/>
                <declaration name="startTime" type="long" line="331"/>
                <declaration name="isForward" type="boolean" line="336"/>
                <declaration name="isForwardAndReverse" type="boolean" line="341"/>
                <declaration name="progress" type="float" line="343"/>
                <method name="AnimationState" type="constructor" line="347">
                    <params>
                        <param name="startState" type="State"/>
                        <param name="milliseconds" type="long"/>
                        <param name="isForwardAndReverse" type="boolean"/>
                    </params>
                </method>
                <method name="updateProgress" type="void" line="357">
                    <comment line="367">
                        in case time was reset                        
                    </comment>
                    <scope line="360"/>
                    <declaration name="currentTime" type="long" line="363"/>
                    <scope line="368">
                        <scope line="370"/>
                    </scope>
                </method>
                <method name="paintSkin" type="void" line="378">
                    <params>
                        <param name="skin" type="Skin"/>
                        <param name="_g" type="Graphics"/>
                        <param name="dx" type="int"/>
                        <param name="dy" type="int"/>
                        <param name="dw" type="int"/>
                        <param name="dh" type="int"/>
                        <param name="state" type="State"/>
                    </params>
                    <scope line="382">
                        <declaration name="g" type="Graphics2D" line="383"/>
                        <declaration name="alpha" type="float" line="385"/>
                        <scope line="386"/>
                        <scope line="388"/>
                    </scope>
                    <scope line="394"/>
                </method>
                <method name="isDone" type="boolean" line="398"/>
            </class>
            <class name="PartUIClientPropertyKey" line="405">
                <comment line="328">
                    animation duration in nanoseconds                    
                </comment>
                <comment line="331">
                    animatin start time in nanoseconds                    
                </comment>
                <comment line="334">
                    direction the alpha value is changing                    
                </comment>
                <comment line="335">
                    forward  - from 0 to 1                    
                </comment>
                <comment line="336">
                    !forward - from 1 to 0                    
                </comment>
                <comment line="339">
                    if isForwardAndReverse the animation continually goes                    
                </comment>
                <comment line="340">
                    forward and reverse. alpha value is changing from 0 to 1 then                    
                </comment>
                <comment line="341">
                    from 1 to 0 and so forth                    
                </comment>
                <implements interface="UIClientPropertyKey"/>
                <declaration name="map" type="Map&lt;Part,PartUIClientPropertyKey&gt;" line="408"/>
                <method name="getKey" type="PartUIClientPropertyKey" line="411">
                    <params>
                        <param name="part" type="Part"/>
                    </params>
                    <declaration name="rv" type="PartUIClientPropertyKey" line="412"/>
                    <scope line="413"/>
                </method>
                <declaration name="part" type="Part" line="420"/>
                <method name="PartUIClientPropertyKey" type="constructor" line="421">
                    <params>
                        <param name="part" type="Part"/>
                    </params>
                </method>
                <method name="toString" type="String" line="424"/>
            </class>
        </class>
    </source>