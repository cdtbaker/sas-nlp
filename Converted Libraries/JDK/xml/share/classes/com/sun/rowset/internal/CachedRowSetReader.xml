<?xml version="1.0" encoding="UTF-8"?>
    <source package="com.sun.rowset.internal">
        <import package="java.sql"/>
        <import package="javax.sql"/>
        <import package="javax.naming"/>
        <import package="java.io"/>
        <import package="java.lang.reflect"/>
        <import package="com.sun.rowset"/>
        <import package="javax.sql.rowset"/>
        <import package="javax.sql.rowset.spi"/>
        <class name="CachedRowSetReader" line="10">
            <implements interface="RowSetReader"/>
            <implements interface="Serializable"/>
            <javadoc line="10">
                The facility called by the &lt;code&gt;RIOptimisticProvider&lt;/code&gt; object
                  internally to read data into it.  The calling &lt;code&gt;RowSet&lt;/code&gt; object
                  must have implemented the &lt;code&gt;RowSetInternal&lt;/code&gt; interface
                  and have the standard &lt;code&gt;CachedRowSetReader&lt;/code&gt; object set as its
                  reader.
                  &lt;P&gt;
                  This implementation always reads all rows of the data source,
                  and it assumes that the &lt;code&gt;command&lt;/code&gt; property for the caller
                  is set with a query that is appropriate for execution by a
                  &lt;code&gt;PreparedStatement&lt;/code&gt; object.
                  &lt;P&gt;
                  Typically the &lt;code&gt;SyncFactory&lt;/code&gt; manages the &lt;code&gt;RowSetReader&lt;/code&gt; and
                  the &lt;code&gt;RowSetWriter&lt;/code&gt; implementations using &lt;code&gt;SyncProvider&lt;/code&gt; objects.
                  Standard JDBC RowSet implementations provide an object instance of this
                  reader by invoking the &lt;code&gt;SyncProvider.getRowSetReader()&lt;/code&gt; method.                
                <author>
                    Jonathan Bruce                    
                </author>
                <see>
                    javax.sql.rowset.spi.SyncProvider                    
                </see>
                <see>
                    javax.sql.rowset.spi.SyncFactory                    
                </see>
                <see>
                    javax.sql.rowset.spi.SyncFactoryException                    
                </see>
            </javadoc>
            <declaration name="writerCalls" type="int" line="32"/>
            <javadoc line="32">
                The field that keeps track of whether the writer associated with
                  this &lt;code&gt;CachedRowSetReader&lt;/code&gt; object&apos;s rowset has been called since
                  the rowset was populated.
                  &lt;P&gt;
                  When this &lt;code&gt;CachedRowSetReader&lt;/code&gt; object reads data into
                  its rowset, it sets the field &lt;code&gt;writerCalls&lt;/code&gt; to 0.
                  When the writer associated with the rowset is called to write
                  data back to the underlying data source, its &lt;code&gt;writeData&lt;/code&gt;
                  method calls the method &lt;code&gt;CachedRowSetReader.reset&lt;/code&gt;,
                  which increments &lt;code&gt;writerCalls&lt;/code&gt; and returns &lt;code&gt;true&lt;/code&gt;
                  if &lt;code&gt;writerCalls&lt;/code&gt; is 1. Thus, &lt;code&gt;writerCalls&lt;/code&gt; equals
                  1 after the first call to &lt;code&gt;writeData&lt;/code&gt; that occurs
                  after the rowset has had data read into it.                
                <serial>
                                        
                </serial>
            </javadoc>
            <declaration name="userCon" type="boolean" line="49"/>
            <declaration name="startPosition" type="int" line="50"/>
            <declaration name="resBundle" type="JdbcRowSetResourceBundle" line="51"/>
            <method name="CachedRowSetReader" type="constructor" line="52">
                <scope line="53"/>
                <scope line="56"/>
            </method>
            <javadoc line="60">
                Reads data from a data source and populates the given
                  &lt;code&gt;RowSet&lt;/code&gt; object with that data.
                  This method is called by the rowset internally when
                  the application invokes the method &lt;code&gt;execute&lt;/code&gt;
                  to read a new set of rows.
                  &lt;P&gt;
                  After clearing the rowset of its contents, if any, and setting
                  the number of writer calls to &lt;code&gt;0&lt;/code&gt;, this reader calls
                  its &lt;code&gt;connect&lt;/code&gt; method to make
                  a connection to the rowset&apos;s data source. Depending on which
                  of the rowset&apos;s properties have been set, the &lt;code&gt;connect&lt;/code&gt;
                  method will use a &lt;code&gt;DataSource&lt;/code&gt; object or the
                  &lt;code&gt;DriverManager&lt;/code&gt; facility to make a connection to the
                  data source.
                  &lt;P&gt;
                  Once the connection to the data source is made, this reader
                  executes the query in the calling &lt;code&gt;CachedRowSet&lt;/code&gt; object&apos;s
                  &lt;code&gt;command&lt;/code&gt; property. Then it calls the rowset&apos;s
                  &lt;code&gt;populate&lt;/code&gt; method, which reads data from the
                  &lt;code&gt;ResultSet&lt;/code&gt; object produced by executing the rowset&apos;s
                  command. The rowset is then populated with this data.
                  &lt;P&gt;
                  This method&apos;s final act is to close the connection it made, thus
                  leaving the rowset disconnected from its data source.                
                <param>
                    caller a &lt;code&gt;RowSet&lt;/code&gt; object that has implemented
                      the &lt;code&gt;RowSetInternal&lt;/code&gt; interface and had
                      this &lt;code&gt;CachedRowSetReader&lt;/code&gt; object set as
                      its reader                    
                </param>
                <throws>
                    SQLException if there is a database access error, there is a
                      problem making the connection, or the command property has not
                      been set                    
                </throws>
            </javadoc>
            <method name="readData" type="void" line="93">
                <params>
                    <param name="caller" type="RowSetInternal"/>
                </params>
                <declaration name="con" type="Connection" line="94"/>
                <scope line="95">
                    <declaration name="crs" type="CachedRowSet" line="96"/>
                    <scope line="97"/>
                    <scope line="104"/>
                    <scope line="107"/>
                    <declaration name="pstmt" type="PreparedStatement" line="110"/>
                    <scope line="112"/>
                    <scope line="118"/>
                    <scope line="121">
                        <declaration name="rs" type="ResultSet" line="122"/>
                        <scope line="123"/>
                        <scope line="126">
                            <scope line="129"/>
                            <scope line="135"/>
                        </scope>
                    </scope>
                    <scope line="143"/>
                    <scope line="147"/>
                    <scope line="150"/>
                </scope>
                <scope line="155"/>
                <scope line="158">
                    <scope line="159">
                        <scope line="160">
                            <scope line="161">
                                <scope line="162"/>
                            </scope>
                            <scope line="166"/>
                        </scope>
                    </scope>
                    <scope line="172"/>
                </scope>
            </method>
            <javadoc line="176">
                Checks to see if the writer associated with this reader needs
                  to reset its state.  The writer will need to initialize its state
                  if new contents have been read since the writer was last called.
                  This method is called by the writer that was registered with
                  this reader when components were being wired together.                
                <return>
                    &lt;code&gt;true&lt;/code&gt; if writer associated with this reader needs
                      to reset the values of its fields; &lt;code&gt;false&lt;/code&gt; otherwise                    
                </return>
                <throws>
                    SQLException if an access error occurs                    
                </throws>
            </javadoc>
            <method name="reset" type="boolean" line="186"/>
            <javadoc line="190">
                Establishes a connection with the data source for the given
                  &lt;code&gt;RowSet&lt;/code&gt; object.  If the rowset&apos;s &lt;code&gt;dataSourceName&lt;/code&gt;
                  property has been set, this method uses the JNDI API to retrieve the
                  &lt;code&gt;DataSource&lt;/code&gt; object that it can use to make the connection.
                  If the url, username, and password properties have been set, this
                  method uses the &lt;code&gt;DriverManager.getConnection&lt;/code&gt; method to
                  make the connection.
                  &lt;P&gt;
                  This method is used internally by the reader and writer associated with
                  the calling &lt;code&gt;RowSet&lt;/code&gt; object; an application never calls it
                  directly.                
                <param>
                    caller a &lt;code&gt;RowSet&lt;/code&gt; object that has implemented
                      the &lt;code&gt;RowSetInternal&lt;/code&gt; interface and had
                      this &lt;code&gt;CachedRowSetReader&lt;/code&gt; object set as
                      its reader                    
                </param>
                <return>
                    a &lt;code&gt;Connection&lt;/code&gt; object that represents a connection
                      to the caller&apos;s data source                    
                </return>
                <throws>
                    SQLException if an access error occurs                    
                </throws>
            </javadoc>
            <method name="connect" type="Connection" line="210">
                <params>
                    <param name="caller" type="RowSetInternal"/>
                </params>
                <scope line="211"/>
                <scope line="215">
                    <scope line="216">
                        <declaration name="ctx" type="Context" line="217"/>
                        <declaration name="ds" type="DataSource" line="218"/>
                        <scope line="219"/>
                        <scope line="222"/>
                    </scope>
                    <scope line="226">
                        <declaration name="sqlEx" type="SQLException" line="227"/>
                    </scope>
                </scope>
                <scope line="232"/>
                <scope line="235"/>
            </method>
            <javadoc line="239">
                Sets the parameter placeholders
                  in the rowset&apos;s command (the given &lt;code&gt;PreparedStatement&lt;/code&gt;
                  object) with the parameters in the given array.
                  This method, called internally by the method
                  &lt;code&gt;CachedRowSetReader.readData&lt;/code&gt;, reads each parameter, and
                  based on its type, determines the correct
                  &lt;code&gt;PreparedStatement.setXXX&lt;/code&gt; method to use for setting
                  that parameter.                
                <param>
                    params an array of parameters to be used with the given
                      &lt;code&gt;PreparedStatement&lt;/code&gt; object                    
                </param>
                <param>
                    pstmt  the &lt;code&gt;PreparedStatement&lt;/code&gt; object that is the
                      command for the calling rowset and into which
                      the given parameters are to be set                    
                </param>
                <throws>
                    SQLException if an access error occurs                    
                </throws>
            </javadoc>
            <method name="decodeParams" type="void" line="255">
                <params>
                    <param name="params" type="Object[]"/>
                    <param name="pstmt" type="PreparedStatement"/>
                </params>
                <declaration name="arraySize" type="int" line="256"/>
                <declaration name="param" type="Object[]" line="257"/>
                <scope line="258">
                    <scope line="259">
                        <scope line="261">
                            <scope line="262"/>
                            <scope line="266">
                                <scope line="268"/>
                                <scope line="273"/>
                            </scope>
                            <scope line="277"/>
                            <scope line="281"/>
                        </scope>
                        <scope line="286">
                            <scope line="287"/>
                            <scope line="291"/>
                            <scope line="303"/>
                        </scope>
                        <scope line="309"/>
                    </scope>
                    <scope line="314"/>
                </scope>
            </method>
            <javadoc line="319">
                Assists in determining whether the current connection was created by this
                  CachedRowSet to ensure incorrect connections are not prematurely terminated.                
                <return>
                    a boolean giving the status of whether the connection has been closed.                    
                </return>
            </javadoc>
            <method name="getCloseConnection" type="boolean" line="324"/>
            <javadoc line="328">
                This sets the start position in the ResultSet from where to begin. This is
                  called by the Reader in the CachedRowSetImpl to set the position on the page
                  to begin populating from.                
                <param>
                    pos integer indicating the position in the &lt;code&gt;ResultSet&lt;/code&gt; to begin
                      populating from.                    
                </param>
            </javadoc>
            <method name="setStartPosition" type="void" line="335">
                <params>
                    <param name="pos" type="int"/>
                </params>
            </method>
            <method name="readObject" type="void" line="338">
                <params>
                    <param name="ois" type="ObjectInputStream"/>
                </params>
                <scope line="340"/>
                <scope line="343"/>
            </method>
            <declaration name="serialVersionUID" type="long" line="347"/>
        </class>
    </source>