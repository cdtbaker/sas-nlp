<?xml version="1.0" encoding="UTF-8"?>
    <source package="com.sun.servicetag">
        <import package="java.io"/>
        <import package="java.util.ArrayList"/>
        <import package="java.util.Date"/>
        <import package="java.util.HashSet"/>
        <import package="java.util.List"/>
        <import package="java.util.Properties"/>
        <import package="java.util.Set"/>
        <import package="com.sun.servicetag.Util"/>
        <import package="com.sun.servicetag.RegistrationDocument"/>
        <class name="Registry" line="11">
            <javadoc line="11">
                A service tag registry is a XML-based registry containing
                  the list of {@link ServiceTag service tags} installed in the system.
                  The {@code Registry} class provides interfaces
                  to add, remove, update, and get a service tag from a service tag
                  registry.
                  This {@code Registry} class may not be supported
                  on all systems. The {@link #isSupported} method
                  can be called to determine if it is supported.
                  &lt;p&gt;
                  A registry may implement restrictions to only allow certain users
                  to {@link #updateServiceTag update} and
                  to {@link #removeServiceTag remove} a service tag record. Typically,
                  only the owner of the service tag, the owner of the registry
                  and superuser are authorized to update or remove a service tag in
                  the registry.                
                <see>
                    <a href="https://sn-tools.central.sun.com/twiki/bin/view/ServiceTags/ServiceTagDevGuideHelper">
                      Service Tag User Guide</a>                    
                </see>
            </javadoc>
            <declaration name="STCLIENT_SOLARIS" type="String" line="31"/>
            <declaration name="STCLIENT_LINUX" type="String" line="32"/>
            <declaration name="ST_ERR_NOT_AUTH" type="int" line="33"/>
            <declaration name="ST_ERR_REC_NOT_FOUND" type="int" line="34"/>
            <declaration name="INSTANCE_URN_DESC" type="String" line="35"/>
            <declaration name="initialized" type="boolean" line="36"/>
            <declaration name="stclient" type="File" line="37"/>
            <declaration name="stclientPath" type="String" line="38"/>
            <declaration name="registry" type="Registry" line="39"/>
            <declaration name="SVCTAG_STCLIENT_CMD" type="String" line="40"/>
            <declaration name="SVCTAG_STHELPER_SUPPORTED" type="String" line="41"/>
            <method name="Registry" type="constructor" line="42"/>
            <method name="getSTclient" type="String" line="44">
                <scope line="45">
                    <declaration name="os" type="String" line="46"/>
                    <scope line="47"/>
                    <scope line="50"/>
                    <scope line="53"/>
                    <scope line="56">
                        <scope line="57"/>
                    </scope>
                </scope>
                <declaration name="supportsHelperClass" type="boolean" line="63"/>
                <scope line="64"/>
                <scope line="67"/>
                <declaration name="path" type="String" line="70"/>
                <scope line="71"/>
                <scope line="74"/>
            </method>
            <javadoc line="79">
                Returns the system service tag registry. The {@code Registry} class
                  may not be supported on some platforms; use the {@link #isSupported}method to determine if it is supported.                
                <return>
                    the {@code Registry} object for the system service tag registry.                    
                </return>
                <throws>
                    UnsupportedOperationException if the {@code Registry} class is
                      not supported.                    
                </throws>
            </javadoc>
            <method name="getSystemRegistry" type="Registry" line="86">
                <scope line="87"/>
                <scope line="90"/>
            </method>
            <javadoc line="94">
                Returns {@code true} if the {@code Registry} class is supported on this system.                
                <return>
                    {@code true} if the {@code Registry} class is supported;
                      otherwise, return {@code false}.                    
                </return>
            </javadoc>
            <method name="isSupported" type="boolean" line="99"/>
            <method name="getCommandList" type="List<String>" line="102">
                <declaration name="command" type="List&lt;String&gt;" line="103"/>
                <scope line="104">
                    <declaration name="cmd" type="String" line="105"/>
                    <declaration name="len" type="int" line="106"/>
                    <declaration name="i" type="int" line="107"/>
                    <scope line="108">
                        <declaration name="separator" type="char" line="109"/>
                        <scope line="110"/>
                        <declaration name="j" type="int" line="114"/>
                        <scope line="115">
                            <scope line="116"/>
                        </scope>
                        <scope line="120"/>
                        <scope line="123"/>
                        <scope line="126">
                            <scope line="127"/>
                        </scope>
                    </scope>
                    <scope line="132">
                        <scope line="134"/>
                    </scope>
                </scope>
                <scope line="139"/>
            </method>
            <method name="checkReturnError" type="ServiceTag" line="144">
                <params>
                    <param name="exitValue" type="int"/>
                    <param name="output" type="String"/>
                    <param name="st" type="ServiceTag"/>
                </params>
                <scope line="149"/>
                <scope line="152"/>
            </method>
            <javadoc line="159">
                Adds a service tag to this registry.
                  If the given service tag has an empty &lt;tt&gt;instance_urn&lt;/tt&gt;,
                  this helper class will generate a URN and place it in the
                  copy of the service tag in this registry.
                  This method will return the {@code ServiceTag} representing
                  the service tag entry to this registry.                
                <param>
                    st {@code ServiceTag} object                    
                </param>
                <return>
                    a {@code ServiceTag} object representing the service tag
                      entry to this registry.                    
                </return>
                <throws>
                    IllegalArgumentException if a service tag of the same
                      <tt>instance_urn</tt> already exists in this registry.                    
                </throws>
                <throws>
                    java.io.IOException if an I/O error occurs in this operation.                    
                </throws>
            </javadoc>
            <method name="addServiceTag" type="ServiceTag" line="173">
                <params>
                    <param name="st" type="ServiceTag"/>
                </params>
                <declaration name="command" type="List&lt;String&gt;" line="174"/>
                <scope line="176">
                    <declaration name="sysSvcTag" type="ServiceTag" line="177"/>
                    <scope line="178"/>
                </scope>
                <scope line="190"/>
                <scope line="196"/>
                <declaration name="in" type="BufferedReader" line="208"/>
                <scope line="209">
                    <declaration name="pb" type="ProcessBuilder" line="210"/>
                    <declaration name="p" type="Process" line="211"/>
                    <declaration name="output" type="String" line="212"/>
                    <scope line="213"/>
                    <declaration name="urn" type="String" line="217"/>
                    <scope line="218">
                        <declaration name="line" type="String" line="220"/>
                        <scope line="221">
                            <scope line="223"/>
                        </scope>
                        <scope line="228"/>
                    </scope>
                    <scope line="233"/>
                </scope>
                <scope line="237">
                    <scope line="238"/>
                </scope>
            </method>
            <javadoc line="243">
                Removes a service tag of the given &lt;tt&gt;instance_urn&lt;/tt&gt; from this
                  registry.                
                <param>
                    instanceURN the <tt>instance_urn</tt> of the service tag
                      to be removed.                    
                </param>
                <return>
                    the {@code ServiceTag} object removed from this registry;
                      or {@code null} if the service tag does not exist in this registry.                    
                </return>
                <throws>
                    UnauthorizedAccessException if the user is not authorized to
                      remove the service tag of the given <tt>instance_urn</tt>
                      from this registry.                    
                </throws>
                <throws>
                    java.io.IOException if an I/O error occurs in this operation.                    
                </throws>
            </javadoc>
            <method name="removeServiceTag" type="ServiceTag" line="255">
                <params>
                    <param name="instanceURN" type="String"/>
                </params>
                <declaration name="st" type="ServiceTag" line="256"/>
                <scope line="257"/>
                <declaration name="command" type="List&lt;String&gt;" line="260"/>
                <declaration name="pb" type="ProcessBuilder" line="264"/>
                <declaration name="p" type="Process" line="265"/>
                <declaration name="output" type="String" line="266"/>
                <scope line="267"/>
                <scope line="271"/>
                <scope line="274"/>
            </method>
            <javadoc line="278">
                Updates the &lt;tt&gt;product_defined_instance_id&lt;/tt&gt; in the service tag
                  of the specified &lt;tt&gt;instance_urn&lt;/tt&gt; in this registry.                
                <param>
                    instanceURN the <tt>instance_urn</tt> of the service tag to be updated.                    
                </param>
                <param>
                    productDefinedInstanceID the value of the
                      <tt>product_defined_instance_id</tt> to be set.                    
                </param>
                <return>
                    the updated {@code ServiceTag} object;
                      or {@code null} if the service tag does not exist in this
                      registry.                    
                </return>
                <throws>
                    UnauthorizedAccessException if the user is not authorized to
                      update the service tag from this registry.                    
                </throws>
                <throws>
                    IOException if an I/O error occurs in this operation.                    
                </throws>
            </javadoc>
            <method name="updateServiceTag" type="ServiceTag" line="291">
                <params>
                    <param name="instanceURN" type="String"/>
                    <param name="productDefinedInstanceID" type="String"/>
                </params>
                <declaration name="svcTag" type="ServiceTag" line="292"/>
                <scope line="293"/>
                <declaration name="command" type="List&lt;String&gt;" line="296"/>
                <scope line="301"/>
                <scope line="304"/>
                <declaration name="pb" type="ProcessBuilder" line="307"/>
                <declaration name="p" type="Process" line="308"/>
                <declaration name="output" type="String" line="309"/>
                <scope line="310"/>
                <scope line="314"/>
                <scope line="317"/>
            </method>
            <javadoc line="321">
                Returns a {@code ServiceTag} object of the given  &lt;tt&gt;instance_urn&lt;/tt&gt;
                  in this registry.                
                <param>
                    instanceURN the  <tt>instance_urn</tt> of the service tag                    
                </param>
                <return>
                    a {@code ServiceTag} object of the given <tt>instance_urn</tt>
                      in this registry; or {@code null} if not found.                    
                </return>
                <throws>
                    java.io.IOException if an I/O error occurs in this operation.                    
                </throws>
            </javadoc>
            <method name="getServiceTag" type="ServiceTag" line="329">
                <params>
                    <param name="instanceURN" type="String"/>
                </params>
                <scope line="330"/>
                <declaration name="command" type="List&lt;String&gt;" line="333"/>
                <declaration name="pb" type="ProcessBuilder" line="337"/>
                <declaration name="p" type="Process" line="338"/>
                <declaration name="output" type="String" line="339"/>
                <scope line="340"/>
                <scope line="344"/>
                <scope line="347"/>
            </method>
            <method name="parseServiceTag" type="ServiceTag" line="351">
                <params>
                    <param name="output" type="String"/>
                </params>
                <declaration name="in" type="BufferedReader" line="352"/>
                <scope line="353">
                    <declaration name="props" type="Properties" line="354"/>
                    <declaration name="line" type="String" line="356"/>
                    <scope line="357">
                        <scope line="358">
                            <declaration name="ss" type="String[]" line="359"/>
                            <scope line="360"/>
                            <scope line="363"/>
                        </scope>
                    </scope>
                    <declaration name="urn" type="String" line="368"/>
                    <declaration name="productName" type="String" line="369"/>
                    <declaration name="productVersion" type="String" line="370"/>
                    <declaration name="productURN" type="String" line="371"/>
                    <declaration name="productParent" type="String" line="372"/>
                    <declaration name="productParentURN" type="String" line="373"/>
                    <declaration name="productDefinedInstanceID" type="String" line="374"/>
                    <declaration name="productVendor" type="String" line="375"/>
                    <declaration name="platformArch" type="String" line="376"/>
                    <declaration name="container" type="String" line="377"/>
                    <declaration name="source" type="String" line="378"/>
                    <declaration name="installerUID" type="int" line="379"/>
                    <declaration name="timestamp" type="Date" line="380"/>
                </scope>
                <scope line="383">
                    <scope line="384"/>
                </scope>
            </method>
            <javadoc line="389">
                Returns the service tags of the specified
                  &lt;tt&gt;product_urn&lt;/tt&gt; in this registry.                
                <param>
                    productURN the  <tt>product_urn</tt> to look up                    
                </param>
                <return>
                    a {@code Set} of {@code ServiceTag} objects
                      of the specified <tt>product_urn</tt> in this registry.                    
                </return>
                <throws>
                    java.io.IOException if an I/O error occurs in this operation.                    
                </throws>
            </javadoc>
            <method name="findServiceTags" type="Set<ServiceTag>" line="397">
                <params>
                    <param name="productURN" type="String"/>
                </params>
                <scope line="398"/>
                <declaration name="command" type="List&lt;String&gt;" line="401"/>
                <declaration name="in" type="BufferedReader" line="405"/>
                <scope line="406">
                    <declaration name="pb" type="ProcessBuilder" line="407"/>
                    <declaration name="p" type="Process" line="408"/>
                    <declaration name="output" type="String" line="409"/>
                    <declaration name="instances" type="Set&lt;ServiceTag&gt;" line="410"/>
                    <scope line="411">
                        <declaration name="line" type="String" line="413"/>
                        <scope line="414">
                            <declaration name="s" type="String" line="415"/>
                            <scope line="416"/>
                        </scope>
                    </scope>
                    <scope line="421"/>
                </scope>
                <scope line="426">
                    <scope line="427"/>
                </scope>
            </method>
        </class>
    </source>