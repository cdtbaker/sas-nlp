<?xml version="1.0" encoding="UTF-8"?>
    <source package="com.sun.media.sound">
        <import package="java.util.Arrays"/>
        <class name="SoftReverb" line="3">
            <implements interface="SoftAudioProcessor"/>
            <javadoc line="3">
                Reverb effect based on allpass/comb filters. First audio is send to 8
                  parelled comb filters and then mixed together and then finally send thru 3
                  different allpass filters.                
                <author>
                    Karl Helgason                    
                </author>
            </javadoc>
            <class name="Delay" line="10">
                <declaration name="delaybuffer" type="float[]" line="11"/>
                <declaration name="rovepos" type="int" line="12"/>
                <method name="Delay" type="constructor" line="13"/>
                <method name="setDelay" type="void" line="16">
                    <params>
                        <param name="delay" type="int"/>
                    </params>
                </method>
                <method name="processReplace" type="void" line="21">
                    <params>
                        <param name="inout" type="float[]"/>
                    </params>
                    <declaration name="len" type="int" line="23"/>
                    <declaration name="rnlen" type="int" line="24"/>
                    <declaration name="rovepos" type="int" line="25"/>
                    <scope line="26">
                        <declaration name="x" type="float" line="27"/>
                    </scope>
                </method>
            </class>
            <class name="AllPass" line="35">
                <declaration name="delaybuffer" type="float[]" line="36"/>
                <declaration name="delaybuffersize" type="int" line="37"/>
                <declaration name="rovepos" type="int" line="38"/>
                <declaration name="feedback" type="float" line="39"/>
                <method name="AllPass" type="constructor" line="40">
                    <params>
                        <param name="size" type="int"/>
                    </params>
                </method>
                <method name="setFeedBack" type="void" line="44">
                    <params>
                        <param name="feedback" type="float"/>
                    </params>
                </method>
                <method name="processReplace" type="void" line="47">
                    <params>
                        <param name="inout" type="float"/>
                    </params>
                    <declaration name="len" type="int" line="48"/>
                    <declaration name="delaybuffersize" type="int" line="49"/>
                    <declaration name="rovepos" type="int" line="50"/>
                    <scope line="51">
                        <declaration name="delayout" type="float" line="52"/>
                        <declaration name="input" type="float" line="53"/>
                    </scope>
                </method>
                <method name="processReplace" type="void" line="60">
                    <params>
                        <param name="in" type="float"/>
                        <param name="out" type="float"/>
                    </params>
                    <declaration name="len" type="int" line="61"/>
                    <declaration name="delaybuffersize" type="int" line="62"/>
                    <declaration name="rovepos" type="int" line="63"/>
                    <scope line="64">
                        <declaration name="delayout" type="float" line="65"/>
                        <declaration name="input" type="float" line="66"/>
                    </scope>
                </method>
            </class>
            <class name="Comb" line="74">
                <declaration name="delaybuffer" type="float[]" line="75"/>
                <declaration name="delaybuffersize" type="int" line="76"/>
                <declaration name="rovepos" type="int" line="77"/>
                <declaration name="feedback" type="float" line="78"/>
                <declaration name="filtertemp" type="float" line="79"/>
                <declaration name="filtercoeff1" type="float" line="80"/>
                <declaration name="filtercoeff2" type="float" line="81"/>
                <method name="Comb" type="constructor" line="82">
                    <params>
                        <param name="size" type="int"/>
                    </params>
                </method>
                <method name="setFeedBack" type="void" line="86">
                    <params>
                        <param name="feedback" type="float"/>
                    </params>
                </method>
                <method name="processMix" type="void" line="90">
                    <params>
                        <param name="in" type="float"/>
                        <param name="out" type="float"/>
                    </params>
                    <declaration name="len" type="int" line="91"/>
                    <declaration name="delaybuffersize" type="int" line="92"/>
                    <declaration name="rovepos" type="int" line="93"/>
                    <declaration name="filtertemp" type="float" line="94"/>
                    <declaration name="filtercoeff1" type="float" line="95"/>
                    <declaration name="filtercoeff2" type="float" line="96"/>
                    <scope line="97">
                        <declaration name="delayout" type="float" line="98"/>
                    </scope>
                </method>
                <method name="processReplace" type="void" line="107">
                    <params>
                        <param name="in" type="float"/>
                        <param name="out" type="float"/>
                    </params>
                    <declaration name="len" type="int" line="108"/>
                    <declaration name="delaybuffersize" type="int" line="109"/>
                    <declaration name="rovepos" type="int" line="110"/>
                    <declaration name="filtertemp" type="float" line="111"/>
                    <declaration name="filtercoeff1" type="float" line="112"/>
                    <declaration name="filtercoeff2" type="float" line="113"/>
                    <scope line="114">
                        <declaration name="delayout" type="float" line="115"/>
                    </scope>
                </method>
                <method name="setDamp" type="void" line="124">
                    <params>
                        <param name="val" type="float"/>
                    </params>
                </method>
            </class>
            <declaration name="roomsize" type="float" line="129"/>
            <declaration name="damp" type="float" line="130"/>
            <declaration name="gain" type="float" line="131"/>
            <declaration name="delay" type="Delay" line="132"/>
            <declaration name="combL" type="Comb[]" line="133"/>
            <declaration name="combR" type="Comb[]" line="134"/>
            <declaration name="allpassL" type="AllPass[]" line="135"/>
            <declaration name="allpassR" type="AllPass[]" line="136"/>
            <declaration name="input" type="float[]" line="137"/>
            <declaration name="out" type="float[]" line="138"/>
            <declaration name="pre1" type="float[]" line="139"/>
            <declaration name="pre2" type="float[]" line="140"/>
            <declaration name="pre3" type="float[]" line="141"/>
            <declaration name="denormal_flip" type="boolean" line="142"/>
            <declaration name="mix" type="boolean" line="143"/>
            <declaration name="inputA" type="SoftAudioBuffer" line="144"/>
            <declaration name="left" type="SoftAudioBuffer" line="145"/>
            <declaration name="right" type="SoftAudioBuffer" line="146"/>
            <declaration name="dirty" type="boolean" line="147"/>
            <declaration name="dirty_roomsize" type="float" line="148"/>
            <declaration name="dirty_damp" type="float" line="149"/>
            <declaration name="dirty_predelay" type="float" line="150"/>
            <declaration name="dirty_gain" type="float" line="151"/>
            <declaration name="samplerate" type="float" line="152"/>
            <declaration name="light" type="boolean" line="153"/>
            <method name="init" type="void" line="154">
                <params>
                    <param name="samplerate" type="float"/>
                    <param name="controlrate" type="float"/>
                </params>
                <declaration name="freqscale" type="double" line="156"/>
                <declaration name="stereospread" type="int" line="157"/>
                <scope line="187"/>
            </method>
            <method name="setInput" type="void" line="193">
                <params>
                    <param name="pin" type="int"/>
                    <param name="input" type="SoftAudioBuffer"/>
                </params>
            </method>
            <method name="setOutput" type="void" line="196">
                <params>
                    <param name="pin" type="int"/>
                    <param name="output" type="SoftAudioBuffer"/>
                </params>
            </method>
            <method name="setMixMode" type="void" line="200">
                <params>
                    <param name="mix" type="boolean"/>
                </params>
            </method>
            <declaration name="silent" type="boolean" line="203"/>
            <method name="processAudio" type="void" line="204">
                <declaration name="silent_input" type="boolean" line="205"/>
                <scope line="207">
                    <scope line="208"/>
                </scope>
                <declaration name="inputA" type="float[]" line="214"/>
                <declaration name="left" type="float[]" line="215"/>
                <declaration name="right" type="float[]" line="216"/>
                <declaration name="numsamples" type="int" line="217"/>
                <declaration name="again" type="float" line="219"/>
                <scope line="224">
                    <scope line="225"/>
                    <scope line="238"/>
                    <scope line="244">
                        <declaration name="p" type="float" line="245"/>
                        <declaration name="m" type="float" line="246"/>
                    </scope>
                </scope>
                <scope line="251">
                    <scope line="253"/>
                </scope>
                <scope line="264">
                    <scope line="266">
                        <declaration name="v" type="float" line="267"/>
                        <scope line="268"/>
                    </scope>
                </scope>
            </method>
            <method name="globalParameterControlChange" type="void" line="275">
                <params>
                    <param name="slothpath" type="int[]"/>
                    <param name="param" type="long"/>
                    <param name="value" type="long"/>
                </params>
                <scope line="276">
                    <scope line="277">
                        <scope line="278">
                            <scope line="279"/>
                            <scope line="286"/>
                            <scope line="293"/>
                            <scope line="300"/>
                            <scope line="307"/>
                            <scope line="314"/>
                        </scope>
                        <scope line="322"/>
                    </scope>
                </scope>
            </method>
            <method name="processControlLogic" type="void" line="329">
                <scope line="330"/>
            </method>
            <method name="setRoomSize" type="void" line="338">
                <params>
                    <param name="value" type="float"/>
                </params>
                <scope line="340"/>
            </method>
            <method name="setPreDelay" type="void" line="345">
                <params>
                    <param name="value" type="float"/>
                </params>
            </method>
            <method name="setGain" type="void" line="348">
                <params>
                    <param name="gain" type="float"/>
                </params>
            </method>
            <method name="setDamp" type="void" line="351">
                <params>
                    <param name="value" type="float"/>
                </params>
                <declaration name="x" type="double" line="352"/>
                <declaration name="cx" type="double" line="353"/>
                <scope line="357"/>
            </method>
            <method name="setLightMode" type="void" line="362">
                <params>
                    <param name="light" type="boolean"/>
                </params>
            </method>
        </class>
    </source>