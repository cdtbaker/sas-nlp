<?xml version="1.0" encoding="UTF-8"?>
    <source package="com.sun.media.sound">
        <import package="java.util.Arrays"/>
        <class name="SoftChorus" line="3">
            <implements interface="SoftAudioProcessor"/>
            <javadoc line="3">
                A chorus effect made using LFO and variable delay. One for each channel
                  (left,right), with different starting phase for stereo effect.                
                <author>
                    Karl Helgason                    
                </author>
            </javadoc>
            <class name="VariableDelay" line="9">
                <declaration name="delaybuffer" type="float[]" line="10"/>
                <declaration name="rovepos" type="int" line="11"/>
                <declaration name="gain" type="float" line="12"/>
                <declaration name="rgain" type="float" line="13"/>
                <declaration name="delay" type="float" line="14"/>
                <declaration name="lastdelay" type="float" line="15"/>
                <declaration name="feedback" type="float" line="16"/>
                <method name="VariableDelay" type="constructor" line="17">
                    <params>
                        <param name="maxbuffersize" type="int"/>
                    </params>
                </method>
                <method name="setDelay" type="void" line="20">
                    <params>
                        <param name="delay" type="float"/>
                    </params>
                </method>
                <method name="setFeedBack" type="void" line="23">
                    <params>
                        <param name="feedback" type="float"/>
                    </params>
                </method>
                <method name="setGain" type="void" line="26">
                    <params>
                        <param name="gain" type="float"/>
                    </params>
                </method>
                <method name="setReverbSendGain" type="void" line="29">
                    <params>
                        <param name="rgain" type="float"/>
                    </params>
                </method>
                <method name="processMix" type="void" line="32">
                    <params>
                        <param name="in" type="float[]"/>
                        <param name="out" type="float[]"/>
                        <param name="rout" type="float[]"/>
                    </params>
                    <declaration name="gain" type="float" line="33"/>
                    <declaration name="delay" type="float" line="34"/>
                    <declaration name="feedback" type="float" line="35"/>
                    <declaration name="delaybuffer" type="float[]" line="36"/>
                    <declaration name="len" type="int" line="37"/>
                    <declaration name="delaydelta" type="float" line="38"/>
                    <declaration name="rnlen" type="int" line="39"/>
                    <declaration name="rovepos" type="int" line="40"/>
                    <scope line="41">
                        <declaration name="r" type="float" line="42"/>
                        <declaration name="ri" type="int" line="43"/>
                        <declaration name="s" type="float" line="44"/>
                        <declaration name="a" type="float" line="45"/>
                        <declaration name="b" type="float" line="46"/>
                        <declaration name="o" type="float" line="47"/>
                    </scope>
                    <scope line="53">
                        <declaration name="r" type="float" line="54"/>
                        <declaration name="ri" type="int" line="55"/>
                        <declaration name="s" type="float" line="56"/>
                        <declaration name="a" type="float" line="57"/>
                        <declaration name="b" type="float" line="58"/>
                        <declaration name="o" type="float" line="59"/>
                    </scope>
                </method>
                <method name="processReplace" type="void" line="69">
                    <params>
                        <param name="in" type="float[]"/>
                        <param name="out" type="float[]"/>
                        <param name="rout" type="float[]"/>
                    </params>
                </method>
            </class>
            <class name="LFODelay" line="75">
                <declaration name="phase" type="double" line="76"/>
                <declaration name="phase_step" type="double" line="77"/>
                <declaration name="depth" type="double" line="78"/>
                <declaration name="vdelay" type="VariableDelay" line="79"/>
                <declaration name="samplerate" type="double" line="80"/>
                <declaration name="controlrate" type="double" line="81"/>
                <method name="LFODelay" type="constructor" line="82">
                    <params>
                        <param name="samplerate" type="double"/>
                        <param name="controlrate" type="double"/>
                    </params>
                </method>
                <method name="setDepth" type="void" line="87">
                    <params>
                        <param name="depth" type="double"/>
                    </params>
                </method>
                <method name="setRate" type="void" line="91">
                    <params>
                        <param name="rate" type="double"/>
                    </params>
                    <declaration name="g" type="double" line="92"/>
                </method>
                <method name="setPhase" type="void" line="95">
                    <params>
                        <param name="phase" type="double"/>
                    </params>
                </method>
                <method name="setFeedBack" type="void" line="98">
                    <params>
                        <param name="feedback" type="float"/>
                    </params>
                </method>
                <method name="setGain" type="void" line="101">
                    <params>
                        <param name="gain" type="float"/>
                    </params>
                </method>
                <method name="setReverbSendGain" type="void" line="104">
                    <params>
                        <param name="rgain" type="float"/>
                    </params>
                </method>
                <method name="processMix" type="void" line="107">
                    <params>
                        <param name="in" type="float[]"/>
                        <param name="out" type="float[]"/>
                        <param name="rout" type="float[]"/>
                    </params>
                </method>
                <method name="processReplace" type="void" line="113">
                    <params>
                        <param name="in" type="float[]"/>
                        <param name="out" type="float[]"/>
                        <param name="rout" type="float[]"/>
                    </params>
                </method>
            </class>
            <declaration name="mix" type="boolean" line="120"/>
            <declaration name="inputA" type="SoftAudioBuffer" line="121"/>
            <declaration name="left" type="SoftAudioBuffer" line="122"/>
            <declaration name="right" type="SoftAudioBuffer" line="123"/>
            <declaration name="reverb" type="SoftAudioBuffer" line="124"/>
            <declaration name="vdelay1L" type="LFODelay" line="125"/>
            <declaration name="vdelay1R" type="LFODelay" line="126"/>
            <declaration name="rgain" type="float" line="127"/>
            <declaration name="dirty" type="boolean" line="128"/>
            <declaration name="dirty_vdelay1L_rate" type="double" line="129"/>
            <declaration name="dirty_vdelay1R_rate" type="double" line="130"/>
            <declaration name="dirty_vdelay1L_depth" type="double" line="131"/>
            <declaration name="dirty_vdelay1R_depth" type="double" line="132"/>
            <declaration name="dirty_vdelay1L_feedback" type="float" line="133"/>
            <declaration name="dirty_vdelay1R_feedback" type="float" line="134"/>
            <declaration name="dirty_vdelay1L_reverbsendgain" type="float" line="135"/>
            <declaration name="dirty_vdelay1R_reverbsendgain" type="float" line="136"/>
            <declaration name="controlrate" type="float" line="137"/>
            <method name="init" type="void" line="138">
                <params>
                    <param name="samplerate" type="float"/>
                    <param name="controlrate" type="float"/>
                </params>
            </method>
            <method name="globalParameterControlChange" type="void" line="148">
                <params>
                    <param name="slothpath" type="int[]"/>
                    <param name="param" type="long"/>
                    <param name="value" type="long"/>
                </params>
                <scope line="149">
                    <scope line="150">
                        <scope line="151"/>
                        <scope line="193"/>
                        <scope line="198"/>
                        <scope line="203"/>
                        <scope line="208"/>
                    </scope>
                </scope>
            </method>
            <method name="processControlLogic" type="void" line="217">
                <scope line="218"/>
            </method>
            <declaration name="silentcounter" type="double" line="230"/>
            <method name="processAudio" type="void" line="231">
                <scope line="232">
                    <scope line="234">
                        <scope line="235"/>
                    </scope>
                </scope>
                <declaration name="inputA" type="float[]" line="243"/>
                <declaration name="left" type="float[]" line="244"/>
                <declaration name="right" type="float[]" line="245"/>
                <declaration name="reverb" type="float[]" line="246"/>
                <scope line="247"/>
                <scope line="251"/>
            </method>
            <method name="setInput" type="void" line="256">
                <params>
                    <param name="pin" type="int"/>
                    <param name="input" type="SoftAudioBuffer"/>
                </params>
            </method>
            <method name="setMixMode" type="void" line="259">
                <params>
                    <param name="mix" type="boolean"/>
                </params>
            </method>
            <method name="setOutput" type="void" line="262">
                <params>
                    <param name="pin" type="int"/>
                    <param name="output" type="SoftAudioBuffer"/>
                </params>
            </method>
        </class>
    </source>