<?xml version="1.0" encoding="UTF-8"?>
    <source package="com.sun.jndi.ldap">
        <import package="java.io.IOException"/>
        <import package="java.util.concurrent.BlockingQueue"/>
        <import package="java.util.concurrent.LinkedBlockingQueue"/>
        <import package="javax.naming.CommunicationException"/>
        <class name="LdapRequest" line="33">
            <comment line="36">
                Set/read in synchronized Connection methods                
            </comment>
            <comment line="37">
                read-only                
            </comment>
            <declaration name="next" type="LdapRequest" line="35"/>
            <declaration name="msgId" type="int" line="36"/>
            <declaration name="gotten" type="int" line="38"/>
            <declaration name="replies" type="BlockingQueue&lt;BerDecoder&gt;" line="39"/>
            <declaration name="highWatermark" type="int" line="40"/>
            <declaration name="cancelled" type="boolean" line="41"/>
            <declaration name="pauseAfterReceipt" type="boolean" line="42"/>
            <declaration name="completed" type="boolean" line="43"/>
            <method name="LdapRequest" type="constructor" line="45">
                <params>
                    <param name="msgId" type="int"/>
                    <param name="pause" type="boolean"/>
                </params>
            </method>
            <method name="LdapRequest" type="constructor" line="49">
                <params>
                    <param name="msgId" type="int"/>
                    <param name="pause" type="boolean"/>
                    <param name="replyQueueCapacity" type="int"/>
                </params>
                <comment line="57">
                    80% capacity                    
                </comment>
                <scope line="52"/>
                <scope line="54"/>
            </method>
            <method name="cancel" type="void" line="61">
                <comment line="64">
                    Unblock reader of pending request                    
                </comment>
                <comment line="65">
                    Should only ever have atmost one waiter                    
                </comment>
            </method>
            <method name="addReplyBer" type="boolean" line="69">
                <params>
                    <param name="ber" type="BerDecoder"/>
                </params>
                <comment line="74">
                    Add a new reply to the queue of unprocessed replies.                    
                </comment>
                <comment line="78">
                    ignore                    
                </comment>
                <comment line="81">
                    peek at the BER buffer to check if it is a SearchResultDone PDU                    
                </comment>
                <comment line="87">
                    ignore                    
                </comment>
                <comment line="91">
                    notify anyone waiting for reply                    
                </comment>
                <comment line="92">
                    If a queue capacity has been set then trigger a pause when the
                     queue has filled to 80% capacity. Later, when the queue has drained
                     then the reader gets unpaused.                    
                </comment>
                <comment line="98">
                    trigger the pause                    
                </comment>
                <scope line="70"/>
                <scope line="75"/>
                <scope line="77"/>
                <scope line="82"/>
                <scope line="86"/>
                <scope line="97"/>
            </method>
            <method name="getReplyBer" type="BerDecoder" line="103">
                <comment line="109">
                    Remove a reply if the queue is not empty.
                     poll returns null if queue is empty.                    
                </comment>
                <scope line="104"/>
                <declaration name="reply" type="BerDecoder" line="113"/>
            </method>
            <method name="hasSearchCompleted" type="boolean" line="117"/>
        </class>
    </source>