<?xml version="1.0" encoding="UTF-8"?>
    <source package="com.sun.jndi.toolkit.url">
        <import package="java.net.MalformedURLException"/>
        <class name="Uri" line="32">
            <comment line="192">
                Parses a URI string and sets this object&apos;s fields accordingly.                
            </comment>
            <comment line="246">
                Debug
                public static void main(String args[]) throws MalformedURLException {
                for (int i = 0; i &lt; args.length; i++) {
                Uri uri = new Uri(args[i]);
                
                String h = (uri.getHost() != null) ? uri.getHost() : &quot;&quot;;
                String p = (uri.getPort() != -1) ? (&quot;:&quot; + uri.getPort()) : &quot;&quot;;
                String a = uri.hasAuthority ? (&quot;&quot; + h + p) : &quot;&quot;;
                String q = (uri.getQuery() != null) ? uri.getQuery() : &quot;&quot;;
                
                String str = uri.getScheme() + &quot;:&quot; + a + uri.getPath() + q;
                if (! uri.toString().equals(str)) {
                System.out.println(str);
                }
                System.out.println(h);
                }
                }                
            </comment>
            <javadoc line="32">
                A Uri object represents an absolute Uniform Resource Identifier
                  (URI) as defined by RFC 2396 and updated by RFC 2373 and RFC 2732.
                  The most commonly used form of URI is the Uniform Resource Locator (URL).
                  &lt;p&gt; The java.net.URL class cannot be used to parse URIs since it
                  requires the installation of URL stream handlers that may not be
                  available.  The hack of getting around this by temporarily
                  replacing the scheme part of a URI is not appropriate here: JNDI
                  service providers must work on older Java platforms, and we want
                  new features and bug fixes that are not available in old versions
                  of the URL class.
                  &lt;p&gt; It may be appropriate to drop this code in favor of the
                  java.net.URI class.  The changes would need to be written so as to
                  still run on pre-1.4 platforms not containing that class.
                  &lt;p&gt; The format of an absolute URI (see the RFCs mentioned above) is:
                  &lt;p&gt;&lt;blockquote&gt;&lt;pre&gt;
                  absoluteURI   = scheme &quot;:&quot; ( hier_part | opaque_part )
                  scheme        = alpha ( alpha | digit | &quot;+&quot; | &quot;-&quot; | &quot;.&quot; )
                  hier_part     = ( net_path | abs_path ) [ &quot;?&quot; query ]
                  opaque_part   = uric_no_slash uric
                  net_path      = &quot;//&quot; authority [ abs_path ]
                  abs_path      = &quot;/&quot;  path_segments
                  authority     = server | reg_name
                  reg_name      = 1( unreserved | escaped | &quot;$&quot; | &quot;,&quot; |
                  &quot;;&quot; | &quot;:&quot; | &quot;@&quot; | &quot;&amp;&quot; | &quot;=&quot; | &quot;+&quot; )
                  server        = [ [ userinfo &quot;@&quot; ] hostport ]
                  userinfo      = ( unreserved | escaped |
                  &quot;;&quot; | &quot;:&quot; | &quot;&amp;&quot; | &quot;=&quot; | &quot;+&quot; | &quot;$&quot; | &quot;,&quot; )
                  hostport      = host [ &quot;:&quot; port ]
                  host          = hostname | IPv4address | IPv6reference
                  port          = digit
                  IPv6reference = &quot;[&quot; IPv6address &quot;]&quot;
                  IPv6address   = hexpart [ &quot;:&quot; IPv4address ]
                  IPv4address   = 13digit &quot;.&quot; 13digit &quot;.&quot; 13digit &quot;.&quot; 13digit
                  hexpart       = hexseq | hexseq &quot;::&quot; [ hexseq ] | &quot;::&quot; [ hexseq ]
                  hexseq        = hex4 ( &quot;:&quot; hex4)
                  hex4          = 14hex
                  path          = [ abs_path | opaque_part ]
                  path_segments = segment ( &quot;/&quot; segment )
                  segment       = pchar ( &quot;;&quot; param )
                  param         = pchar
                  pchar         = unreserved | escaped |
                  &quot;:&quot; | &quot;@&quot; | &quot;&amp;&quot; | &quot;=&quot; | &quot;+&quot; | &quot;$&quot; | &quot;,&quot;
                  query         = uric
                  uric          = reserved | unreserved | escaped
                  uric_no_slash = unreserved | escaped | &quot;;&quot; | &quot;?&quot; | &quot;:&quot; | &quot;@&quot; |
                  &quot;&amp;&quot; | &quot;=&quot; | &quot;+&quot; | &quot;$&quot; | &quot;,&quot;
                  reserved      = &quot;;&quot; | &quot;/&quot; | &quot;?&quot; | &quot;:&quot; | &quot;@&quot; | &quot;&amp;&quot; | &quot;=&quot; | &quot;+&quot; |
                  &quot;$&quot; | &quot;,&quot; | &quot;[&quot; | &quot;]&quot;
                  unreserved    = alphanum | mark
                  mark          = &quot;-&quot; | &quot;_&quot; | &quot;.&quot; | &quot;!&quot; | &quot;~&quot; | &quot;&quot; | &quot;&apos;&quot; | &quot;(&quot; | &quot;)&quot;
                  escaped       = &quot;%&quot; hex hex
                  unwise        = &quot;{&quot; | &quot;}&quot; | &quot;|&quot; | &quot;\&quot; | &quot;^&quot; | &quot;`&quot;
                  &lt;/pre&gt;&lt;/blockquote&gt;
                  &lt;p&gt; Currently URIs containing &lt;tt&gt;userinfo&lt;/tt&gt; or &lt;tt&gt;reg_name&lt;/tt&gt;
                  are not supported.
                  The &lt;tt&gt;opaque_part&lt;/tt&gt; of a non-hierarchical URI is treated as if
                  if were a &lt;tt&gt;path&lt;/tt&gt; without a leading slash.                
            </javadoc>
            <declaration name="uri" type="String" line="108"/>
            <declaration name="scheme" type="String" line="109"/>
            <declaration name="host" type="String" line="110"/>
            <declaration name="port" type="int" line="111"/>
            <declaration name="hasAuthority" type="boolean" line="112"/>
            <declaration name="path" type="String" line="113"/>
            <declaration name="query" type="String" line="114"/>
            <javadoc line="117">
                Creates a Uri object given a URI string.                
            </javadoc>
            <method name="Uri" type="constructor" line="120">
                <params>
                    <param name="uri" type="String"/>
                </params>
            </method>
            <javadoc line="124">
                Creates an uninitialized Uri object. The init() method must
                  be called before any other Uri methods.                
            </javadoc>
            <method name="Uri" type="constructor" line="128"/>
            <javadoc line="131">
                Initializes a Uri object given a URI string.
                  This method must be called exactly once, and before any other Uri
                  methods.                
            </javadoc>
            <method name="init" type="void" line="136">
                <params>
                    <param name="uri" type="String"/>
                </params>
            </method>
            <javadoc line="141">
                Returns the URI&apos;s scheme.                
            </javadoc>
            <method name="getScheme" type="String" line="144"/>
            <javadoc line="148">
                Returns the host from the URI&apos;s authority part, or null
                  if no host is provided.  If the host is an IPv6 literal, the
                  delimiting brackets are part of the returned value (see{@link java.net.URI#getHost}).                
            </javadoc>
            <method name="getHost" type="String" line="154"/>
            <javadoc line="158">
                Returns the port from the URI&apos;s authority part, or -1 if
                  no port is provided.                
            </javadoc>
            <method name="getPort" type="int" line="162"/>
            <javadoc line="166">
                Returns the URI&apos;s path.  The path is never null.  Note that a
                  slash following the authority part (or the scheme if there is
                  no authority part) is part of the path.  For example, the path
                  of &quot;http://host/a/b&quot; is &quot;/a/b&quot;.                
            </javadoc>
            <method name="getPath" type="String" line="172"/>
            <javadoc line="176">
                Returns the URI&apos;s query part, or null if no query is provided.
                  Note that a query always begins with a leading &quot;?&quot;.                
            </javadoc>
            <method name="getQuery" type="String" line="180"/>
            <javadoc line="184">
                Returns the URI as a string.                
            </javadoc>
            <method name="toString" type="String" line="187"/>
            <method name="parse" type="void" line="194">
                <params>
                    <param name="uri" type="String"/>
                </params>
                <comment line="196">
                    index into URI                    
                </comment>
                <comment line="198">
                    parse scheme                    
                </comment>
                <comment line="203">
                    skip past &quot;:&quot;                    
                </comment>
                <comment line="206">
                    parse &quot;//host:port&quot;                    
                </comment>
                <comment line="207">
                    skip past &quot;//&quot;                    
                </comment>
                <comment line="212">
                    at IPv6 literal                    
                </comment>
                <comment line="217">
                    include brackets                    
                </comment>
                <comment line="218">
                    skip past &quot;[...]&quot;                    
                </comment>
                <comment line="219">
                    at host name or IPv4                    
                </comment>
                <comment line="227">
                    skip past host                    
                </comment>
                <comment line="231">
                    parse port                    
                </comment>
                <comment line="232">
                    skip past &quot;:&quot;                    
                </comment>
                <comment line="235">
                    skip to path                    
                </comment>
                <comment line="237">
                    look for query                    
                </comment>
                <declaration name="i" type="int" line="195"/>
                <scope line="198"/>
                <scope line="205">
                    <declaration name="slash" type="int" line="207"/>
                    <scope line="208"/>
                    <scope line="211">
                        <declaration name="brac" type="int" line="212"/>
                        <scope line="213"/>
                    </scope>
                    <scope line="218">
                        <declaration name="colon" type="int" line="219"/>
                        <declaration name="hostEnd" type="int" line="220"/>
                        <scope line="223"/>
                    </scope>
                    <scope line="230"/>
                </scope>
                <declaration name="qmark" type="int" line="236"/>
                <scope line="237"/>
                <scope line="239"/>
            </method>
        </class>
    </source>