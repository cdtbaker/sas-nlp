<?xml version="1.0" encoding="UTF-8"?>
    <source package="com.sun.jndi.toolkit.url">
        <import package="javax.naming"/>
        <import package="javax.naming.spi.ResolveResult"/>
        <import package="javax.naming.spi.NamingManager"/>
        <import package="java.util.Hashtable"/>
        <import package="java.net.MalformedURLException"/>
        <class name="GenericURLContext" line="35">
            <comment line="515">
                To test, declare getURLPrefix and getURLSuffix static.
                
                public static void main(String[] args) throws Exception {
                String[] tests = {&quot;file:host:port&quot;,
                &quot;file:restofname&quot;,
                &quot;file:host:portrestofname&quot;,
                &quot;file:restofname&quot;,
                &quot;file:restofname&quot;};
                for (int i = 0; i &lt; tests.length; i++) {
                String pre = getURLPrefix(tests[i]);
                System.out.println(pre);
                System.out.println(getURLSuffix(pre, tests[i]));
                }
                }                
            </comment>
            <implements interface="Context"/>
            <javadoc line="35">
                This abstract class is a generic URL context that accepts as the
                  name argument either a string URL or a Name whose first component
                  is a URL. It resolves the URL to a target context and then continues
                  the operation using the remaining name in the target context as if
                  the first component names a junction.
                  A subclass must define getRootURLContext()
                  to process the URL into head/tail pieces. If it wants to control how
                  URL strings are parsed and compared for the rename() operation, then
                  it should override getNonRootURLSuffixes() and urlEquals().                
                <author>
                    Scott Seligman                    
                </author>
                <author>
                    Rosanna Lee                    
                </author>
            </javadoc>
            <declaration name="myEnv" type="Hashtable" line="51"/>
            <method name="GenericURLContext" type="constructor" line="53">
                <params>
                    <param name="env" type="Hashtable"/>
                </params>
                <comment line="54">
                    context that is not tied to any specific URL                    
                </comment>
                <comment line="55">
                    copied on write                    
                </comment>
            </method>
            <method name="close" type="void" line="58"/>
            <method name="getNameInNamespace" type="String" line="62">
                <comment line="63">
                    %%% check this out: A URL context&apos;s name is &quot;&quot;                    
                </comment>
            </method>
            <method name="getRootURLContext" type="ResolveResult" line="66"/>
            <javadoc line="66">
                Resolves &apos;name&apos; into a target context with remaining name.
                  For example, with a JNDI URL &quot;jndi://dnsname/rest_name&quot;,
                  this method resolves &quot;jndi://dnsname/&quot; to a target context,
                  and returns the target context with &quot;rest_name&quot;.
                  The definition of &quot;root URL&quot; and how much of the URL to
                  consume is implementation specific.
                  If rename() is supported for a particular URL scheme,
                  getRootURLContext(), getURLPrefix(), and getURLSuffix()
                  must be in sync wrt how URLs are parsed and returned.                
            </javadoc>
            <javadoc line="80">
                Returns the suffix of the url. The result should be identical to
                  that of calling getRootURLContext().getRemainingName(), but
                  without the overhead of doing anything with the prefix like
                  creating a context.
                  &lt;p&gt;
                  This method returns a Name instead of a String because to give
                  the provider an opportunity to return a Name (for example,
                  for weakly separated naming systems like COS naming).
                  &lt;p&gt;
                  The default implementation uses skips &apos;prefix&apos;, calls
                  UrlUtil.decode() on it, and returns the result as a single component
                  CompositeName.
                  Subclass should override if this is not appropriate.
                  This method is used only by rename().
                  If rename() is supported for a particular URL scheme,
                  getRootURLContext(), getURLPrefix(), and getURLSuffix()
                  must be in sync wrt how URLs are parsed and returned.
                  &lt;p&gt;
                  For many URL schemes, this method is very similar to URL.getFile(),
                  except getFile() will return a leading slash in the
                  2nd, 3rd, and 4th cases. For schemes like &quot;ldap&quot; and &quot;iiop&quot;,
                  the leading slash must be skipped before the name is an acceptable
                  format for operation by the Context methods. For schemes that treat the
                  leading slash as significant (such as &quot;file&quot;),
                  the subclass must override getURLSuffix() to get the correct behavior.
                  Remember, the behavior must match getRootURLContext().
                  URL                                     Suffix
                  foo://host:port                         &lt;empty string&gt;
                  foo://host:port/rest/of/name            rest/of/name
                  foo:///rest/of/name                     rest/of/name
                  foo:/rest/of/name                       rest/of/name
                  foo:rest/of/name                        rest/of/name                
            </javadoc>
            <method name="getURLSuffix" type="Name" line="115">
                <params>
                    <param name="prefix" type="String"/>
                    <param name="url" type="String"/>
                </params>
                <comment line="122">
                    skip leading slash                    
                </comment>
                <declaration name="suffix" type="String" line="116"/>
                <scope line="117"/>
                <scope line="121"/>
                <scope line="125"/>
                <scope line="127"/>
            </method>
            <javadoc line="132">
                Finds the prefix of a URL.
                  Default implementation looks for slashes and then extracts
                  prefixes using String.substring().
                  Subclass should override if this is not appropriate.
                  This method is used only by rename().
                  If rename() is supported for a particular URL scheme,
                  getRootURLContext(), getURLPrefix(), and getURLSuffix()
                  must be in sync wrt how URLs are parsed and returned.
                  &lt;p&gt;
                  URL                                     Prefix
                  foo://host:port                         foo://host:port
                  foo://host:port/rest/of/name            foo://host:port
                  foo:///rest/of/name                     foo://
                  foo:/rest/of/name                       foo:
                  foo:rest/of/name                        foo:                
            </javadoc>
            <method name="getURLPrefix" type="String" line="149">
                <params>
                    <param name="url" type="String"/>
                </params>
                <comment line="155">
                    skip &apos;:&apos;                    
                </comment>
                <comment line="158">
                    skip double slash                    
                </comment>
                <comment line="160">
                    find last slash                    
                </comment>
                <comment line="165">
                    rest of URL                    
                </comment>
                <comment line="169">
                    else 0 or 1 iniitial slashes; start is unchanged                    
                </comment>
                <declaration name="start" type="int" line="150"/>
                <scope line="152"/>
                <scope line="157">
                    <declaration name="posn" type="int" line="161"/>
                    <scope line="162"/>
                    <scope line="164"/>
                </scope>
            </method>
            <javadoc line="173">
                Determines whether two URLs are the same.
                  Default implementation uses String.equals().
                  Subclass should override if this is not appropriate.
                  This method is used by rename().                
            </javadoc>
            <method name="urlEquals" type="boolean" line="179">
                <params>
                    <param name="url1" type="String"/>
                    <param name="url2" type="String"/>
                </params>
            </method>
            <javadoc line="183">
                Gets the context in which to continue the operation. This method
                  is called when this context is asked to process a multicomponent
                  Name in which the first component is a URL.
                  Treat the first component like a junction: resolve it and then use
                  NamingManager.getContinuationContext() to get the target context in
                  which to operate on the remainder of the name (n.getSuffix(1)).                
            </javadoc>
            <method name="getContinuationContext" type="Context" line="191">
                <params>
                    <param name="n" type="Name"/>
                </params>
                <declaration name="obj" type="Object" line="192"/>
                <declaration name="cpe" type="CannotProceedException" line="193"/>
            </method>
            <method name="lookup" type="Object" line="199">
                <params>
                    <param name="name" type="String"/>
                </params>
                <declaration name="res" type="ResolveResult" line="200"/>
                <declaration name="ctx" type="Context" line="201"/>
                <scope line="202"/>
                <scope line="204"/>
            </method>
            <method name="lookup" type="Object" line="209">
                <params>
                    <param name="name" type="Name"/>
                </params>
                <scope line="210"/>
                <scope line="212">
                    <declaration name="ctx" type="Context" line="213"/>
                    <scope line="214"/>
                    <scope line="216"/>
                </scope>
            </method>
            <method name="bind" type="void" line="222">
                <params>
                    <param name="name" type="String"/>
                    <param name="obj" type="Object"/>
                </params>
                <declaration name="res" type="ResolveResult" line="223"/>
                <declaration name="ctx" type="Context" line="224"/>
                <scope line="225"/>
                <scope line="227"/>
            </method>
            <method name="bind" type="void" line="232">
                <params>
                    <param name="name" type="Name"/>
                    <param name="obj" type="Object"/>
                </params>
                <scope line="233"/>
                <scope line="235">
                    <declaration name="ctx" type="Context" line="236"/>
                    <scope line="237"/>
                    <scope line="239"/>
                </scope>
            </method>
            <method name="rebind" type="void" line="245">
                <params>
                    <param name="name" type="String"/>
                    <param name="obj" type="Object"/>
                </params>
                <declaration name="res" type="ResolveResult" line="246"/>
                <declaration name="ctx" type="Context" line="247"/>
                <scope line="248"/>
                <scope line="250"/>
            </method>
            <method name="rebind" type="void" line="255">
                <params>
                    <param name="name" type="Name"/>
                    <param name="obj" type="Object"/>
                </params>
                <scope line="256"/>
                <scope line="258">
                    <declaration name="ctx" type="Context" line="259"/>
                    <scope line="260"/>
                    <scope line="262"/>
                </scope>
            </method>
            <method name="unbind" type="void" line="268">
                <params>
                    <param name="name" type="String"/>
                </params>
                <declaration name="res" type="ResolveResult" line="269"/>
                <declaration name="ctx" type="Context" line="270"/>
                <scope line="271"/>
                <scope line="273"/>
            </method>
            <method name="unbind" type="void" line="278">
                <params>
                    <param name="name" type="Name"/>
                </params>
                <scope line="279"/>
                <scope line="281">
                    <declaration name="ctx" type="Context" line="282"/>
                    <scope line="283"/>
                    <scope line="285"/>
                </scope>
            </method>
            <method name="rename" type="void" line="291">
                <params>
                    <param name="oldName" type="String"/>
                    <param name="newName" type="String"/>
                </params>
                <declaration name="oldPrefix" type="String" line="292"/>
                <declaration name="newPrefix" type="String" line="293"/>
                <scope line="294"/>
                <declaration name="res" type="ResolveResult" line="300"/>
                <declaration name="ctx" type="Context" line="301"/>
                <scope line="302"/>
                <scope line="304"/>
            </method>
            <method name="rename" type="void" line="309">
                <params>
                    <param name="name" type="Name"/>
                    <param name="newName" type="Name"/>
                </params>
                <comment line="317">
                    &gt; 1 component with 1st one being URL                    
                </comment>
                <comment line="318">
                    URLs must be identical; cannot deal with diff URLs                    
                </comment>
                <scope line="310">
                    <scope line="311"/>
                </scope>
                <scope line="316">
                    <scope line="319"/>
                    <declaration name="ctx" type="Context" line="325"/>
                    <scope line="326"/>
                    <scope line="328"/>
                </scope>
            </method>
            <method name="list" type="NamingEnumeration<NameClassPair>" line="334">
                <params>
                    <param name="name" type="String"/>
                </params>
                <declaration name="res" type="ResolveResult" line="335"/>
                <declaration name="ctx" type="Context" line="336"/>
                <scope line="337"/>
                <scope line="339"/>
            </method>
            <method name="list" type="NamingEnumeration<NameClassPair>" line="344">
                <params>
                    <param name="name" type="Name"/>
                </params>
                <scope line="345"/>
                <scope line="347">
                    <declaration name="ctx" type="Context" line="348"/>
                    <scope line="349"/>
                    <scope line="351"/>
                </scope>
            </method>
            <method name="listBindings" type="NamingEnumeration<Binding>" line="358">
                <params>
                    <param name="name" type="String"/>
                </params>
                <declaration name="res" type="ResolveResult" line="359"/>
                <declaration name="ctx" type="Context" line="360"/>
                <scope line="361"/>
                <scope line="363"/>
            </method>
            <method name="listBindings" type="NamingEnumeration<Binding>" line="368">
                <params>
                    <param name="name" type="Name"/>
                </params>
                <scope line="369"/>
                <scope line="371">
                    <declaration name="ctx" type="Context" line="372"/>
                    <scope line="373"/>
                    <scope line="375"/>
                </scope>
            </method>
            <method name="destroySubcontext" type="void" line="381">
                <params>
                    <param name="name" type="String"/>
                </params>
                <declaration name="res" type="ResolveResult" line="382"/>
                <declaration name="ctx" type="Context" line="383"/>
                <scope line="384"/>
                <scope line="386"/>
            </method>
            <method name="destroySubcontext" type="void" line="391">
                <params>
                    <param name="name" type="Name"/>
                </params>
                <scope line="392"/>
                <scope line="394">
                    <declaration name="ctx" type="Context" line="395"/>
                    <scope line="396"/>
                    <scope line="398"/>
                </scope>
            </method>
            <method name="createSubcontext" type="Context" line="404">
                <params>
                    <param name="name" type="String"/>
                </params>
                <declaration name="res" type="ResolveResult" line="405"/>
                <declaration name="ctx" type="Context" line="406"/>
                <scope line="407"/>
                <scope line="409"/>
            </method>
            <method name="createSubcontext" type="Context" line="414">
                <params>
                    <param name="name" type="Name"/>
                </params>
                <scope line="415"/>
                <scope line="417">
                    <declaration name="ctx" type="Context" line="418"/>
                    <scope line="419"/>
                    <scope line="421"/>
                </scope>
            </method>
            <method name="lookupLink" type="Object" line="427">
                <params>
                    <param name="name" type="String"/>
                </params>
                <declaration name="res" type="ResolveResult" line="428"/>
                <declaration name="ctx" type="Context" line="429"/>
                <scope line="430"/>
                <scope line="432"/>
            </method>
            <method name="lookupLink" type="Object" line="437">
                <params>
                    <param name="name" type="Name"/>
                </params>
                <scope line="438"/>
                <scope line="440">
                    <declaration name="ctx" type="Context" line="441"/>
                    <scope line="442"/>
                    <scope line="444"/>
                </scope>
            </method>
            <method name="getNameParser" type="NameParser" line="450">
                <params>
                    <param name="name" type="String"/>
                </params>
                <declaration name="res" type="ResolveResult" line="451"/>
                <declaration name="ctx" type="Context" line="452"/>
                <scope line="453"/>
                <scope line="455"/>
            </method>
            <method name="getNameParser" type="NameParser" line="460">
                <params>
                    <param name="name" type="Name"/>
                </params>
                <scope line="461"/>
                <scope line="463">
                    <declaration name="ctx" type="Context" line="464"/>
                    <scope line="465"/>
                    <scope line="467"/>
                </scope>
            </method>
            <method name="composeName" type="String" line="474">
                <params>
                    <param name="name" type="String"/>
                    <param name="prefix" type="String"/>
                </params>
                <scope line="475"/>
                <scope line="477"/>
                <scope line="479"/>
            </method>
            <method name="composeName" type="Name" line="484">
                <params>
                    <param name="name" type="Name"/>
                    <param name="prefix" type="Name"/>
                </params>
                <declaration name="result" type="Name" line="485"/>
            </method>
            <method name="removeFromEnvironment" type="Object" line="491">
                <params>
                    <param name="propName" type="String"/>
                </params>
                <scope line="492"/>
            </method>
            <method name="addToEnvironment" type="Object" line="500">
                <params>
                    <param name="propName" type="String"/>
                    <param name="propVal" type="Object"/>
                </params>
            </method>
            <method name="getEnvironment" type="Hashtable" line="506">
                <scope line="507"/>
                <scope line="509"/>
            </method>
        </class>
    </source>