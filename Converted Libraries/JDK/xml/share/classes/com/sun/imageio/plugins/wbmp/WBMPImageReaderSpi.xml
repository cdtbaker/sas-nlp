<?xml version="1.0" encoding="UTF-8"?>
    <source package="com.sun.imageio.plugins.wbmp">
        <import package="java.util.Locale"/>
        <import package="javax.imageio.spi.ImageReaderSpi"/>
        <import package="javax.imageio.stream.ImageInputStream"/>
        <import package="javax.imageio.spi.IIORegistry"/>
        <import package="javax.imageio.spi.ServiceRegistry"/>
        <import package="java.io.IOException"/>
        <import package="javax.imageio.ImageReader"/>
        <import package="javax.imageio.IIOException"/>
        <import package="com.sun.imageio.plugins.common.ReaderUtil"/>
        <class name="WBMPImageReaderSpi" line="38">
            <extends class="ImageReaderSpi"/>
            <declaration name="MAX_WBMP_WIDTH" type="int" line="40"/>
            <declaration name="MAX_WBMP_HEIGHT" type="int" line="41"/>
            <declaration name="writerSpiNames" type="String[]" line="43"/>
            <declaration name="formatNames" type="String[]" line="45"/>
            <declaration name="entensions" type="String[]" line="46"/>
            <declaration name="mimeType" type="String[]" line="47"/>
            <declaration name="registered" type="boolean" line="49"/>
            <method name="WBMPImageReaderSpi" type="constructor" line="51"/>
            <method name="onRegistration" type="void" line="69">
                <params>
                    <param name="registry" type="ServiceRegistry"/>
                    <param name="category" type="Class<?>"/>
                </params>
                <scope line="70"/>
            </method>
            <method name="getDescription" type="String" line="76">
                <params>
                    <param name="locale" type="Locale"/>
                </params>
            </method>
            <method name="canDecodeInput" type="boolean" line="80">
                <params>
                    <param name="source" type="Object"/>
                </params>
                <comment line="89">
                    TypeField                    
                </comment>
                <comment line="91">
                    check WBMP &quot;header&quot;                    
                </comment>
                <comment line="93">
                    while WBMP reader does not support ext WBMP headers                    
                </comment>
                <comment line="100">
                    check image dimension                    
                </comment>
                <comment line="108">
                    We can&apos;t verify that amount of data in the stream
                     corresponds to image dimension because we do not know
                     the length of the data stream.
                     Assuming that wbmp image are used for mobile devices,
                     let&apos;s introduce an upper limit for image dimension.
                     In case if exact amount of raster data is unknown,
                     let&apos;s reject images with dimension above the limit.                    
                </comment>
                <scope line="81"/>
                <declaration name="stream" type="ImageInputStream" line="85"/>
                <declaration name="type" type="int" line="88"/>
                <declaration name="fixHeaderField" type="int" line="89"/>
                <scope line="91"/>
                <declaration name="width" type="int" line="97"/>
                <declaration name="height" type="int" line="98"/>
                <scope line="100"/>
                <declaration name="dataLength" type="long" line="105"/>
                <scope line="106"/>
                <declaration name="scanSize" type="long" line="121"/>
            </method>
            <method name="createReaderInstance" type="ImageReader" line="127">
                <params>
                    <param name="extension" type="Object"/>
                </params>
            </method>
        </class>
    </source>