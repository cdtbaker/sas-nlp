<?xml version="1.0" encoding="UTF-8"?>
    <source package="com.sun.imageio.plugins.jpeg">
        <import package="javax.imageio.metadata.IIOInvalidTreeException"/>
        <import package="javax.imageio.metadata.IIOMetadataNode"/>
        <import package="javax.imageio.stream.ImageOutputStream"/>
        <import package="java.io.IOException"/>
        <import package="org.w3c.dom.Node"/>
        <import package="org.w3c.dom.NamedNodeMap"/>
        <class name="MarkerSegment" line="37">
            <comment line="46">
                length is 2 bytes                
            </comment>
            <comment line="47">
                See JPEG.java                
            </comment>
            <comment line="48">
                int length;     Sometimes needed by subclasses; doesn&apos;t include                
            </comment>
            <comment line="50">
                Raw segment data, used for unrecognized segments                
            </comment>
            <comment line="51">
                Set to true if the tag is not recognized                
            </comment>
            <implements interface="Cloneable"/>
            <javadoc line="37">
                All metadata is stored in MarkerSegments.  Marker segments
                  that we know about are stored in subclasses of this
                  basic class, which used for unrecognized APPn marker
                  segments.  XXX break out UnknownMarkerSegment as a subclass
                  and make this abstract, avoiding unused data field.                
            </javadoc>
            <declaration name="LENGTH_SIZE" type="int" line="45"/>
            <declaration name="tag" type="int" line="46"/>
            <declaration name="length" type="int" line="47"/>
            <declaration name="data" type="byte[]" line="49"/>
            <declaration name="unknown" type="boolean" line="50"/>
            <javadoc line="52">
                Constructor for creating &lt;code&gt;MarkerSegment&lt;/code&gt;s by reading
                  from an &lt;code&gt;ImageInputStream&lt;/code&gt;.                
            </javadoc>
            <method name="MarkerSegment" type="constructor" line="56">
                <params>
                    <param name="buffer" type="JPEGBuffer"/>
                </params>
                <comment line="59">
                    tag plus length                    
                </comment>
                <comment line="63">
                    JPEG length includes itself, we don&apos;t                    
                </comment>
                <comment line="65">
                    Now that we know the true length, ensure that we&apos;ve got it,
                     or at least a bufferful if length is too big.                    
                </comment>
            </method>
            <javadoc line="69">
                Constructor used when creating segments other than by
                  reading them from a stream.                
            </javadoc>
            <method name="MarkerSegment" type="constructor" line="73">
                <params>
                    <param name="tag" type="int"/>
                </params>
            </method>
            <javadoc line="78">
                Construct a MarkerSegment from an &quot;unknown&quot; DOM Node.                
            </javadoc>
            <method name="MarkerSegment" type="constructor" line="81">
                <params>
                    <param name="node" type="Node"/>
                </params>
                <comment line="83">
                    The type of node should have been verified already.
                     get the attribute and assign it to the tag                    
                </comment>
                <comment line="91">
                    get the user object and clone it to the data                    
                </comment>
                <scope line="91">
                    <declaration name="iioNode" type="IIOMetadataNode" line="92"/>
                    <scope line="93"/>
                    <scope line="95">
                        <declaration name="newGuy" type="IIOInvalidTreeException" line="96"/>
                    </scope>
                </scope>
                <scope line="102"/>
            </method>
            <javadoc line="108">
                Deep copy of data array.                
            </javadoc>
            <method name="clone" type="Object" line="111">
                <comment line="116">
                    won&apos;t happen                    
                </comment>
                <declaration name="newGuy" type="MarkerSegment" line="112"/>
                <scope line="113"/>
                <scope line="115"/>
                <scope line="116"/>
            </method>
            <javadoc line="122">
                We have determined that we don&apos;t know the type, so load
                  the data using the length parameter.                
            </javadoc>
            <method name="loadData" type="void" line="126">
                <params>
                    <param name="buffer" type="JPEGBuffer"/>
                </params>
            </method>
            <method name="getNativeNode" type="IIOMetadataNode" line="131">
                <declaration name="node" type="IIOMetadataNode" line="132"/>
            </method>
            <method name="getAttributeValue" type="int" line="145">
                <params>
                    <param name="node" type="Node"/>
                    <param name="attrs" type="NamedNodeMap"/>
                    <param name="name" type="String"/>
                    <param name="min" type="int"/>
                    <param name="max" type="int"/>
                    <param name="required" type="boolean"/>
                </params>
                <scope line="146"/>
                <declaration name="valueString" type="String" line="149"/>
                <declaration name="value" type="int" line="150"/>
                <scope line="151">
                    <scope line="152"/>
                </scope>
                <scope line="156">
                    <scope line="158"/>
                </scope>
            </method>
            <javadoc line="166">
                Writes the marker, tag, and length.  Note that length
                  should be verified by the caller as a correct JPEG
                  length, i.e it includes itself.                
            </javadoc>
            <method name="writeTag" type="void" line="171">
                <params>
                    <param name="ios" type="ImageOutputStream"/>
                </params>
            </method>
            <javadoc line="177">
                Writes the data for this segment to the stream in
                  valid JPEG format.                
            </javadoc>
            <method name="write" type="void" line="181">
                <params>
                    <param name="ios" type="ImageOutputStream"/>
                </params>
                <scope line="184"/>
            </method>
            <method name="write2bytes" type="void" line="190">
                <params>
                    <param name="ios" type="ImageOutputStream"/>
                    <param name="value" type="int"/>
                </params>
            </method>
            <method name="printTag" type="void" line="196">
                <params>
                    <param name="prefix" type="String"/>
                </params>
            </method>
            <method name="print" type="void" line="202">
                <scope line="204">
                    <scope line="206"/>
                    <scope line="211"/>
                </scope>
                <scope line="215">
                    <scope line="217"/>
                </scope>
            </method>
        </class>
    </source>