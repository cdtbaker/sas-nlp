<?xml version="1.0" encoding="UTF-8"?>
    <source package="sun.tools.attach">
        <import package="com.sun.tools.attach.VirtualMachine"/>
        <import package="com.sun.tools.attach.AgentLoadException"/>
        <import package="com.sun.tools.attach.AgentInitializationException"/>
        <import package="com.sun.tools.attach.spi.AttachProvider"/>
        <import package="java.io.InputStream"/>
        <import package="java.io.IOException"/>
        <import package="java.util.Properties"/>
        <import package="java.util.Map"/>
        <class name="HotSpotVirtualMachine" line="42">
            <extends class="VirtualMachine"/>
            <comment line="49">
                Load agent library
                 If isAbsolute is true then the agent library is the absolute path
                 to the library and thus will not be expanded in the target VM.
                 if isAbsolute is false then the agent library is just a library
                 name and it will be expended in the target VM.                
            </comment>
            <comment line="74">
                Load agent library - library name will be expanded in target VM                
            </comment>
            <comment line="83">
                Load agent - absolute path of library provided to target VM                
            </comment>
            <comment line="92">
                Load JPLIS agent which will load the agent JAR file and invoke
                 the agentmain method.                
            </comment>
            <comment line="129">
                The possible errors returned by JPLIS&apos;s agentmain                
            </comment>
            <comment line="138">
                Send &quot;properties&quot; command to target VM                
            </comment>
            <comment line="165">
                --- HotSpot specific methods ---                
            </comment>
            <comment line="167">
                same as SIGQUIT                
            </comment>
            <comment line="172">
                Remote ctrl-break. The output of the ctrl-break actions can                
            </comment>
            <comment line="173">
                be read from the input stream.                
            </comment>
            <comment line="178">
                Remote heap dump. The output (error message) can be read from the                
            </comment>
            <comment line="179">
                returned input stream.                
            </comment>
            <comment line="184">
                Heap histogram (heap inspection in HotSpot)                
            </comment>
            <comment line="189">
                set JVM command line flag                
            </comment>
            <comment line="194">
                print command line flag                
            </comment>
            <comment line="199">
                -- Supporting methods                
            </comment>
            <comment line="202">
                Execute the given command in the target VM - specific platform
                 implementation must implement this.                
            </comment>
            <comment line="209">
                Convenience method for simple commands                
            </comment>
            <comment line="221">
                Utility method to read an &apos;int&apos; from the input stream. Ideally
                 we should be using java.util.Scanner here but this implementation
                 guarantees not to read ahead.                
            </comment>
            <comment line="257">
                -- attach timeout support                
            </comment>
            <comment line="262">
                Return attach timeout based on the value of the sun.tools.attach.attachTimeout
                 property, or the default timeout if the property is not set to a positive
                 value.                
            </comment>
            <method name="HotSpotVirtualMachine" type="constructor" line="44">
                <params>
                    <param name="provider" type="AttachProvider"/>
                    <param name="id" type="String"/>
                </params>
            </method>
            <method name="loadAgentLibrary" type="void" line="57">
                <params>
                    <param name="agentLibrary" type="String"/>
                    <param name="isAbsolute" type="boolean"/>
                    <param name="options" type="String"/>
                </params>
                <declaration name="in" type="InputStream" line="58"/>
                <scope line="62">
                    <declaration name="result" type="int" line="63"/>
                    <scope line="64"/>
                </scope>
                <scope line="67"/>
            </method>
            <method name="loadAgentLibrary" type="void" line="78">
                <params>
                    <param name="agentLibrary" type="String"/>
                    <param name="options" type="String"/>
                </params>
            </method>
            <method name="loadAgentPath" type="void" line="87">
                <params>
                    <param name="agentLibrary" type="String"/>
                    <param name="options" type="String"/>
                </params>
            </method>
            <method name="loadAgent" type="void" line="97">
                <params>
                    <param name="agent" type="String"/>
                    <param name="options" type="String"/>
                </params>
                <comment line="107">
                    Translate interesting errors into the right exception and
                     message (FIXME: create a better interface to the instrument
                     implementation so this isn&apos;t necessary)                    
                </comment>
                <declaration name="args" type="String" line="98"/>
                <scope line="99"/>
                <scope line="102"/>
                <scope line="104"/>
                <scope line="106">
                    <declaration name="rc" type="int" line="112"/>
                </scope>
            </method>
            <declaration name="JNI_ENOMEM" type="int" line="131"/>
            <declaration name="ATTACH_ERROR_BADJAR" type="int" line="132"/>
            <declaration name="ATTACH_ERROR_NOTONCP" type="int" line="133"/>
            <declaration name="ATTACH_ERROR_STARTFAIL" type="int" line="134"/>
            <method name="getSystemProperties" type="Properties" line="140">
                <declaration name="in" type="InputStream" line="141"/>
                <declaration name="props" type="Properties" line="142"/>
                <scope line="143"/>
                <scope line="146"/>
            </method>
            <method name="getAgentProperties" type="Properties" line="152">
                <declaration name="in" type="InputStream" line="153"/>
                <declaration name="props" type="Properties" line="154"/>
                <scope line="155"/>
                <scope line="158"/>
            </method>
            <method name="localDataDump" type="void" line="167"/>
            <method name="remoteDataDump" type="InputStream" line="173">
                <params>
                    <param name="args" type="Object"/>
                </params>
            </method>
            <method name="dumpHeap" type="InputStream" line="179">
                <params>
                    <param name="args" type="Object"/>
                </params>
            </method>
            <method name="heapHisto" type="InputStream" line="184">
                <params>
                    <param name="args" type="Object"/>
                </params>
            </method>
            <method name="setFlag" type="InputStream" line="189">
                <params>
                    <param name="name" type="String"/>
                    <param name="value" type="String"/>
                </params>
            </method>
            <method name="printFlag" type="InputStream" line="194">
                <params>
                    <param name="name" type="String"/>
                </params>
            </method>
            <method name="execute" type="InputStream" line="205"/>
            <method name="executeCommand" type="InputStream" line="211">
                <params>
                    <param name="cmd" type="String"/>
                    <param name="args" type="Object"/>
                </params>
                <scope line="212"/>
                <scope line="214"/>
            </method>
            <method name="readInt" type="int" line="225">
                <params>
                    <param name="in" type="InputStream"/>
                </params>
                <comment line="228">
                    read to \n or EOF                    
                </comment>
                <comment line="236">
                    EOL found                    
                </comment>
                <declaration name="sb" type="StringBuilder" line="226"/>
                <declaration name="n" type="int" line="229"/>
                <declaration name="buf" type="byte" line="230"/>
                <scope line="231">
                    <scope line="233">
                        <declaration name="c" type="char" line="234"/>
                        <scope line="235"/>
                        <scope line="237"/>
                    </scope>
                </scope>
                <scope line="243"/>
                <declaration name="value" type="int" line="247"/>
                <scope line="248"/>
                <scope line="250"/>
            </method>
            <declaration name="defaultAttachTimeout" type="long" line="258"/>
            <declaration name="attachTimeout" type="long" line="259"/>
            <method name="attachTimeout" type="long" line="266">
                <scope line="267">
                    <scope line="268">
                        <scope line="269">
                            <scope line="270">
                                <declaration name="s" type="String" line="271"/>
                            </scope>
                            <scope line="274"/>
                            <scope line="275"/>
                            <scope line="277"/>
                        </scope>
                    </scope>
                </scope>
            </method>
        </class>
    </source>