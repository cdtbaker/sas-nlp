<?xml version="1.0" encoding="UTF-8"?>
    <source package="sun.net.www">
        <import package="java.io"/>
        <import package="java.util.Calendar"/>
        <import package="java.util.Date"/>
        <import package="java.text.SimpleDateFormat"/>
        <import package="java.net.URL"/>
        <import package="java.net.FileNameMap"/>
        <import package="java.util.Hashtable"/>
        <import package="java.util.Enumeration"/>
        <import package="java.util.Properties"/>
        <import package="java.util.StringTokenizer"/>
        <class name="MimeTable" line="38">
            <comment line="48">
                Will be reset if in the platform-specific data file                
            </comment>
            <comment line="225">
                For backward compatibility -- mailcap format files
                 This is not currently used, but may in the future when we add ability
                 to read BOTH the properties format and the mailcap format.                
            </comment>
            <comment line="287">
                Table format:
                
                 &lt;entry&gt; ::= &lt;table_tag&gt; | &lt;type_entry&gt;
                
                 &lt;table_tag&gt; ::= &lt;table_format_version&gt; | &lt;temp_file_template&gt;
                
                 &lt;type_entry&gt; ::= &lt;type_subtype_pair&gt; &apos;=&apos; &lt;type_attrs_list&gt;
                
                 &lt;type_subtype_pair&gt; ::= &lt;type&gt; &apos;/&apos; &lt;subtype&gt;
                
                 &lt;type_attrs_list&gt; ::= &lt;attr_value_pair&gt; [ &apos;;&apos; &lt;attr_value_pair&gt; ]*
                                       | [ &lt;attr_value_pair&gt; ]+
                
                 &lt;attr_value_pair&gt; ::= &lt;attr_name&gt; &apos;=&apos; &lt;attr_value&gt;
                
                 &lt;attr_name&gt; ::= &apos;description&apos; | &apos;action&apos; | &apos;application&apos;
                                 | &apos;file_extensions&apos; | &apos;icon&apos;
                
                 &lt;attr_value&gt; ::= &lt;legal_char&gt;*
                
                 Embedded &apos;;&apos; in an &lt;attr_value&gt; are quoted with leading &apos;\&apos; .
                
                 Interpretation of &lt;attr_value&gt; depends on the &lt;attr_name&gt; it is
                 associated with.                
            </comment>
            <comment line="439">
                Debugging utilities
                
                public void list(PrintStream out) {
                Enumeration keys = entries.keys();
                while (keys.hasMoreElements()) {
                String key = (String)keys.nextElement();
                MimeEntry entry = (MimeEntry)entries.get(key);
                out.println(key + &quot;: &quot; + entry);
                }
                }
                
                public static void main(String[] args) {
                MimeTable testTable = MimeTable.getDefaultTable();
                
                Enumeration e = testTable.elements();
                while (e.hasMoreElements()) {
                MimeEntry entry = (MimeEntry)e.nextElement();
                System.out.println(entry);
                }
                
                testTable.save(File.separator + &quot;tmp&quot; +
                File.separator + &quot;mime_table.save&quot;);
                }                
            </comment>
            <implements interface="FileNameMap"/>
            <declaration name="entries" type="Hashtable&lt;String,MimeEntry&gt;" line="39"/>
            <javadoc line="39">
                Keyed by content type, returns MimeEntries                
            </javadoc>
            <declaration name="extensionMap" type="Hashtable&lt;String,MimeEntry&gt;" line="43"/>
            <javadoc line="43">
                Keyed by file extension (with the .), returns MimeEntries                
            </javadoc>
            <declaration name="tempFileTemplate" type="String" line="48"/>
            <scope line="50">
                <anonymous_class line="52">
                    <method name="run" type="Void" line="53"/>
                </anonymous_class>
            </scope>
            <declaration name="filePreamble" type="String" line="74"/>
            <declaration name="fileMagic" type="String" line="75"/>
            <method name="MimeTable" type="constructor" line="77"/>
            <class name="DefaultInstanceHolder" line="81">
                <declaration name="defaultInstance" type="MimeTable" line="82"/>
                <method name="getDefaultInstance" type="MimeTable" line="84">
                    <anonymous_class line="86">
                        <method name="run" type="MimeTable" line="87">
                            <declaration name="instance" type="MimeTable" line="88"/>
                        </method>
                    </anonymous_class>
                </method>
            </class>
            <javadoc line="96">
                Get the single instance of this class.  First use will load the
                  table from a data file.                
            </javadoc>
            <method name="getDefaultTable" type="MimeTable" line="100"/>
            <javadoc line="104">
                                
            </javadoc>
            <method name="loadTable" type="FileNameMap" line="107">
                <declaration name="mt" type="MimeTable" line="108"/>
            </method>
            <method name="getSize" type="int" line="112"/>
            <method name="getContentTypeFor" type="String" line="116">
                <params>
                    <param name="fileName" type="String"/>
                </params>
                <declaration name="entry" type="MimeEntry" line="117"/>
                <scope line="118"/>
                <scope line="120"/>
            </method>
            <method name="add" type="void" line="125">
                <params>
                    <param name="m" type="MimeEntry"/>
                </params>
                <declaration name="exts" type="String" line="128"/>
                <scope line="129"/>
                <scope line="133"/>
            </method>
            <method name="remove" type="MimeEntry" line="138">
                <params>
                    <param name="type" type="String"/>
                </params>
                <declaration name="entry" type="MimeEntry" line="139"/>
            </method>
            <method name="remove" type="MimeEntry" line="143">
                <params>
                    <param name="entry" type="MimeEntry"/>
                </params>
                <declaration name="extensionKeys" type="String[]" line="144"/>
                <scope line="145">
                    <scope line="146"/>
                </scope>
            </method>
            <method name="find" type="MimeEntry" line="154">
                <params>
                    <param name="type" type="String"/>
                </params>
                <comment line="158">
                    try a wildcard lookup                    
                </comment>
                <declaration name="entry" type="MimeEntry" line="155"/>
                <scope line="156">
                    <declaration name="e" type="Enumeration&lt;MimeEntry&gt;" line="158"/>
                    <scope line="159">
                        <declaration name="wild" type="MimeEntry" line="160"/>
                        <scope line="161"/>
                    </scope>
                </scope>
            </method>
            <javadoc line="170">
                Locate a MimeEntry by the file extension that has been associated
                  with it. Parses general file names, and URLs.                
            </javadoc>
            <method name="findByFileName" type="MimeEntry" line="174">
                <params>
                    <param name="fname" type="String"/>
                </params>
                <comment line="185">
                    REMIND: OS specific delimters appear here                    
                </comment>
                <declaration name="ext" type="String" line="175"/>
                <declaration name="i" type="int" line="177"/>
                <scope line="179"/>
                <scope line="188"/>
            </method>
            <javadoc line="195">
                Locate a MimeEntry by the file extension that has been associated
                  with it.                
            </javadoc>
            <method name="findByExt" type="MimeEntry" line="199">
                <params>
                    <param name="fileExtension" type="String"/>
                </params>
            </method>
            <method name="findByDescription" type="MimeEntry" line="203">
                <params>
                    <param name="description" type="String"/>
                </params>
                <comment line="213">
                    We failed, now try treating description as type                    
                </comment>
                <declaration name="e" type="Enumeration&lt;MimeEntry&gt;" line="204"/>
                <scope line="205">
                    <declaration name="entry" type="MimeEntry" line="206"/>
                    <scope line="207"/>
                </scope>
            </method>
            <method name="getTempFileTemplate" type="String" line="216"/>
            <method name="elements" type="Enumeration<MimeEntry>" line="220"/>
            <declaration name="mailcapLocations" type="String[]" line="227"/>
            <method name="load" type="void" line="229">
                <comment line="235">
                    First try to load the user-specific table, if it exists                    
                </comment>
                <comment line="241">
                    No user-table, try to load the default built-in table.                    
                </comment>
                <comment line="250">
                    No user table, try to load the default built-in table.                    
                </comment>
                <declaration name="entries" type="Properties" line="230"/>
                <declaration name="file" type="File" line="231"/>
                <scope line="232">
                    <declaration name="is" type="InputStream" line="233"/>
                    <declaration name="userTablePath" type="String" line="235"/>
                    <scope line="237">
                        <scope line="239"/>
                    </scope>
                    <scope line="248"/>
                </scope>
                <scope line="261"/>
            </method>
            <method name="parse" type="void" line="269">
                <params>
                    <param name="entries" type="Properties"/>
                </params>
                <comment line="271">
                    first, strip out the platform-specific temp file template                    
                </comment>
                <comment line="278">
                    now, parse the mime-type spec&apos;s                    
                </comment>
                <declaration name="tempFileTemplate" type="String" line="271"/>
                <scope line="272"/>
                <declaration name="types" type="Enumeration&lt;?&gt;" line="278"/>
                <scope line="279">
                    <declaration name="type" type="String" line="280"/>
                    <declaration name="attrs" type="String" line="281"/>
                </scope>
            </method>
            <method name="parse" type="void" line="313">
                <params>
                    <param name="type" type="String"/>
                    <param name="attrs" type="String"/>
                </params>
                <comment line="317">
                    REMIND handle embedded &apos;;&apos; and &apos;|&apos; and literal &apos;&quot;&apos;                    
                </comment>
                <declaration name="newEntry" type="MimeEntry" line="314"/>
                <declaration name="tokenizer" type="StringTokenizer" line="317"/>
                <scope line="318">
                    <declaration name="pair" type="String" line="319"/>
                </scope>
            </method>
            <method name="parse" type="void" line="326">
                <params>
                    <param name="pair" type="String"/>
                    <param name="entry" type="MimeEntry"/>
                </params>
                <comment line="328">
                    REMIND add exception handling...                    
                </comment>
                <declaration name="name" type="String" line="328"/>
                <declaration name="value" type="String" line="329"/>
                <declaration name="gotName" type="boolean" line="331"/>
                <declaration name="tokenizer" type="StringTokenizer" line="332"/>
                <scope line="333">
                    <scope line="334"/>
                    <scope line="337"/>
                </scope>
            </method>
            <method name="fill" type="void" line="346">
                <params>
                    <param name="entry" type="MimeEntry"/>
                    <param name="name" type="String"/>
                    <param name="value" type="String"/>
                </params>
                <comment line="364">
                    else illegal name exception                    
                </comment>
                <scope line="347"/>
                <scope line="350"/>
                <scope line="353"/>
                <scope line="356"/>
                <scope line="359"/>
            </method>
            <method name="getExtensions" type="String[]" line="366">
                <params>
                    <param name="list" type="String"/>
                </params>
                <declaration name="tokenizer" type="StringTokenizer" line="367"/>
                <declaration name="n" type="int" line="368"/>
                <declaration name="extensions" type="String[]" line="369"/>
                <scope line="370"/>
            </method>
            <method name="getActionCode" type="int" line="377">
                <params>
                    <param name="action" type="String"/>
                </params>
                <scope line="378">
                    <scope line="379"/>
                </scope>
            </method>
            <method name="save" type="boolean" line="387">
                <params>
                    <param name="filename" type="String"/>
                </params>
                <scope line="388"/>
            </method>
            <method name="getAsProperties" type="Properties" line="399">
                <declaration name="properties" type="Properties" line="400"/>
                <declaration name="e" type="Enumeration&lt;MimeEntry&gt;" line="401"/>
                <scope line="402">
                    <declaration name="entry" type="MimeEntry" line="403"/>
                </scope>
            </method>
            <method name="saveAsProperties" type="boolean" line="410">
                <params>
                    <param name="file" type="File"/>
                </params>
                <declaration name="os" type="FileOutputStream" line="411"/>
                <scope line="412">
                    <declaration name="properties" type="Properties" line="414"/>
                    <declaration name="tag" type="String" line="416"/>
                    <declaration name="user" type="String" line="417"/>
                    <scope line="418"/>
                    <scope line="422"/>
                </scope>
                <scope line="426"/>
                <scope line="430">
                    <scope line="431">
                        <scope line="432"/>
                        <scope line="432"/>
                    </scope>
                </scope>
            </method>
        </class>
    </source>