<?xml version="1.0" encoding="UTF-8"?>
    <source package="sun.net.www.http">
        <import package="java.io.IOException"/>
        <import package="java.util.LinkedList"/>
        <import package="sun.net.NetProperties"/>
        <import package="java.security.AccessController"/>
        <import package="java.security.PrivilegedAction"/>
        <class name="KeepAliveStreamCleaner" line="34">
            <extends class="LinkedList">
                <type_params>
                    <type_param name="KeepAliveCleanerEntry"/>
                </type_params>
            </extends>
            <comment line="46">
                never serialized                
            </comment>
            <comment line="51">
                maximum amount of remaining data that we will try to cleanup                
            </comment>
            <comment line="54">
                maximum amount of KeepAliveStreams to be queued                
            </comment>
            <comment line="57">
                timeout for both socket and poll on the queue                
            </comment>
            <comment line="60">
                max retries for skipping data                
            </comment>
            <implements interface="Runnable"/>
            <javadoc line="34">
                This class is used to cleanup any remaining data that may be on a KeepAliveStream
                  so that the connection can be cached in the KeepAliveCache.
                  Instances of this class can be used as a FIFO queue for KeepAliveCleanerEntry objects.
                  Executing this Runnable removes each KeepAliveCleanerEntry from the Queue, reads
                  the reamining bytes on its KeepAliveStream, and if successful puts the connection in
                  the KeepAliveCache.                
                <author>
                    Chris Hegarty                    
                </author>
            </javadoc>
            <declaration name="MAX_DATA_REMAINING" type="int" line="51"/>
            <declaration name="MAX_CAPACITY" type="int" line="54"/>
            <declaration name="TIMEOUT" type="int" line="57"/>
            <declaration name="MAX_RETRIES" type="int" line="60"/>
            <scope line="62">
                <declaration name="maxDataKey" type="String" line="63"/>
                <anonymous_class line="65">
                    <method name="run" type="Integer" line="66"/>
                </anonymous_class>
                <declaration name="maxData" type="int" line="64"/>
                <declaration name="maxCapacityKey" type="String" line="71"/>
                <anonymous_class line="73">
                    <method name="run" type="Integer" line="74"/>
                </anonymous_class>
                <declaration name="maxCapacity" type="int" line="72"/>
            </scope>
            <method name="offer" type="boolean" line="83">
                <params>
                    <param name="e" type="KeepAliveCleanerEntry"/>
                </params>
            </method>
            <method name="run" type="void" line="92">
                <comment line="106">
                                        
                </comment>
                <declaration name="kace" type="KeepAliveCleanerEntry" line="93"/>
                <scope line="95">
                    <scope line="96">
                        <scope line="97">
                            <declaration name="before" type="long" line="98"/>
                            <declaration name="timeout" type="long" line="99"/>
                            <scope line="100">
                                <declaration name="after" type="long" line="103"/>
                                <declaration name="elapsed" type="long" line="104"/>
                                <scope line="105"/>
                            </scope>
                        </scope>
                        <declaration name="kas" type="KeepAliveStream" line="118"/>
                        <scope line="120">
                            <scope line="121">
                                <declaration name="hc" type="HttpClient" line="122"/>
                                <scope line="123">
                                    <scope line="124">
                                        <declaration name="oldTimeout" type="int" line="125"/>
                                        <declaration name="remainingToRead" type="long" line="127"/>
                                        <scope line="128">
                                            <declaration name="n" type="long" line="129"/>
                                            <declaration name="retries" type="int" line="130"/>
                                            <scope line="131"/>
                                        </scope>
                                        <scope line="139"/>
                                    </scope>
                                </scope>
                                <scope line="145"/>
                                <scope line="147"/>
                            </scope>
                        </scope>
                    </scope>
                    <scope line="152"/>
                </scope>
            </method>
        </class>
    </source>