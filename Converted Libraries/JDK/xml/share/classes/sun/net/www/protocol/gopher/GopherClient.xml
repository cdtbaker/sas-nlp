<?xml version="1.0" encoding="UTF-8"?>
    <source package="sun.net.www.protocol.gopher">
        <import package="java.io"/>
        <import package="java.util"/>
        <import package="java.net"/>
        <import package="sun.net.www"/>
        <import package="sun.net.NetworkClient"/>
        <import package="java.net.URL"/>
        <import package="java.net.URLStreamHandler"/>
        <import package="sun.security.action.GetBooleanAction"/>
        <class name="GopherClient" line="37">
            <extends class="NetworkClient"/>
            <comment line="41">
                The following three data members are left in for binary
                 backwards-compatibility.  Unfortunately, HotJava sets them directly
                 when it wants to change the settings.  The new design has us not
                 cache these, so this is unnecessary, but eliminating the data members
                 would break HJB 1.1 under JDK 1.2.
                
                 These data members are not used, and their values are meaningless.
                 REMIND:  Take them out for JDK 2.0!                
            </comment>
            <implements interface="Runnable"/>
            <javadoc line="37">
                Class to maintain the state of a gopher fetch and handle the protocol                
            </javadoc>
            <declaration name="useGopherProxy" type="boolean" line="50"/>
            <javadoc line="50">
                @deprecated                
            </javadoc>
            <declaration name="gopherProxyHost" type="String" line="56"/>
            <javadoc line="56">
                @deprecated                
            </javadoc>
            <declaration name="gopherProxyPort" type="int" line="62"/>
            <javadoc line="62">
                @deprecated                
            </javadoc>
            <scope line="69"/>
            <declaration name="os" type="PipedOutputStream" line="82"/>
            <declaration name="u" type="URL" line="83"/>
            <declaration name="gtype" type="int" line="84"/>
            <declaration name="gkey" type="String" line="85"/>
            <declaration name="connection" type="sun.net.www.URLConnection" line="86"/>
            <method name="GopherClient" type="constructor" line="88">
                <params>
                    <param name="connection" type="sun.net.www.URLConnection"/>
                </params>
            </method>
            <javadoc line="92">
                @return true if gopher connections should go through a proxy, according
                  to system properties.                
            </javadoc>
            <method name="getUseGopherProxy" type="boolean" line="96"/>
            <javadoc line="101">
                @return the proxy host to use, or null if nothing is set.                
            </javadoc>
            <method name="getGopherProxyHost" type="String" line="104">
                <declaration name="host" type="String" line="105"/>
                <scope line="107"/>
            </method>
            <javadoc line="113">
                @return the proxy port to use.  Will default reasonably.                
            </javadoc>
            <method name="getGopherProxyPort" type="int" line="116"/>
            <javadoc line="122">
                Given a url, setup to fetch the gopher document it refers to                
            </javadoc>
            <method name="openStream" type="InputStream" line="123">
                <params>
                    <param name="u" type="URL"/>
                </params>
                <declaration name="i" type="int" line="126"/>
                <declaration name="s" type="String" line="127"/>
                <declaration name="limit" type="int" line="128"/>
                <declaration name="c" type="int" line="129"/>
                <declaration name="msgh" type="MessageHeader" line="139"/>
                <scope line="157"/>
                <scope line="160"/>
                <scope line="165"/>
                <scope line="169">
                    <declaration name="ret" type="PipedInputStream" line="171"/>
                </scope>
            </method>
            <javadoc line="179">
                Translate all the instances of %NN into the character they represent                
            </javadoc>
            <method name="decodePercent" type="String" line="180">
                <params>
                    <param name="s" type="String"/>
                </params>
                <declaration name="limit" type="int" line="183"/>
                <declaration name="d" type="char" line="184"/>
                <declaration name="dp" type="int" line="185"/>
                <scope line="186">
                    <declaration name="c" type="int" line="187"/>
                    <scope line="188">
                        <declaration name="s1" type="int" line="189"/>
                        <declaration name="s2" type="int" line="190"/>
                        <scope line="207"/>
                    </scope>
                </scope>
            </method>
            <javadoc line="217">
                Turn special characters into the %NN form                
            </javadoc>
            <method name="encodePercent" type="String" line="218">
                <params>
                    <param name="s" type="String"/>
                </params>
                <declaration name="limit" type="int" line="221"/>
                <declaration name="d" type="char" line="222"/>
                <declaration name="dp" type="int" line="223"/>
                <scope line="224">
                    <declaration name="c" type="int" line="225"/>
                    <scope line="226">
                        <scope line="229">
                            <declaration name="nd" type="char" line="230"/>
                        </scope>
                        <declaration name="dig" type="int" line="235"/>
                    </scope>
                    <scope line="240">
                        <scope line="241">
                            <scope line="242">
                                <declaration name="nd" type="char" line="243"/>
                            </scope>
                        </scope>
                    </scope>
                </scope>
            </method>
            <javadoc line="255">
                This method is run as a seperate thread when an incoming gopher
                  document requires translation to html                
            </javadoc>
            <method name="run" type="void" line="257">
                <comment line="297">
                    ps.print(&quot;&lt;br&gt;&lt;i&gt;&quot;+s+&quot;&lt;/i&gt;\n&quot;);                    
                </comment>
                <declaration name="qpos" type="int" line="258"/>
                <scope line="259">
                    <scope line="260">
                        <declaration name="ps" type="PrintStream" line="261"/>
                    </scope>
                    <scope line="263">
                        <declaration name="buf" type="byte" line="264"/>
                        <scope line="265">
                            <declaration name="n" type="int" line="266"/>
                        </scope>
                        <scope line="269"/>
                    </scope>
                    <scope line="271">
                        <declaration name="ps" type="PrintStream" line="272"/>
                        <declaration name="title" type="String" line="273"/>
                        <declaration name="ds" type="DataInputStream" line="284"/>
                        <declaration name="s" type="String" line="285"/>
                        <scope line="286">
                            <declaration name="len" type="int" line="287"/>
                            <declaration name="key" type="int" line="292"/>
                            <declaration name="t1" type="int" line="293"/>
                            <declaration name="t2" type="int" line="294"/>
                            <declaration name="t3" type="int" line="295"/>
                            <scope line="296"/>
                            <declaration name="port" type="String" line="300"/>
                            <declaration name="host" type="String" line="301"/>
                        </scope>
                    </scope>
                </scope>
                <scope line="326"/>
                <scope line="328"/>
                <scope line="329">
                    <scope line="330"/>
                    <scope line="333"/>
                </scope>
            </method>
        </class>
        <class name="GopherInputStream" line="339">
            <extends class="FilterInputStream"/>
            <comment line="41">
                The following three data members are left in for binary
                 backwards-compatibility.  Unfortunately, HotJava sets them directly
                 when it wants to change the settings.  The new design has us not
                 cache these, so this is unnecessary, but eliminating the data members
                 would break HJB 1.1 under JDK 1.2.
                
                 These data members are not used, and their values are meaningless.
                 REMIND:  Take them out for JDK 2.0!                
            </comment>
            <javadoc line="339">
                An input stream that does nothing more than hold on to the NetworkClient
                  that created it.  This is used when only the input stream is needed, and
                  the network client needs to be closed when the input stream is closed.                
            </javadoc>
            <declaration name="parent" type="NetworkClient" line="343"/>
            <method name="GopherInputStream" type="constructor" line="345">
                <params>
                    <param name="o" type="NetworkClient"/>
                    <param name="fd" type="InputStream"/>
                </params>
            </method>
            <method name="close" type="void" line="350">
                <scope line="351"/>
                <scope line="354"/>
            </method>
        </class>
    </source>