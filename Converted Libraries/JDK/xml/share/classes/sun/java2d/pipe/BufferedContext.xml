<?xml version="1.0" encoding="UTF-8"?>
    <source package="sun.java2d.pipe">
        <import package="java.awt.AlphaComposite"/>
        <import package="java.awt.Color"/>
        <import package="java.awt.Composite"/>
        <import package="java.awt.Paint"/>
        <import package="java.awt.geom.AffineTransform"/>
        <import package="sun.java2d.pipe.hw.AccelSurface"/>
        <import package="sun.java2d.InvalidPipeException"/>
        <import package="sun.java2d.SunGraphics2D"/>
        <import package="sun.java2d.loops.XORComposite"/>
        <import package="sun.java2d.pipe.BufferedOpCodes"/>
        <import package="sun.java2d.pipe.BufferedRenderPipe.BYTES_PER_SPAN"/>
        <class name="BufferedContext" line="13">
            <javadoc line="13">
                Base context class for managing state in a single-threaded rendering
                  environment.  Each state-setting operation (e.g. SET_COLOR) is added to
                  the provided RenderQueue, which will be processed at a later time by a
                  single thread.  Note that the RenderQueue lock must be acquired before
                  calling the validate() method (or any other method in this class).  See
                  the RenderQueue class comments for a sample usage scenario.                
                <see>
                    RenderQueue                    
                </see>
            </javadoc>
            <declaration name="NO_CONTEXT_FLAGS" type="int" line="23"/>
            <javadoc line="23">
                Indicates that no flags are needed; take all default code paths.                
            </javadoc>
            <declaration name="SRC_IS_OPAQUE" type="int" line="27"/>
            <javadoc line="27">
                Indicates that the source surface (or color value, if it is a simple
                  rendering operation) is opaque (has an alpha value of 1.0).  If this
                  flag is present, it allows us to disable blending in certain
                  situations in order to improve performance.                
            </javadoc>
            <declaration name="USE_MASK" type="int" line="34"/>
            <javadoc line="34">
                Indicates that the operation uses an alpha mask, which may determine
                  the code path that is used when setting up the current paint state.                
            </javadoc>
            <declaration name="rq" type="RenderQueue" line="39"/>
            <declaration name="buf" type="RenderBuffer" line="40"/>
            <declaration name="currentContext" type="BufferedContext" line="41"/>
            <javadoc line="41">
                This is a reference to the most recently validated BufferedContext.  If
                  this value is null, it means that there is no current context.  It is
                  provided here so that validate() only needs to do a quick reference
                  check to see if the BufferedContext passed to that method is the same
                  as the one we&apos;ve cached here.                
            </javadoc>
            <declaration name="validatedSrcData" type="AccelSurface" line="49"/>
            <declaration name="validatedDstData" type="AccelSurface" line="50"/>
            <declaration name="validatedClip" type="Region" line="51"/>
            <declaration name="validatedComp" type="Composite" line="52"/>
            <declaration name="validatedPaint" type="Paint" line="53"/>
            <declaration name="isValidatedPaintJustAColor" type="boolean" line="54"/>
            <declaration name="validatedRGB" type="int" line="55"/>
            <declaration name="validatedFlags" type="int" line="56"/>
            <declaration name="xformInUse" type="boolean" line="57"/>
            <declaration name="transX" type="int" line="58"/>
            <declaration name="transY" type="int" line="59"/>
            <method name="BufferedContext" type="constructor" line="60">
                <params>
                    <param name="rq" type="RenderQueue"/>
                </params>
            </method>
            <javadoc line="64">
                Fetches the BufferedContextContext associated with the dst. surface
                  and validates the context using the given parameters.  Most rendering
                  operations will call this method first in order to set the necessary
                  state before issuing rendering commands.
                  Note: must be called while the RenderQueue lock is held.                
                <throws>
                    InvalidPipeException if either src or dest surface is not valid
                      or lost                    
                </throws>
                <see>
                    RenderQueue#lock                    
                </see>
                <see>
                    RenderQueue#unlock                    
                </see>
            </javadoc>
            <method name="validateContext" type="void" line="75">
                <params>
                    <param name="srcData" type="AccelSurface"/>
                    <param name="dstData" type="AccelSurface"/>
                    <param name="clip" type="Region"/>
                    <param name="comp" type="Composite"/>
                    <param name="xform" type="AffineTransform"/>
                    <param name="paint" type="Paint"/>
                    <param name="sg2d" type="SunGraphics2D"/>
                    <param name="flags" type="int"/>
                </params>
                <declaration name="d3dc" type="BufferedContext" line="76"/>
            </method>
            <javadoc line="79">
                Fetches the BufferedContextassociated with the surface
                  and disables all context state settings.
                  Note: must be called while the RenderQueue lock is held.                
                <throws>
                    InvalidPipeException if the surface is not valid
                      or lost                    
                </throws>
                <see>
                    RenderQueue#lock                    
                </see>
                <see>
                    RenderQueue#unlock                    
                </see>
            </javadoc>
            <method name="validateContext" type="void" line="88">
                <params>
                    <param name="surface" type="AccelSurface"/>
                </params>
            </method>
            <javadoc line="91">
                Validates the given parameters against the current state for this
                  context.  If this context is not current, it will be made current
                  for the given source and destination surfaces, and the viewport will
                  be updated.  Then each part of the context state (clip, composite,
                  etc.) is checked against the previous value.  If the value has changed
                  since the last call to validate(), it will be updated accordingly.
                  Note that the SunGraphics2D parameter is only used for the purposes
                  of validating a (non-null) Paint parameter.  In all other cases it
                  is safe to pass a null SunGraphics2D and it will be ignored.
                  Note: must be called while the RenderQueue lock is held.                
                <throws>
                    InvalidPipeException if either src or dest surface is not valid
                      or lost                    
                </throws>
            </javadoc>
            <method name="validate" type="void" line="105">
                <params>
                    <param name="srcData" type="AccelSurface"/>
                    <param name="dstData" type="AccelSurface"/>
                    <param name="clip" type="Region"/>
                    <param name="comp" type="Composite"/>
                    <param name="xform" type="AffineTransform"/>
                    <param name="paint" type="Paint"/>
                    <param name="sg2d" type="SunGraphics2D"/>
                    <param name="flags" type="int"/>
                </params>
                <declaration name="updateClip" type="boolean" line="106"/>
                <declaration name="updatePaint" type="boolean" line="107"/>
                <scope line="108"/>
                <scope line="112">
                    <declaration name="newRGB" type="int" line="113"/>
                    <scope line="114">
                        <scope line="115"/>
                    </scope>
                    <scope line="120"/>
                </scope>
                <scope line="126"/>
                <scope line="130">
                    <scope line="131"/>
                    <scope line="134"/>
                </scope>
                <scope line="142">
                    <scope line="143">
                        <scope line="144"/>
                    </scope>
                    <scope line="148"/>
                </scope>
                <scope line="153">
                    <scope line="154"/>
                    <scope line="157"/>
                </scope>
                <declaration name="txChanged" type="boolean" line="164"/>
                <scope line="165">
                    <scope line="166"/>
                    <scope line="171">
                        <scope line="172"/>
                    </scope>
                    <scope line="176"/>
                </scope>
                <scope line="181"/>
                <scope line="186"/>
                <scope line="189">
                    <scope line="190"/>
                    <scope line="193"/>
                </scope>
            </method>
            <javadoc line="200">
                Invalidates the surfaces associated with this context.  This is
                  useful when the context is no longer needed, and we want to break
                  the chain caused by these surface references.
                  Note: must be called while the RenderQueue lock is held.                
                <see>
                    RenderQueue#lock                    
                </see>
                <see>
                    RenderQueue#unlock                    
                </see>
            </javadoc>
            <method name="invalidateSurfaces" type="void" line="208"/>
            <method name="setSurfaces" type="void" line="212">
                <params>
                    <param name="srcData" type="AccelSurface"/>
                    <param name="dstData" type="AccelSurface"/>
                </params>
            </method>
            <method name="resetClip" type="void" line="218"/>
            <method name="setClip" type="void" line="222">
                <params>
                    <param name="clip" type="Region"/>
                </params>
                <scope line="223"/>
                <scope line="229">
                    <declaration name="countIndex" type="int" line="233"/>
                    <declaration name="spanCount" type="int" line="235"/>
                    <declaration name="remainingSpans" type="int" line="236"/>
                    <declaration name="span" type="int" line="237"/>
                    <declaration name="si" type="SpanIterator" line="238"/>
                    <scope line="239">
                        <scope line="240"/>
                    </scope>
                </scope>
            </method>
            <method name="resetComposite" type="void" line="261"/>
            <method name="setComposite" type="void" line="265">
                <params>
                    <param name="comp" type="Composite"/>
                    <param name="flags" type="int"/>
                </params>
                <scope line="266">
                    <declaration name="ac" type="AlphaComposite" line="267"/>
                </scope>
                <scope line="274">
                    <declaration name="xorPixel" type="int" line="275"/>
                </scope>
                <scope line="280"/>
            </method>
            <method name="resetTransform" type="void" line="284"/>
            <method name="setTransform" type="void" line="288">
                <params>
                    <param name="xform" type="AffineTransform"/>
                </params>
            </method>
            <javadoc line="298">
                Resets this context&apos;s surfaces and all attributes.
                  Note: must be called while the RenderQueue lock is held.                
                <see>
                    RenderQueue#lock                    
                </see>
                <see>
                    RenderQueue#unlock                    
                </see>
            </javadoc>
            <method name="invalidateContext" type="void" line="304"/>
            <method name="getRenderQueue" type="RenderQueue" line="316"/>
            <javadoc line="316">
                Returns a singleton {@code RenderQueue} object used by the rendering
                  pipeline.                
                <return>
                    a render queue                    
                </return>
                <see>
                    RenderQueue                    
                </see>
            </javadoc>
            <method name="saveState" type="void" line="323"/>
            <javadoc line="323">
                Saves the the state of this context.
                  It may reset the current context.
                  Note: must be called while the RenderQueue lock is held.                
                <see>
                    RenderQueue#lock                    
                </see>
                <see>
                    RenderQueue#unlock                    
                </see>
            </javadoc>
            <method name="restoreState" type="void" line="331"/>
            <javadoc line="331">
                Restores the native state of this context.
                  It may reset the current context.
                  Note: must be called while the RenderQueue lock is held.                
                <see>
                    RenderQueue#lock                    
                </see>
                <see>
                    RenderQueue#unlock                    
                </see>
            </javadoc>
        </class>
    </source>