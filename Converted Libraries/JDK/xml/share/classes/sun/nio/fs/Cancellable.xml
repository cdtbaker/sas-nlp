<?xml version="1.0" encoding="UTF-8"?>
    <source package="sun.nio.fs">
        <import package="sun.misc.Unsafe"/>
        <import package="java.util.concurrent.ExecutionException"/>
        <class name="Cancellable" line="4">
            <implements interface="Runnable"/>
            <javadoc line="4">
                Base implementation of a task (typically native) that polls a memory location
                  during execution so that it may be aborted/cancelled before completion. The
                  task is executed by invoking the {@link runInterruptibly} method defined
                  here and cancelled by invoking Thread.interrupt.                
            </javadoc>
            <declaration name="unsafe" type="Unsafe" line="11"/>
            <declaration name="pollingAddress" type="long" line="12"/>
            <declaration name="lock" type="Object" line="13"/>
            <declaration name="completed" type="boolean" line="14"/>
            <declaration name="exception" type="Throwable" line="15"/>
            <method name="Cancellable" type="constructor" line="16"/>
            <javadoc line="20">
                Returns the memory address of a 4-byte int that should be polled to
                  detect cancellation.                
            </javadoc>
            <method name="addressToPollForCancel" type="long" line="24"/>
            <javadoc line="27">
                The value to write to the polled memory location to indicate that the
                  task has been cancelled. If this method is not overridden then it
                  defaults to MAX_VALUE.                
            </javadoc>
            <method name="cancelValue" type="int" line="32"/>
            <javadoc line="35">
                &quot;cancels&quot; the task by writing bits into memory location that it polled
                  by the task.                
            </javadoc>
            <method name="cancel" type="void" line="39">
                <scope line="40">
                    <scope line="41"/>
                </scope>
            </method>
            <javadoc line="46">
                Returns the exception thrown by the task or null if the task completed
                  successfully.                
            </javadoc>
            <method name="exception" type="Throwable" line="50">
                <scope line="51"/>
            </method>
            <method name="run" type="void" line="55">
                <scope line="56"/>
                <scope line="59">
                    <scope line="60"/>
                </scope>
                <scope line="64">
                    <scope line="65"/>
                </scope>
            </method>
            <method name="implRun" type="void" line="71"/>
            <javadoc line="71">
                The task body. This should periodically poll the memory location
                  to check for cancellation.                
            </javadoc>
            <javadoc line="76">
                Invokes the given task in its own thread. If this (meaning the current)
                  thread is interrupted then an attempt is make to cancel the background
                  thread by writing into the memory location that it polls cooperatively.                
            </javadoc>
            <method name="runInterruptibly" type="void" line="81">
                <params>
                    <param name="task" type="Cancellable"/>
                </params>
                <declaration name="t" type="Thread" line="82"/>
                <declaration name="cancelledByInterrupt" type="boolean" line="84"/>
                <scope line="85">
                    <scope line="86"/>
                    <scope line="89"/>
                </scope>
                <declaration name="exc" type="Throwable" line="95"/>
            </method>
        </class>
    </source>