<?xml version="1.0" encoding="UTF-8"?>
    <source package="sun.nio.ch">
        <import package="java.io.IOException"/>
        <import package="java.nio.channels"/>
        <import package="java.nio.channels.spi"/>
        <import package="java.util"/>
        <import package="sun.misc"/>
        <class name="AbstractPollSelectorImpl" line="35">
            <extends class="SelectorImpl"/>
            <comment line="44">
                The poll fd array                
            </comment>
            <comment line="47">
                Initial capacity of the pollfd array                
            </comment>
            <comment line="50">
                The list of SelectableChannels serviced by this Selector                
            </comment>
            <comment line="53">
                In some impls the first entry of channelArray is bogus                
            </comment>
            <comment line="56">
                The number of valid channels in this Selector&apos;s poll array                
            </comment>
            <comment line="59">
                True if this Selector has been closed                
            </comment>
            <comment line="62">
                Lock for close and cleanup                
            </comment>
            <javadoc line="35">
                An abstract selector impl.                
            </javadoc>
            <declaration name="pollWrapper" type="PollArrayWrapper" line="44"/>
            <declaration name="INIT_CAP" type="int" line="47"/>
            <declaration name="channelArray" type="SelectionKeyImpl[]" line="50"/>
            <declaration name="channelOffset" type="int" line="53"/>
            <declaration name="totalChannels" type="int" line="56"/>
            <declaration name="closed" type="boolean" line="59"/>
            <declaration name="closeLock" type="Object" line="62"/>
            <method name="AbstractPollSelectorImpl" type="constructor" line="64">
                <params>
                    <param name="sp" type="SelectorProvider"/>
                    <param name="channels" type="int"/>
                    <param name="offset" type="int"/>
                </params>
            </method>
            <method name="putEventOps" type="void" line="70">
                <params>
                    <param name="sk" type="SelectionKeyImpl"/>
                    <param name="ops" type="int"/>
                </params>
                <scope line="71"/>
            </method>
            <method name="wakeup" type="Selector" line="78"/>
            <method name="doSelect" type="int" line="83"/>
            <method name="implClose" type="void" line="85">
                <comment line="91">
                    Deregister channels                    
                </comment>
                <scope line="86">
                    <scope line="91">
                        <declaration name="ski" type="SelectionKeyImpl" line="92"/>
                        <declaration name="selch" type="SelectableChannel" line="96"/>
                    </scope>
                </scope>
            </method>
            <method name="implCloseInterrupt" type="void" line="109"/>
            <javadoc line="111">
                Copy the information in the pollfd structs into the opss
                  of the corresponding Channels. Add the ready keys to the
                  ready queue.                
            </javadoc>
            <method name="updateSelectedKeys" type="int" line="116">
                <comment line="119">
                    Skip zeroth entry; it is for interrupts only                    
                </comment>
                <declaration name="numKeysUpdated" type="int" line="117"/>
                <scope line="119">
                    <declaration name="rOps" type="int" line="120"/>
                    <scope line="121">
                        <declaration name="sk" type="SelectionKeyImpl" line="122"/>
                        <scope line="124">
                            <scope line="125"/>
                        </scope>
                        <scope line="128">
                            <scope line="130"/>
                        </scope>
                    </scope>
                </scope>
            </method>
            <method name="implRegister" type="void" line="140">
                <params>
                    <param name="ski" type="SelectionKeyImpl"/>
                </params>
                <comment line="146">
                    Check to see if the array is large enough                    
                </comment>
                <comment line="148">
                    Make a larger array                    
                </comment>
                <comment line="151">
                    Copy over                    
                </comment>
                <comment line="155">
                    Grow the NativeObject poll array                    
                </comment>
                <scope line="141">
                    <scope line="146">
                        <declaration name="newSize" type="int" line="148"/>
                        <declaration name="temp" type="SelectionKeyImpl" line="149"/>
                    </scope>
                </scope>
            </method>
            <method name="implDereg" type="void" line="165">
                <params>
                    <param name="ski" type="SelectionKeyImpl"/>
                </params>
                <comment line="167">
                    Algorithm: Copy the sc from the end of the list and put it into
                     the location of the sc to be removed (since order doesn&apos;t
                     matter). Decrement the sc count. Update the index of the sc
                     that is moved.                    
                </comment>
                <comment line="174">
                    Copy end one over it                    
                </comment>
                <comment line="184">
                    Destroy the last one                    
                </comment>
                <comment line="189">
                    Remove the key from keys and selectedKeys                    
                </comment>
                <declaration name="i" type="int" line="170"/>
                <scope line="172">
                    <declaration name="endChannel" type="SelectionKeyImpl" line="174"/>
                </scope>
                <scope line="180"/>
                <declaration name="selch" type="SelectableChannel" line="192"/>
            </method>
            <scope line="197"/>
        </class>
    </source>