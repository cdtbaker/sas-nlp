<?xml version="1.0" encoding="UTF-8"?>
    <source package="sun.awt.image">
        <import package="java.io.InputStream"/>
        <import package="java.io.IOException"/>
        <import package="java.net.HttpURLConnection"/>
        <import package="java.net.URL"/>
        <import package="java.net.URLConnection"/>
        <import package="java.net.MalformedURLException"/>
        <class name="URLImageSource" line="35">
            <extends class="InputStreamImageSource"/>
            <declaration name="url" type="URL" line="36"/>
            <declaration name="conn" type="URLConnection" line="37"/>
            <declaration name="actualHost" type="String" line="38"/>
            <declaration name="actualPort" type="int" line="39"/>
            <method name="URLImageSource" type="constructor" line="41">
                <params>
                    <param name="u" type="URL"/>
                </params>
                <comment line="51">
                    fallback to checkRead/checkConnect for pre 1.2                    
                </comment>
                <comment line="52">
                    security managers                    
                </comment>
                <declaration name="sm" type="SecurityManager" line="42"/>
                <scope line="43">
                    <scope line="44">
                        <declaration name="perm" type="java.security.Permission" line="45"/>
                        <scope line="47">
                            <scope line="48"/>
                            <scope line="50">
                                <scope line="54"/>
                                <scope line="58"/>
                                <scope line="60"/>
                            </scope>
                        </scope>
                    </scope>
                    <scope line="65"/>
                </scope>
            </method>
            <method name="URLImageSource" type="constructor" line="73">
                <params>
                    <param name="href" type="String"/>
                </params>
            </method>
            <method name="URLImageSource" type="constructor" line="77">
                <params>
                    <param name="u" type="URL"/>
                    <param name="uc" type="URLConnection"/>
                </params>
            </method>
            <method name="URLImageSource" type="constructor" line="82">
                <params>
                    <param name="uc" type="URLConnection"/>
                </params>
            </method>
            <method name="checkSecurity" type="boolean" line="86">
                <params>
                    <param name="context" type="Object"/>
                    <param name="quiet" type="boolean"/>
                </params>
                <comment line="87">
                    If actualHost is not null, then the host/port parameters that                    
                </comment>
                <comment line="88">
                    the image was actually fetched from were different than the                    
                </comment>
                <comment line="89">
                    host/port parameters the original URL specified for at least                    
                </comment>
                <comment line="90">
                    one of the download attempts.  The original URL security was                    
                </comment>
                <comment line="91">
                    checked when the applet got a handle to the image, so we only                    
                </comment>
                <comment line="92">
                    need to check for the real host/port.                    
                </comment>
                <scope line="93">
                    <scope line="94">
                        <declaration name="security" type="SecurityManager" line="95"/>
                        <scope line="96"/>
                    </scope>
                    <scope line="99">
                        <scope line="100"/>
                    </scope>
                </scope>
            </method>
            <method name="getConnection" type="URLConnection" line="109">
                <declaration name="c" type="URLConnection" line="110"/>
                <scope line="111"/>
                <scope line="114"/>
            </method>
            <method name="getDecoder" type="ImageDecoder" line="120">
                <comment line="132">
                    The image is allowed to come from either the host/port                    
                </comment>
                <comment line="133">
                    listed in the original URL, or it can come from one other                    
                </comment>
                <comment line="134">
                    host/port that the URL is redirected to.  More than that                    
                </comment>
                <comment line="135">
                    and we give up and just throw a SecurityException.                    
                </comment>
                <comment line="162">
                    probably, no appropriate decoder                    
                </comment>
                <declaration name="is" type="InputStream" line="121"/>
                <declaration name="type" type="String" line="122"/>
                <declaration name="c" type="URLConnection" line="123"/>
                <scope line="124">
                    <declaration name="u" type="URL" line="128"/>
                    <scope line="131">
                        <scope line="138"/>
                    </scope>
                </scope>
                <scope line="144">
                    <scope line="145">
                        <scope line="146"/>
                        <scope line="148"/>
                    </scope>
                    <scope line="150"/>
                </scope>
                <declaration name="id" type="ImageDecoder" line="156"/>
                <scope line="157"/>
                <scope line="161">
                    <scope line="163">
                        <scope line="164"/>
                        <scope line="166"/>
                    </scope>
                    <scope line="168"/>
                </scope>
            </method>
        </class>
    </source>