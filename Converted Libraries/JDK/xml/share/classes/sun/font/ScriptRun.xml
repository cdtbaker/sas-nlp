<?xml version="1.0" encoding="UTF-8"?>
    <source package="sun.font">
        <class name="ScriptRun" line="37">
            <comment line="76">
                fixed once set by constructor                
            </comment>
            <comment line="80">
                change during iteration                
            </comment>
            <comment line="84">
                stack used to handle paired punctuation if encountered                
            </comment>
            <comment line="357">
                all common                
            </comment>
            <javadoc line="37">
                &lt;code&gt;ScriptRun&lt;/code&gt; is used to find runs of characters in
                  the same script, as defined in the &lt;code&gt;Script&lt;/code&gt; class.
                  It implements a simple iterator over an array of characters.
                  The iterator will assign &lt;code&gt;COMMON&lt;/code&gt; and &lt;code&gt;INHERITED&lt;/code&gt;
                  characters to the same script as the preceeding characters. If the
                  COMMON and INHERITED characters are first, they will be assigned to
                  the same script as the following characters.
                  The iterator will try to match paired punctuation. If it sees an
                  opening punctuation character, it will remember the script that
                  was assigned to that character, and assign the same script to the
                  matching closing punctuation.
                  No attempt is made to combine related scripts into a single run. In
                  particular, Hiragana, Katakana, and Han characters will appear in seperate
                  runs.
                  Here is an example of how to iterate over script runs:
                  &lt;pre&gt;
                  void printScriptRuns(char[] text)
                  {
                  ScriptRun scriptRun = new ScriptRun(text, 0, text.length);
                  while (scriptRun.next()) {
                  int start  = scriptRun.getScriptStart();
                  int limit  = scriptRun.getScriptLimit();
                  int script = scriptRun.getScriptCode();
                  System.out.println(&quot;Script \&quot;&quot; + Script.getName(script) + &quot;\&quot; from &quot; +
                  start + &quot; to &quot; + limit + &quot;.&quot;);
                  }
                  }
                  &lt;/pre&gt;                
            </javadoc>
            <declaration name="text" type="char[]" line="75"/>
            <declaration name="textStart" type="int" line="76"/>
            <declaration name="textLimit" type="int" line="77"/>
            <declaration name="scriptStart" type="int" line="79"/>
            <declaration name="scriptLimit" type="int" line="80"/>
            <declaration name="scriptCode" type="int" line="81"/>
            <declaration name="stack" type="int" line="83"/>
            <declaration name="parenSP" type="int" line="84"/>
            <method name="ScriptRun" type="constructor" line="86">
                <comment line="87">
                    must call init later or we die.                    
                </comment>
            </method>
            <javadoc line="90">
                Construct a &lt;code&gt;ScriptRun&lt;/code&gt; object which iterates over a subrange
                  of the given characetrs.                
                <param>
                    chars the array of characters over which to iterate.                    
                </param>
                <param>
                    start the index of the first character over which to iterate                    
                </param>
                <param>
                    count the number of characters over which to iterate                    
                </param>
            </javadoc>
            <method name="ScriptRun" type="constructor" line="99">
                <params>
                    <param name="chars" type="char[]"/>
                    <param name="start" type="int"/>
                    <param name="count" type="int"/>
                </params>
            </method>
            <method name="init" type="void" line="104">
                <params>
                    <param name="chars" type="char[]"/>
                    <param name="start" type="int"/>
                    <param name="count" type="int"/>
                </params>
                <scope line="105"/>
            </method>
            <javadoc line="119">
                Get the starting index of the current script run.                
                <return>
                    the index of the first character in the current script run.                    
                </return>
            </javadoc>
            <method name="getScriptStart" type="int" line="124"/>
            <javadoc line="128">
                Get the index of the first character after the current script run.                
                <return>
                    the index of the first character after the current script run.                    
                </return>
            </javadoc>
            <method name="getScriptLimit" type="int" line="133"/>
            <javadoc line="137">
                Get the script code for the script of the current script run.                
                <return>
                    the script code for the script of the current script run.                    
                </return>
                <see>
                    #Script                    
                </see>
            </javadoc>
            <method name="getScriptCode" type="int" line="143"/>
            <javadoc line="147">
                Find the next script run. Returns &lt;code&gt;false&lt;/code&gt; if there
                  isn&apos;t another run, returns &lt;code&gt;true&lt;/code&gt; if there is.                
                <return>
                    <code>false</code> if there isn't another run, <code>true</code> if there is.                    
                </return>
            </javadoc>
            <method name="next" type="boolean" line="153">
                <comment line="154">
                    used to find the first new open character                    
                </comment>
                <comment line="156">
                    if we&apos;ve fallen off the end of the text, we&apos;re done                    
                </comment>
                <comment line="170">
                    Paired character handling:                    
                </comment>
                <comment line="171">
                                        
                </comment>
                <comment line="172">
                    if it&apos;s an open character, push it onto the stack.                    
                </comment>
                <comment line="173">
                    if it&apos;s a close character, find the matching open on the                    
                </comment>
                <comment line="174">
                    stack, and use that script code. Any non-matching open                    
                </comment>
                <comment line="175">
                    characters above it on the stack will be popped.                    
                </comment>
                <comment line="208">
                    now that we have a final script code, fix any open                    
                </comment>
                <comment line="209">
                    characters we pushed before we knew the script code.                    
                </comment>
                <comment line="216">
                    if this character is a close paired character,                    
                </comment>
                <comment line="217">
                    pop it from the stack                    
                </comment>
                <comment line="222">
                    We&apos;ve just seen the first character of                    
                </comment>
                <comment line="223">
                    the next run. Back over it so we&apos;ll see                    
                </comment>
                <comment line="224">
                    it again the next time.                    
                </comment>
                <comment line="227">
                    we&apos;re outta here                    
                </comment>
                <declaration name="startSP" type="int" line="154"/>
                <scope line="157"/>
                <declaration name="ch" type="int" line="164"/>
                <scope line="166">
                    <declaration name="sc" type="int" line="167"/>
                    <declaration name="pairIndex" type="int" line="168"/>
                    <scope line="176">
                        <scope line="177">
                            <scope line="178"/>
                            <scope line="180">
                                <declaration name="newstack" type="int[]" line="181"/>
                            </scope>
                        </scope>
                        <scope line="188">
                            <declaration name="pi" type="int" line="189"/>
                            <scope line="193"/>
                            <scope line="195"/>
                            <scope line="198"/>
                        </scope>
                    </scope>
                    <scope line="204">
                        <scope line="205">
                            <scope line="210"/>
                        </scope>
                        <scope line="218"/>
                    </scope>
                    <scope line="221"/>
                </scope>
            </method>
            <declaration name="SURROGATE_START" type="int" line="235"/>
            <declaration name="LEAD_START" type="int" line="236"/>
            <declaration name="LEAD_LIMIT" type="int" line="237"/>
            <declaration name="TAIL_START" type="int" line="238"/>
            <declaration name="TAIL_LIMIT" type="int" line="239"/>
            <declaration name="LEAD_SURROGATE_SHIFT" type="int" line="240"/>
            <declaration name="SURROGATE_OFFSET" type="int" line="241"/>
            <declaration name="DONE" type="int" line="243"/>
            <method name="nextCodePoint" type="int" line="245">
                <scope line="246"/>
                <declaration name="ch" type="int" line="249"/>
                <scope line="250">
                    <declaration name="nch" type="int" line="251"/>
                    <scope line="252"/>
                </scope>
            </method>
            <method name="pushback" type="void" line="260">
                <params>
                    <param name="ch" type="int"/>
                </params>
                <scope line="261">
                    <scope line="262"/>
                    <scope line="264"/>
                </scope>
            </method>
            <javadoc line="270">
                Compare two script codes to see if they are in the same script. If one script is
                  a strong script, and the other is INHERITED or COMMON, it will compare equal.                
                <param>
                    scriptOne one of the script codes.                    
                </param>
                <param>
                    scriptTwo the other script code.                    
                </param>
                <return>
                    <code>true</code> if the two scripts are the same.                    
                </return>
                <see>
                    com.ibm.icu.lang.Script                    
                </see>
            </javadoc>
            <method name="sameScript" type="boolean" line="279">
                <params>
                    <param name="scriptOne" type="int"/>
                    <param name="scriptTwo" type="int"/>
                </params>
            </method>
            <javadoc line="283">
                Find the highest bit that&apos;s set in a word. Uses a binary search through
                  the bits.                
                <param>
                    n the word in which to find the highest bit that's set.                    
                </param>
                <return>
                    the bit number (counting from the low order bit) of the highest bit.                    
                </return>
            </javadoc>
            <method name="highBit" type="byte" line="291">
                <params>
                    <param name="n" type="int"/>
                </params>
                <scope line="292"/>
                <declaration name="bit" type="byte" line="296"/>
                <scope line="298"/>
                <scope line="303"/>
                <scope line="308"/>
                <scope line="313"/>
                <scope line="318"/>
            </method>
            <javadoc line="326">
                Search the pairedChars array for the given character.                
                <param>
                    ch the character for which to search.                    
                </param>
                <return>
                    the index of the character in the table, or -1 if it's not there.                    
                </return>
            </javadoc>
            <method name="getPairIndex" type="int" line="333">
                <params>
                    <param name="ch" type="int"/>
                </params>
                <declaration name="probe" type="int" line="334"/>
                <declaration name="index" type="int" line="335"/>
                <scope line="337"/>
                <scope line="341">
                    <scope line="344"/>
                </scope>
                <scope line="349"/>
            </method>
            <declaration name="pairedChars" type="int" line="357"/>
            <declaration name="pairedCharPower" type="int" line="377"/>
            <declaration name="pairedCharExtra" type="int" line="378"/>
        </class>
    </source>