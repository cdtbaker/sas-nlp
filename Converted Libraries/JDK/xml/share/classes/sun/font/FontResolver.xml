<?xml version="1.0" encoding="UTF-8"?>
    <source package="sun.font">
        <import package="java.awt.Font"/>
        <import package="java.awt.GraphicsEnvironment"/>
        <import package="java.awt.font.TextAttribute"/>
        <import package="java.util.ArrayList"/>
        <import package="java.util.Map"/>
        <import package="sun.text.CodePointIterator"/>
        <class name="FontResolver" line="40">
            <comment line="54">
                An array of all fonts available to the runtime.  The fonts                
            </comment>
            <comment line="55">
                will be searched in order.                
            </comment>
            <comment line="60">
                Default size of Fonts (if created from an empty Map, for instance).                
            </comment>
            <comment line="61">
                from Font                
            </comment>
            <comment line="65">
                The results of previous lookups are cached in a two-level                
            </comment>
            <comment line="66">
                table.  The value for a character c is found in:                
            </comment>
            <comment line="67">
                blocks[c&gt;&gt;SHIFT][c&amp;MASK]                
            </comment>
            <comment line="68">
                although the second array is only allocated when needed.                
            </comment>
            <comment line="69">
                A 0 value means the character&apos;s font has not been looked up.                
            </comment>
            <comment line="70">
                A positive value means the character&apos;s font is in the allFonts                
            </comment>
            <comment line="71">
                array at index (value-1).                
            </comment>
            <comment line="135">
                This method is called only for character codes &gt;= 0x10000 - which
                 are assumed to be legal supplementary characters.
                 It looks first at the default font (to avoid calling getAllFonts if at
                 all possible) and if that doesn&apos;t map the code point, it scans
                 just the fonts that may contain supplementary characters.
                 The index that is returned is into the &quot;allFonts&quot; array so that
                 callers see the same value for both supplementary and base chars.                
            </comment>
            <javadoc line="40">
                This class maps an individual character to a Font family which can
                  display it.  The character-to-Font mapping does not depend on the
                  character&apos;s context, so a particular character will be mapped to the
                  same font family each time.
                  &lt;p&gt;
                  Typically, clients will call getIndexFor(char) for each character
                  in a style run.  When getIndexFor() returns a different value from
                  ones seen previously, the characters up to that point will be assigned
                  a font obtained from getFont().                
            </javadoc>
            <declaration name="allFonts" type="Font[]" line="55"/>
            <declaration name="supplementaryFonts" type="Font[]" line="56"/>
            <declaration name="supplementaryIndices" type="int[]" line="57"/>
            <declaration name="DEFAULT_SIZE" type="int" line="60"/>
            <declaration name="defaultFont" type="Font" line="62"/>
            <declaration name="SHIFT" type="int" line="71"/>
            <declaration name="BLOCKSIZE" type="int" line="72"/>
            <declaration name="MASK" type="int" line="73"/>
            <declaration name="blocks" type="int[][]" line="74"/>
            <method name="FontResolver" type="constructor" line="76"/>
            <method name="getAllFonts" type="Font[]" line="79">
                <scope line="80">
                    <scope line="83"/>
                </scope>
            </method>
            <javadoc line="90">
                Search fonts in order, and return &quot;1&quot; to indicate its in the default
                  font, (or not found at all),  or the index of the first font
                  which can display the given character, plus 2, if it is not
                  in the default font.                
            </javadoc>
            <method name="getIndexFor" type="int" line="96">
                <params>
                    <param name="c" type="char"/>
                </params>
                <scope line="98"/>
                <scope line="101">
                    <scope line="102"/>
                </scope>
            </method>
            <method name="getAllSCFonts" type="Font[]" line="109">
                <scope line="111">
                    <declaration name="fonts" type="ArrayList&lt;Font&gt;" line="112"/>
                    <declaration name="indices" type="ArrayList&lt;Integer&gt;" line="113"/>
                    <scope line="115">
                        <declaration name="font" type="Font" line="116"/>
                        <declaration name="font2D" type="Font2D" line="117"/>
                        <scope line="118"/>
                    </scope>
                    <declaration name="len" type="int" line="124"/>
                    <scope line="126"/>
                </scope>
            </method>
            <method name="getIndexFor" type="int" line="142">
                <params>
                    <param name="cp" type="int"/>
                </params>
                <scope line="144"/>
                <scope line="148">
                    <scope line="149"/>
                </scope>
            </method>
            <javadoc line="156">
                Return an index for the given character.  The index identifies a
                  font family to getFont(), and has no other inherent meaning.                
                <param>
                    c the character to map                    
                </param>
                <return>
                    a value for consumption by getFont()                    
                </return>
                <see>
                    #getFont                    
                </see>
            </javadoc>
            <method name="getFontIndex" type="int" line="163">
                <params>
                    <param name="c" type="char"/>
                </params>
                <declaration name="blockIndex" type="int" line="165"/>
                <declaration name="block" type="int[]" line="166"/>
                <scope line="167"/>
                <declaration name="index" type="int" line="172"/>
                <scope line="173"/>
            </method>
            <method name="getFontIndex" type="int" line="179">
                <params>
                    <param name="cp" type="int"/>
                </params>
                <scope line="180"/>
            </method>
            <javadoc line="186">
                Determines the font index for the code point at the current position in the
                  iterator, then advances the iterator to the first code point that has
                  a different index or until the iterator is DONE, and returns the font index.                
                <param>
                    iter a code point iterator, this will be advanced past any code
                      points that have the same font index                    
                </param>
                <return>
                    the font index for the initial code point found, or 1 if the iterator
                      was empty.                    
                </return>
            </javadoc>
            <method name="nextFontRunIndex" type="int" line="195">
                <params>
                    <param name="iter" type="CodePointIterator"/>
                </params>
                <declaration name="cp" type="int" line="196"/>
                <declaration name="fontIndex" type="int" line="197"/>
                <scope line="198">
                    <scope line="201">
                        <scope line="202"/>
                    </scope>
                </scope>
            </method>
            <javadoc line="211">
                Return a Font from a given font index with properties
                  from attributes.  The font index, which should have been produced
                  by getFontIndex(), determines a font family.  The size and style
                  of the Font reflect the properties in attributes.  Any Font or
                  font family specifications in attributes are ignored, on the
                  assumption that clients have already handled them.                
                <param>
                    index an index from getFontIndex() which determines the
                      font family                    
                </param>
                <param>
                    attributes a Map from which the size and style of the Font
                      are determined.  The default size is 12 and the default style
                      is Font.PLAIN                    
                </param>
                <see>
                    #getFontIndex                    
                </see>
            </javadoc>
            <method name="getFont" type="Font" line="225">
                <params>
                    <param name="index" type="int"/>
                    <param name="attributes" type="Map"/>
                </params>
                <declaration name="font" type="Font" line="226"/>
                <scope line="228"/>
            </method>
            <declaration name="INSTANCE" type="FontResolver" line="235"/>
            <javadoc line="237">
                Return a shared instance of FontResolver.                
            </javadoc>
            <method name="getInstance" type="FontResolver" line="240">
                <scope line="241"/>
            </method>
        </class>
    </source>