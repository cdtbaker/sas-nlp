<?xml version="1.0" encoding="UTF-8"?>
    <source package="sun.security.krb5.internal.ccache">
        <import package="sun.security.krb5"/>
        <import package="sun.security.krb5.internal"/>
        <import package="java.util.StringTokenizer"/>
        <import package="java.util.Vector"/>
        <import package="java.io.IOException"/>
        <import package="java.io.File"/>
        <import package="java.io.FileInputStream"/>
        <import package="java.io.FileOutputStream"/>
        <import package="java.io.BufferedReader"/>
        <import package="java.io.InputStreamReader"/>
        <import package="java.lang.reflect"/>
        <class name="FileCredentialsCache" line="48">
            <extends class="CredentialsCache"/>
            <comment line="61">
                optional                
            </comment>
            <comment line="356">
                Returns path name of the credentials cache file.
                 The path name is searched in the following order:
                
                 1. KRB5CCNAME
                 2. tmpkrb5cc_&lt;uid&gt; on unix systems
                 3. &lt;user.home&gt;krb5cc_&lt;user.name&gt;
                 4. &lt;user.home&gt;krb5cc (if can&apos;t get &lt;user.name&gt;)                
            </comment>
            <implements interface="FileCCacheConstants"/>
            <javadoc line="48">
                CredentialsCache stores credentials(tickets, session keys, etc) in a
                  semi-permanent store
                  for later use by different program.                
                <author>
                    Yanni Zhang                    
                </author>
                <author>
                    Ram Marti                    
                </author>
            </javadoc>
            <declaration name="version" type="int" line="59"/>
            <declaration name="tag" type="Tag" line="60"/>
            <declaration name="primaryPrincipal" type="PrincipalName" line="61"/>
            <declaration name="primaryRealm" type="Realm" line="62"/>
            <declaration name="credentialsList" type="Vector&lt;Credentials&gt;" line="63"/>
            <declaration name="dir" type="String" line="64"/>
            <declaration name="DEBUG" type="boolean" line="65"/>
            <method name="acquireInstance" type="FileCredentialsCache" line="68">
                <params>
                    <param name="principal" type="PrincipalName"/>
                    <param name="cache" type="String"/>
                </params>
                <comment line="78">
                    invalid cache name or the file doesn&apos;t exist                    
                </comment>
                <comment line="88">
                    we don&apos;t handle it now, instead we return a null at the end.                    
                </comment>
                <comment line="93">
                    we don&apos;t handle it now, instead we return a null at the end.                    
                </comment>
                <scope line="69">
                    <declaration name="fcc" type="FileCredentialsCache" line="70"/>
                    <scope line="71"/>
                    <scope line="73"/>
                    <scope line="76"/>
                    <scope line="80"/>
                </scope>
                <scope line="86">
                    <scope line="88"/>
                </scope>
                <scope line="91">
                    <scope line="93"/>
                </scope>
            </method>
            <method name="acquireInstance" type="FileCredentialsCache" line="100"/>
            <method name="New" type="FileCredentialsCache" line="105">
                <params>
                    <param name="principal" type="PrincipalName"/>
                    <param name="name" type="String"/>
                </params>
                <comment line="111">
                    invalid cache name or the file doesn&apos;t exist                    
                </comment>
                <scope line="106">
                    <declaration name="fcc" type="FileCredentialsCache" line="107"/>
                    <scope line="109"/>
                </scope>
                <scope line="116"/>
                <scope line="118"/>
            </method>
            <method name="New" type="FileCredentialsCache" line="123">
                <params>
                    <param name="principal" type="PrincipalName"/>
                </params>
                <scope line="124">
                    <declaration name="fcc" type="FileCredentialsCache" line="125"/>
                </scope>
                <scope line="130">
                    <scope line="131"/>
                </scope>
                <scope line="134">
                    <scope line="135"/>
                </scope>
            </method>
            <method name="FileCredentialsCache" type="constructor" line="143"/>
            <method name="exists" type="boolean" line="146">
                <params>
                    <param name="cache" type="String"/>
                </params>
                <declaration name="file" type="File" line="147"/>
                <scope line="148"/>
            </method>
            <method name="init" type="void" line="154">
                <params>
                    <param name="principal" type="PrincipalName"/>
                    <param name="name" type="String"/>
                </params>
                <declaration name="cos" type="CCacheOutputStream" line="157"/>
            </method>
            <method name="load" type="void" line="165">
                <params>
                    <param name="name" type="String"/>
                </params>
                <declaration name="p" type="PrincipalName" line="166"/>
                <declaration name="cis" type="CCacheInputStream" line="167"/>
                <scope line="170"/>
                <scope line="172">
                    <scope line="174"/>
                </scope>
                <scope line="180">
                    <scope line="181"/>
                </scope>
                <scope line="188">
                    <declaration name="cred" type="Credentials" line="189"/>
                    <scope line="190"/>
                </scope>
            </method>
            <javadoc line="198">
                Updates the credentials list. If the specified credentials for the
                  service is new, add it to the list. If there is an entry in the list,
                  replace the old credentials with the new one.                
                <param>
                    c the credentials.                    
                </param>
            </javadoc>
            <method name="update" type="void" line="205">
                <params>
                    <param name="c" type="Credentials"/>
                </params>
                <scope line="206">
                    <scope line="207"/>
                    <scope line="209">
                        <declaration name="tmp" type="Credentials" line="210"/>
                        <declaration name="matched" type="boolean" line="211"/>
                        <scope line="213">
                            <scope line="218">
                                <scope line="220">
                                    <scope line="221"/>
                                </scope>
                            </scope>
                        </scope>
                        <scope line="231">
                            <scope line="232"/>
                        </scope>
                    </scope>
                </scope>
            </method>
            <method name="getPrimaryPrincipal" type="PrincipalName" line="244"/>
            <javadoc line="249">
                Saves the credentials cache file to the disk.                
            </javadoc>
            <method name="save" type="void" line="252">
                <declaration name="cos" type="CCacheOutputStream" line="253"/>
                <declaration name="tmp" type="Credentials[]" line="256"/>
                <scope line="257">
                    <scope line="258"/>
                </scope>
            </method>
            <method name="match" type="boolean" line="265">
                <params>
                    <param name="s1" type="String[]"/>
                    <param name="s2" type="String[]"/>
                </params>
                <scope line="266"/>
                <scope line="268">
                    <scope line="269">
                        <scope line="270"/>
                    </scope>
                </scope>
            </method>
            <javadoc line="278">
                Returns the list of credentials entries in the cache file.                
            </javadoc>
            <method name="getCredsList" type="Credentials[]" line="281">
                <scope line="282"/>
                <scope line="284">
                    <declaration name="tmp" type="Credentials[]" line="285"/>
                    <scope line="286"/>
                </scope>
            </method>
            <method name="getCreds" type="Credentials" line="295">
                <params>
                    <param name="options" type="LoginOptions"/>
                    <param name="sname" type="PrincipalName"/>
                    <param name="srealm" type="Realm"/>
                </params>
                <scope line="296"/>
                <scope line="298">
                    <declaration name="list" type="Credentials[]" line="299"/>
                    <scope line="300"/>
                    <scope line="302">
                        <scope line="303">
                            <scope line="305">
                                <scope line="306"/>
                            </scope>
                        </scope>
                    </scope>
                </scope>
            </method>
            <javadoc line="317">
                Gets a credentials for a specified service.                
                <param>
                    sname service principal name.                    
                </param>
                <param>
                    srealm the realm that the service belongs to.                    
                </param>
            </javadoc>
            <method name="getCreds" type="Credentials" line="322">
                <params>
                    <param name="sname" type="PrincipalName"/>
                    <param name="srealm" type="Realm"/>
                </params>
                <declaration name="list" type="Credentials[]" line="323"/>
                <scope line="324"/>
                <scope line="326">
                    <scope line="327">
                        <scope line="329"/>
                    </scope>
                </scope>
            </method>
            <method name="getDefaultCreds" type="Credentials" line="337">
                <comment line="346">
                    find the TGT for the current realm krbtgt/realm@realm                    
                </comment>
                <declaration name="list" type="Credentials[]" line="338"/>
                <scope line="339"/>
                <scope line="341">
                    <scope line="342">
                        <scope line="343">
                            <declaration name="nameStrings" type="String[]" line="344"/>
                            <scope line="346"/>
                        </scope>
                    </scope>
                </scope>
            </method>
            <method name="getDefaultCacheName" type="String" line="365">
                <comment line="385">
                    get cache name from system.property                    
                </comment>
                <comment line="390">
                    For Unix platforms we use the default cache name to be
                     tmpkrbcc_uid ; for all other platforms  we use
                     {user_home}krb5_cc{user_name}
                     Please note that for Windows 2K we will use LSA to get
                     the TGT from the the default cache even before we come here;
                     however when we create cache we will create a cache under
                     {user_home}krb5_cc{user_name} for non-Unix platforms including
                     Windows 2K.                    
                </comment>
                <comment line="435">
                    we did not get the uid;                    
                </comment>
                <declaration name="stdCacheNameComponent" type="String" line="367"/>
                <declaration name="name" type="String" line="368"/>
                <anonymous_class line="371">
                    <method name="run" type="String" line="373"/>
                </anonymous_class>
                <scope line="377">
                    <scope line="378"/>
                </scope>
                <declaration name="osname" type="String" line="385"/>
                <scope line="400">
                    <declaration name="cmd" type="String" line="401"/>
                    <declaration name="uidStr" type="String" line="402"/>
                    <declaration name="uid" type="long" line="403"/>
                    <scope line="406">
                        <scope line="407">
                            <declaration name="c" type="Class&lt;?&gt;" line="408"/>
                            <declaration name="constructor" type="Constructor&lt;?&gt;" line="410"/>
                            <declaration name="obj" type="Object" line="411"/>
                            <declaration name="method" type="Method" line="412"/>
                            <scope line="416"/>
                        </scope>
                        <scope line="421">
                            <scope line="422"/>
                        </scope>
                    </scope>
                </scope>
                <declaration name="user_name" type="String" line="437"/>
                <declaration name="user_home" type="String" line="441"/>
                <scope line="445"/>
                <scope line="451"/>
                <scope line="454"/>
                <scope line="458"/>
            </method>
            <method name="checkValidation" type="String" line="465">
                <params>
                    <param name="name" type="String"/>
                </params>
                <comment line="472">
                    get full path name                    
                </comment>
                <comment line="476">
                    get absolute directory                    
                </comment>
                <comment line="478">
                    test if the directory exists                    
                </comment>
                <comment line="486">
                    invalid name                    
                </comment>
                <declaration name="fullname" type="String" line="466"/>
                <scope line="467"/>
                <scope line="470">
                    <declaration name="fCheck" type="File" line="473"/>
                    <scope line="474">
                        <declaration name="temp" type="File" line="476"/>
                    </scope>
                </scope>
                <scope line="484"/>
            </method>
            <method name="exec" type="String" line="491">
                <params>
                    <param name="c" type="String"/>
                </params>
                <comment line="517">
                    exception occured in execing the command                    
                </comment>
                <declaration name="st" type="StringTokenizer" line="492"/>
                <declaration name="v" type="Vector&lt;String&gt;" line="493"/>
                <scope line="494"/>
                <declaration name="command" type="String[]" line="497"/>
                <scope line="499">
                    <anonymous_class line="503">
                        <method name="run" type="Process" line="504">
                            <scope line="505"/>
                            <scope line="507">
                                <scope line="508"/>
                            </scope>
                        </method>
                    </anonymous_class>
                    <declaration name="p" type="Process" line="501"/>
                    <scope line="515"/>
                    <declaration name="commandResult" type="BufferedReader" line="520"/>
                    <declaration name="s1" type="String" line="523"/>
                    <scope line="525">
                        <scope line="526">
                            <scope line="527">
                                <scope line="529"/>
                            </scope>
                        </scope>
                    </scope>
                </scope>
                <scope line="538">
                    <scope line="539"/>
                </scope>
            </method>
        </class>
    </source>