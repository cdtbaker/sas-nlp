<?xml version="1.0" encoding="UTF-8"?>
    <source package="sun.security.util">
        <import package="java.util"/>
        <import package="java.lang.ref"/>
        <class name="Cache" line="31">
            <comment line="249">
                XXXX                
            </comment>
            <comment line="434">
                it is a heavyweight method.                
            </comment>
            <javadoc line="31">
                Abstract base class and factory for caches. A cache is a key-value mapping.
                  It has properties that make it more suitable for caching than a Map.
                  The factory methods can be used to obtain two different implementations.
                  They have the following properties:
                  . keys and values reside in memory
                  . keys and values must be non-null
                  . maximum size. Replacements are made in LRU order.
                  . optional lifetime, specified in seconds.
                  . save for concurrent use by multiple threads
                  . values are held by either standard references or via SoftReferences.
                  SoftReferences have the advantage that they are automatically cleared
                  by the garbage collector in response to memory demand. This makes it
                  possible to simple set the maximum size to a very large value and let
                  the GC automatically size the cache dynamically depending on the
                  amount of available memory.
                  However, note that because of the way SoftReferences are implemented in
                  HotSpot at the moment, this may not work perfectly as it clears them fairly
                  eagerly. Performance may be improved if the Java heap size is set to larger
                  value using e.g. java -ms64M -mx128M foo.Test
                  Cache sizing: the memory cache is implemented on top of a LinkedHashMap.
                  In its current implementation, the number of buckets (NOT entries) in
                  (Linked)HashMaps is always a power of two. It is recommended to set the
                  maximum cache size to value that uses those buckets fully. For example,
                  if a cache with somewhere between 500 and 1000 entries is desired, a
                  maximum size of 750 would be a good choice: try 1024 buckets, with a
                  load factor of 0.75f, the number of entries can be calculated as
                  buckets / 4  3. As mentioned above, with a SoftReference cache, it is
                  generally reasonable to set the size to a fairly large value.                
                <author>
                    Andreas Sterbenz                    
                </author>
            </javadoc>
            <method name="Cache" type="constructor" line="74">
                <comment line="75">
                    empty                    
                </comment>
            </method>
            <method name="size" type="int" line="78"/>
            <javadoc line="78">
                Return the number of currently valid entries in the cache.                
            </javadoc>
            <method name="clear" type="void" line="83"/>
            <javadoc line="83">
                Remove all entries from the cache.                
            </javadoc>
            <method name="put" type="void" line="88"/>
            <javadoc line="88">
                Add an entry to the cache.                
            </javadoc>
            <method name="get" type="Object" line="93"/>
            <javadoc line="93">
                Get a value from the cache.                
            </javadoc>
            <method name="remove" type="void" line="98"/>
            <javadoc line="98">
                Remove an entry from the cache.                
            </javadoc>
            <method name="setCapacity" type="void" line="103"/>
            <javadoc line="103">
                Set the maximum size.                
            </javadoc>
            <method name="setTimeout" type="void" line="108"/>
            <javadoc line="108">
                Set the timeout(in seconds).                
            </javadoc>
            <method name="accept" type="void" line="113"/>
            <javadoc line="113">
                accept a visitor                
            </javadoc>
            <javadoc line="118">
                Return a new memory cache with the specified maximum size, unlimited
                  lifetime for entries, with the values held by SoftReferences.                
            </javadoc>
            <method name="newSoftMemoryCache" type="Cache" line="122">
                <params>
                    <param name="size" type="int"/>
                </params>
            </method>
            <javadoc line="126">
                Return a new memory cache with the specified maximum size, the
                  specified maximum lifetime (in seconds), with the values held
                  by SoftReferences.                
            </javadoc>
            <method name="newSoftMemoryCache" type="Cache" line="131">
                <params>
                    <param name="size" type="int"/>
                    <param name="timeout" type="int"/>
                </params>
            </method>
            <javadoc line="135">
                Return a new memory cache with the specified maximum size, unlimited
                  lifetime for entries, with the values held by standard references.                
            </javadoc>
            <method name="newHardMemoryCache" type="Cache" line="139">
                <params>
                    <param name="size" type="int"/>
                </params>
            </method>
            <javadoc line="143">
                Return a dummy cache that does nothing.                
            </javadoc>
            <method name="newNullCache" type="Cache" line="146"/>
            <javadoc line="150">
                Return a new memory cache with the specified maximum size, the
                  specified maximum lifetime (in seconds), with the values held
                  by standard references.                
            </javadoc>
            <method name="newHardMemoryCache" type="Cache" line="155">
                <params>
                    <param name="size" type="int"/>
                    <param name="timeout" type="int"/>
                </params>
            </method>
            <class name="EqualByteArray" line="159">
                <javadoc line="159">
                    Utility class that wraps a byte array and implements the equals()
                      and hashCode() contract in a way suitable for Maps and caches.                    
                </javadoc>
                <declaration name="b" type="byte[]" line="165"/>
                <declaration name="hash" type="int" line="166"/>
                <method name="EqualByteArray" type="constructor" line="168">
                    <params>
                        <param name="b" type="byte[]"/>
                    </params>
                </method>
                <method name="hashCode" type="int" line="172">
                    <declaration name="h" type="int" line="173"/>
                    <scope line="174">
                        <scope line="176"/>
                    </scope>
                </method>
                <method name="equals" type="boolean" line="184">
                    <params>
                        <param name="obj" type="Object"/>
                    </params>
                    <scope line="185"/>
                    <scope line="188"/>
                    <declaration name="other" type="EqualByteArray" line="191"/>
                </method>
            </class>
            <interface name="CacheVisitor">
                <method name="visit" type="void" line="197"/>
            </interface>
        </class>
        <class name="NullCache" line="202">
            <extends class="Cache"/>
            <comment line="249">
                XXXX                
            </comment>
            <comment line="434">
                it is a heavyweight method.                
            </comment>
            <declaration name="INSTANCE" type="Cache" line="204"/>
            <method name="NullCache" type="constructor" line="206">
                <comment line="207">
                    empty                    
                </comment>
            </method>
            <method name="size" type="int" line="210"/>
            <method name="clear" type="void" line="214">
                <comment line="215">
                    empty                    
                </comment>
            </method>
            <method name="put" type="void" line="218">
                <params>
                    <param name="key" type="Object"/>
                    <param name="value" type="Object"/>
                </params>
                <comment line="219">
                    empty                    
                </comment>
            </method>
            <method name="get" type="Object" line="222">
                <params>
                    <param name="key" type="Object"/>
                </params>
            </method>
            <method name="remove" type="void" line="226">
                <params>
                    <param name="key" type="Object"/>
                </params>
                <comment line="227">
                    empty                    
                </comment>
            </method>
            <method name="setCapacity" type="void" line="230">
                <params>
                    <param name="size" type="int"/>
                </params>
                <comment line="231">
                    empty                    
                </comment>
            </method>
            <method name="setTimeout" type="void" line="234">
                <params>
                    <param name="timeout" type="int"/>
                </params>
                <comment line="235">
                    empty                    
                </comment>
            </method>
            <method name="accept" type="void" line="238">
                <params>
                    <param name="visitor" type="CacheVisitor"/>
                </params>
                <comment line="239">
                    empty                    
                </comment>
            </method>
        </class>
        <class name="MemoryCache" line="244">
            <extends class="Cache"/>
            <comment line="249">
                XXXX                
            </comment>
            <comment line="434">
                it is a heavyweight method.                
            </comment>
            <declaration name="LOAD_FACTOR" type="float" line="246"/>
            <declaration name="DEBUG" type="boolean" line="249"/>
            <declaration name="cacheMap" type="Map&lt;Object,CacheEntry&gt;" line="251"/>
            <declaration name="maxSize" type="int" line="252"/>
            <declaration name="lifetime" type="long" line="253"/>
            <declaration name="queue" type="ReferenceQueue" line="254"/>
            <method name="MemoryCache" type="constructor" line="256">
                <params>
                    <param name="soft" type="boolean"/>
                    <param name="maxSize" type="int"/>
                </params>
            </method>
            <method name="MemoryCache" type="constructor" line="260">
                <params>
                    <param name="soft" type="boolean"/>
                    <param name="maxSize" type="int"/>
                    <param name="lifetime" type="int"/>
                </params>
                <declaration name="buckets" type="int" line="264"/>
            </method>
            <javadoc line="269">
                Empty the reference queue and remove all corresponding entries
                  from the cache.
                  This method should be called at the beginning of each public
                  method.                
            </javadoc>
            <method name="emptyQueue" type="void" line="276">
                <comment line="288">
                    key is null, entry has already been removed                    
                </comment>
                <comment line="292">
                    check if the entry in the map corresponds to the expired                    
                </comment>
                <comment line="293">
                    entry. If not, readd the entry                    
                </comment>
                <scope line="277"/>
                <declaration name="startSize" type="int" line="280"/>
                <scope line="281">
                    <declaration name="entry" type="CacheEntry" line="282"/>
                    <scope line="283"/>
                    <declaration name="key" type="Object" line="286"/>
                    <scope line="287"/>
                    <declaration name="currentEntry" type="CacheEntry" line="291"/>
                    <scope line="294"/>
                </scope>
                <scope line="298">
                    <declaration name="endSize" type="int" line="299"/>
                    <scope line="300"/>
                </scope>
            </method>
            <javadoc line="307">
                Scan all entries and remove all expired ones.                
            </javadoc>
            <method name="expungeExpiredEntries" type="void" line="310">
                <scope line="312"/>
                <declaration name="cnt" type="int" line="315"/>
                <declaration name="time" type="long" line="316"/>
                <scope line="318">
                    <declaration name="entry" type="CacheEntry" line="319"/>
                    <scope line="320"/>
                </scope>
                <scope line="325">
                    <scope line="326"/>
                </scope>
            </method>
            <method name="size" type="int" line="333"/>
            <method name="clear" type="void" line="338">
                <comment line="340">
                    if this is a SoftReference cache, first invalidate() all                    
                </comment>
                <comment line="341">
                    entries so that GC does not have to enqueue them                    
                </comment>
                <comment line="346">
                    empty                    
                </comment>
                <scope line="339">
                    <scope line="342"/>
                    <scope line="345"/>
                </scope>
            </method>
            <method name="put" type="void" line="352">
                <params>
                    <param name="key" type="Object"/>
                    <param name="value" type="Object"/>
                </params>
                <comment line="364">
                    still too large?                    
                </comment>
                <declaration name="expirationTime" type="long" line="354"/>
                <declaration name="newEntry" type="CacheEntry" line="356"/>
                <declaration name="oldEntry" type="CacheEntry" line="357"/>
                <scope line="358"/>
                <scope line="362">
                    <scope line="364">
                        <declaration name="t" type="Iterator&lt;CacheEntry&gt;" line="365"/>
                        <declaration name="lruEntry" type="CacheEntry" line="366"/>
                        <scope line="367"/>
                    </scope>
                </scope>
            </method>
            <method name="get" type="Object" line="377">
                <params>
                    <param name="key" type="Object"/>
                </params>
                <declaration name="entry" type="CacheEntry" line="379"/>
                <scope line="380"/>
                <declaration name="time" type="long" line="383"/>
                <scope line="384">
                    <scope line="385"/>
                </scope>
            </method>
            <method name="remove" type="void" line="394">
                <params>
                    <param name="key" type="Object"/>
                </params>
                <declaration name="entry" type="CacheEntry" line="396"/>
                <scope line="397"/>
            </method>
            <method name="setCapacity" type="void" line="402">
                <params>
                    <param name="size" type="int"/>
                </params>
                <scope line="404">
                    <declaration name="t" type="Iterator&lt;CacheEntry&gt;" line="405"/>
                    <scope line="406">
                        <declaration name="lruEntry" type="CacheEntry" line="407"/>
                        <scope line="408"/>
                    </scope>
                </scope>
                <scope line="419"/>
            </method>
            <method name="setTimeout" type="void" line="424">
                <params>
                    <param name="timeout" type="int"/>
                </params>
                <scope line="428"/>
            </method>
            <method name="accept" type="void" line="434">
                <params>
                    <param name="visitor" type="CacheVisitor"/>
                </params>
                <declaration name="cached" type="Map&lt;Object,Object&gt;" line="436"/>
            </method>
            <method name="getCachedEntries" type="Map<Object,Object>" line="441">
                <declaration name="kvmap" type="Map&lt;Object,Object&gt;" line="442"/>
                <scope line="444"/>
            </method>
            <method name="newEntry" type="CacheEntry" line="452">
                <params>
                    <param name="key" type="Object"/>
                    <param name="value" type="Object"/>
                    <param name="expirationTime" type="long"/>
                    <param name="queue" type="ReferenceQueue"/>
                </params>
                <scope line="453"/>
                <scope line="455"/>
            </method>
            <interface name="CacheEntry">
                <method name="isValid" type="boolean" line="462"/>
                <method name="invalidate" type="void" line="464"/>
                <method name="getKey" type="Object" line="466"/>
                <method name="getValue" type="Object" line="468"/>
            </interface>
            <class name="HardCacheEntry" line="472">
                <implements interface="CacheEntry"/>
                <declaration name="key" type="Object" line="474"/>
                <declaration name="expirationTime" type="long" line="475"/>
                <method name="HardCacheEntry" type="constructor" line="477">
                    <params>
                        <param name="key" type="Object"/>
                        <param name="value" type="Object"/>
                        <param name="expirationTime" type="long"/>
                    </params>
                </method>
                <method name="getKey" type="Object" line="483"/>
                <method name="getValue" type="Object" line="487"/>
                <method name="isValid" type="boolean" line="491">
                    <params>
                        <param name="currentTime" type="long"/>
                    </params>
                    <declaration name="valid" type="boolean" line="492"/>
                    <scope line="493"/>
                </method>
                <method name="invalidate" type="void" line="499"/>
            </class>
            <class name="SoftCacheEntry" line="506">
                <extends class="SoftReference"/>
                <implements interface="CacheEntry"/>
                <declaration name="key" type="Object" line="509"/>
                <declaration name="expirationTime" type="long" line="510"/>
                <method name="SoftCacheEntry" type="constructor" line="513">
                    <params>
                        <param name="key" type="Object"/>
                        <param name="value" type="Object"/>
                        <param name="expirationTime" type="long"/>
                        <param name="queue" type="ReferenceQueue"/>
                    </params>
                </method>
                <method name="getKey" type="Object" line="519"/>
                <method name="getValue" type="Object" line="523"/>
                <method name="isValid" type="boolean" line="527">
                    <params>
                        <param name="currentTime" type="long"/>
                    </params>
                    <declaration name="valid" type="boolean" line="528"/>
                    <scope line="529"/>
                </method>
                <method name="invalidate" type="void" line="535"/>
            </class>
        </class>
    </source>