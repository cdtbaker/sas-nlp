<?xml version="1.0" encoding="UTF-8"?>
    <source package="sun.management.snmp">
        <import package="com.sun.jmx.snmp.daemon.SnmpAdaptorServer"/>
        <import package="com.sun.jmx.snmp.InetAddressAcl"/>
        <import package="com.sun.jmx.snmp.IPAcl.SnmpAcl"/>
        <import package="sun.management.snmp.jvmmib.JVM_MANAGEMENT_MIB"/>
        <import package="sun.management.snmp.jvminstr.JVM_MANAGEMENT_MIB_IMPL"/>
        <import package="sun.management.snmp.jvminstr.NotificationTarget"/>
        <import package="sun.management.snmp.jvminstr.NotificationTargetImpl"/>
        <import package="sun.management.snmp.util.MibLogger"/>
        <import package="sun.management.snmp.util.JvmContextFactory"/>
        <import package="sun.management.Agent"/>
        <import package="sun.management.AgentConfigurationError"/>
        <import package="sun.management.AgentConfigurationError"/>
        <import package="sun.management.FileSystem"/>
        <import package="java.util.List"/>
        <import package="java.util.ArrayList"/>
        <import package="java.util.Enumeration"/>
        <import package="java.util.Properties"/>
        <import package="java.io.IOException"/>
        <import package="java.io.File"/>
        <import package="java.io.FileInputStream"/>
        <import package="java.net.InetAddress"/>
        <import package="java.net.UnknownHostException"/>
        <class name="AdaptorBootstrap" line="55">
            <javadoc line="55">
                This class initializes and starts the SNMP Adaptor for JSR 163 SNMP
                  Monitoring.                
            </javadoc>
            <declaration name="log" type="MibLogger" line="61"/>
            <interface name="DefaultValues">
                <javadoc line="63">
                    Default values for SNMP configuration properties.                    
                </javadoc>
                <declaration name="PORT" type="String" line="67"/>
                <declaration name="CONFIG_FILE_NAME" type="String" line="68"/>
                <declaration name="TRAP_PORT" type="String" line="69"/>
                <declaration name="USE_ACL" type="String" line="70"/>
                <declaration name="ACL_FILE_NAME" type="String" line="71"/>
                <declaration name="BIND_ADDRESS" type="String" line="72"/>
            </interface>
            <interface name="PropertyNames">
                <javadoc line="75">
                    Names of SNMP configuration properties.                    
                </javadoc>
                <declaration name="PORT" type="String" line="79"/>
                <declaration name="CONFIG_FILE_NAME" type="String" line="80"/>
                <declaration name="TRAP_PORT" type="String" line="82"/>
                <declaration name="USE_ACL" type="String" line="84"/>
                <declaration name="ACL_FILE_NAME" type="String" line="86"/>
                <declaration name="BIND_ADDRESS" type="String" line="88"/>
            </interface>
            <declaration name="adaptor" type="SnmpAdaptorServer" line="92"/>
            <javadoc line="92">
                We keep a reference - so that we can possibly call
                  terminate(). As of now, terminate() is only called by unit tests
                  (makes it possible to run several testcases sequentially in the
                  same JVM).                
            </javadoc>
            <declaration name="jvmmib" type="JVM_MANAGEMENT_MIB_IMPL" line="99"/>
            <method name="AdaptorBootstrap" type="constructor" line="102">
                <params>
                    <param name="snmpas" type="SnmpAdaptorServer"/>
                    <param name="mib" type="JVM_MANAGEMENT_MIB_IMPL"/>
                </params>
            </method>
            <javadoc line="107">
                Compute the full path name for a default file.                
                <param>
                    basename basename (with extension) of the default file.                    
                </param>
                <return>
                    ${JRE}/lib/management/${basename}                    
                </return>
            </javadoc>
            <method name="getDefaultFileName" type="String" line="112">
                <params>
                    <param name="basename" type="String"/>
                </params>
                <declaration name="fileSeparator" type="String" line="113"/>
            </method>
            <javadoc line="118">
                Retrieve the Trap Target List from the ACL file.                
            </javadoc>
            <method name="getTargetList" type="List<NotificationTarget>" line="122">
                <params>
                    <param name="acl" type="InetAddressAcl"/>
                    <param name="defaultTrapPort" type="int"/>
                </params>
                <declaration name="result" type="ArrayList&lt;NotificationTarget&gt;" line="123"/>
                <scope line="125">
                    <declaration name="td" type="Enumeration" line="129"/>
                    <scope line="130">
                        <declaration name="targetAddr" type="InetAddress" line="131"/>
                        <declaration name="tc" type="Enumeration" line="132"/>
                        <scope line="134">
                            <declaration name="community" type="String" line="135"/>
                            <declaration name="target" type="NotificationTarget" line="136"/>
                        </scope>
                    </scope>
                </scope>
            </method>
            <javadoc line="151">
                Initializes and starts the SNMP Adaptor Server.
                  If the com.sun.management.snmp.port property is not defined,
                  simply return. Otherwise, attempts to load the config file, and
                  then calls {@link #initialize(java.lang.String,java.util.Properties)}.                
            </javadoc>
            <method name="initialize" type="AdaptorBootstrap" line="158">
                <comment line="160">
                    Load a new properties                    
                </comment>
                <declaration name="props" type="Properties" line="161"/>
                <declaration name="portStr" type="String" line="164"/>
            </method>
            <javadoc line="169">
                Initializes and starts the SNMP Adaptor Server.                
            </javadoc>
            <method name="initialize" type="AdaptorBootstrap" line="173">
                <params>
                    <param name="portStr" type="String"/>
                    <param name="props" type="Properties"/>
                </params>
                <comment line="175">
                    Get port number                    
                </comment>
                <comment line="188">
                    Get trap port number                    
                </comment>
                <comment line="204">
                    Get bind address                    
                </comment>
                <comment line="209">
                    Get ACL File                    
                </comment>
                <declaration name="port" type="int" line="177"/>
                <scope line="178"/>
                <scope line="180"/>
                <scope line="184"/>
                <declaration name="trapPortStr" type="String" line="189"/>
                <declaration name="trapPort" type="int" line="193"/>
                <scope line="194"/>
                <scope line="196"/>
                <scope line="200"/>
                <declaration name="addrStr" type="String" line="205"/>
                <declaration name="defaultAclFileName" type="String" line="210"/>
                <declaration name="aclFileName" type="String" line="212"/>
                <declaration name="useAclStr" type="String" line="215"/>
                <declaration name="useAcl" type="boolean" line="217"/>
                <declaration name="adaptor" type="AdaptorBootstrap" line="222"/>
                <scope line="223"/>
                <scope line="226"/>
            </method>
            <method name="getAdaptorBootstrap" type="AdaptorBootstrap" line="234">
                <params>
                    <param name="port" type="int"/>
                    <param name="trapPort" type="int"/>
                    <param name="bindAddress" type="String"/>
                    <param name="useAcl" type="boolean"/>
                    <param name="aclFileName" type="String"/>
                </params>
                <comment line="261">
                    Create adaptor                    
                </comment>
                <comment line="267">
                    Create MIB                    
                </comment>
                <comment line="268">
                                        
                </comment>
                <comment line="276">
                    Configure the trap destinations.                    
                </comment>
                <comment line="277">
                                        
                </comment>
                <comment line="281">
                    Start Adaptor                    
                </comment>
                <comment line="282">
                                        
                </comment>
                <comment line="284">
                    Will wait until the adaptor starts or fails to start.                    
                </comment>
                <comment line="285">
                    If the adaptor fails to start, a CommunicationException or                    
                </comment>
                <comment line="286">
                    an InterruptedException is thrown.                    
                </comment>
                <comment line="287">
                                        
                </comment>
                <comment line="300">
                    double check that adaptor is actually started (should always                    
                </comment>
                <comment line="301">
                    be active, so that exception should never be thrown from here)                    
                </comment>
                <comment line="302">
                                        
                </comment>
                <comment line="309">
                    Add MIB to adaptor                    
                </comment>
                <comment line="310">
                                        
                </comment>
                <comment line="313">
                    Add Adaptor to the MIB                    
                </comment>
                <comment line="314">
                                        
                </comment>
                <declaration name="address" type="InetAddress" line="236"/>
                <scope line="237"/>
                <scope line="239"/>
                <scope line="242"/>
                <declaration name="acl" type="InetAddressAcl" line="253"/>
                <scope line="254"/>
                <scope line="257"/>
                <declaration name="adaptor" type="SnmpAdaptorServer" line="262"/>
                <declaration name="mib" type="JVM_MANAGEMENT_MIB_IMPL" line="269"/>
                <scope line="270"/>
                <scope line="272"/>
                <scope line="283"/>
                <scope line="289">
                    <declaration name="t" type="Throwable" line="290"/>
                    <scope line="291">
                        <declaration name="next" type="Throwable" line="292"/>
                    </scope>
                </scope>
                <scope line="303"/>
                <scope line="308"/>
                <scope line="316"/>
            </method>
            <method name="checkAclFile" type="void" line="329">
                <params>
                    <param name="aclFileName" type="String"/>
                </params>
                <scope line="330"/>
                <declaration name="file" type="File" line="333"/>
                <scope line="334"/>
                <scope line="337"/>
                <declaration name="fs" type="FileSystem" line="341"/>
                <scope line="342">
                    <scope line="343">
                        <scope line="344"/>
                    </scope>
                </scope>
                <scope line="349"/>
            </method>
            <javadoc line="356">
                Get the port on which the adaptor is bound.
                  Returns 0 if the adaptor is already terminated.                
            </javadoc>
            <method name="getPort" type="int" line="361"/>
            <javadoc line="366">
                Stops the adaptor server.                
            </javadoc>
            <method name="terminate" type="void" line="369">
                <comment line="372">
                    Terminate the MIB (deregister NotificationListener from                    
                </comment>
                <comment line="373">
                    MemoryMBean)                    
                </comment>
                <comment line="374">
                                        
                </comment>
                <comment line="378">
                    Must not prevent to stop...                    
                </comment>
                <comment line="379">
                                        
                </comment>
                <comment line="386">
                    Stop the adaptor                    
                </comment>
                <comment line="387">
                                        
                </comment>
                <scope line="375"/>
                <scope line="377"/>
                <scope line="382"/>
                <scope line="388"/>
                <scope line="390"/>
            </method>
        </class>
    </source>