<?xml version="1.0" encoding="UTF-8"?>
    <source package="sun.management.snmp.util">
        <import package="com.sun.jmx.snmp.SnmpOid"/>
        <import package="com.sun.jmx.mbeanserver.Util"/>
        <import package="java.io.Serializable"/>
        <import package="java.util.Comparator"/>
        <import package="java.util.Arrays"/>
        <import package="java.util.Map"/>
        <import package="java.util.TreeMap"/>
        <import package="java.util.List"/>
        <import package="java.util.Iterator"/>
        <import package="java.lang.ref.WeakReference"/>
        <class name="SnmpNamedListTableCache" line="12">
            <extends class="SnmpListTableCache"/>
            <javadoc line="12">
                This abstract class implements a weak cache that holds table data, for
                  a table whose data is obtained from a list  where a name can be obtained
                  for each item in the list.
                  &lt;p&gt;This object maintains a map between an entry name and its associated
                  SnmpOid index, so that a given entry is always associated to the same
                  index.&lt;/p&gt;
                  &lt;p&gt;&lt;b&gt;NOTE: This class is not synchronized, subclasses must implement
                  the appropriate synchronization whwn needed.&lt;/b&gt;&lt;/p&gt;                
            </javadoc>
            <declaration name="names" type="TreeMap" line="23"/>
            <javadoc line="23">
                This map associate an entry name with the SnmpOid index that&apos;s
                  been allocated for it.                
            </javadoc>
            <declaration name="last" type="long" line="28"/>
            <javadoc line="28">
                The last allocate index.                
            </javadoc>
            <declaration name="wrapped" type="boolean" line="32"/>
            <javadoc line="32">
                true if the index has wrapped.                
            </javadoc>
            <method name="getKey" type="String" line="36"/>
            <javadoc line="36">
                Returns the key to use as name for the given &lt;var&gt;item&lt;/var&gt;.
                  &lt;br&gt;This method is called by {@link #getIndex(Object,List,int,Object)}.
                  The given &lt;var&gt;item&lt;/var&gt; is expected to be always associated with
                  the same name.                
                <param>
                    context The context passed to{@link #updateCachedDatas(Object,List)}.                    
                </param>
                <param>
                    rawDatas Raw table datas passed to{@link #updateCachedDatas(Object,List)}.                    
                </param>
                <param>
                    rank Rank of the given &lt;var&gt;item&lt;/var&gt; in the
                      &lt;var&gt;rawDatas&lt;/var&gt; list iterator.                    
                </param>
                <param>
                    item The raw data object for which a key name must be determined.                    
                </param>
            </javadoc>
            <javadoc line="48">
                Find a new index for the entry corresponding to the
                  given &lt;var&gt;item&lt;/var&gt;.
                  &lt;br&gt;This method is called by {@link #getIndex(Object,List,int,Object)}when a new index needs to be allocated for an &lt;var&gt;item&lt;/var&gt;. The
                  index returned must not be already in used.                
                <param>
                    context The context passed to{@link #updateCachedDatas(Object,List)}.                    
                </param>
                <param>
                    rawDatas Raw table datas passed to{@link #updateCachedDatas(Object,List)}.                    
                </param>
                <param>
                    rank Rank of the given &lt;var&gt;item&lt;/var&gt; in the
                      &lt;var&gt;rawDatas&lt;/var&gt; list iterator.                    
                </param>
                <param>
                    item The raw data object for which an index must be determined.                    
                </param>
            </javadoc>
            <method name="makeIndex" type="SnmpOid" line="59">
                <params>
                    <param name="context" type="Object"/>
                    <param name="rawDatas" type="List"/>
                    <param name="rank" type="int"/>
                    <param name="item" type="Object"/>
                </params>
                <scope line="60"/>
                <scope line="66">
                    <declaration name="testOid" type="SnmpOid" line="68"/>
                </scope>
            </method>
            <javadoc line="77">
                Call {@link #getKey(Object,List,int,Object)} in order to get
                  the item name. Then check whether an index was already allocated
                  for the entry by that name. If yes return it. Otherwise, call{@link #makeIndex(Object,List,int,Object)} to compute a new
                  index for that entry.
                  Finally store the association between
                  the name and index in the context TreeMap.                
                <param>
                    context The context passed to{@link #updateCachedDatas(Object,List)}.
                      It is expected to
                      be an instance of  {@link TreeMap}.                    
                </param>
                <param>
                    rawDatas Raw table datas passed to{@link #updateCachedDatas(Object,List)}.                    
                </param>
                <param>
                    rank Rank of the given &lt;var&gt;item&lt;/var&gt; in the
                      &lt;var&gt;rawDatas&lt;/var&gt; list iterator.                    
                </param>
                <param>
                    item The raw data object for which an index must be determined.                    
                </param>
            </javadoc>
            <method name="getIndex" type="SnmpOid" line="92">
                <params>
                    <param name="context" type="Object"/>
                    <param name="rawDatas" type="List"/>
                    <param name="rank" type="int"/>
                    <param name="item" type="Object"/>
                </params>
                <declaration name="key" type="String" line="93"/>
                <declaration name="index" type="Object" line="94"/>
                <declaration name="result" type="SnmpOid" line="95"/>
                <scope line="96">
                    <declaration name="map" type="Map&amp;lt;Object,Object&amp;gt;" line="97"/>
                </scope>
            </method>
            <javadoc line="103">
                Allocate a new {@link TreeMap} to serve as context, then
                  call {@link SnmpListTableCache#updateCachedDatas(Object,List)}, and
                  finally replace the {@link #names} TreeMap by the new allocated
                  TreeMap.                
                <param>
                    rawDatas The table datas from which the cached data will be
                      computed.                    
                </param>
            </javadoc>
            <method name="updateCachedDatas" type="SnmpCachedData" line="111">
                <params>
                    <param name="context" type="Object"/>
                    <param name="rawDatas" type="List"/>
                </params>
                <declaration name="ctxt" type="TreeMap" line="112"/>
                <declaration name="result" type="SnmpCachedData" line="113"/>
            </method>
            <method name="loadRawDatas" type="List" line="117"/>
            <javadoc line="117">
                Load a list of raw data from which to build the cached data.
                  This method is called when nothing is found in the request
                  contextual cache.                
                <param>
                    userData The request contextual cache allocated by
                      the {@link JvmContextFactory}.                    
                </param>
            </javadoc>
            <method name="getRawDatasKey" type="String" line="125"/>
            <javadoc line="125">
                The name under which the raw data is to be found/put in
                  the request contextual cache.                
            </javadoc>
            <javadoc line="130">
                Get a list of raw data from which to build the cached data.
                  Obtains a list of raw data by first looking it up in the
                  request contextual cache &lt;var&gt;userData&lt;/var&gt; under the given
                  &lt;var&gt;key&lt;/var&gt;. If nothing is found in the cache, calls{@link #loadRawDatas(Map)} to obtain a new rawData list,
                  and cache the result in &lt;var&gt;userData&lt;/var&gt; under &lt;var&gt;key&lt;/var&gt;.                
                <param>
                    userData The request contextual cache allocated by
                      the {@link JvmContextFactory}.                    
                </param>
                <param>
                    key The name under which the raw data is to be found/put in
                      the request contextual cache.                    
                </param>
            </javadoc>
            <method name="getRawDatas" type="List" line="141">
                <params>
                    <param name="userData" type="Map&lt;Object,Object&gt;"/>
                    <param name="key" type="String"/>
                </params>
                <declaration name="rawDatas" type="List" line="142"/>
                <scope line="144"/>
            </method>
            <javadoc line="150">
                Update cahed datas.
                  Obtains a {@link List} of raw datas by calling{@link #getRawDatas(Map,String) getRawDatas((Map)context,getRawDatasKey())}.&lt;br&gt;
                  Then allocate a new {@link TreeMap} to serve as temporary map between
                  names and indexes, and call {@link #updateCachedDatas(Object,List)}with that temporary map as context.&lt;br&gt;
                  Finally replaces the {@link #names} TreeMap by the temporary
                  TreeMap.                
                <param>
                    context The request contextual cache allocated by the{@link JvmContextFactory}.                    
                </param>
            </javadoc>
            <method name="updateCachedDatas" type="SnmpCachedData" line="159">
                <params>
                    <param name="context" type="Object"/>
                </params>
                <declaration name="userData" type="Map&amp;lt;Object,Object&amp;gt;" line="160"/>
                <declaration name="rawDatas" type="List" line="161"/>
                <declaration name="ctxt" type="TreeMap" line="163"/>
                <declaration name="result" type="SnmpCachedData" line="164"/>
            </method>
            <declaration name="log" type="MibLogger" line="168"/>
        </class>
    </source>