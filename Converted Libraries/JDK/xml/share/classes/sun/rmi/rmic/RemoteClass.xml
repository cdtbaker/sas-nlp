<?xml version="1.0" encoding="UTF-8"?>
    <source package="sun.rmi.rmic">
        <import package="java.util.Vector"/>
        <import package="java.util.Hashtable"/>
        <import package="java.util.Enumeration"/>
        <import package="java.io.IOException"/>
        <import package="java.io.ByteArrayOutputStream"/>
        <import package="java.io.DataOutputStream"/>
        <import package="java.security.MessageDigest"/>
        <import package="java.security.DigestOutputStream"/>
        <import package="java.security.NoSuchAlgorithmException"/>
        <import package="sun.tools.java.Type"/>
        <import package="sun.tools.java.ClassDefinition"/>
        <import package="sun.tools.java.ClassDeclaration"/>
        <import package="sun.tools.java.MemberDefinition"/>
        <import package="sun.tools.java.Identifier"/>
        <import package="sun.tools.java.ClassNotFound"/>
        <class name="RemoteClass" line="17">
            <implements interface="sun.rmi.rmic.RMIConstants"/>
            <javadoc line="17">
                A RemoteClass object encapsulates RMI-specific information about
                  a remote implementation class, i.e. a class that implements
                  one or more remote interfaces.
                  WARNING: The contents of this source file are not part of any
                  supported API.  Code that depends on them does so at its own risk:
                  they are subject to change or removal without notice.                
                <author>
                    Peter Jones                    
                </author>
            </javadoc>
            <javadoc line="27">
                Create a RemoteClass object representing the remote meta-information
                  of the given class.
                  Returns true if successful.  If the class is not a properly formed
                  remote implementation class or if some other error occurs, the
                  return value will be null, and errors will have been reported to
                  the supplied BatchEnvironment.                
            </javadoc>
            <method name="forClass" type="RemoteClass" line="35">
                <params>
                    <param name="env" type="BatchEnvironment"/>
                    <param name="implClassDef" type="ClassDefinition"/>
                </params>
                <declaration name="rc" type="RemoteClass" line="36"/>
                <scope line="37"/>
                <scope line="40"/>
            </method>
            <javadoc line="44">
                Return the ClassDefinition for this class.                
            </javadoc>
            <method name="getClassDefinition" type="ClassDefinition" line="47"/>
            <javadoc line="50">
                Return the name of the class represented by this object.                
            </javadoc>
            <method name="getName" type="Identifier" line="53"/>
            <javadoc line="56">
                Return an array of ClassDefinitions representing all of the remote
                  interfaces implemented by this class.
                  A remote interface is any interface that extends Remote,
                  directly or indirectly.  The remote interfaces of a class
                  are the interfaces directly listed in either the class&apos;s
                  &quot;implements&quot; clause, or the &quot;implements&quot; clause of any
                  of its superclasses, that are remote interfaces.
                  The order of the array returned is arbitrary, and some elements
                  may be superfluous (i.e., superinterfaces of other interfaces
                  in the array).                
            </javadoc>
            <method name="getRemoteInterfaces" type="ClassDefinition[]" line="68"/>
            <javadoc line="71">
                Return an array of RemoteClass.Method objects representing all of
                  the remote methods implemented by this class, i.e. all of the
                  methods in the class&apos;s remote interfaces.
                  The methods in the array are ordered according to the comparision
                  of the strings consisting of their method name followed by their
                  type signature, so each method&apos;s index in the array corresponds
                  to its &quot;operation number&quot; in the JDK 1.1 version of the
                  stub/skeleton protocol.                
            </javadoc>
            <method name="getRemoteMethods" type="Method[]" line="81"/>
            <javadoc line="84">
                Return the &quot;interface hash&quot; used to match a stub/skeleton pair for
                  this class in the JDK 1.1 version of the stub/skeleton protocol.                
            </javadoc>
            <method name="getInterfaceHash" type="long" line="88"/>
            <javadoc line="91">
                Return string representation of this object, consisting of
                  the string &quot;remote class &quot; followed by the class name.                
            </javadoc>
            <method name="toString" type="String" line="95"/>
            <declaration name="env" type="BatchEnvironment" line="98"/>
            <javadoc line="98">
                rmic environment for this object                
            </javadoc>
            <declaration name="implClassDef" type="ClassDefinition" line="102"/>
            <javadoc line="102">
                the remote implementation class this object corresponds to                
            </javadoc>
            <declaration name="remoteInterfaces" type="ClassDefinition[]" line="106"/>
            <javadoc line="106">
                remote interfaces implemented by this class                
            </javadoc>
            <declaration name="remoteMethods" type="Method[]" line="110"/>
            <javadoc line="110">
                all the remote methods of this class                
            </javadoc>
            <declaration name="interfaceHash" type="long" line="114"/>
            <javadoc line="114">
                stub/skeleton &quot;interface hash&quot; for this class                
            </javadoc>
            <declaration name="defRemote" type="ClassDefinition" line="118"/>
            <javadoc line="118">
                cached definition for certain classes used in this environment                
            </javadoc>
            <declaration name="defException" type="ClassDefinition" line="122"/>
            <declaration name="defRemoteException" type="ClassDefinition" line="123"/>
            <javadoc line="124">
                Create a RemoteClass instance for the given class.  The resulting
                  object is not yet initialized.                
            </javadoc>
            <method name="RemoteClass" type="constructor" line="128">
                <params>
                    <param name="env" type="BatchEnvironment"/>
                    <param name="implClassDef" type="ClassDefinition"/>
                </params>
            </method>
            <javadoc line="132">
                Validate that the remote implementation class is properly formed
                  and fill in the data structures required by the public interface.                
            </javadoc>
            <method name="initialize" type="boolean" line="136">
                <scope line="137"/>
                <scope line="141"/>
                <scope line="146"/>
                <declaration name="remotesImplemented" type="Vector&amp;lt;ClassDefinition&amp;gt;" line="150"/>
                <scope line="151">
                    <scope line="152">
                        <declaration name="interfaces" type="ClassDeclaration[]" line="153"/>
                        <scope line="154">
                            <declaration name="interfaceDef" type="ClassDefinition" line="155"/>
                            <scope line="156">
                                <scope line="158"/>
                            </scope>
                        </scope>
                        <scope line="163">
                            <scope line="164"/>
                            <scope line="167"/>
                        </scope>
                    </scope>
                    <scope line="174"/>
                </scope>
                <declaration name="methods" type="Hashtable&amp;lt;String,Method&amp;gt;" line="179"/>
                <declaration name="errors" type="boolean" line="180"/>
                <scope line="181">
                    <declaration name="interfaceDef" type="ClassDefinition" line="182"/>
                </scope>
                <declaration name="orderedKeys" type="String[]" line="188"/>
                <declaration name="count" type="int" line="189"/>
                <scope line="190">
                    <declaration name="m" type="Method" line="191"/>
                    <declaration name="key" type="String" line="192"/>
                    <declaration name="i" type="int" line="193"/>
                    <scope line="194">
                        <scope line="195"/>
                    </scope>
                </scope>
                <scope line="204">
                    <scope line="206">
                        <declaration name="exceptions" type="ClassDeclaration[]" line="208"/>
                        <scope line="210"/>
                    </scope>
                </scope>
            </method>
            <javadoc line="220">
                Collect and validate all methods from given interface and all of
                  its superinterfaces as remote methods.  Remote methods are added
                  to the supplied hashtable.  Returns true if successful,
                  or false if an error occurred.                
            </javadoc>
            <method name="collectRemoteMethods" type="boolean" line="226">
                <params>
                    <param name="interfaceDef" type="ClassDefinition"/>
                    <param name="table" type="Hashtable&lt;String,Method&gt;"/>
                </params>
                <scope line="227"/>
                <declaration name="errors" type="boolean" line="230"/>
                <scope line="231">
                    <scope line="232">
                        <declaration name="exceptions" type="ClassDeclaration[]" line="233"/>
                        <declaration name="hasRemoteException" type="boolean" line="234"/>
                        <scope line="235">
                            <scope line="236">
                                <scope line="237"/>
                            </scope>
                            <scope line="242"/>
                        </scope>
                        <scope line="247"/>
                        <scope line="252">
                            <declaration name="implMethod" type="MemberDefinition" line="253"/>
                            <scope line="254">
                                <scope line="256">
                                    <scope line="257"/>
                                </scope>
                            </scope>
                        </scope>
                        <scope line="265"/>
                        <declaration name="newMethod" type="Method" line="269"/>
                        <declaration name="key" type="String" line="270"/>
                        <declaration name="oldMethod" type="Method" line="271"/>
                        <scope line="272">
                            <scope line="274"/>
                        </scope>
                    </scope>
                </scope>
                <scope line="282">
                    <declaration name="superDefs" type="ClassDeclaration[]" line="283"/>
                    <scope line="284">
                        <declaration name="superDef" type="ClassDefinition" line="285"/>
                    </scope>
                </scope>
                <scope line="289"/>
            </method>
            <javadoc line="295">
                Compute the &quot;interface hash&quot; of the stub/skeleton pair for this
                  remote implementation class.  This is the 64-bit value used to
                  enforce compatibility between a stub and a skeleton using the
                  JDK 1.1 version of the stub/skeleton protocol.
                  It is calculated using the first 64 bits of a SHA digest.  The
                  digest is from a stream consisting of the following data:
                  (int) stub version number, always 1
                  for each remote method, in order of operation number:
                  (UTF) method name
                  (UTF) method type signature
                  for each declared exception, in alphabetical name order:
                  (UTF) name of exception class                
            </javadoc>
            <method name="computeInterfaceHash" type="long" line="309">
                <declaration name="hash" type="long" line="310"/>
                <declaration name="sink" type="ByteArrayOutputStream" line="311"/>
                <scope line="312">
                    <declaration name="md" type="MessageDigest" line="313"/>
                    <declaration name="out" type="DataOutputStream" line="314"/>
                    <scope line="316">
                        <declaration name="m" type="MemberDefinition" line="317"/>
                        <declaration name="name" type="Identifier" line="318"/>
                        <declaration name="type" type="Type" line="319"/>
                        <declaration name="exceptions" type="ClassDeclaration" line="322"/>
                        <scope line="324"/>
                    </scope>
                    <declaration name="hashArray" type="byte" line="329"/>
                    <scope line="330"/>
                </scope>
                <scope line="334"/>
                <scope line="337"/>
            </method>
            <javadoc line="342">
                Sort array of class declarations alphabetically by their mangled
                  fully-qualfied class name.  This is used to feed a method&apos;s exceptions
                  in a canonical order into the digest stream for the interface hash
                  computation.                
            </javadoc>
            <method name="sortClassDeclarations" type="void" line="348">
                <params>
                    <param name="decl" type="ClassDeclaration[]"/>
                </params>
                <scope line="349">
                    <declaration name="curr" type="ClassDeclaration" line="350"/>
                    <declaration name="name" type="String" line="351"/>
                    <declaration name="j" type="int" line="352"/>
                    <scope line="353">
                        <scope line="354"/>
                    </scope>
                </scope>
            </method>
            <class name="Method" line="362">
                <implements interface="Cloneable"/>
                <javadoc line="362">
                    A RemoteClass.Method object encapsulates RMI-specific information
                      about a particular remote method in the remote implementation class
                      represented by the outer instance.                    
                </javadoc>
                <javadoc line="368">
                    Return the definition of the actual class member corresponing
                      to this method of a remote interface.
                      REMIND: Can this method be removed?                    
                </javadoc>
                <method name="getMemberDefinition" type="MemberDefinition" line="373"/>
                <javadoc line="376">
                    Return the name of this method.                    
                </javadoc>
                <method name="getName" type="Identifier" line="379"/>
                <javadoc line="382">
                    Return the type of this method.                    
                </javadoc>
                <method name="getType" type="Type" line="385"/>
                <javadoc line="388">
                    Return an array of the exception classes declared to be
                      thrown by this remote method.
                      For methods with the same name and type signature inherited
                      from multiple remote interfaces, the array will contain
                      the set of exceptions declared in all of the interfaces&apos;
                      methods that can be legally thrown in each of them.                    
                </javadoc>
                <method name="getExceptions" type="ClassDeclaration[]" line="396"/>
                <javadoc line="399">
                    Return the &quot;method hash&quot; used to identify this remote method
                      in the JDK 1.2 version of the stub protocol.                    
                </javadoc>
                <method name="getMethodHash" type="long" line="403"/>
                <javadoc line="406">
                    Return the string representation of this method.                    
                </javadoc>
                <method name="toString" type="String" line="409"/>
                <javadoc line="412">
                    Return the string representation of this method appropriate
                      for the construction of a java.rmi.server.Operation object.                    
                </javadoc>
                <method name="getOperationString" type="String" line="416"/>
                <javadoc line="419">
                    Return a string consisting of this method&apos;s name followed by
                      its method descriptor, using the Java VM&apos;s notation for
                      method descriptors (see section 4.3.3 of The Java Virtual
                      Machine Specification).                    
                </javadoc>
                <method name="getNameAndDescriptor" type="String" line="425"/>
                <declaration name="memberDef" type="MemberDefinition" line="428"/>
                <javadoc line="428">
                    Member definition for this method, from one of the remote
                      interfaces that this method was found in.
                      Note that this member definition may be only one of several
                      member defintions that correspond to this remote method object,
                      if several of this class&apos;s remote interfaces contain methods
                      with the same name and type signature.  Therefore, this member
                      definition may declare more exceptions thrown that this remote
                      method does.                    
                </javadoc>
                <declaration name="methodHash" type="long" line="439"/>
                <javadoc line="439">
                    stub &quot;method hash&quot; to identify this method                    
                </javadoc>
                <declaration name="exceptions" type="ClassDeclaration[]" line="443"/>
                <javadoc line="443">
                    Exceptions declared to be thrown by this remote method.
                      This list can include superfluous entries, such as
                      unchecked exceptions and subclasses of other entries.                    
                </javadoc>
                <javadoc line="449">
                    Create a new Method object corresponding to the given
                      method definition.                    
                </javadoc>
                <method name="Method" type="constructor" line="453">
                    <params>
                        <param name="memberDef" type="MemberDefinition"/>
                    </params>
                </method>
                <javadoc line="458">
                    Cloning is supported by returning a shallow copy of this object.                    
                </javadoc>
                <method name="clone" type="Object" line="461">
                    <scope line="462"/>
                    <scope line="465"/>
                </method>
                <javadoc line="469">
                    Return a new Method object that is a legal combination of
                      this method object and another one.
                      This requires determining the exceptions declared by the
                      combined method, which must be (only) all of the exceptions
                      declared in both old Methods that may thrown in either of
                      them.                    
                </javadoc>
                <method name="mergeWith" type="Method" line="477">
                    <params>
                        <param name="other" type="Method"/>
                    </params>
                    <scope line="478"/>
                    <declaration name="legalExceptions" type="Vector&amp;lt;ClassDeclaration&amp;gt;" line="481"/>
                    <scope line="482"/>
                    <scope line="486"/>
                    <declaration name="merged" type="Method" line="490"/>
                </method>
                <javadoc line="495">
                    Add to the supplied list all exceptions in the &quot;from&quot; array
                      that are subclasses of an exception in the &quot;with&quot; array.                    
                </javadoc>
                <method name="collectCompatibleExceptions" type="void" line="499">
                    <params>
                        <param name="from" type="ClassDeclaration[]"/>
                        <param name="with" type="ClassDeclaration[]"/>
                        <param name="list" type="Vector&lt;ClassDeclaration&gt;"/>
                    </params>
                    <scope line="500">
                        <declaration name="exceptionDef" type="ClassDefinition" line="501"/>
                        <scope line="502">
                            <scope line="503">
                                <scope line="504"/>
                            </scope>
                        </scope>
                    </scope>
                </method>
                <javadoc line="512">
                    Compute the &quot;method hash&quot; of this remote method.  The method
                      hash is a long containing the first 64 bits of the SHA digest
                      from the UTF encoded string of the method name and descriptor.
                      REMIND: Should this method share implementation code with
                      the outer class&apos;s computeInterfaceHash() method?                    
                </javadoc>
                <method name="computeMethodHash" type="long" line="519">
                    <declaration name="hash" type="long" line="520"/>
                    <declaration name="sink" type="ByteArrayOutputStream" line="521"/>
                    <scope line="522">
                        <declaration name="md" type="MessageDigest" line="523"/>
                        <declaration name="out" type="DataOutputStream" line="524"/>
                        <declaration name="methodString" type="String" line="525"/>
                        <scope line="526"/>
                        <declaration name="hashArray" type="byte" line="531"/>
                        <scope line="532"/>
                    </scope>
                    <scope line="536"/>
                    <scope line="539"/>
                </method>
            </class>
        </class>
    </source>