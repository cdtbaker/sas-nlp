<?xml version="1.0" encoding="UTF-8"?>
    <source package="sun.rmi.transport">
        <import package="java.rmi.server.UID"/>
        <import package="java.security.AccessController"/>
        <import package="java.util.ArrayList"/>
        <import package="java.util.Collections"/>
        <import package="java.util.HashMap"/>
        <import package="java.util.List"/>
        <import package="java.util.Map"/>
        <import package="java.util.concurrent.Future"/>
        <import package="java.util.concurrent.ScheduledExecutorService"/>
        <import package="java.util.concurrent.TimeUnit"/>
        <import package="sun.rmi.runtime.RuntimeUtil"/>
        <import package="sun.security.action.GetLongAction"/>
        <class name="DGCAckHandler" line="41">
            <comment line="82">
                null if released                
            </comment>
            <javadoc line="41">
                Holds strong references to a set of remote objects, or live remote
                  references to remote objects, after they have been marshalled (as
                  remote references) as parts of the arguments or the result of a
                  remote invocation.  The purpose is to prevent remote objects or
                  live remote references that might otherwise be determined to be
                  unreachable in this VM from being locally garbage collected before
                  the receiver has had an opportunity to register the unmarshalled
                  remote references for DGC.
                  The references are held strongly until an acknowledgment has been
                  received that the receiver has had an opportunity to process the
                  remote references or until a timeout has expired.  For remote
                  references sent as parts of the arguments of a remote invocation,
                  the acknowledgment is the beginning of the response indicating
                  completion of the remote invocation.  For remote references sent as
                  parts of the result of a remote invocation, a UID is included as
                  part of the result, and the acknowledgment is a transport-level
                  &quot;DGCAck&quot; message containing that UID.                
                <author>
                    Ann Wollrath                    
                </author>
                <author>
                    Peter Jones                    
                </author>
            </javadoc>
            <declaration name="dgcAckTimeout" type="long" line="66"/>
            <javadoc line="66">
                timeout for holding references without receiving an acknowledgment                
            </javadoc>
            <declaration name="scheduler" type="ScheduledExecutorService" line="71"/>
            <javadoc line="71">
                thread pool for scheduling delayed tasks                
            </javadoc>
            <declaration name="idTable" type="Map&lt;UID,DGCAckHandler&gt;" line="76"/>
            <javadoc line="76">
                table mapping ack ID to handler                
            </javadoc>
            <declaration name="id" type="UID" line="80"/>
            <declaration name="objList" type="List&lt;Object&gt;" line="81"/>
            <declaration name="task" type="Future&lt;?&gt;" line="82"/>
            <javadoc line="84">
                Creates a new DGCAckHandler, associated with the specified UID
                  if the argument is not null.
                  References added to this DGCAckHandler will be held strongly
                  until its &quot;release&quot; method is invoked or (after the
                  &quot;startTimer&quot; method has been invoked) the timeout has expired.
                  If the argument is not null, then invoking the static
                  &quot;received&quot; method with the specified UID is equivalent to
                  invoking this instance&apos;s &quot;release&quot; method.                
            </javadoc>
            <method name="DGCAckHandler" type="constructor" line="95">
                <params>
                    <param name="id" type="UID"/>
                </params>
                <scope line="97"/>
            </method>
            <javadoc line="103">
                Adds the specified reference to this DGCAckHandler.                
            </javadoc>
            <method name="add" type="void" line="106">
                <params>
                    <param name="obj" type="Object"/>
                </params>
                <scope line="107"/>
            </method>
            <javadoc line="112">
                Starts the timer for this DGCAckHandler.  After the timeout has
                  expired, the references are released even if the acknowledgment
                  has not been received.                
            </javadoc>
            <method name="startTimer" type="void" line="117">
                <scope line="118">
                    <anonymous_class line="119">
                        <method name="run" type="void" line="120"/>
                    </anonymous_class>
                </scope>
            </method>
            <javadoc line="127">
                Releases the references held by this DGCAckHandler.                
            </javadoc>
            <method name="release" type="void" line="130">
                <scope line="131"/>
            </method>
            <javadoc line="138">
                Causes the DGCAckHandler associated with the specified UID to
                  release its references.                
            </javadoc>
            <method name="received" type="void" line="142">
                <params>
                    <param name="id" type="UID"/>
                </params>
                <declaration name="h" type="DGCAckHandler" line="143"/>
                <scope line="144"/>
            </method>
        </class>
    </source>