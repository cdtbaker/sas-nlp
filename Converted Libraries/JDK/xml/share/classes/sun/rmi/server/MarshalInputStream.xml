<?xml version="1.0" encoding="UTF-8"?>
    <source package="sun.rmi.server">
        <import package="java.io.IOException"/>
        <import package="java.io.InputStream"/>
        <import package="java.io.ObjectInputStream"/>
        <import package="java.io.ObjectStreamClass"/>
        <import package="java.io.StreamCorruptedException"/>
        <import package="java.net.URL"/>
        <import package="java.util"/>
        <import package="java.security.AccessControlException"/>
        <import package="java.security.Permission"/>
        <import package="java.rmi.server.RMIClassLoader"/>
        <class name="MarshalInputStream" line="12">
            <extends class="ObjectInputStream"/>
            <javadoc line="12">
                MarshalInputStream is an extension of ObjectInputStream.  When resolving
                  a class, it reads an object from the stream written by a corresponding
                  MarshalOutputStream.  If the class to be resolved is not available
                  locally, from the first class loader on the execution stack, or from the
                  context class loader of the current thread, it will attempt to load the
                  class from the location annotated by the sending MarshalOutputStream.
                  This location object must be a string representing a path of URLs.
                  A new MarshalInputStream should be created to deserialize remote objects or
                  graphs containing remote objects.  Objects are created from the stream
                  using the ObjectInputStream.readObject method.                
                <author>
                    Peter Jones                    
                </author>
            </javadoc>
            <declaration name="useCodebaseOnlyProperty" type="boolean" line="26"/>
            <javadoc line="26">
                value of &quot;java.rmi.server.useCodebaseOnly&quot; property,
                  as cached at class initialization time.                
            </javadoc>
            <declaration name="permittedSunClasses" type="Map&lt;String,Class&lt;?&gt;&gt;" line="31"/>
            <javadoc line="31">
                table to hold sun classes to which access is explicitly permitted                
            </javadoc>
            <declaration name="skipDefaultResolveClass" type="boolean" line="35"/>
            <javadoc line="35">
                if true, don&apos;t try superclass first in resolveClass()                
            </javadoc>
            <declaration name="doneCallbacks" type="Map&lt;Object,Runnable&gt;" line="39"/>
            <javadoc line="39">
                callbacks to make when done() called: maps Object to Runnable                
            </javadoc>
            <declaration name="useCodebaseOnly" type="boolean" line="43"/>
            <javadoc line="43">
                if true, load classes (if not available locally) only from the
                  URL specified by the &quot;java.rmi.server.codebase&quot; property.                
            </javadoc>
            <scope line="48">
                <scope line="49">
                    <declaration name="system" type="String" line="50"/>
                    <declaration name="registry" type="String" line="51"/>
                </scope>
                <scope line="55"/>
            </scope>
            <javadoc line="59">
                Load the &quot;rmi&quot; native library.                
            </javadoc>
            <scope line="62"/>
            <javadoc line="65">
                Create a new MarshalInputStream object.                
            </javadoc>
            <method name="MarshalInputStream" type="constructor" line="68">
                <params>
                    <param name="in" type="InputStream"/>
                </params>
            </method>
            <javadoc line="71">
                Returns a callback previously registered via the setDoneCallback
                  method with given key, or null if no callback has yet been registered
                  with that key.                
            </javadoc>
            <method name="getDoneCallback" type="Runnable" line="76">
                <params>
                    <param name="key" type="Object"/>
                </params>
            </method>
            <javadoc line="79">
                Registers a callback to make when this stream&apos;s done() method is
                  invoked, along with a key for retrieving the same callback instance
                  subsequently from the getDoneCallback method.                
            </javadoc>
            <method name="setDoneCallback" type="void" line="84">
                <params>
                    <param name="key" type="Object"/>
                    <param name="callback" type="Runnable"/>
                </params>
            </method>
            <javadoc line="87">
                Indicates that the user of this MarshalInputStream is done reading
                  objects from it, so all callbacks registered with the setDoneCallback
                  method should now be (synchronously) executed.  When this method
                  returns, there are no more callbacks registered.
                  This method is implicitly invoked by close() before it delegates to
                  the superclass&apos;s close method.                
            </javadoc>
            <method name="done" type="void" line="95">
                <declaration name="iter" type="Iterator&lt;Runnable&gt;" line="96"/>
                <scope line="97">
                    <declaration name="callback" type="Runnable" line="98"/>
                </scope>
            </method>
            <javadoc line="103">
                Closes this stream, implicitly invoking done() first.                
            </javadoc>
            <method name="close" type="void" line="106"/>
            <javadoc line="110">
                resolveClass is extended to acquire (if present) the location
                  from which to load the specified class.
                  It will find, load, and return the class.                
            </javadoc>
            <method name="resolveClass" type="Class" line="115">
                <params>
                    <param name="classDesc" type="ObjectStreamClass"/>
                </params>
                <declaration name="annotation" type="Object" line="116"/>
                <declaration name="className" type="String" line="117"/>
                <declaration name="defaultLoader" type="ClassLoader" line="118"/>
                <declaration name="codebase" type="String" line="119"/>
                <scope line="120"/>
                <scope line="123"/>
                <scope line="126"/>
                <scope line="129">
                    <scope line="130">
                        <scope line="131"/>
                    </scope>
                    <scope line="135"/>
                </scope>
            </method>
            <javadoc line="140">
                resolveProxyClass is extended to acquire (if present) the location
                  to determine the class loader to define the proxy class in.                
            </javadoc>
            <method name="resolveProxyClass" type="Class" line="144">
                <params>
                    <param name="interfaces" type="String[]"/>
                </params>
                <declaration name="annotation" type="Object" line="145"/>
                <declaration name="defaultLoader" type="ClassLoader" line="146"/>
                <declaration name="codebase" type="String" line="147"/>
                <scope line="148"/>
            </method>
            <method name="latestUserDefinedLoader" type="ClassLoader" line="153"/>
            <javadoc line="154">
                Fix for 4179055: Need to assist resolving sun stubs; resolve
                  class locally if it is a &quot;permitted&quot; sun class                
            </javadoc>
            <method name="checkSunClass" type="Class" line="158">
                <params>
                    <param name="className" type="String"/>
                    <param name="e" type="AccessControlException"/>
                </params>
                <declaration name="perm" type="Permission" line="159"/>
                <declaration name="name" type="String" line="160"/>
                <scope line="161"/>
                <declaration name="resolvedClass" type="Class&lt;?&gt;" line="164"/>
                <scope line="165"/>
            </method>
            <javadoc line="170">
                Return the location for the class in the stream.  This method can
                  be overridden by subclasses that store this annotation somewhere
                  else than as the next object in the stream, as is done by this class.                
            </javadoc>
            <method name="readLocation" type="Object" line="175"/>
            <javadoc line="178">
                Set a flag to indicate that the superclass&apos;s default resolveClass()
                  implementation should not be invoked by our resolveClass().                
            </javadoc>
            <method name="skipDefaultResolveClass" type="void" line="182"/>
            <javadoc line="185">
                Disable code downloading except from the URL specified by the
                  &quot;java.rmi.server.codebase&quot; property.                
            </javadoc>
            <method name="useCodebaseOnly" type="void" line="189"/>
        </class>
    </source>