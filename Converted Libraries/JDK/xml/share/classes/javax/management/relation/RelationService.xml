<?xml version="1.0" encoding="UTF-8"?>
    <source package="javax.management.relation">
        <import package="com.sun.jmx.defaults.JmxProperties.RELATION_LOGGER"/>
        <import package="com.sun.jmx.mbeanserver.Util.cast"/>
        <import package="java.util.ArrayList"/>
        <import package="java.util.Date"/>
        <import package="java.util.HashMap"/>
        <import package="java.util.Iterator"/>
        <import package="java.util.List"/>
        <import package="java.util.Map"/>
        <import package="java.util.Set"/>
        <import package="java.util.concurrent.atomic.AtomicLong"/>
        <import package="java.util.logging.Level"/>
        <import package="javax.management.Attribute"/>
        <import package="javax.management.AttributeNotFoundException"/>
        <import package="javax.management.InstanceNotFoundException"/>
        <import package="javax.management.InvalidAttributeValueException"/>
        <import package="javax.management.MBeanException"/>
        <import package="javax.management.MBeanNotificationInfo"/>
        <import package="javax.management.MBeanRegistration"/>
        <import package="javax.management.MBeanServer"/>
        <import package="javax.management.MBeanServerDelegate"/>
        <import package="javax.management.MBeanServerNotification"/>
        <import package="javax.management.Notification"/>
        <import package="javax.management.NotificationBroadcasterSupport"/>
        <import package="javax.management.NotificationListener"/>
        <import package="javax.management.ObjectName"/>
        <import package="javax.management.ReflectionException"/>
        <class name="RelationService" line="57">
            <extends class="NotificationBroadcasterSupport"/>
            <comment line="76">
                Private members                
            </comment>
            <comment line="80">
                Map associating:
                      &lt;relation id&gt; -&gt; &lt;RelationSupport object/ObjectName&gt;
                 depending if the relation has been created using createRelation()
                 method (so internally handled) or is an MBean added as a relation by the
                 user                
            </comment>
            <comment line="87">
                Map associating:
                      &lt;relation id&gt; -&gt; &lt;relation type name&gt;                
            </comment>
            <comment line="91">
                Map associating:
                      &lt;relation MBean Object Name&gt; -&gt; &lt;relation id&gt;                
            </comment>
            <comment line="96">
                Map associating:
                       &lt;relation type name&gt; -&gt; &lt;RelationType object&gt;                
            </comment>
            <comment line="101">
                Map associating:
                       &lt;relation type name&gt; -&gt; ArrayList of &lt;relation id&gt;
                 to list all the relations of a given type                
            </comment>
            <comment line="107">
                Map associating:
                       &lt;ObjectName&gt; -&gt; HashMap
                 the value HashMap mapping:
                       &lt;relation id&gt; -&gt; ArrayList of &lt;role name&gt;
                 to track where a given MBean is referenced.                
            </comment>
            <comment line="116">
                Flag to indicate if, when a notification is received for the
                 unregistration of an MBean referenced in a relation, if an immediate
                 &quot;purge&quot; of the relations (look for the relations no
                 longer valid) has to be performed , or if that will be performed only
                 when the purgeRelations method will be explicitly called.
                 true is immediate purge.                
            </comment>
            <comment line="124">
                Internal counter to provide sequence numbers for notifications sent by:
                 - the Relation Service
                 - a relation handled by the Relation Service                
            </comment>
            <comment line="129">
                ObjectName used to register the Relation Service in the MBean Server                
            </comment>
            <comment line="132">
                MBean Server where the Relation Service is registered                
            </comment>
            <comment line="135">
                Filter registered in the MBean Server with the Relation Service to be
                 informed of referenced MBean unregistrations                
            </comment>
            <comment line="139">
                List of unregistration notifications received (storage used if purge
                 of relations when unregistering a referenced MBean is not immediate but
                 on user request)                
            </comment>
            <comment line="145">
                Constructor                
            </comment>
            <comment line="191">
                MBeanRegistration interface                
            </comment>
            <comment line="195">
                Pre-registration: retrieves its ObjectName and MBean Server
                
                 No exception thrown.                
            </comment>
            <comment line="207">
                Post-registration: does nothing                
            </comment>
            <comment line="212">
                Pre-unregistration: does nothing                
            </comment>
            <comment line="218">
                Post-unregistration: does nothing                
            </comment>
            <comment line="223">
                Accessors                
            </comment>
            <comment line="261">
                Relation type handling                
            </comment>
            <comment line="513">
                Relation handling                
            </comment>
            <comment line="2405">
                NotificationListener Interface                
            </comment>
            <comment line="2490">
                NotificationBroadcaster interface                
            </comment>
            <comment line="2524">
                Misc                
            </comment>
            <comment line="2528">
                Adds given object as a relation type.
                
                 -param relationTypeObj  relation type object
                
                 -exception IllegalArgumentException  if null parameter
                 -exception InvalidRelationTypeException  if there is already a relation
                  type with that name                
            </comment>
            <comment line="2580">
                Retrieves relation type with given name
                
                 -param relationTypeName  expected name of a relation type created in the
                  Relation Service
                
                 -return RelationType object corresponding to given name
                
                 -exception IllegalArgumentException  if null parameter
                 -exception RelationTypeNotFoundException  if no relation type for that
                  name created in Relation Service                
            </comment>
            <comment line="2621">
                Retrieves relation corresponding to given relation id.
                 Returns either:
                 - a RelationSupport object if the relation is internal
                 or
                 - the ObjectName of the corresponding MBean
                
                 -param relationId  expected relation id
                
                 -return RelationSupport object or ObjectName of relation with given id
                
                 -exception IllegalArgumentException  if null parameter
                 -exception RelationNotFoundException  if no relation for that
                  relation id created in Relation Service                
            </comment>
            <comment line="2663">
                Adds a new MBean reference (reference to an ObjectName) in the
                 referenced MBean map (myRefedMBeanObjName2RelIdsMap).
                
                 -param objectName  ObjectName of new referenced MBean
                 -param relationId  relation id of the relation where the MBean is
                  referenced
                 -param roleName  name of the role where the MBean is referenced
                
                 -return boolean:
                  - true  if the MBean was not referenced before, so really a new
                    reference
                  - false else
                
                 -exception IllegalArgumentException  if null parameter                
            </comment>
            <comment line="2749">
                Removes an obsolete MBean reference (reference to an ObjectName) in
                 the referenced MBean map (myRefedMBeanObjName2RelIdsMap).
                
                 -param objectName  ObjectName of MBean no longer referenced
                 -param relationId  relation id of the relation where the MBean was
                  referenced
                 -param roleName  name of the role where the MBean was referenced
                 -param allRolesFlag  flag, if true removes reference to MBean for all
                  roles in the relation, not only for the one above
                
                 -return boolean:
                  - true  if the MBean is no longer reference in any relation
                  - false else
                
                 -exception IllegalArgumentException  if null parameter                
            </comment>
            <comment line="2834">
                Updates the listener registered to the MBean Server to be informed of
                 referenced MBean unregistrations
                
                 -param newRefList  ArrayList of ObjectNames for new references done
                  to MBeans (can be null)
                 -param obsoleteRefList  ArrayList of ObjectNames for obsolete references
                  to MBeans (can be null)
                
                 -exception RelationServiceNotRegisteredException  if the Relation
                  Service is not registered in the MBean Server.                
            </comment>
            <comment line="2946">
                Adds a relation (being either a RelationSupport object or an MBean
                 referenced using its ObjectName) in the Relation Service.
                 Will send a notification RelationNotification with type:
                 - RelationNotification.RELATION_BASIC_CREATION for internal relation
                   creation
                 - RelationNotification.RELATION_MBEAN_CREATION for an MBean being added
                   as a relation.
                
                 -param relationBaseFlag  flag true if the relation is a RelationSupport
                  object, false if it is an MBean
                 -param relationObj  RelationSupport object (if relation is internal)
                 -param relationObjName  ObjectName of the MBean to be added as a relation
                  (only for the relation MBean)
                 -param relationId  relation identifier, to uniquely identify the relation
                  inside the Relation Service
                 -param relationTypeName  name of the relation type (has to be created
                  in the Relation Service)
                 -param roleList  role list to initialize roles of the relation
                  (can be null)
                
                 -exception IllegalArgumentException  if null paramater
                 -exception RelationServiceNotRegisteredException  if the Relation
                  Service is not registered in the MBean Server
                 -exception RoleNotFoundException  if a value is provided for a role
                  that does not exist in the relation type
                 -exception InvalidRelationIdException  if relation id already used
                 -exception RelationTypeNotFoundException  if relation type not known in
                  Relation Service
                 -exception InvalidRoleValueException if:
                  - the same role name is used for two different roles
                  - the number of referenced MBeans in given value is less than
                    expected minimum degree
                  - the number of referenced MBeans in provided value exceeds expected
                    maximum degree
                  - one referenced MBean in the value is not an Object of the MBean
                    class expected for that role
                  - an MBean provided for that role does not exist                
            </comment>
            <comment line="3154">
                Checks that given role conforms to given role info.
                
                 -param chkType  type of check:
                  - 1: read, just check read access
                  - 2: write, check value and write access if writeChkFlag
                 -param roleName  role name
                 -param roleValue  role value
                 -param roleInfo  corresponding role info
                 -param writeChkFlag  boolean to specify a current write access and
                  to check it
                
                 -return Integer with value:
                  - 0: ok
                  - RoleStatus.NO_ROLE_WITH_NAME
                  - RoleStatus.ROLE_NOT_READABLE
                  - RoleStatus.ROLE_NOT_WRITABLE
                  - RoleStatus.LESS_THAN_MIN_ROLE_DEGREE
                  - RoleStatus.MORE_THAN_MAX_ROLE_DEGREE
                  - RoleStatus.REF_MBEAN_OF_INCORRECT_CLASS
                  - RoleStatus.REF_MBEAN_NOT_REGISTERED
                
                 -exception IllegalArgumentException  if null parameter                
            </comment>
            <comment line="3286">
                Initializes roles associated to given role infos to default value (empty
                 ArrayList of ObjectNames) in given relation.
                 It will succeed for every role except if the role info has a minimum
                 cardinality greater than 0. In that case, an InvalidRoleValueException
                 will be raised.
                
                 -param relationBaseFlag  flag true if the relation is a RelationSupport
                  object, false if it is an MBean
                 -param relationObj  RelationSupport object (if relation is internal)
                 -param relationObjName  ObjectName of the MBean to be added as a relation
                  (only for the relation MBean)
                 -param relationId  relation id
                 -param relationTypeName  name of the relation type (has to be created
                  in the Relation Service)
                 -param roleInfoList  list of role infos for roles to be defaulted
                
                 -exception IllegalArgumentException  if null paramater
                 -exception RelationServiceNotRegisteredException  if the Relation
                  Service is not registered in the MBean Server
                 -exception InvalidRoleValueException  if role must have a non-empty
                  value                
            </comment>
            <comment line="3308">
                Revisit [cebro] Handle CIM qualifiers as REQUIRED to detect roles which
                    should have been initialized by the user                
            </comment>
            <comment line="3420">
                Throws an exception corresponding to a given problem type
                
                 -param pbType  possible problem, defined in RoleUnresolved
                 -param roleName  role name
                
                 -exception IllegalArgumentException  if null parameter
                 -exception RoleNotFoundException  for problems:
                  - NO_ROLE_WITH_NAME
                  - ROLE_NOT_READABLE
                  - ROLE_NOT_WRITABLE
                 -exception InvalidRoleValueException  for problems:
                  - LESS_THAN_MIN_ROLE_DEGREE
                  - MORE_THAN_MAX_ROLE_DEGREE
                  - REF_MBEAN_OF_INCORRECT_CLASS
                  - REF_MBEAN_NOT_REGISTERED                
            </comment>
            <comment line="3495">
                Sends a notification of given type, with given parameters
                
                 -param intNtfType  integer to represent notification type:
                  - 1 : create
                  - 2 : update
                  - 3 : delete
                 -param message  human-readable message
                 -param relationId  relation id of the created/updated/deleted relation
                 -param unregMBeanList  list of ObjectNames of referenced MBeans
                  expected to be unregistered due to relation removal (only for removal,
                  due to CIM qualifiers, can be null)
                 -param roleName  role name
                 -param roleNewValue  role new value (ArrayList of ObjectNames)
                 -param oldValue  old role value (ArrayList of ObjectNames)
                
                 -exception IllegalArgument  if null parameter
                 -exception RelationNotFoundException  if no relation for given id                
            </comment>
            <comment line="3626">
                Checks, for the unregistration of an MBean referenced in the roles given
                 in parameter, if the relation has to be removed or not, regarding
                 expected minimum role cardinality and current number of
                 references in each role after removal of the current one.
                 If the relation is kept, calls handleMBeanUnregistration() callback of
                 the relation to update it.
                
                 -param relationId  relation id
                 -param objectName  ObjectName of the unregistered MBean
                 -param roleNameList  list of names of roles where the unregistered
                  MBean is referenced.
                
                 -exception IllegalArgumentException  if null parameter
                 -exception RelationServiceNotRegisteredException  if the Relation
                  Service is not registered in the MBean Server
                 -exception RelationNotFoundException  if unknown relation id
                 -exception RoleNotFoundException  if one role given as parameter does
                  not exist in the relation                
            </comment>
            <implements interface="RelationServiceMBean"/>
            <implements interface="MBeanRegistration"/>
            <implements interface="NotificationListener"/>
            <javadoc line="57">
                The Relation Service is in charge of creating and deleting relation types
                  and relations, of handling the consistency and of providing query
                  mechanisms.
                  &lt;P&gt;It implements the NotificationBroadcaster by extending
                  NotificationBroadcasterSupport to send notifications when a relation is
                  removed from it.
                  &lt;P&gt;It implements the NotificationListener interface to be able to receive
                  notifications concerning unregistration of MBeans referenced in relation
                  roles and of relation MBeans.
                  &lt;P&gt;It implements the MBeanRegistration interface to be able to retrieve
                  its ObjectName and MBean Server.                
                <since>
                    1.5                    
                </since>
            </javadoc>
            <declaration name="myRelId2ObjMap" type="Map&lt;String,Object&gt;" line="84"/>
            <declaration name="myRelId2RelTypeMap" type="Map&lt;String,String&gt;" line="88"/>
            <declaration name="myRelMBeanObjName2RelIdMap" type="Map&lt;ObjectName,String&gt;" line="92"/>
            <declaration name="myRelType2ObjMap" type="Map&lt;String,RelationType&gt;" line="97"/>
            <declaration name="myRelType2RelIdsMap" type="Map&lt;String,List&lt;String&gt;&gt;" line="103"/>
            <declaration name="myRefedMBeanObjName2RelIdsMap" type="Map&lt;ObjectName,Map&lt;String,List&lt;String&gt;&gt;&gt;" line="111"/>
            <declaration name="myPurgeFlag" type="boolean" line="121"/>
            <declaration name="atomicSeqNo" type="AtomicLong" line="126"/>
            <declaration name="myObjName" type="ObjectName" line="129"/>
            <declaration name="myMBeanServer" type="MBeanServer" line="132"/>
            <declaration name="myUnregNtfFilter" type="MBeanServerNotificationFilter" line="136"/>
            <declaration name="myUnregNtfList" type="List&lt;MBeanServerNotification&gt;" line="141"/>
            <javadoc line="148">
                Constructor.                
                <param>
                    immediatePurgeFlag  flag to indicate when a notification is
                      received for the unregistration of an MBean referenced in a relation, if
                      an immediate "purge" of the relations (look for the relations no
                      longer valid) has to be performed , or if that will be performed only
                      when the purgeRelations method will be explicitly called.
                      <P>true is immediate purge.                    
                </param>
            </javadoc>
            <method name="RelationService" type="constructor" line="158">
                <params>
                    <param name="immediatePurgeFlag" type="boolean"/>
                </params>
            </method>
            <javadoc line="170">
                Checks if the Relation Service is active.
                  Current condition is that the Relation Service must be registered in the
                  MBean Server                
                <exception>
                    RelationServiceNotRegisteredException  if it is not
                      registered                    
                </exception>
            </javadoc>
            <method name="isActive" type="void" line="179">
                <comment line="182">
                    MBean Server not set by preRegister(): relation service not
                     registered                    
                </comment>
                <scope line="180">
                    <declaration name="excMsg" type="String" line="183"/>
                </scope>
            </method>
            <method name="preRegister" type="ObjectName" line="199">
                <params>
                    <param name="server" type="MBeanServer"/>
                    <param name="name" type="ObjectName"/>
                </params>
            </method>
            <method name="postRegister" type="void" line="207">
                <params>
                    <param name="registrationDone" type="Boolean"/>
                </params>
            </method>
            <method name="preDeregister" type="void" line="213"/>
            <method name="postDeregister" type="void" line="218"/>
            <javadoc line="226">
                Returns the flag to indicate if when a notification is received for the
                  unregistration of an MBean referenced in a relation, if an immediate
                  &quot;purge&quot; of the relations (look for the relations no longer valid)
                  has to be performed , or if that will be performed only when the
                  purgeRelations method will be explicitly called.
                  &lt;P&gt;true is immediate purge.                
                <return>
                    true if purges are automatic.                    
                </return>
                <see>
                    #setPurgeFlag                    
                </see>
            </javadoc>
            <method name="getPurgeFlag" type="boolean" line="238"/>
            <javadoc line="242">
                Sets the flag to indicate if when a notification is received for the
                  unregistration of an MBean referenced in a relation, if an immediate
                  &quot;purge&quot; of the relations (look for the relations no longer valid)
                  has to be performed , or if that will be performed only when the
                  purgeRelations method will be explicitly called.
                  &lt;P&gt;true is immediate purge.                
                <param>
                    purgeFlag  flag                    
                </param>
                <see>
                    #getPurgeFlag                    
                </see>
            </javadoc>
            <method name="setPurgeFlag" type="void" line="254">
                <params>
                    <param name="purgeFlag" type="boolean"/>
                </params>
            </method>
            <javadoc line="264">
                Creates a relation type (a RelationTypeSupport object) with given
                  role infos (provided by the RoleInfo objects), and adds it in the
                  Relation Service.                
                <param>
                    relationTypeName  name of the relation type                    
                </param>
                <param>
                    roleInfoArray  array of role infos                    
                </param>
                <exception>
                    IllegalArgumentException  if null parameter                    
                </exception>
                <exception>
                    InvalidRelationTypeException  If:
                      <P>- there is already a relation type with that name
                      <P>- the same name has been used for two different role infos
                      <P>- no role info provided
                      <P>- one null role info provided                    
                </exception>
            </javadoc>
            <method name="createRelationType" type="void" line="282">
                <params>
                    <param name="relationTypeName" type="String"/>
                    <param name="roleInfoArray" type="RoleInfo[]"/>
                </params>
                <comment line="293">
                    Can throw an InvalidRelationTypeException                    
                </comment>
                <scope line="284">
                    <declaration name="excMsg" type="String" line="285"/>
                </scope>
                <declaration name="relType" type="RelationType" line="293"/>
            </method>
            <javadoc line="303">
                Adds given object as a relation type. The object is expected to
                  implement the RelationType interface.                
                <param>
                    relationTypeObj  relation type object (implementing the
                      RelationType interface)                    
                </param>
                <exception>
                    IllegalArgumentException  if null parameter or if{@link RelationType#getRelationTypeNamerelationTypeObj.getRelationTypeName()} returns null.                    
                </exception>
                <exception>
                    InvalidRelationTypeException  if:
                      <P>- the same name has been used for two different roles
                      <P>- no role info provided
                      <P>- one null role info provided
                      <P>- there is already a relation type with that name                    
                </exception>
            </javadoc>
            <method name="addRelationType" type="void" line="321">
                <params>
                    <param name="relationTypeObj" type="RelationType"/>
                </params>
                <comment line="332">
                    Checks the role infos                    
                </comment>
                <comment line="345">
                    Can throw InvalidRelationTypeException                    
                </comment>
                <scope line="323">
                    <declaration name="excMsg" type="String" line="324"/>
                </scope>
                <declaration name="roleInfoList" type="List&lt;RoleInfo&gt;" line="332"/>
                <scope line="333">
                    <declaration name="excMsg" type="String" line="334"/>
                </scope>
                <declaration name="roleInfoArray" type="RoleInfo[]" line="338"/>
                <declaration name="i" type="int" line="339"/>
                <scope line="340"/>
            </method>
            <javadoc line="354">
                Retrieves names of all known relation types.                
                <return>
                    ArrayList of relation type names (Strings)                    
                </return>
            </javadoc>
            <method name="getAllRelationTypeNames" type="List<String>" line="359">
                <declaration name="result" type="ArrayList&lt;String&gt;" line="360"/>
                <scope line="361"/>
            </method>
            <javadoc line="367">
                Retrieves list of role infos (RoleInfo objects) of a given relation
                  type.                
                <param>
                    relationTypeName  name of relation type                    
                </param>
                <return>
                    ArrayList of RoleInfo.                    
                </return>
                <exception>
                    IllegalArgumentException  if null parameter                    
                </exception>
                <exception>
                    RelationTypeNotFoundException  if there is no relation type
                      with that name.                    
                </exception>
            </javadoc>
            <method name="getRoleInfos" type="List<RoleInfo>" line="381">
                <params>
                    <param name="relationTypeName" type="String"/>
                </params>
                <comment line="392">
                    Can throw a RelationTypeNotFoundException                    
                </comment>
                <scope line="383">
                    <declaration name="excMsg" type="String" line="384"/>
                </scope>
                <declaration name="relType" type="RelationType" line="392"/>
            </method>
            <javadoc line="399">
                Retrieves role info for given role name of a given relation type.                
                <param>
                    relationTypeName  name of relation type                    
                </param>
                <param>
                    roleInfoName  name of role                    
                </param>
                <return>
                    RoleInfo object.                    
                </return>
                <exception>
                    IllegalArgumentException  if null parameter                    
                </exception>
                <exception>
                    RelationTypeNotFoundException  if the relation type is not
                      known in the Relation Service                    
                </exception>
                <exception>
                    RoleInfoNotFoundException  if the role is not part of the
                      relation type.                    
                </exception>
            </javadoc>
            <method name="getRoleInfo" type="RoleInfo" line="417">
                <params>
                    <param name="relationTypeName" type="String"/>
                    <param name="roleInfoName" type="String"/>
                </params>
                <comment line="428">
                    Can throw a RelationTypeNotFoundException                    
                </comment>
                <comment line="431">
                    Can throw a RoleInfoNotFoundException                    
                </comment>
                <scope line="419">
                    <declaration name="excMsg" type="String" line="420"/>
                </scope>
                <declaration name="relType" type="RelationType" line="428"/>
                <declaration name="roleInfo" type="RoleInfo" line="431"/>
            </method>
            <javadoc line="438">
                Removes given relation type from Relation Service.
                  &lt;P&gt;The relation objects of that type will be removed from the
                  Relation Service.                
                <param>
                    relationTypeName  name of the relation type to be removed                    
                </param>
                <exception>
                    RelationServiceNotRegisteredException  if the Relation
                      Service is not registered in the MBean Server                    
                </exception>
                <exception>
                    IllegalArgumentException  if null parameter                    
                </exception>
                <exception>
                    RelationTypeNotFoundException  If there is no relation type
                      with that name                    
                </exception>
            </javadoc>
            <method name="removeRelationType" type="void" line="454">
                <params>
                    <param name="relationTypeName" type="String"/>
                </params>
                <comment line="457">
                    Can throw RelationServiceNotRegisteredException                    
                </comment>
                <comment line="468">
                    Checks if the relation type to be removed exists
                     Can throw a RelationTypeNotFoundException                    
                </comment>
                <comment line="472">
                    Retrieves the relation ids for relations of that type                    
                </comment>
                <comment line="475">
                    Note: take a copy of the list as it is a part of a map that
                           will be updated by removeRelation() below.                    
                </comment>
                <comment line="484">
                    Removes the relation type from all maps                    
                </comment>
                <comment line="492">
                    Removes all relations of that type                    
                </comment>
                <comment line="495">
                    Note: will remove it from myRelId2RelTypeMap :)
                    
                     Can throw RelationServiceNotRegisteredException (detected
                     above)
                     Shall not throw a RelationNotFoundException                    
                </comment>
                <scope line="459">
                    <declaration name="excMsg" type="String" line="460"/>
                </scope>
                <declaration name="relType" type="RelationType" line="469"/>
                <declaration name="relIdList" type="List&lt;String&gt;" line="472"/>
                <scope line="473">
                    <declaration name="relIdList1" type="List&lt;String&gt;" line="476"/>
                    <scope line="478"/>
                </scope>
                <scope line="484"/>
                <scope line="487"/>
                <scope line="492">
                    <scope line="493">
                        <scope line="499"/>
                        <scope line="501"/>
                    </scope>
                </scope>
            </method>
            <javadoc line="516">
                Creates a simple relation (represented by a RelationSupport object) of
                  given relation type, and adds it in the Relation Service.
                  &lt;P&gt;Roles are initialized according to the role list provided in
                  parameter. The ones not initialized in this way are set to an empty
                  ArrayList of ObjectNames.
                  &lt;P&gt;A RelationNotification, with type RELATION_BASIC_CREATION, is sent.                
                <param>
                    relationId  relation identifier, to identify uniquely the relation
                      inside the Relation Service                    
                </param>
                <param>
                    relationTypeName  name of the relation type (has to be created
                      in the Relation Service)                    
                </param>
                <param>
                    roleList  role list to initialize roles of the relation (can
                      be null).                    
                </param>
                <exception>
                    RelationServiceNotRegisteredException  if the Relation
                      Service is not registered in the MBean Server                    
                </exception>
                <exception>
                    IllegalArgumentException  if null parameter, except the role
                      list which can be null if no role initialization                    
                </exception>
                <exception>
                    RoleNotFoundException  if a value is provided for a role
                      that does not exist in the relation type                    
                </exception>
                <exception>
                    InvalidRelationIdException  if relation id already used                    
                </exception>
                <exception>
                    RelationTypeNotFoundException  if relation type not known in
                      Relation Service                    
                </exception>
                <exception>
                    InvalidRoleValueException if:
                      <P>- the same role name is used for two different roles
                      <P>- the number of referenced MBeans in given value is less than
                      expected minimum degree
                      <P>- the number of referenced MBeans in provided value exceeds expected
                      maximum degree
                      <P>- one referenced MBean in the value is not an Object of the MBean
                      class expected for that role
                      <P>- an MBean provided for that role does not exist                    
                </exception>
            </javadoc>
            <method name="createRelation" type="void" line="558">
                <params>
                    <param name="relationId" type="String"/>
                    <param name="relationTypeName" type="String"/>
                    <param name="roleList" type="RoleList"/>
                </params>
                <comment line="561">
                    Can throw RelationServiceNotRegisteredException                    
                </comment>
                <comment line="574">
                    Creates RelationSupport object
                     Can throw InvalidRoleValueException                    
                </comment>
                <comment line="581">
                    Adds relation object as a relation into the Relation Service
                     Can throw RoleNotFoundException, InvalidRelationId,
                     RelationTypeNotFoundException, InvalidRoleValueException
                    
                     Cannot throw MBeanException                    
                </comment>
                <scope line="564">
                    <declaration name="excMsg" type="String" line="565"/>
                </scope>
                <declaration name="relObj" type="RelationSupport" line="575"/>
            </method>
            <javadoc line="596">
                Adds an MBean created by the user (and registered by him in the MBean
                  Server) as a relation in the Relation Service.
                  &lt;P&gt;To be added as a relation, the MBean must conform to the
                  following:
                  &lt;P&gt;- implement the Relation interface
                  &lt;P&gt;- have for RelationService ObjectName the ObjectName of current
                  Relation Service
                  &lt;P&gt;- have a relation id unique and unused in current Relation Service
                  &lt;P&gt;- have for relation type a relation type created in the Relation
                  Service
                  &lt;P&gt;- have roles conforming to the role info provided in the relation
                  type.                
                <param>
                    relationObjectName  ObjectName of the relation MBean to be added.                    
                </param>
                <exception>
                    IllegalArgumentException  if null parameter                    
                </exception>
                <exception>
                    RelationServiceNotRegisteredException  if the Relation
                      Service is not registered in the MBean Server                    
                </exception>
                <exception>
                    NoSuchMethodException  If the MBean does not implement the
                      Relation interface                    
                </exception>
                <exception>
                    InvalidRelationIdException  if:
                      <P>- no relation identifier in MBean
                      <P>- the relation identifier is already used in the Relation Service                    
                </exception>
                <exception>
                    InstanceNotFoundException  if the MBean for given ObjectName
                      has not been registered                    
                </exception>
                <exception>
                    InvalidRelationServiceException  if:
                      <P>- no Relation Service name in MBean
                      <P>- the Relation Service name in the MBean is not the one of the
                      current Relation Service                    
                </exception>
                <exception>
                    RelationTypeNotFoundException  if:
                      <P>- no relation type name in MBean
                      <P>- the relation type name in MBean does not correspond to a relation
                      type created in the Relation Service                    
                </exception>
                <exception>
                    InvalidRoleValueException  if:
                      <P>- the number of referenced MBeans in a role is less than
                      expected minimum degree
                      <P>- the number of referenced MBeans in a role exceeds expected
                      maximum degree
                      <P>- one referenced MBean in the value is not an Object of the MBean
                      class expected for that role
                      <P>- an MBean provided for a role does not exist                    
                </exception>
                <exception>
                    RoleNotFoundException  if a value is provided for a role
                      that does not exist in the relation type                    
                </exception>
            </javadoc>
            <method name="addRelation" type="void" line="650">
                <params>
                    <param name="relationObjectName" type="ObjectName"/>
                </params>
                <comment line="661">
                    Can throw RelationServiceNotRegisteredException                    
                </comment>
                <comment line="664">
                    Checks that the relation MBean implements the Relation interface.
                     It will also check that the provided ObjectName corresponds to a
                     registered MBean (else will throw an InstanceNotFoundException)                    
                </comment>
                <comment line="671">
                    Checks there is a relation id in the relation MBean (its uniqueness
                     is checked in addRelationInt())
                     Can throw InstanceNotFoundException (but detected above)
                     No MBeanException as no exception raised by this method, and no
                     ReflectionException                    
                </comment>
                <comment line="694">
                    Checks that the Relation Service where the relation MBean is
                     expected to be added is the current one
                     Can throw InstanceNotFoundException (but detected above)
                     No MBeanException as no exception raised by this method, no
                     ReflectionException                    
                </comment>
                <comment line="725">
                    Checks that a relation type has been specified for the relation
                     Can throw InstanceNotFoundException (but detected above)
                     No MBeanException as no exception raised by this method, no
                     ReflectionException                    
                </comment>
                <comment line="746">
                    Retrieves all roles without considering read mode
                     Can throw InstanceNotFoundException (but detected above)
                     No MBeanException as no exception raised by this method, no
                     ReflectionException                    
                </comment>
                <comment line="763">
                    Can throw RoleNotFoundException, InvalidRelationIdException,
                     RelationTypeNotFoundException, InvalidRoleValueException                    
                </comment>
                <comment line="771">
                    Adds relation MBean ObjectName in map                    
                </comment>
                <comment line="776">
                    Updates flag to specify that the relation is managed by the Relation
                     Service
                     This flag and setter are inherited from RelationSupport and not parts
                     of the Relation interface, so may be not supported.                    
                </comment>
                <comment line="786">
                    OK : The flag is not supported.                    
                </comment>
                <comment line="789">
                    Updates listener information to received notification for
                     unregistration of this MBean                    
                </comment>
                <scope line="652">
                    <declaration name="excMsg" type="String" line="653"/>
                </scope>
                <scope line="666">
                    <declaration name="excMsg" type="String" line="667"/>
                </scope>
                <declaration name="relId" type="String" line="675"/>
                <scope line="676"/>
                <scope line="680"/>
                <scope line="683"/>
                <scope line="685"/>
                <scope line="689">
                    <declaration name="excMsg" type="String" line="690"/>
                </scope>
                <declaration name="relServObjName" type="ObjectName" line="698"/>
                <scope line="699"/>
                <scope line="704"/>
                <scope line="707"/>
                <scope line="709"/>
                <declaration name="badRelServFlag" type="boolean" line="713"/>
                <scope line="714"/>
                <scope line="717"/>
                <scope line="720">
                    <declaration name="excMsg" type="String" line="721"/>
                </scope>
                <declaration name="relTypeName" type="String" line="728"/>
                <scope line="729"/>
                <scope line="733"/>
                <scope line="736"/>
                <scope line="738"/>
                <scope line="741">
                    <declaration name="excMsg" type="String" line="742"/>
                </scope>
                <declaration name="roleList" type="RoleList" line="749"/>
                <scope line="750"/>
                <scope line="755"/>
                <scope line="758"/>
                <scope line="771"/>
                <scope line="779"/>
                <scope line="784"/>
                <declaration name="newRefList" type="List&lt;ObjectName&gt;" line="790"/>
            </method>
            <javadoc line="799">
                If the relation is represented by an MBean (created by the user and
                  added as a relation in the Relation Service), returns the ObjectName of
                  the MBean.                
                <param>
                    relationId  relation id identifying the relation                    
                </param>
                <return>
                    ObjectName of the corresponding relation MBean, or null if
                      the relation is not an MBean.                    
                </return>
                <exception>
                    IllegalArgumentException  if null parameter                    
                </exception>
                <exception>
                    RelationNotFoundException there is no relation associated
                      to that id                    
                </exception>
            </javadoc>
            <method name="isRelationMBean" type="ObjectName" line="815">
                <params>
                    <param name="relationId" type="String"/>
                </params>
                <comment line="826">
                    Can throw RelationNotFoundException                    
                </comment>
                <scope line="817">
                    <declaration name="excMsg" type="String" line="818"/>
                </scope>
                <declaration name="result" type="Object" line="826"/>
                <scope line="827"/>
                <scope line="829"/>
            </method>
            <javadoc line="834">
                Returns the relation id associated to the given ObjectName if the
                  MBean has been added as a relation in the Relation Service.                
                <param>
                    objectName  ObjectName of supposed relation                    
                </param>
                <return>
                    relation id (String) or null (if the ObjectName is not a
                      relation handled by the Relation Service)                    
                </return>
                <exception>
                    IllegalArgumentException  if null parameter                    
                </exception>
            </javadoc>
            <method name="isRelation" type="String" line="846">
                <params>
                    <param name="objectName" type="ObjectName"/>
                </params>
                <scope line="848">
                    <declaration name="excMsg" type="String" line="849"/>
                </scope>
                <declaration name="result" type="String" line="856"/>
                <scope line="857">
                    <declaration name="relId" type="String" line="858"/>
                    <scope line="859"/>
                </scope>
            </method>
            <javadoc line="866">
                Checks if there is a relation identified in Relation Service with given
                  relation id.                
                <param>
                    relationId  relation id identifying the relation                    
                </param>
                <return>
                    boolean: true if there is a relation, false else                    
                </return>
                <exception>
                    IllegalArgumentException  if null parameter                    
                </exception>
            </javadoc>
            <method name="hasRelation" type="Boolean" line="877">
                <params>
                    <param name="relationId" type="String"/>
                </params>
                <comment line="889">
                    Can throw RelationNotFoundException                    
                </comment>
                <scope line="879">
                    <declaration name="excMsg" type="String" line="880"/>
                </scope>
                <scope line="887">
                    <declaration name="result" type="Object" line="889"/>
                </scope>
                <scope line="891"/>
            </method>
            <javadoc line="896">
                Returns all the relation ids for all the relations handled by the
                  Relation Service.                
                <return>
                    ArrayList of String                    
                </return>
            </javadoc>
            <method name="getAllRelationIds" type="List<String>" line="902">
                <declaration name="result" type="List&lt;String&gt;" line="903"/>
                <scope line="904"/>
            </method>
            <javadoc line="910">
                Checks if given Role can be read in a relation of the given type.                
                <param>
                    roleName  name of role to be checked                    
                </param>
                <param>
                    relationTypeName  name of the relation type                    
                </param>
                <return>
                    an Integer wrapping an integer corresponding to possible
                      problems represented as constants in RoleUnresolved:
                      <P>- 0 if role can be read
                      <P>- integer corresponding to RoleStatus.NO_ROLE_WITH_NAME
                      <P>- integer corresponding to RoleStatus.ROLE_NOT_READABLE                    
                </return>
                <exception>
                    IllegalArgumentException  if null parameter                    
                </exception>
                <exception>
                    RelationTypeNotFoundException  if the relation type is not
                      known in the Relation Service                    
                </exception>
            </javadoc>
            <method name="checkRoleReading" type="Integer" line="929">
                <params>
                    <param name="roleName" type="String"/>
                    <param name="relationTypeName" type="String"/>
                </params>
                <comment line="942">
                    Can throw a RelationTypeNotFoundException                    
                </comment>
                <comment line="946">
                    Can throw a RoleInfoNotFoundException to be transformed into
                     returned value RoleStatus.NO_ROLE_WITH_NAME                    
                </comment>
                <scope line="931">
                    <declaration name="excMsg" type="String" line="932"/>
                </scope>
                <declaration name="result" type="Integer" line="939"/>
                <declaration name="relType" type="RelationType" line="942"/>
                <scope line="944">
                    <declaration name="roleInfo" type="RoleInfo" line="947"/>
                </scope>
                <scope line="955"/>
            </method>
            <javadoc line="964">
                Checks if given Role can be set in a relation of given type.                
                <param>
                    role  role to be checked                    
                </param>
                <param>
                    relationTypeName  name of relation type                    
                </param>
                <param>
                    initFlag  flag to specify that the checking is done for the
                      initialization of a role, write access shall not be verified.                    
                </param>
                <return>
                    an Integer wrapping an integer corresponding to possible
                      problems represented as constants in RoleUnresolved:
                      <P>- 0 if role can be set
                      <P>- integer corresponding to RoleStatus.NO_ROLE_WITH_NAME
                      <P>- integer for RoleStatus.ROLE_NOT_WRITABLE
                      <P>- integer for RoleStatus.LESS_THAN_MIN_ROLE_DEGREE
                      <P>- integer for RoleStatus.MORE_THAN_MAX_ROLE_DEGREE
                      <P>- integer for RoleStatus.REF_MBEAN_OF_INCORRECT_CLASS
                      <P>- integer for RoleStatus.REF_MBEAN_NOT_REGISTERED                    
                </return>
                <exception>
                    IllegalArgumentException  if null parameter                    
                </exception>
                <exception>
                    RelationTypeNotFoundException  if unknown relation type                    
                </exception>
            </javadoc>
            <method name="checkRoleWriting" type="Integer" line="989">
                <params>
                    <param name="role" type="Role"/>
                    <param name="relationTypeName" type="String"/>
                    <param name="initFlag" type="Boolean"/>
                </params>
                <comment line="1003">
                    Can throw a RelationTypeNotFoundException                    
                </comment>
                <scope line="993">
                    <declaration name="excMsg" type="String" line="994"/>
                </scope>
                <declaration name="relType" type="RelationType" line="1003"/>
                <declaration name="roleName" type="String" line="1005"/>
                <declaration name="roleValue" type="List&lt;ObjectName&gt;" line="1006"/>
                <declaration name="writeChkFlag" type="boolean" line="1007"/>
                <scope line="1008"/>
                <declaration name="roleInfo" type="RoleInfo" line="1012"/>
                <scope line="1013"/>
                <scope line="1015"/>
                <declaration name="result" type="Integer" line="1021"/>
            </method>
            <javadoc line="1032">
                Sends a notification (RelationNotification) for a relation creation.
                  The notification type is:
                  &lt;P&gt;- RelationNotification.RELATION_BASIC_CREATION if the relation is an
                  object internal to the Relation Service
                  &lt;P&gt;- RelationNotification.RELATION_MBEAN_CREATION if the relation is a
                  MBean added as a relation.
                  &lt;P&gt;The source object is the Relation Service itself.
                  &lt;P&gt;It is called in Relation Service createRelation() and
                  addRelation() methods.                
                <param>
                    relationId  relation identifier of the updated relation                    
                </param>
                <exception>
                    IllegalArgumentException  if null parameter                    
                </exception>
                <exception>
                    RelationNotFoundException  if there is no relation for given
                      relation id                    
                </exception>
            </javadoc>
            <method name="sendRelationCreationNotification" type="void" line="1051">
                <params>
                    <param name="relationId" type="String"/>
                </params>
                <comment line="1062">
                    Message                    
                </comment>
                <comment line="1066">
                    Can throw RelationNotFoundException                    
                </comment>
                <scope line="1053">
                    <declaration name="excMsg" type="String" line="1054"/>
                </scope>
                <declaration name="ntfMsg" type="StringBuilder" line="1062"/>
            </method>
            <javadoc line="1079">
                Sends a notification (RelationNotification) for a role update in the
                  given relation. The notification type is:
                  &lt;P&gt;- RelationNotification.RELATION_BASIC_UPDATE if the relation is an
                  object internal to the Relation Service
                  &lt;P&gt;- RelationNotification.RELATION_MBEAN_UPDATE if the relation is a
                  MBean added as a relation.
                  &lt;P&gt;The source object is the Relation Service itself.
                  &lt;P&gt;It is called in relation MBean setRole() (for given role) and
                  setRoles() (for each role) methods (implementation provided in
                  RelationSupport class).
                  &lt;P&gt;It is also called in Relation Service setRole() (for given role) and
                  setRoles() (for each role) methods.                
                <param>
                    relationId  relation identifier of the updated relation                    
                </param>
                <param>
                    newRole  new role (name and new value)                    
                </param>
                <param>
                    oldValue  old role value (List of ObjectName objects)                    
                </param>
                <exception>
                    IllegalArgumentException  if null parameter                    
                </exception>
                <exception>
                    RelationNotFoundException  if there is no relation for given
                      relation id                    
                </exception>
            </javadoc>
            <method name="sendRoleUpdateNotification" type="void" line="1105">
                <params>
                    <param name="relationId" type="String"/>
                    <param name="newRole" type="Role"/>
                    <param name="oldValue" type="List<ObjectName>"/>
                </params>
                <comment line="1125">
                    Message                    
                </comment>
                <comment line="1135">
                    Can throw a RelationNotFoundException                    
                </comment>
                <scope line="1109">
                    <declaration name="excMsg" type="String" line="1110"/>
                </scope>
                <declaration name="roleName" type="String" line="1121"/>
                <declaration name="newRoleVal" type="List&lt;ObjectName&gt;" line="1122"/>
                <declaration name="newRoleValString" type="String" line="1125"/>
                <declaration name="oldRoleValString" type="String" line="1126"/>
                <declaration name="ntfMsg" type="StringBuilder" line="1127"/>
            </method>
            <javadoc line="1147">
                Sends a notification (RelationNotification) for a relation removal.
                  The notification type is:
                  &lt;P&gt;- RelationNotification.RELATION_BASIC_REMOVAL if the relation is an
                  object internal to the Relation Service
                  &lt;P&gt;- RelationNotification.RELATION_MBEAN_REMOVAL if the relation is a
                  MBean added as a relation.
                  &lt;P&gt;The source object is the Relation Service itself.
                  &lt;P&gt;It is called in Relation Service removeRelation() method.                
                <param>
                    relationId  relation identifier of the updated relation                    
                </param>
                <param>
                    unregMBeanList  List of ObjectNames of MBeans expected
                      to be unregistered due to relation removal (can be null)                    
                </param>
                <exception>
                    IllegalArgumentException  if null parameter                    
                </exception>
                <exception>
                    RelationNotFoundException  if there is no relation for given
                      relation id                    
                </exception>
            </javadoc>
            <method name="sendRelationRemovalNotification" type="void" line="1168">
                <params>
                    <param name="relationId" type="String"/>
                    <param name="unregMBeanList" type="List<ObjectName>"/>
                </params>
                <comment line="1180">
                    Can throw RelationNotFoundException                    
                </comment>
                <scope line="1170">
                    <declaration name="excMsg" type="String" line="1171"/>
                </scope>
            </method>
            <javadoc line="1194">
                Handles update of the Relation Service role map for the update of given
                  role in given relation.
                  &lt;P&gt;It is called in relation MBean setRole() (for given role) and
                  setRoles() (for each role) methods (implementation provided in
                  RelationSupport class).
                  &lt;P&gt;It is also called in Relation Service setRole() (for given role) and
                  setRoles() (for each role) methods.
                  &lt;P&gt;To allow the Relation Service to maintain the consistency (in case
                  of MBean unregistration) and to be able to perform queries, this method
                  must be called when a role is updated.                
                <param>
                    relationId  relation identifier of the updated relation                    
                </param>
                <param>
                    newRole  new role (name and new value)                    
                </param>
                <param>
                    oldValue  old role value (List of ObjectName objects)                    
                </param>
                <exception>
                    IllegalArgumentException  if null parameter                    
                </exception>
                <exception>
                    RelationServiceNotRegisteredException  if the Relation
                      Service is not registered in the MBean Server                    
                </exception>
                <exception>
                    RelationNotFoundException  if no relation for given id.                    
                </exception>
            </javadoc>
            <method name="updateRoleMap" type="void" line="1220">
                <params>
                    <param name="relationId" type="String"/>
                    <param name="newRole" type="Role"/>
                    <param name="oldValue" type="List<ObjectName>"/>
                </params>
                <comment line="1233">
                    Can throw RelationServiceNotRegisteredException                    
                </comment>
                <comment line="1236">
                    Verifies the relation has been added in the Relation Service
                     Can throw a RelationNotFoundException                    
                </comment>
                <comment line="1242">
                    Note: no need to test if oldValue not null before cloning,
                           tested above.                    
                </comment>
                <comment line="1247">
                    List of ObjectNames of new referenced MBeans                    
                </comment>
                <comment line="1252">
                    Checks if this ObjectName was already present in old value
                     Note: use copy (oldRoleValue) instead of original
                           oldValue to speed up, as oldRoleValue is decreased
                           by removing unchanged references :)                    
                </comment>
                <comment line="1259">
                    New reference to an ObjectName                    
                </comment>
                <comment line="1261">
                    Stores this reference into map
                     Returns true if new reference, false if MBean already
                     referenced                    
                </comment>
                <comment line="1269">
                    Adds it into list of new reference                    
                </comment>
                <comment line="1274">
                    MBean was already referenced in old value                    
                </comment>
                <comment line="1276">
                    Removes it from old value (local list) to ignore it when
                     looking for remove MBean references                    
                </comment>
                <comment line="1282">
                    List of ObjectNames of MBeans no longer referenced                    
                </comment>
                <comment line="1285">
                    Each ObjectName remaining in oldRoleValue is an ObjectName no longer
                     referenced in new value                    
                </comment>
                <comment line="1288">
                    Removes MBean reference from map
                     Returns true if the MBean is no longer referenced in any
                     relation                    
                </comment>
                <comment line="1297">
                    Adds it into list of references to be removed                    
                </comment>
                <comment line="1302">
                    To avoid having one listener per ObjectName of referenced MBean,
                     and to increase performances, there is only one listener recording
                     all ObjectNames of interest                    
                </comment>
                <scope line="1224">
                    <declaration name="excMsg" type="String" line="1225"/>
                </scope>
                <declaration name="result" type="Object" line="1237"/>
                <declaration name="roleName" type="String" line="1239"/>
                <declaration name="newRoleValue" type="List&lt;ObjectName&gt;" line="1240"/>
                <declaration name="oldRoleValue" type="List&lt;ObjectName&gt;" line="1243"/>
                <declaration name="newRefList" type="List&lt;ObjectName&gt;" line="1247"/>
                <scope line="1249">
                    <declaration name="currObjNamePos" type="int" line="1255"/>
                    <scope line="1257">
                        <declaration name="isNewFlag" type="boolean" line="1263"/>
                        <scope line="1267"/>
                    </scope>
                    <scope line="1272"/>
                </scope>
                <declaration name="obsRefList" type="List&lt;ObjectName&gt;" line="1282"/>
                <scope line="1286">
                    <declaration name="noLongerRefFlag" type="boolean" line="1290"/>
                    <scope line="1295"/>
                </scope>
            </method>
            <javadoc line="1311">
                Removes given relation from the Relation Service.
                  &lt;P&gt;A RelationNotification notification is sent, its type being:
                  &lt;P&gt;- RelationNotification.RELATION_BASIC_REMOVAL if the relation was
                  only internal to the Relation Service
                  &lt;P&gt;- RelationNotification.RELATION_MBEAN_REMOVAL if the relation is
                  registered as an MBean.
                  &lt;P&gt;For MBeans referenced in such relation, nothing will be done,                
                <param>
                    relationId  relation id of the relation to be removed                    
                </param>
                <exception>
                    RelationServiceNotRegisteredException  if the Relation
                      Service is not registered in the MBean Server                    
                </exception>
                <exception>
                    IllegalArgumentException  if null parameter                    
                </exception>
                <exception>
                    RelationNotFoundException  if no relation corresponding to
                      given relation id                    
                </exception>
            </javadoc>
            <method name="removeRelation" type="void" line="1331">
                <params>
                    <param name="relationId" type="String"/>
                </params>
                <comment line="1334">
                    Can throw RelationServiceNotRegisteredException                    
                </comment>
                <comment line="1345">
                    Checks there is a relation with this id
                     Can throw RelationNotFoundException                    
                </comment>
                <comment line="1349">
                    Removes it from listener filter                    
                </comment>
                <comment line="1353">
                    Can throw a RelationServiceNotRegisteredException                    
                </comment>
                <comment line="1357">
                    Sends a notification
                     Note: has to be done FIRST as needs the relation to be still in the
                           Relation Service
                     No RelationNotFoundException as checked above                    
                </comment>
                <comment line="1362">
                    Revisit [cebro] Handle CIM &quot;Delete&quot; and &quot;IfDeleted&quot; qualifiers:
                       deleting the relation can mean to delete referenced MBeans. In
                       that case, MBeans to be unregistered are put in a list sent along
                       with the notification below                    
                </comment>
                <comment line="1367">
                    Can throw a RelationNotFoundException (but detected above)                    
                </comment>
                <comment line="1370">
                    Removes the relation from various internal maps                    
                </comment>
                <comment line="1372">
                    - MBean reference map
                     Retrieves the MBeans referenced in this relation
                     Note: here we cannot use removeMBeanReference() because it would
                           require to know the MBeans referenced in the relation. For
                           that it would be necessary to call &apos;getReferencedMBeans()&apos;
                           on the relation itself. Ok if it is an internal one, but if
                           it is an MBean, it is possible it is already unregistered, so
                           not available through the MBean Server.                    
                </comment>
                <comment line="1381">
                    List of MBeans no longer referenced in any relation, to be
                     removed fom the map                    
                </comment>
                <comment line="1390">
                    Retrieves relations where the MBean is referenced                    
                </comment>
                <comment line="1400">
                    MBean no longer referenced
                     Note: do not remove it here because pointed by the
                           iterator!                    
                </comment>
                <comment line="1407">
                    Cleans MBean reference map by removing MBeans no longer
                     referenced                    
                </comment>
                <comment line="1414">
                    - Relation id to object map                    
                </comment>
                <comment line="1420">
                    - ObjectName to relation id map                    
                </comment>
                <comment line="1426">
                    Relation id to relation type name map
                     First retrieves the relation type name                    
                </comment>
                <comment line="1433">
                    - Relation type name to relation id map                    
                </comment>
                <comment line="1437">
                    Can be null if called from removeRelationType()                    
                </comment>
                <comment line="1440">
                    No other relation of that type                    
                </comment>
                <scope line="1336">
                    <declaration name="excMsg" type="String" line="1337"/>
                </scope>
                <declaration name="result" type="Object" line="1346"/>
                <scope line="1349">
                    <declaration name="obsRefList" type="List&lt;ObjectName&gt;" line="1350"/>
                </scope>
                <declaration name="refMBeanList" type="List&lt;ObjectName&gt;" line="1379"/>
                <declaration name="nonRefObjNameList" type="List&lt;ObjectName&gt;" line="1382"/>
                <scope line="1384">
                    <scope line="1387">
                        <declaration name="relIdMap" type="Map&lt;String,List&lt;String&gt;&gt;" line="1390"/>
                        <scope line="1393"/>
                        <scope line="1398"/>
                    </scope>
                    <scope line="1408"/>
                </scope>
                <scope line="1414"/>
                <scope line="1418">
                    <scope line="1420"/>
                </scope>
                <declaration name="relTypeName" type="String" line="1427"/>
                <scope line="1428"/>
                <scope line="1433">
                    <declaration name="relIdList" type="List&lt;String&gt;" line="1434"/>
                    <scope line="1435">
                        <scope line="1438"/>
                    </scope>
                </scope>
            </method>
            <javadoc line="1450">
                Purges the relations.
                  &lt;P&gt;Depending on the purgeFlag value, this method is either called
                  automatically when a notification is received for the unregistration of
                  an MBean referenced in a relation (if the flag is set to true), or not
                  (if the flag is set to false).
                  &lt;P&gt;In that case it is up to the user to call it to maintain the
                  consistency of the relations. To be kept in mind that if an MBean is
                  unregistered and the purge not done immediately, if the ObjectName is
                  reused and assigned to another MBean referenced in a relation, calling
                  manually this purgeRelations() method will cause trouble, as will
                  consider the ObjectName as corresponding to the unregistered MBean, not
                  seeing the new one.
                  &lt;P&gt;The behavior depends on the cardinality of the role where the
                  unregistered MBean is referenced:
                  &lt;P&gt;- if removing one MBean reference in the role makes its number of
                  references less than the minimum degree, the relation has to be removed.
                  &lt;P&gt;- if the remaining number of references after removing the MBean
                  reference is still in the cardinality range, keep the relation and
                  update it calling its handleMBeanUnregistration() callback.                
                <exception>
                    RelationServiceNotRegisteredException  if the Relation
                      Service is not registered in the MBean Server.                    
                </exception>
            </javadoc>
            <method name="purgeRelations" type="void" line="1477">
                <comment line="1483">
                    Can throw RelationServiceNotRegisteredException                    
                </comment>
                <comment line="1486">
                    Revisit [cebro] Handle the CIM &quot;Delete&quot; and &quot;IfDeleted&quot; qualifier:
                        if the unregistered MBean has the &quot;IfDeleted&quot; qualifier,
                        possible that the relation itself or other referenced MBeans
                        have to be removed (then a notification would have to be sent
                        to inform that they should be unregistered.                    
                </comment>
                <comment line="1493">
                    Clones the list of notifications to be able to still receive new
                     notifications while proceeding those ones                    
                </comment>
                <comment line="1499">
                    Resets list                    
                </comment>
                <comment line="1504">
                    Updates the listener filter to avoid receiving notifications for
                     those MBeans again
                     Makes also a local &quot;myRefedMBeanObjName2RelIdsMap&quot; map, mapping
                     ObjectName -&gt; relId -&gt; roles, to remove the MBean from the global
                     map
                     List of references to be removed from the listener filter                    
                </comment>
                <comment line="1511">
                    Map including ObjectNames for unregistered MBeans, with
                     referencing relation ids and roles                    
                </comment>
                <comment line="1521">
                    Adds the unregsitered MBean in the list of references to
                     remove from the listener filter                    
                </comment>
                <comment line="1525">
                    Retrieves the associated map of relation ids and roles                    
                </comment>
                <comment line="1534">
                    Updates the listener
                     Can throw RelationServiceNotRegisteredException                    
                </comment>
                <comment line="1542">
                    Retrieves the relations where the MBean is referenced                    
                </comment>
                <comment line="1546">
                    List of relation ids where the unregistered MBean is
                     referenced                    
                </comment>
                <comment line="1551">
                    List of roles of the relation where the MBean is
                     referenced                    
                </comment>
                <comment line="1555">
                    Checks if the relation has to be removed or not,
                     regarding expected minimum role cardinality and current
                     number of references after removal of the current one
                     If the relation is kept, calls
                     handleMBeanUnregistration() callback of the relation to
                     update it
                    
                     Can throw RelationServiceNotRegisteredException
                    
                     Shall not throw RelationNotFoundException,
                     RoleNotFoundException, MBeanException                    
                </comment>
                <declaration name="localUnregNtfList" type="List&lt;MBeanServerNotification&gt;" line="1494"/>
                <scope line="1495"/>
                <declaration name="obsRefList" type="List&lt;ObjectName&gt;" line="1509"/>
                <declaration name="localMBean2RelIdMap" type="Map&lt;ObjectName,Map&lt;String,List&lt;String&gt;&gt;&gt;" line="1512"/>
                <scope line="1515">
                    <scope line="1516">
                        <declaration name="unregMBeanName" type="ObjectName" line="1518"/>
                        <declaration name="relIdMap" type="Map&lt;String,List&lt;String&gt;&gt;" line="1525"/>
                    </scope>
                </scope>
                <scope line="1537">
                    <declaration name="unregMBeanName" type="ObjectName" line="1539"/>
                    <declaration name="localRelIdMap" type="Map&lt;String,List&lt;String&gt;&gt;" line="1542"/>
                    <scope line="1548">
                        <declaration name="currRelId" type="String" line="1549"/>
                        <declaration name="localRoleNameList" type="List&lt;String&gt;" line="1552"/>
                        <scope line="1565"/>
                        <scope line="1569"/>
                        <scope line="1571"/>
                    </scope>
                </scope>
            </method>
            <javadoc line="1582">
                Retrieves the relations where a given MBean is referenced.
                  &lt;P&gt;This corresponds to the CIM &quot;References&quot; and &quot;ReferenceNames&quot;
                  operations.                
                <param>
                    mbeanName  ObjectName of MBean                    
                </param>
                <param>
                    relationTypeName  can be null; if specified, only the relations
                      of that type will be considered in the search. Else all relation types
                      are considered.                    
                </param>
                <param>
                    roleName  can be null; if specified, only the relations
                      where the MBean is referenced in that role will be returned. Else all
                      roles are considered.                    
                </param>
                <return>
                    an HashMap, where the keys are the relation ids of the relations
                      where the MBean is referenced, and the value is, for each key,
                      an ArrayList of role names (as an MBean can be referenced in several
                      roles in the same relation).                    
                </return>
                <exception>
                    IllegalArgumentException  if null parameter                    
                </exception>
            </javadoc>
            <method name="findReferencingRelations" type="Map<String,List<String>>" line="1606">
                <params>
                    <param name="mbeanName" type="ObjectName"/>
                    <param name="relationTypeName" type="String"/>
                    <param name="roleName" type="String"/>
                </params>
                <comment line="1622">
                    Retrieves the relations referencing the MBean                    
                </comment>
                <comment line="1628">
                    Relation Ids where the MBean is referenced                    
                </comment>
                <comment line="1631">
                    List of relation ids of interest regarding the selected
                     relation type                    
                </comment>
                <comment line="1635">
                    Considers all relations                    
                </comment>
                <comment line="1642">
                    Considers only the relation ids for relations of given
                     type                    
                </comment>
                <comment line="1646">
                    Retrieves its relation type                    
                </comment>
                <comment line="1661">
                    Now looks at the roles where the MBean is expected to be
                     referenced                    
                </comment>
                <comment line="1665">
                    Retrieves list of role names where the MBean is
                     referenced                    
                </comment>
                <comment line="1671">
                    All roles to be considered
                     Note: no need to test if list not null before
                           cloning, MUST be not null else bug :(                    
                </comment>
                <comment line="1678">
                    Filters only the relations where the MBean is
                     referenced in  given role                    
                </comment>
                <scope line="1608">
                    <declaration name="excMsg" type="String" line="1609"/>
                </scope>
                <declaration name="result" type="Map&lt;String,List&lt;String&gt;&gt;" line="1617"/>
                <scope line="1619">
                    <declaration name="relId2RoleNamesMap" type="Map&lt;String,List&lt;String&gt;&gt;" line="1622"/>
                    <scope line="1625">
                        <declaration name="allRelIdSet" type="Set&lt;String&gt;" line="1628"/>
                        <declaration name="relIdList" type="List&lt;String&gt;" line="1632"/>
                        <scope line="1633"/>
                        <scope line="1637">
                            <scope line="1643">
                                <declaration name="currRelTypeName" type="String" line="1646"/>
                                <scope line="1647"/>
                                <scope line="1652"/>
                            </scope>
                        </scope>
                        <scope line="1663">
                            <declaration name="currRoleNameList" type="List&lt;String&gt;" line="1666"/>
                            <scope line="1669"/>
                            <scope line="1676">
                                <declaration name="dummyList" type="List&lt;String&gt;" line="1679"/>
                            </scope>
                        </scope>
                    </scope>
                </scope>
            </method>
            <javadoc line="1692">
                Retrieves the MBeans associated to given one in a relation.
                  &lt;P&gt;This corresponds to CIM Associators and AssociatorNames operations.                
                <param>
                    mbeanName  ObjectName of MBean                    
                </param>
                <param>
                    relationTypeName  can be null; if specified, only the relations
                      of that type will be considered in the search. Else all
                      relation types are considered.                    
                </param>
                <param>
                    roleName  can be null; if specified, only the relations
                      where the MBean is referenced in that role will be considered. Else all
                      roles are considered.                    
                </param>
                <return>
                    an HashMap, where the keys are the ObjectNames of the MBeans
                      associated to given MBean, and the value is, for each key, an ArrayList
                      of the relation ids of the relations where the key MBean is
                      associated to given one (as they can be associated in several different
                      relations).                    
                </return>
                <exception>
                    IllegalArgumentException  if null parameter                    
                </exception>
            </javadoc>
            <method name="findAssociatedMBeans" type="Map<ObjectName,List<String>>" line="1716">
                <params>
                    <param name="mbeanName" type="ObjectName"/>
                    <param name="relationTypeName" type="String"/>
                    <param name="roleName" type="String"/>
                </params>
                <comment line="1728">
                    Retrieves the map &lt;relation id&gt; -&gt; &lt;role names&gt; for those
                     criterias                    
                </comment>
                <comment line="1740">
                    Retrieves ObjectNames of MBeans referenced in this relation
                    
                     Shall not throw a RelationNotFoundException if incorrect status
                     of maps :(                    
                </comment>
                <comment line="1751">
                    For each MBean associated to given one in a relation, adds the
                     association &lt;ObjectName&gt; -&gt; &lt;relation id&gt; into result map                    
                </comment>
                <comment line="1757">
                    Sees if this MBean is already associated to the given
                     one in another relation                    
                </comment>
                <scope line="1718">
                    <declaration name="excMsg" type="String" line="1719"/>
                </scope>
                <declaration name="relId2RoleNamesMap" type="Map&lt;String,List&lt;String&gt;&gt;" line="1729"/>
                <declaration name="result" type="Map&lt;ObjectName,List&lt;String&gt;&gt;" line="1734"/>
                <scope line="1737">
                    <declaration name="objName2RoleNamesMap" type="Map&lt;ObjectName,List&lt;String&gt;&gt;" line="1743"/>
                    <scope line="1744"/>
                    <scope line="1746"/>
                    <scope line="1752">
                        <scope line="1754">
                            <declaration name="currRelIdList" type="List&lt;String&gt;" line="1758"/>
                            <scope line="1759"/>
                            <scope line="1765"/>
                        </scope>
                    </scope>
                </scope>
            </method>
            <javadoc line="1777">
                Returns the relation ids for relations of the given type.                
                <param>
                    relationTypeName  relation type name                    
                </param>
                <return>
                    an ArrayList of relation ids.                    
                </return>
                <exception>
                    IllegalArgumentException  if null parameter                    
                </exception>
                <exception>
                    RelationTypeNotFoundException  if there is no relation type
                      with that name.                    
                </exception>
            </javadoc>
            <method name="findRelationsOfType" type="List<String>" line="1790">
                <params>
                    <param name="relationTypeName" type="String"/>
                </params>
                <comment line="1801">
                    Can throw RelationTypeNotFoundException                    
                </comment>
                <scope line="1792">
                    <declaration name="excMsg" type="String" line="1793"/>
                </scope>
                <declaration name="relType" type="RelationType" line="1801"/>
                <declaration name="result" type="List&lt;String&gt;" line="1803"/>
                <scope line="1804">
                    <declaration name="result1" type="List&lt;String&gt;" line="1805"/>
                </scope>
            </method>
            <javadoc line="1817">
                Retrieves role value for given role name in given relation.                
                <param>
                    relationId  relation id                    
                </param>
                <param>
                    roleName  name of role                    
                </param>
                <return>
                    the ArrayList of ObjectName objects being the role value                    
                </return>
                <exception>
                    RelationServiceNotRegisteredException  if the Relation
                      Service is not registered                    
                </exception>
                <exception>
                    IllegalArgumentException  if null parameter                    
                </exception>
                <exception>
                    RelationNotFoundException  if no relation with given id                    
                </exception>
                <exception>
                    RoleNotFoundException  if:
                      <P>- there is no role with given name
                      <P>or
                      <P>- the role is not readable.                    
                </exception>
                <see>
                    #setRole                    
                </see>
            </javadoc>
            <method name="getRole" type="List<ObjectName>" line="1841">
                <params>
                    <param name="relationId" type="String"/>
                    <param name="roleName" type="String"/>
                </params>
                <comment line="1852">
                    Can throw RelationServiceNotRegisteredException                    
                </comment>
                <comment line="1855">
                    Can throw a RelationNotFoundException                    
                </comment>
                <comment line="1861">
                    Internal relation
                     Can throw RoleNotFoundException                    
                </comment>
                <comment line="1870">
                    Relation MBean                    
                </comment>
                <comment line="1875">
                    Can throw MBeanException wrapping a RoleNotFoundException:
                     throw wrapped exception
                    
                     Shall not throw InstanceNotFoundException or ReflectionException                    
                </comment>
                <scope line="1843">
                    <declaration name="excMsg" type="String" line="1844"/>
                </scope>
                <declaration name="relObj" type="Object" line="1855"/>
                <declaration name="result" type="List&lt;ObjectName&gt;" line="1857"/>
                <scope line="1859"/>
                <scope line="1868">
                    <declaration name="params" type="Object[]" line="1870"/>
                    <declaration name="signature" type="String[]" line="1872"/>
                    <scope line="1878">
                        <declaration name="invokeResult" type="List&lt;ObjectName&gt;" line="1879"/>
                    </scope>
                    <scope line="1888"/>
                    <scope line="1890"/>
                    <scope line="1892">
                        <declaration name="wrappedExc" type="Exception" line="1893"/>
                        <scope line="1894"/>
                        <scope line="1896"/>
                    </scope>
                </scope>
            </method>
            <javadoc line="1906">
                Retrieves values of roles with given names in given relation.                
                <param>
                    relationId  relation id                    
                </param>
                <param>
                    roleNameArray  array of names of roles to be retrieved                    
                </param>
                <return>
                    a RoleResult object, including a RoleList (for roles
                      successfully retrieved) and a RoleUnresolvedList (for roles not
                      retrieved).                    
                </return>
                <exception>
                    RelationServiceNotRegisteredException  if the Relation
                      Service is not registered in the MBean Server                    
                </exception>
                <exception>
                    IllegalArgumentException  if null parameter                    
                </exception>
                <exception>
                    RelationNotFoundException  if no relation with given id                    
                </exception>
                <see>
                    #setRoles                    
                </see>
            </javadoc>
            <method name="getRoles" type="RoleResult" line="1927">
                <params>
                    <param name="relationId" type="String"/>
                    <param name="roleNameArray" type="String[]"/>
                </params>
                <comment line="1938">
                    Can throw RelationServiceNotRegisteredException                    
                </comment>
                <comment line="1941">
                    Can throw a RelationNotFoundException                    
                </comment>
                <comment line="1947">
                    Internal relation                    
                </comment>
                <comment line="1952">
                    Relation MBean                    
                </comment>
                <comment line="1959">
                    OK : This is an array of java.lang.String
                          so this should never happen...                    
                </comment>
                <comment line="1962">
                    Shall not throw InstanceNotFoundException, ReflectionException
                     or MBeanException                    
                </comment>
                <scope line="1929">
                    <declaration name="excMsg" type="String" line="1930"/>
                </scope>
                <declaration name="relObj" type="Object" line="1941"/>
                <declaration name="result" type="RoleResult" line="1943"/>
                <scope line="1945"/>
                <scope line="1950">
                    <declaration name="params" type="Object[]" line="1952"/>
                    <declaration name="signature" type="String[]" line="1954"/>
                    <scope line="1955"/>
                    <scope line="1957"/>
                    <scope line="1963"/>
                    <scope line="1969"/>
                    <scope line="1971"/>
                    <scope line="1973"/>
                </scope>
            </method>
            <javadoc line="1983">
                Returns all roles present in the relation.                
                <param>
                    relationId  relation id                    
                </param>
                <return>
                    a RoleResult object, including a RoleList (for roles
                      successfully retrieved) and a RoleUnresolvedList (for roles not
                      readable).                    
                </return>
                <exception>
                    IllegalArgumentException  if null parameter                    
                </exception>
                <exception>
                    RelationNotFoundException  if no relation for given id                    
                </exception>
                <exception>
                    RelationServiceNotRegisteredException  if the Relation
                      Service is not registered in the MBean Server                    
                </exception>
            </javadoc>
            <method name="getAllRoles" type="RoleResult" line="2000">
                <params>
                    <param name="relationId" type="String"/>
                </params>
                <comment line="2011">
                    Can throw a RelationNotFoundException                    
                </comment>
                <comment line="2017">
                    Internal relation                    
                </comment>
                <comment line="2021">
                    Relation MBean
                     Shall not throw any Exception                    
                </comment>
                <scope line="2002">
                    <declaration name="excMsg" type="String" line="2003"/>
                </scope>
                <declaration name="relObj" type="Object" line="2011"/>
                <declaration name="result" type="RoleResult" line="2013"/>
                <scope line="2015"/>
                <scope line="2019">
                    <scope line="2022"/>
                    <scope line="2026"/>
                </scope>
            </method>
            <javadoc line="2035">
                Retrieves the number of MBeans currently referenced in the given role.                
                <param>
                    relationId  relation id                    
                </param>
                <param>
                    roleName  name of role                    
                </param>
                <return>
                    the number of currently referenced MBeans in that role                    
                </return>
                <exception>
                    IllegalArgumentException  if null parameter                    
                </exception>
                <exception>
                    RelationNotFoundException  if no relation with given id                    
                </exception>
                <exception>
                    RoleNotFoundException  if there is no role with given name                    
                </exception>
            </javadoc>
            <method name="getRoleCardinality" type="Integer" line="2051">
                <params>
                    <param name="relationId" type="String"/>
                    <param name="roleName" type="String"/>
                </params>
                <comment line="2062">
                    Can throw a RelationNotFoundException                    
                </comment>
                <comment line="2068">
                    Internal relation
                     Can throw RoleNotFoundException                    
                </comment>
                <comment line="2073">
                    Relation MBean                    
                </comment>
                <comment line="2078">
                    Can throw MBeanException wrapping RoleNotFoundException:
                     throw wrapped exception
                    
                     Shall not throw InstanceNotFoundException or ReflectionException                    
                </comment>
                <scope line="2053">
                    <declaration name="excMsg" type="String" line="2054"/>
                </scope>
                <declaration name="relObj" type="Object" line="2062"/>
                <declaration name="result" type="Integer" line="2064"/>
                <scope line="2066"/>
                <scope line="2071">
                    <declaration name="params" type="Object[]" line="2073"/>
                    <declaration name="signature" type="String[]" line="2075"/>
                    <scope line="2081"/>
                    <scope line="2087"/>
                    <scope line="2089"/>
                    <scope line="2091">
                        <declaration name="wrappedExc" type="Exception" line="2092"/>
                        <scope line="2093"/>
                        <scope line="2095"/>
                    </scope>
                </scope>
            </method>
            <javadoc line="2106">
                Sets the given role in given relation.
                  &lt;P&gt;Will check the role according to its corresponding role definition
                  provided in relation&apos;s relation type
                  &lt;P&gt;The Relation Service will keep track of the change to keep the
                  consistency of relations by handling referenced MBean unregistrations.                
                <param>
                    relationId  relation id                    
                </param>
                <param>
                    role  role to be set (name and new value)                    
                </param>
                <exception>
                    RelationServiceNotRegisteredException  if the Relation
                      Service is not registered in the MBean Server                    
                </exception>
                <exception>
                    IllegalArgumentException  if null parameter                    
                </exception>
                <exception>
                    RelationNotFoundException  if no relation with given id                    
                </exception>
                <exception>
                    RoleNotFoundException  if the role does not exist or is not
                      writable                    
                </exception>
                <exception>
                    InvalidRoleValueException  if value provided for role is not
                      valid:
                      <P>- the number of referenced MBeans in given value is less than
                      expected minimum degree
                      <P>or
                      <P>- the number of referenced MBeans in provided value exceeds expected
                      maximum degree
                      <P>or
                      <P>- one referenced MBean in the value is not an Object of the MBean
                      class expected for that role
                      <P>or
                      <P>- an MBean provided for that role does not exist                    
                </exception>
                <see>
                    #getRole                    
                </see>
            </javadoc>
            <method name="setRole" type="void" line="2143">
                <params>
                    <param name="relationId" type="String"/>
                    <param name="role" type="Role"/>
                </params>
                <comment line="2154">
                    Can throw RelationServiceNotRegisteredException                    
                </comment>
                <comment line="2157">
                    Can throw a RelationNotFoundException                    
                </comment>
                <comment line="2161">
                    Internal relation
                     Can throw RoleNotFoundException,
                     InvalidRoleValueException and
                     RelationServiceNotRegisteredException
                    
                     Shall not throw RelationTypeNotFoundException
                     (as relation exists in the RS, its relation type is known)                    
                </comment>
                <comment line="2179">
                    Relation MBean                    
                </comment>
                <comment line="2184">
                    Can throw MBeanException wrapping RoleNotFoundException,
                     InvalidRoleValueException
                    
                     Shall not MBeanException wrapping an MBeanException wrapping
                     RelationTypeNotFoundException, or ReflectionException, or
                     InstanceNotFoundException                    
                </comment>
                <scope line="2145">
                    <declaration name="excMsg" type="String" line="2146"/>
                </scope>
                <declaration name="relObj" type="Object" line="2157"/>
                <scope line="2159">
                    <scope line="2167"/>
                    <scope line="2173"/>
                </scope>
                <scope line="2177">
                    <declaration name="params" type="Object[]" line="2179"/>
                    <declaration name="signature" type="String[]" line="2181"/>
                    <scope line="2189"/>
                    <scope line="2193"/>
                    <scope line="2195"/>
                    <scope line="2197">
                        <declaration name="wrappedExc" type="Exception" line="2198"/>
                        <scope line="2199"/>
                        <scope line="2201"/>
                        <scope line="2203"/>
                    </scope>
                    <scope line="2207"/>
                    <scope line="2209"/>
                </scope>
            </method>
            <javadoc line="2218">
                Sets the given roles in given relation.
                  &lt;P&gt;Will check the role according to its corresponding role definition
                  provided in relation&apos;s relation type
                  &lt;P&gt;The Relation Service keeps track of the changes to keep the
                  consistency of relations by handling referenced MBean unregistrations.                
                <param>
                    relationId  relation id                    
                </param>
                <param>
                    roleList  list of roles to be set                    
                </param>
                <return>
                    a RoleResult object, including a RoleList (for roles
                      successfully set) and a RoleUnresolvedList (for roles not
                      set).                    
                </return>
                <exception>
                    RelationServiceNotRegisteredException  if the Relation
                      Service is not registered in the MBean Server                    
                </exception>
                <exception>
                    IllegalArgumentException  if null parameter                    
                </exception>
                <exception>
                    RelationNotFoundException  if no relation with given id                    
                </exception>
                <see>
                    #getRoles                    
                </see>
            </javadoc>
            <method name="setRoles" type="RoleResult" line="2243">
                <params>
                    <param name="relationId" type="String"/>
                    <param name="roleList" type="RoleList"/>
                </params>
                <comment line="2254">
                    Can throw RelationServiceNotRegisteredException                    
                </comment>
                <comment line="2257">
                    Can throw a RelationNotFoundException                    
                </comment>
                <comment line="2263">
                    Internal relation
                     Can throw RelationServiceNotRegisteredException
                    
                     Shall not throw RelationTypeNotFoundException (as relation is
                     known, its relation type exists)                    
                </comment>
                <comment line="2277">
                    Relation MBean                    
                </comment>
                <comment line="2282">
                    Shall not throw InstanceNotFoundException or an MBeanException
                     or ReflectionException                    
                </comment>
                <scope line="2245">
                    <declaration name="excMsg" type="String" line="2246"/>
                </scope>
                <declaration name="relObj" type="Object" line="2257"/>
                <declaration name="result" type="RoleResult" line="2259"/>
                <scope line="2261">
                    <scope line="2267"/>
                    <scope line="2271"/>
                </scope>
                <scope line="2275">
                    <declaration name="params" type="Object[]" line="2277"/>
                    <declaration name="signature" type="String[]" line="2279"/>
                    <scope line="2283"/>
                    <scope line="2289"/>
                    <scope line="2291"/>
                    <scope line="2293"/>
                </scope>
            </method>
            <javadoc line="2303">
                Retrieves MBeans referenced in the various roles of the relation.                
                <param>
                    relationId  relation id                    
                </param>
                <return>
                    a HashMap mapping:
                      <P> ObjectName -> ArrayList of String (role
                      names)                    
                </return>
                <exception>
                    IllegalArgumentException  if null parameter                    
                </exception>
                <exception>
                    RelationNotFoundException  if no relation for given
                      relation id                    
                </exception>
            </javadoc>
            <method name="getReferencedMBeans" type="Map<ObjectName,List<String>>" line="2319">
                <params>
                    <param name="relationId" type="String"/>
                </params>
                <comment line="2330">
                    Can throw a RelationNotFoundException                    
                </comment>
                <comment line="2336">
                    Internal relation                    
                </comment>
                <comment line="2340">
                    Relation MBean
                     No Exception                    
                </comment>
                <scope line="2321">
                    <declaration name="excMsg" type="String" line="2322"/>
                </scope>
                <declaration name="relObj" type="Object" line="2330"/>
                <declaration name="result" type="Map&lt;ObjectName,List&lt;String&gt;&gt;" line="2332"/>
                <scope line="2334"/>
                <scope line="2338">
                    <scope line="2341"/>
                    <scope line="2345"/>
                </scope>
            </method>
            <javadoc line="2355">
                Returns name of associated relation type for given relation.                
                <param>
                    relationId  relation id                    
                </param>
                <return>
                    the name of the associated relation type.                    
                </return>
                <exception>
                    IllegalArgumentException  if null parameter                    
                </exception>
                <exception>
                    RelationNotFoundException  if no relation for given
                      relation id                    
                </exception>
            </javadoc>
            <method name="getRelationTypeName" type="String" line="2368">
                <params>
                    <param name="relationId" type="String"/>
                </params>
                <comment line="2379">
                    Can throw a RelationNotFoundException                    
                </comment>
                <comment line="2385">
                    Internal relation                    
                </comment>
                <comment line="2389">
                    Relation MBean
                     No Exception                    
                </comment>
                <scope line="2370">
                    <declaration name="excMsg" type="String" line="2371"/>
                </scope>
                <declaration name="relObj" type="Object" line="2379"/>
                <declaration name="result" type="String" line="2381"/>
                <scope line="2383"/>
                <scope line="2387">
                    <scope line="2390"/>
                    <scope line="2394"/>
                </scope>
            </method>
            <javadoc line="2408">
                Invoked when a JMX notification occurs.
                  Currently handles notifications for unregistration of MBeans, either
                  referenced in a relation role or being a relation itself.                
                <param>
                    notif  The notification.                    
                </param>
                <param>
                    handback  An opaque object which helps the listener to
                      associate information regarding the MBean emitter (can be null).                    
                </param>
            </javadoc>
            <method name="handleNotification" type="void" line="2418">
                <params>
                    <param name="notif" type="Notification"/>
                    <param name="handback" type="Object"/>
                </params>
                <comment line="2439">
                    Note: use a flag to block access to
                     myRefedMBeanObjName2RelIdsMap only for a quick access                    
                </comment>
                <comment line="2445">
                    Unregistration of a referenced MBean                    
                </comment>
                <comment line="2452">
                    Immediate purge
                     Can throw RelationServiceNotRegisteredException
                     but assume that will be fine :)                    
                </comment>
                <comment line="2463">
                    Note: do both tests as a relation can be an MBean and be
                           itself referenced in another relation :)                    
                </comment>
                <comment line="2470">
                    Unregistration of a relation MBean
                     Can throw RelationTypeNotFoundException,
                     RelationServiceNotRegisteredException
                    
                     Shall not throw RelationTypeNotFoundException or
                     InstanceNotFoundException                    
                </comment>
                <scope line="2420">
                    <declaration name="excMsg" type="String" line="2421"/>
                </scope>
                <scope line="2428">
                    <declaration name="mbsNtf" type="MBeanServerNotification" line="2430"/>
                    <declaration name="ntfType" type="String" line="2431"/>
                    <scope line="2434">
                        <declaration name="mbeanName" type="ObjectName" line="2435"/>
                        <declaration name="isRefedMBeanFlag" type="boolean" line="2440"/>
                        <scope line="2441">
                            <scope line="2443">
                                <scope line="2445"/>
                            </scope>
                            <scope line="2450">
                                <scope line="2454"/>
                                <scope line="2456"/>
                            </scope>
                        </scope>
                        <declaration name="relId" type="String" line="2464"/>
                        <scope line="2465"/>
                        <scope line="2468">
                            <scope line="2475"/>
                            <scope line="2477"/>
                        </scope>
                    </scope>
                </scope>
            </method>
            <javadoc line="2493">
                Returns a NotificationInfo object containing the name of the Java class
                  of the notification and the notification types sent.                
            </javadoc>
            <method name="getNotificationInfo" type="MBeanNotificationInfo[]" line="2497">
                <declaration name="ntfClass" type="String" line="2502"/>
                <declaration name="ntfTypes" type="String[]" line="2504"/>
                <declaration name="ntfDesc" type="String" line="2513"/>
                <declaration name="ntfInfo" type="MBeanNotificationInfo" line="2515"/>
            </method>
            <method name="addRelationTypeInt" type="void" line="2536">
                <params>
                    <param name="relationTypeObj" type="RelationType"/>
                </params>
                <comment line="2549">
                    Checks that there is not already a relation type with that name
                     existing in the Relation Service                    
                </comment>
                <comment line="2552">
                    Can throw a RelationTypeNotFoundException (in fact should ;)                    
                </comment>
                <comment line="2563">
                    OK : The RelationType could not be found.                    
                </comment>
                <comment line="2566">
                    Adds the relation type                    
                </comment>
                <scope line="2538">
                    <declaration name="excMsg" type="String" line="2539"/>
                </scope>
                <declaration name="relTypeName" type="String" line="2546"/>
                <scope line="2550">
                    <declaration name="relType" type="RelationType" line="2552"/>
                    <scope line="2554">
                        <declaration name="excMsg" type="String" line="2555"/>
                        <declaration name="excMsgStrB" type="StringBuilder" line="2556"/>
                    </scope>
                </scope>
                <scope line="2561"/>
                <scope line="2566"/>
                <scope line="2570"/>
            </method>
            <method name="getRelationType" type="RelationType" line="2592">
                <params>
                    <param name="relationTypeName" type="String"/>
                </params>
                <comment line="2603">
                    No null relation type accepted, so can use get()                    
                </comment>
                <scope line="2594">
                    <declaration name="excMsg" type="String" line="2595"/>
                </scope>
                <declaration name="relType" type="RelationType" line="2603"/>
                <scope line="2604"/>
                <scope line="2608">
                    <declaration name="excMsg" type="String" line="2609"/>
                    <declaration name="excMsgStrB" type="StringBuilder" line="2610"/>
                </scope>
            </method>
            <method name="getRelation" type="Object" line="2636">
                <params>
                    <param name="relationId" type="String"/>
                </params>
                <comment line="2647">
                    No null relation  accepted, so can use get()                    
                </comment>
                <scope line="2638">
                    <declaration name="excMsg" type="String" line="2639"/>
                </scope>
                <declaration name="rel" type="Object" line="2647"/>
                <scope line="2648"/>
                <scope line="2652">
                    <declaration name="excMsg" type="String" line="2653"/>
                </scope>
            </method>
            <method name="addNewMBeanReference" type="boolean" line="2679">
                <params>
                    <param name="objectName" type="ObjectName"/>
                    <param name="relationId" type="String"/>
                    <param name="roleName" type="String"/>
                </params>
                <comment line="2697">
                    Checks if the MBean was already referenced
                     No null value allowed, use get() directly                    
                </comment>
                <comment line="2703">
                    MBean not referenced in any relation yet                    
                </comment>
                <comment line="2707">
                    List of roles where the MBean is referenced in given
                     relation                    
                </comment>
                <comment line="2712">
                    Map of relations where the MBean is referenced                    
                </comment>
                <comment line="2719">
                    MBean already referenced in at least another relation
                     Checks if already referenced in another role in current
                     relation                    
                </comment>
                <comment line="2725">
                    MBean not referenced in current relation                    
                </comment>
                <comment line="2727">
                    List of roles where the MBean is referenced in given
                     relation                    
                </comment>
                <comment line="2732">
                    Adds new reference done in current relation                    
                </comment>
                <comment line="2736">
                    MBean already referenced in current relation in another
                     role
                     Adds new reference done                    
                </comment>
                <scope line="2683">
                    <declaration name="excMsg" type="String" line="2684"/>
                </scope>
                <declaration name="isNewFlag" type="boolean" line="2692"/>
                <scope line="2694">
                    <declaration name="mbeanRefMap" type="Map&lt;String,List&lt;String&gt;&gt;" line="2698"/>
                    <scope line="2701">
                        <declaration name="roleNames" type="List&lt;String&gt;" line="2708"/>
                    </scope>
                    <scope line="2717">
                        <declaration name="roleNames" type="List&lt;String&gt;" line="2721"/>
                        <scope line="2723"/>
                        <scope line="2734"/>
                    </scope>
                </scope>
            </method>
            <method name="removeMBeanReference" type="boolean" line="2767">
                <params>
                    <param name="objectName" type="ObjectName"/>
                    <param name="relationId" type="String"/>
                    <param name="roleName" type="String"/>
                    <param name="allRolesFlag" type="boolean"/>
                </params>
                <comment line="2785">
                    Retrieves the set of relations (designed via their relation ids)
                     where the MBean is referenced
                     Note that it is possible that the MBean has already been removed
                     from the internal map: this is the case when the MBean is
                     unregistered, the role is updated, then we arrive here.                    
                </comment>
                <comment line="2794">
                    The MBean is no longer referenced                    
                </comment>
                <comment line="2802">
                    Now retrieves the roles of current relation where the MBean
                     was referenced                    
                </comment>
                <comment line="2806">
                    Removes obsolete reference to role                    
                </comment>
                <comment line="2813">
                    Checks if there is still at least one role in current relation
                     where the MBean is referenced                    
                </comment>
                <comment line="2816">
                    MBean no longer referenced in current relation: removes
                     entry                    
                </comment>
                <comment line="2821">
                    Checks if the MBean is still referenced in at least on relation                    
                </comment>
                <comment line="2823">
                    MBean no longer referenced in any relation: removes entry                    
                </comment>
                <scope line="2771">
                    <declaration name="excMsg" type="String" line="2772"/>
                </scope>
                <declaration name="noLongerRefFlag" type="boolean" line="2780"/>
                <scope line="2782">
                    <declaration name="mbeanRefMap" type="Map&lt;String,List&lt;String&gt;&gt;" line="2789"/>
                    <scope line="2792"/>
                    <declaration name="roleNames" type="List&lt;String&gt;" line="2799"/>
                    <scope line="2800">
                        <declaration name="obsRefIdx" type="int" line="2806"/>
                        <scope line="2807"/>
                    </scope>
                    <scope line="2814"/>
                    <scope line="2821"/>
                </scope>
            </method>
            <method name="updateUnregistrationListener" type="void" line="2845">
                <params>
                    <param name="newRefList" type="List<ObjectName>"/>
                    <param name="obsoleteRefList" type="List<ObjectName>"/>
                </params>
                <comment line="2850">
                    Nothing to do :)                    
                </comment>
                <comment line="2859">
                    Can throw RelationServiceNotRegisteredException                    
                </comment>
                <comment line="2866">
                    Initialize it to be able to synchronise it :)                    
                </comment>
                <comment line="2873">
                    Enables ObjectNames in newRefList                    
                </comment>
                <comment line="2880">
                    Disables ObjectNames in obsoleteRefList                    
                </comment>
                <comment line="2885">
                    Under test                    
                </comment>
                <comment line="2898">
                    End test                    
                </comment>
                <comment line="2901">
                    if (!newListenerFlag) {                    
                </comment>
                <comment line="2902">
                    The Relation Service was already registered as a
                     listener:
                     removes it
                     Shall not throw InstanceNotFoundException (as the
                     MBean Server Delegate is expected to exist) or
                     ListenerNotFoundException (as it has been checked above
                     that the Relation Service is registered)                    
                </comment>
                <comment line="2909">
                    try {
                                          myMBeanServer.removeNotificationListener(
                                                  MBeanServerDelegate.DELEGATE_NAME,
                                                  this);
                                      } catch (InstanceNotFoundException exc1) {
                                          throw new RuntimeException(exc1.getMessage());
                                      } catch (ListenerNotFoundException exc2) {
                                          throw new
                                              RelationServiceNotRegisteredException(exc2.getMessage());
                                      }
                                  }                    
                </comment>
                <comment line="2921">
                    Adds Relation Service with current filter
                     Can throw InstanceNotFoundException if the Relation
                     Service is not registered, to be transformed into
                     RelationServiceNotRegisteredException
                    
                     Assume that there will not be any InstanceNotFoundException
                     for the MBean Server Delegate :)                    
                </comment>
                <comment line="2928">
                    try {
                                      myMBeanServer.addNotificationListener(
                                                  MBeanServerDelegate.DELEGATE_NAME,
                                                  this,
                                                  myUnregNtfFilter,
                                                  null);
                                  } catch (InstanceNotFoundException exc) {
                                      throw new
                                         RelationServiceNotRegisteredException(exc.getMessage());
                                  }                    
                </comment>
                <scope line="2847">
                    <scope line="2848"/>
                </scope>
                <scope line="2861">
                    <declaration name="newListenerFlag" type="boolean" line="2863"/>
                    <scope line="2864"/>
                    <scope line="2870">
                        <scope line="2873"/>
                        <scope line="2878"/>
                        <scope line="2885">
                            <scope line="2886"/>
                            <scope line="2892"/>
                        </scope>
                    </scope>
                </scope>
            </method>
            <method name="addRelationInt" type="void" line="2993">
                <params>
                    <param name="relationBaseFlag" type="boolean"/>
                    <param name="relationObj" type="RelationSupport"/>
                    <param name="relationObjName" type="ObjectName"/>
                    <param name="relationId" type="String"/>
                    <param name="relationTypeName" type="String"/>
                    <param name="roleList" type="RoleList"/>
                </params>
                <comment line="3012">
                    Can throw RelationServiceNotRegisteredException                    
                </comment>
                <comment line="3015">
                    Checks if there is already a relation with given id                    
                </comment>
                <comment line="3017">
                    Can throw a RelationNotFoundException (in fact should :)                    
                </comment>
                <comment line="3021">
                    There is already a relation with that id                    
                </comment>
                <comment line="3028">
                    OK : The Relation could not be found.                    
                </comment>
                <comment line="3031">
                    Retrieves the relation type
                     Can throw RelationTypeNotFoundException                    
                </comment>
                <comment line="3035">
                    Checks that each provided role conforms to its role info provided in
                     the relation type
                     First retrieves a local list of the role infos of the relation type
                     to see which roles have not been initialized
                     Note: no need to test if list not null before cloning, not allowed
                           to have an empty relation type.                    
                </comment>
                <comment line="3048">
                    Retrieves corresponding role info
                     Can throw a RoleInfoNotFoundException to be converted into a
                     RoleNotFoundException                    
                </comment>
                <comment line="3058">
                    Checks that role conforms to role info,                    
                </comment>
                <comment line="3066">
                    A problem has occurred: throws appropriate exception
                     here InvalidRoleValueException                    
                </comment>
                <comment line="3071">
                    Removes role info for that list from list of role infos for
                     roles to be defaulted                    
                </comment>
                <comment line="3074">
                    Note: no need to check if != -1, MUST be there :)                    
                </comment>
                <comment line="3079">
                    Initializes roles not initialized by roleList
                     Can throw InvalidRoleValueException                    
                </comment>
                <comment line="3088">
                    Creation of relation successfull!!!!                    
                </comment>
                <comment line="3090">
                    Updates internal maps
                     Relation id to object map                    
                </comment>
                <comment line="3094">
                    Note: do not clone relation object, created by us :)                    
                </comment>
                <comment line="3101">
                    Relation id to relation type name map                    
                </comment>
                <comment line="3107">
                    Relation type to relation id map                    
                </comment>
                <comment line="3122">
                    Referenced MBean to relation id map
                     Only role list parameter used, as default initialization of roles
                     done automatically in initializeMissingRoles() sets each
                     uninitialized role to an empty value.                    
                </comment>
                <comment line="3127">
                    Creates a dummy empty ArrayList of ObjectNames to be the old
                     role value :)                    
                </comment>
                <comment line="3130">
                    Will not throw a RelationNotFoundException (as the RelId2Obj map
                     has been updated above) so catch it :)                    
                </comment>
                <comment line="3136">
                    OK : The Relation could not be found.                    
                </comment>
                <comment line="3140">
                    Sends a notification for relation creation
                     Will not throw RelationNotFoundException so catch it :)                    
                </comment>
                <comment line="3146">
                    OK : The Relation could not be found.                    
                </comment>
                <scope line="3002">
                    <declaration name="excMsg" type="String" line="3003"/>
                </scope>
                <scope line="3015">
                    <declaration name="rel" type="Object" line="3017"/>
                    <scope line="3019">
                        <declaration name="excMsg" type="String" line="3021"/>
                        <declaration name="excMsgStrB" type="StringBuilder" line="3022"/>
                    </scope>
                </scope>
                <scope line="3026"/>
                <declaration name="relType" type="RelationType" line="3032"/>
                <declaration name="roleInfoList" type="List&lt;RoleInfo&gt;" line="3040"/>
                <scope line="3042">
                    <scope line="3044">
                        <declaration name="currRoleName" type="String" line="3045"/>
                        <declaration name="currRoleValue" type="List&lt;ObjectName&gt;" line="3046"/>
                        <declaration name="roleInfo" type="RoleInfo" line="3050"/>
                        <scope line="3051"/>
                        <scope line="3053"/>
                        <declaration name="status" type="Integer" line="3058"/>
                        <declaration name="pbType" type="int" line="3063"/>
                        <scope line="3064"/>
                        <declaration name="roleInfoIdx" type="int" line="3072"/>
                    </scope>
                </scope>
                <scope line="3091">
                    <scope line="3092"/>
                    <scope line="3095"/>
                </scope>
                <scope line="3101"/>
                <scope line="3107">
                    <declaration name="relIdList" type="List&lt;String&gt;" line="3108"/>
                    <declaration name="firstRelFlag" type="boolean" line="3110"/>
                    <scope line="3111"/>
                    <scope line="3116"/>
                </scope>
                <scope line="3125">
                    <declaration name="dummyList" type="List&lt;ObjectName&gt;" line="3128"/>
                    <scope line="3131"/>
                    <scope line="3134"/>
                </scope>
                <scope line="3141"/>
                <scope line="3144"/>
            </method>
            <method name="checkRoleInt" type="Integer" line="3180">
                <params>
                    <param name="chkType" type="int"/>
                    <param name="roleName" type="String"/>
                    <param name="roleValue" type="List<ObjectName>"/>
                    <param name="roleInfo" type="RoleInfo"/>
                    <param name="writeChkFlag" type="boolean"/>
                </params>
                <comment line="3194">
                    Compares names                    
                </comment>
                <comment line="3202">
                    Checks read access if required                    
                </comment>
                <comment line="3210">
                    End of check :)                    
                </comment>
                <comment line="3217">
                    Checks write access if required                    
                </comment>
                <comment line="3229">
                    Checks minimum cardinality                    
                </comment>
                <comment line="3237">
                    Checks maximum cardinality                    
                </comment>
                <comment line="3245">
                    Verifies that each referenced MBean is registered in the MBean
                     Server and that it is an instance of the class specified in the
                     role info, or of a subclass of it
                     Note that here again this is under the assumption that
                     referenced MBeans, relation MBeans and the Relation Service are
                     registered in the same MBean Server.                    
                </comment>
                <comment line="3255">
                    Checks it is registered                    
                </comment>
                <comment line="3262">
                    Checks if it is of the correct class
                     Can throw an InstanceNotFoundException, if MBean not registered                    
                </comment>
                <scope line="3184">
                    <declaration name="excMsg" type="String" line="3185"/>
                </scope>
                <declaration name="expName" type="String" line="3194"/>
                <scope line="3195"/>
                <scope line="3202">
                    <declaration name="isReadable" type="boolean" line="3203"/>
                    <scope line="3204"/>
                    <scope line="3208"/>
                </scope>
                <scope line="3217">
                    <declaration name="isWritable" type="boolean" line="3218"/>
                    <scope line="3219"/>
                </scope>
                <declaration name="refNbr" type="int" line="3226"/>
                <declaration name="chkMinFlag" type="boolean" line="3229"/>
                <scope line="3230"/>
                <declaration name="chkMaxFlag" type="boolean" line="3237"/>
                <scope line="3238"/>
                <declaration name="expClassName" type="String" line="3250"/>
                <scope line="3252">
                    <scope line="3255"/>
                    <scope line="3263">
                        <declaration name="classSts" type="boolean" line="3264"/>
                        <scope line="3266"/>
                    </scope>
                    <scope line="3272"/>
                </scope>
            </method>
            <method name="initializeMissingRoles" type="void" line="3317">
                <params>
                    <param name="relationBaseFlag" type="boolean"/>
                    <param name="relationObj" type="RelationSupport"/>
                    <param name="relationObjName" type="ObjectName"/>
                    <param name="relationId" type="String"/>
                    <param name="relationTypeName" type="String"/>
                    <param name="roleInfoList" type="List<RoleInfo>"/>
                </params>
                <comment line="3338">
                    Can throw RelationServiceNotRegisteredException                    
                </comment>
                <comment line="3341">
                    For each role info (corresponding to a role not initialized by the
                     role list provided by the user), try to set in the relation a role
                     with an empty list of ObjectNames.
                     A check is performed to verify that the role can be set to an
                     empty value, according to its minimum cardinality                    
                </comment>
                <comment line="3350">
                    Creates an empty value                    
                </comment>
                <comment line="3352">
                    Creates a role                    
                </comment>
                <comment line="3357">
                    Internal relation
                     Can throw InvalidRoleValueException
                    
                     Will not throw RoleNotFoundException (role to be
                     initialized), or RelationNotFoundException, or
                     RelationTypeNotFoundException                    
                </comment>
                <comment line="3376">
                    Relation is an MBean
                     Use standard setRole()                    
                </comment>
                <comment line="3382">
                    Can throw MBeanException wrapping
                     InvalidRoleValueException. Returns the target exception to
                     be homogeneous.
                    
                     Will not throw MBeanException (wrapping
                     RoleNotFoundException or MBeanException) or
                     InstanceNotFoundException, or ReflectionException
                    
                     Again here the assumption is that the Relation Service and
                     the relation MBeans are registered in the same MBean Server.                    
                </comment>
                <scope line="3327">
                    <declaration name="excMsg" type="String" line="3328"/>
                </scope>
                <scope line="3345">
                    <declaration name="roleName" type="String" line="3347"/>
                    <declaration name="emptyValue" type="List&lt;ObjectName&gt;" line="3350"/>
                    <declaration name="role" type="Role" line="3352"/>
                    <scope line="3354">
                        <scope line="3362"/>
                        <scope line="3365"/>
                        <scope line="3367"/>
                        <scope line="3369"/>
                    </scope>
                    <scope line="3373">
                        <declaration name="params" type="Object[]" line="3377"/>
                        <declaration name="signature" type="String[]" line="3379"/>
                        <scope line="3391"/>
                        <scope line="3395"/>
                        <scope line="3397"/>
                        <scope line="3399">
                            <declaration name="wrappedExc" type="Exception" line="3400"/>
                            <scope line="3401"/>
                            <scope line="3403"/>
                        </scope>
                        <scope line="3406"/>
                        <scope line="3408"/>
                    </scope>
                </scope>
            </method>
            <method name="throwRoleProblemException" type="void" line="3438">
                <params>
                    <param name="pbType" type="int"/>
                    <param name="roleName" type="String"/>
                </params>
                <comment line="3446">
                    Exception type: 1 = RoleNotFoundException
                                     2 = InvalidRoleValueException                    
                </comment>
                <comment line="3482">
                    No default as we must have been in one of those cases                    
                </comment>
                <scope line="3440">
                    <declaration name="excMsg" type="String" line="3441"/>
                </scope>
                <declaration name="excType" type="int" line="3447"/>
                <declaration name="excMsgPart" type="String" line="3449"/>
                <declaration name="excMsgStrB" type="StringBuilder" line="3483"/>
                <declaration name="excMsg" type="String" line="3485"/>
                <scope line="3486"/>
                <scope line="3489"/>
            </method>
            <method name="sendNotificationInt" type="void" line="3519">
                <params>
                    <param name="intNtfType" type="int"/>
                    <param name="message" type="String"/>
                    <param name="relationId" type="String"/>
                    <param name="unregMBeanList" type="List<ObjectName>"/>
                    <param name="roleName" type="String"/>
                    <param name="roleNewValue" type="List<ObjectName>"/>
                    <param name="oldValue" type="List<ObjectName>"/>
                </params>
                <comment line="3537">
                    Relation type name
                     Note: do not use getRelationTypeName() as if it is a relation MBean
                           it is already unregistered.                    
                </comment>
                <comment line="3545">
                    ObjectName (for a relation MBean)
                     Can also throw a RelationNotFoundException, but detected above                    
                </comment>
                <comment line="3576">
                    Sequence number                    
                </comment>
                <comment line="3579">
                    Timestamp                    
                </comment>
                <comment line="3590">
                    Creation or removal                    
                </comment>
                <comment line="3605">
                    Update                    
                </comment>
                <scope line="3527">
                    <declaration name="excMsg" type="String" line="3528"/>
                </scope>
                <declaration name="relTypeName" type="String" line="3539"/>
                <scope line="3540"/>
                <declaration name="relObjName" type="ObjectName" line="3546"/>
                <declaration name="ntfType" type="String" line="3548"/>
                <scope line="3549"/>
                <scope line="3561"/>
                <declaration name="seqNo" type="Long" line="3576"/>
                <declaration name="currDate" type="Date" line="3579"/>
                <declaration name="timeStamp" type="long" line="3580"/>
                <declaration name="ntf" type="RelationNotification" line="3582"/>
                <scope line="3603"/>
            </method>
            <method name="handleReferenceUnregistration" type="void" line="3649">
                <params>
                    <param name="relationId" type="String"/>
                    <param name="objectName" type="ObjectName"/>
                    <param name="roleNameList" type="List<String>"/>
                </params>
                <comment line="3663">
                    Can throw RelationServiceNotRegisteredException                    
                </comment>
                <comment line="3666">
                    Retrieves the relation type name of the relation
                     Can throw RelationNotFoundException                    
                </comment>
                <comment line="3670">
                    Retrieves the relation
                     Can throw RelationNotFoundException, but already detected above                    
                </comment>
                <comment line="3674">
                    Flag to specify if the relation has to be deleted                    
                </comment>
                <comment line="3683">
                    Retrieves number of MBeans currently referenced in role
                     BEWARE! Do not use getRole() as role may be not readable
                    
                     Can throw RelationNotFoundException (but already checked),
                     RoleNotFoundException                    
                </comment>
                <comment line="3691">
                    Retrieves new number of element in role                    
                </comment>
                <comment line="3694">
                    Retrieves role info for that role
                    
                     Shall not throw RelationTypeNotFoundException or
                     RoleInfoNotFoundException                    
                </comment>
                <comment line="3708">
                    Checks with expected minimum number of elements                    
                </comment>
                <comment line="3712">
                    The relation has to be deleted                    
                </comment>
                <comment line="3718">
                    Removes the relation                    
                </comment>
                <comment line="3723">
                    Updates each role in the relation using
                     handleMBeanUnregistration() callback
                    
                     BEWARE: this roleNameList list MUST BE A COPY of a role name
                             list for a referenced MBean in a relation, NOT a
                             reference to an original one part of the
                             myRefedMBeanObjName2RelIdsMap!!!! Because each role
                             which name is in that list will be updated (potentially
                             using setRole(). So the Relation Service will update the
                             myRefedMBeanObjName2RelIdsMap to refelect the new role
                             value!                    
                </comment>
                <comment line="3737">
                    Internal relation
                     Can throw RoleNotFoundException (but already checked)
                    
                     Shall not throw
                     RelationTypeNotFoundException,
                     InvalidRoleValueException (value was correct, removing
                     one reference shall not invalidate it, else detected
                     above)                    
                </comment>
                <comment line="3758">
                    Relation MBean                    
                </comment>
                <comment line="3765">
                    Shall not throw InstanceNotFoundException, or
                     MBeanException (wrapping RoleNotFoundException or
                     MBeanException or InvalidRoleValueException) or
                     ReflectionException                    
                </comment>
                <scope line="3653">
                    <declaration name="excMsg" type="String" line="3654"/>
                </scope>
                <declaration name="currRelTypeName" type="String" line="3667"/>
                <declaration name="relObj" type="Object" line="3671"/>
                <declaration name="deleteRelFlag" type="boolean" line="3674"/>
                <scope line="3676">
                    <scope line="3678"/>
                    <declaration name="currRoleRefNbr" type="int" line="3687"/>
                    <declaration name="currRoleNewRefNbr" type="int" line="3691"/>
                    <declaration name="currRoleInfo" type="RoleInfo" line="3697"/>
                    <scope line="3698"/>
                    <scope line="3701"/>
                    <scope line="3703"/>
                    <declaration name="chkMinFlag" type="boolean" line="3708"/>
                    <scope line="3710"/>
                </scope>
                <scope line="3716"/>
                <scope line="3720">
                    <scope line="3733">
                        <scope line="3735">
                            <scope line="3744"/>
                            <scope line="3750"/>
                            <scope line="3752"/>
                        </scope>
                        <scope line="3756">
                            <declaration name="params" type="Object[]" line="3758"/>
                            <declaration name="signature" type="String[]" line="3761"/>
                            <scope line="3768"/>
                            <scope line="3773"/>
                            <scope line="3775"/>
                            <scope line="3777">
                                <declaration name="wrappedExc" type="Exception" line="3778"/>
                            </scope>
                        </scope>
                    </scope>
                </scope>
            </method>
        </class>
    </source>