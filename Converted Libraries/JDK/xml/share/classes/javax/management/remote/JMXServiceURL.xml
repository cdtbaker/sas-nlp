<?xml version="1.0" encoding="UTF-8"?>
    <source package="javax.management.remote">
        <import package="com.sun.jmx.remote.util.ClassLogger"/>
        <import package="com.sun.jmx.remote.util.EnvHelp"/>
        <import package="java.io.Serializable"/>
        <import package="java.net.InetAddress"/>
        <import package="java.net.MalformedURLException"/>
        <import package="java.net.UnknownHostException"/>
        <import package="java.util.BitSet"/>
        <import package="java.util.StringTokenizer"/>
        <class name="JMXServiceURL" line="40">
            <comment line="600">
                True if this string, assumed to be a valid argument to
                 InetAddress.getByName, is a numeric IPv6 address.                
            </comment>
            <comment line="608">
                like String.indexOf but returns string length not -1 if not present                
            </comment>
            <implements interface="Serializable"/>
            <javadoc line="40">
                &lt;p&gt;The address of a JMX API connector server.  Instances of this class
                  are immutable.&lt;/p&gt;
                  &lt;p&gt;The address is an &lt;em&gt;Abstract Service URL&lt;/em&gt; for SLP, as
                  defined in RFC 2609 and amended by RFC 3111.  It must look like
                  this:&lt;/p&gt;
                  &lt;blockquote&gt;
                  &lt;code&gt;service:jmx:&lt;em&gt;protocol&lt;/em&gt;:&lt;em&gt;sap&lt;/em&gt;&lt;/code&gt;
                  &lt;/blockquote&gt;
                  &lt;p&gt;Here, &lt;code&gt;&lt;em&gt;protocol&lt;/em&gt;&lt;/code&gt; is the transport
                  protocol to be used to connect to the connector server.  It is
                  a string of one or more ASCII characters, each of which is a
                  letter, a digit, or one of the characters &lt;code&gt;+&lt;/code&gt; or
                  &lt;code&gt;-&lt;/code&gt;.  The first character must be a letter.
                  Uppercase letters are converted into lowercase ones.&lt;/p&gt;
                  &lt;p&gt;&lt;code&gt;&lt;em&gt;sap&lt;/em&gt;&lt;/code&gt; is the address at which the connector
                  server is found.  This address uses a subset of the syntax defined
                  by RFC 2609 for IP-based protocols.  It is a subset because the
                  &lt;code&gt;user@host&lt;/code&gt; syntax is not supported.&lt;/p&gt;
                  &lt;p&gt;The other syntaxes defined by RFC 2609 are not currently
                  supported by this class.&lt;/p&gt;
                  &lt;p&gt;The supported syntax is:&lt;/p&gt;
                  &lt;blockquote&gt;
                  &lt;code&gt;//&lt;em&gt;[host[&lt;/em&gt;:&lt;em&gt;port]][url-path]&lt;/em&gt;&lt;/code&gt;
                  &lt;/blockquote&gt;
                  &lt;p&gt;Square brackets &lt;code&gt;[]&lt;/code&gt; indicate optional parts of
                  the address.  Not all protocols will recognize all optional
                  parts.&lt;/p&gt;
                  &lt;p&gt;The &lt;code&gt;&lt;em&gt;host&lt;/em&gt;&lt;/code&gt; is a host name, an IPv4 numeric
                  host address, or an IPv6 numeric address enclosed in square
                  brackets.&lt;/p&gt;
                  &lt;p&gt;The &lt;code&gt;&lt;em&gt;port&lt;/em&gt;&lt;/code&gt; is a decimal port number.  0
                  means a default or anonymous port, depending on the protocol.&lt;/p&gt;
                  &lt;p&gt;The &lt;code&gt;&lt;em&gt;host&lt;/em&gt;&lt;/code&gt; and &lt;code&gt;&lt;em&gt;port&lt;/em&gt;&lt;/code&gt;
                  can be omitted.  The &lt;code&gt;&lt;em&gt;port&lt;/em&gt;&lt;/code&gt; cannot be supplied
                  without a &lt;code&gt;&lt;em&gt;host&lt;/em&gt;&lt;/code&gt;.&lt;/p&gt;
                  &lt;p&gt;The &lt;code&gt;&lt;em&gt;url-path&lt;/em&gt;&lt;/code&gt;, if any, begins with a slash
                  (&lt;code&gt;/&lt;/code&gt;) or a semicolon (&lt;code&gt;;&lt;/code&gt;) and continues to
                  the end of the address.  It can contain attributes using the
                  semicolon syntax specified in RFC 2609.  Those attributes are not
                  parsed by this class and incorrect attribute syntax is not
                  detected.&lt;/p&gt;
                  &lt;p&gt;Although it is legal according to RFC 2609 to have a
                  &lt;code&gt;&lt;em&gt;url-path&lt;/em&gt;&lt;/code&gt; that begins with a semicolon, not
                  all implementations of SLP allow it, so it is recommended to avoid
                  that syntax.&lt;/p&gt;
                  &lt;p&gt;Case is not significant in the initial
                  &lt;code&gt;service:jmx:&lt;em&gt;protocol&lt;/em&gt;&lt;/code&gt; string or in the host
                  part of the address.  Depending on the protocol, case can be
                  significant in the &lt;code&gt;&lt;em&gt;url-path&lt;/em&gt;&lt;/code&gt;.&lt;/p&gt;                
                <see>
                    &lt;a
                      href=&quot;http://www.ietf.org/rfc/rfc2609.txt&quot;&gt;RFC 2609,
                      &quot;Service Templates and &lt;code&gt;Service:&lt;/code&gt; Schemes&quot;&lt;/a&gt;                    
                </see>
                <see>
                    &lt;a
                      href=&quot;http://www.ietf.org/rfc/rfc3111.txt&quot;&gt;RFC 3111,
                      &quot;Service Location Protocol Modifications for IPv6&quot;&lt;/a&gt;                    
                </see>
                <since>
                    1.5                    
                </since>
            </javadoc>
            <declaration name="serialVersionUID" type="long" line="120"/>
            <javadoc line="122">
                &lt;p&gt;Constructs a &lt;code&gt;JMXServiceURL&lt;/code&gt; by parsing a Service URL
                  string.&lt;/p&gt;                
                <param>
                    serviceURL the URL string to be parsed.                    
                </param>
                <exception>
                    NullPointerException if &lt;code&gt;serviceURL&lt;/code&gt; is
                      null.                    
                </exception>
                <exception>
                    MalformedURLException if &lt;code&gt;serviceURL&lt;/code&gt;
                      does not conform to the syntax for an Abstract Service URL or
                      if it is not a valid name for a JMX Remote API service.  A
                      &lt;code&gt;JMXServiceURL&lt;/code&gt; must begin with the string
                      &lt;code&gt;&quot;service:jmx:&quot;&lt;/code&gt; (case-insensitive).  It must not
                      contain any characters that are not printable ASCII characters.                    
                </exception>
            </javadoc>
            <method name="JMXServiceURL" type="constructor" line="138">
                <params>
                    <param name="serviceURL" type="String"/>
                </params>
                <comment line="142">
                    Check that there are no non-ASCII characters in the URL,                    
                </comment>
                <comment line="153">
                    Parse the required prefix                    
                </comment>
                <comment line="156">
                    ignore case                    
                </comment>
                <comment line="157">
                    serviceURL offset                    
                </comment>
                <comment line="159">
                    requiredPrefix offset                    
                </comment>
                <comment line="165">
                    Parse the protocol name                    
                </comment>
                <comment line="176">
                    Parse the host name                    
                </comment>
                <comment line="195">
                    Parse the port number                    
                </comment>
                <comment line="217">
                    Parse the URL path                    
                </comment>
                <declaration name="serviceURLLength" type="int" line="139"/>
                <scope line="143">
                    <declaration name="c" type="char" line="144"/>
                    <scope line="145"/>
                </scope>
                <declaration name="requiredPrefix" type="String" line="153"/>
                <declaration name="requiredPrefixLength" type="int" line="154"/>
                <scope line="159"/>
                <declaration name="protoStart" type="int" line="165"/>
                <declaration name="protoEnd" type="int" line="166"/>
                <scope line="170"/>
                <declaration name="hostStart" type="int" line="176"/>
                <declaration name="hostEnd" type="int" line="177"/>
                <scope line="179">
                    <scope line="184"/>
                </scope>
                <scope line="188"/>
                <declaration name="portEnd" type="int" line="195"/>
                <scope line="196">
                    <scope line="197"/>
                    <declaration name="portStart" type="int" line="201"/>
                    <declaration name="portString" type="String" line="204"/>
                    <scope line="205"/>
                    <scope line="207"/>
                </scope>
                <scope line="211"/>
                <declaration name="urlPathStart" type="int" line="217"/>
            </method>
            <javadoc line="226">
                &lt;p&gt;Constructs a &lt;code&gt;JMXServiceURL&lt;/code&gt; with the given protocol,
                  host, and port.  This constructor is equivalent to{@link #JMXServiceURL(String,String,int,String)JMXServiceURL(protocol, host, port, null)}.&lt;/p&gt;                
                <param>
                    protocol the protocol part of the URL.  If null, defaults
                      to &lt;code&gt;jmxmp&lt;/code&gt;.                    
                </param>
                <param>
                    host the host part of the URL.  If null, defaults to the
                      local host name, as determined by
                      &lt;code&gt;InetAddress.getLocalHost().getHostName()&lt;/code&gt;.  If it
                      is a numeric IPv6 address, it can optionally be enclosed in
                      square brackets &lt;code&gt;[]&lt;/code&gt;.                    
                </param>
                <param>
                    port the port part of the URL.                    
                </param>
                <exception>
                    MalformedURLException if one of the parts is
                      syntactically incorrect, or if &lt;code&gt;host&lt;/code&gt; is null and it
                      is not possible to find the local host name, or if
                      &lt;code&gt;port&lt;/code&gt; is negative.                    
                </exception>
            </javadoc>
            <method name="JMXServiceURL" type="constructor" line="249">
                <params>
                    <param name="protocol" type="String"/>
                    <param name="host" type="String"/>
                    <param name="port" type="int"/>
                </params>
            </method>
            <javadoc line="253">
                &lt;p&gt;Constructs a &lt;code&gt;JMXServiceURL&lt;/code&gt; with the given parts.                
                <param>
                    protocol the protocol part of the URL.  If null, defaults
                      to &lt;code&gt;jmxmp&lt;/code&gt;.                    
                </param>
                <param>
                    host the host part of the URL.  If null, defaults to the
                      local host name, as determined by
                      &lt;code&gt;InetAddress.getLocalHost().getHostName()&lt;/code&gt;.  If it
                      is a numeric IPv6 address, it can optionally be enclosed in
                      square brackets &lt;code&gt;[]&lt;/code&gt;.                    
                </param>
                <param>
                    port the port part of the URL.                    
                </param>
                <param>
                    urlPath the URL path part of the URL.  If null, defaults to
                      the empty string.                    
                </param>
                <exception>
                    MalformedURLException if one of the parts is
                      syntactically incorrect, or if &lt;code&gt;host&lt;/code&gt; is null and it
                      is not possible to find the local host name, or if
                      &lt;code&gt;port&lt;/code&gt; is negative.                    
                </exception>
            </javadoc>
            <method name="JMXServiceURL" type="constructor" line="277">
                <params>
                    <param name="protocol" type="String"/>
                    <param name="host" type="String"/>
                    <param name="port" type="int"/>
                    <param name="urlPath" type="String"/>
                </params>
                <comment line="293">
                    We might have a hostname that violates DNS naming
                    rules, for example that contains an `_&apos;.  While we
                    could be strict and throw an exception, this is rather
                    user-hostile.  Instead we use its numerical IP address.
                    We can only reasonably do this for the host==null case.
                    If we&apos;re given an explicit host name that is illegal we                    
                </comment>
                <comment line="310">
                    Use the numeric address, which could be either IPv4                    
                </comment>
                <scope line="281">
                    <declaration name="local" type="InetAddress" line="282"/>
                    <scope line="283"/>
                    <scope line="285"/>
                    <scope line="299"/>
                    <scope line="301">
                        <scope line="302"/>
                    </scope>
                </scope>
                <scope line="314">
                    <scope line="315"/>
                    <scope line="320"/>
                </scope>
            </method>
            <method name="validate" type="void" line="339">
                <comment line="342">
                    Check protocol                    
                </comment>
                <comment line="351">
                    Check host                    
                </comment>
                <comment line="355">
                    Check port                    
                </comment>
                <comment line="360">
                    Check URL path                    
                </comment>
                <declaration name="protoEnd" type="int" line="343"/>
                <scope line="345"/>
                <scope line="361"/>
            </method>
            <method name="validateHost" type="void" line="367">
                <scope line="368">
                    <scope line="369"/>
                </scope>
            </method>
            <method name="validateHost" type="void" line="380">
                <params>
                    <param name="h" type="String"/>
                </params>
                <comment line="384">
                    We assume J2SE &gt;= 1.4 here.  Otherwise you can&apos;t
                    use the address anyway.  We can&apos;t call
                    InetAddress.getByName without checking for a
                    numeric IPv6 address, because we mustn&apos;t try to do
                    a DNS lookup in case the address is not actually                    
                </comment>
                <comment line="393">
                    We should really catch UnknownHostException
                    here, but a bug in JDK 1.4 causes it to throw
                    ArrayIndexOutOfBoundsException, e.g. if the                    
                </comment>
                <comment line="403">
                    Tiny state machine to check valid host name.  This
                    checks the hostname grammar from RFC 1034 (DNS),
                    page 11.  A hostname is a dot-separated list of one
                    or more labels, where each label consists of
                    letters, numbers, or hyphens.  A label cannot begin
                    or end with a hyphen.  Empty hostnames are not
                    allowed.  Note that numeric IPv4 addresses are a
                    special case of this grammar.
                    
                    The state is entirely captured by the last
                    character seen, with a virtual `.&apos; preceding the
                    name.  We represent any alphanumeric character by
                    `a&apos;.
                    
                    We need a special hack to check, as required by the
                    RFC 2609 (SLP) grammar, that the last component of
                    the hostname begins with a letter.  Respecting the
                    intent of the RFC, we only do this if there is more
                    than one component.  If your local hostname begins                    
                </comment>
                <comment line="438">
                    will throw exception                    
                </comment>
                <comment line="443">
                    will throw exception                    
                </comment>
                <comment line="446">
                    will throw exception                    
                </comment>
                <comment line="455">
                    Must be a numeric IPv4 address.  In addition to
                    the explicitly-thrown exceptions, we can get
                    NoSuchElementException from the calls to
                    tok.nextToken and NumberFormatException from
                    the call to Integer.parseInt.  Using exceptions
                    for control flow this way is a bit evil but it                    
                </comment>
                <scope line="382">
                    <scope line="389"/>
                    <scope line="391">
                        <declaration name="bad" type="MalformedURLException" line="396"/>
                    </scope>
                </scope>
                <scope line="401">
                    <declaration name="hostLen" type="int" line="422"/>
                    <declaration name="lastc" type="char" line="423"/>
                    <declaration name="sawDot" type="boolean" line="424"/>
                    <declaration name="componentStart" type="char" line="425"/>
                    <scope line="428">
                        <declaration name="c" type="char" line="429"/>
                        <declaration name="isAlphaNumeric" type="boolean" line="430"/>
                        <scope line="435"/>
                        <scope line="439"/>
                        <scope line="444"/>
                    </scope>
                    <scope line="450">
                        <scope line="453">
                            <declaration name="tok" type="StringTokenizer" line="461"/>
                            <scope line="462">
                                <declaration name="ns" type="String" line="463"/>
                                <declaration name="n" type="int" line="464"/>
                            </scope>
                        </scope>
                    </scope>
                    <scope line="473"/>
                </scope>
            </method>
            <declaration name="randomException" type="Exception" line="479"/>
            <javadoc line="482">
                &lt;p&gt;The protocol part of the Service URL.                
                <return>
                    the protocol part of the Service URL.  This is never null.                    
                </return>
            </javadoc>
            <method name="getProtocol" type="String" line="487"/>
            <javadoc line="491">
                &lt;p&gt;The host part of the Service URL.  If the Service URL was
                  constructed with the constructor that takes a URL string
                  parameter, the result is the substring specifying the host in
                  that URL.  If the Service URL was constructed with a
                  constructor that takes a separate host parameter, the result is
                  the string that was specified.  If that string was null, the
                  result is
                  &lt;code&gt;InetAddress.getLocalHost().getHostName()&lt;/code&gt;.&lt;/p&gt;
                  &lt;p&gt;In either case, if the host was specified using the
                  &lt;code&gt;[...]&lt;/code&gt; syntax for numeric IPv6 addresses, the
                  square brackets are not included in the return value here.&lt;/p&gt;                
                <return>
                    the host part of the Service URL.  This is never null.                    
                </return>
            </javadoc>
            <method name="getHost" type="String" line="507"/>
            <javadoc line="511">
                &lt;p&gt;The port of the Service URL.  If no port was
                  specified, the returned value is 0.&lt;/p&gt;                
                <return>
                    the port of the Service URL, or 0 if none.                    
                </return>
            </javadoc>
            <method name="getPort" type="int" line="517"/>
            <javadoc line="521">
                &lt;p&gt;The URL Path part of the Service URL.  This is an empty
                  string, or a string beginning with a slash (&lt;code&gt;/&lt;/code&gt;), or
                  a string beginning with a semicolon (&lt;code&gt;;&lt;/code&gt;).                
                <return>
                    the URL Path part of the Service URL.  This is never
                      null.                    
                </return>
            </javadoc>
            <method name="getURLPath" type="String" line="529"/>
            <javadoc line="533">
                &lt;p&gt;The string representation of this Service URL.  If the value
                  returned by this method is supplied to the
                  &lt;code&gt;JMXServiceURL&lt;/code&gt; constructor, the resultant object is
                  equal to this one.&lt;/p&gt;
                  &lt;p&gt;The &lt;code&gt;&lt;em&gt;host&lt;/em&gt;&lt;/code&gt; part of the returned string
                  is the value returned by {@link #getHost()}.  If that value
                  specifies a numeric IPv6 address, it is surrounded by square
                  brackets &lt;code&gt;[]&lt;/code&gt;.&lt;/p&gt;
                  &lt;p&gt;The &lt;code&gt;&lt;em&gt;port&lt;/em&gt;&lt;/code&gt; part of the returned string
                  is the value returned by {@link #getPort()} in its shortest
                  decimal form.  If the value is zero, it is omitted.&lt;/p&gt;                
                <return>
                    the string representation of this Service URL.                    
                </return>
            </javadoc>
            <method name="toString" type="String" line="550">
                <comment line="552">
                    We don&apos;t bother synchronizing the access to toString.  At worst,                    
                </comment>
                <declaration name="buf" type="StringBuilder" line="555"/>
                <declaration name="getHost" type="String" line="557"/>
                <declaration name="getPort" type="int" line="562"/>
            </method>
            <javadoc line="570">
                &lt;p&gt;Indicates whether some other object is equal to this one.
                  This method returns true if and only if &lt;code&gt;obj&lt;/code&gt; is an
                  instance of &lt;code&gt;JMXServiceURL&lt;/code&gt; whose {@link #getProtocol()}, {@link #getHost()}, {@link #getPort()}, and{@link #getURLPath()} methods return the same values as for
                  this object.  The values for {@link #getProtocol()} and {@link #getHost()} can differ in case without affecting equality.                
                <param>
                    obj the reference object with which to compare.                    
                </param>
                <return>
                    &lt;code&gt;true&lt;/code&gt; if this object is the same as the
                      &lt;code&gt;obj&lt;/code&gt; argument; &lt;code&gt;false&lt;/code&gt; otherwise.                    
                </return>
            </javadoc>
            <method name="equals" type="boolean" line="584">
                <params>
                    <param name="obj" type="Object"/>
                </params>
                <declaration name="u" type="JMXServiceURL" line="587"/>
            </method>
            <method name="hashCode" type="int" line="595"/>
            <method name="isNumericIPv6Address" type="boolean" line="602">
                <params>
                    <param name="s" type="String"/>
                </params>
                <comment line="604">
                    address contains colon if and only if it&apos;s a numeric IPv6 address                    
                </comment>
            </method>
            <method name="indexOf" type="int" line="608">
                <params>
                    <param name="s" type="String"/>
                    <param name="c" type="char"/>
                    <param name="fromIndex" type="int"/>
                </params>
                <declaration name="index" type="int" line="609"/>
            </method>
            <method name="indexOfFirstNotInSet" type="int" line="617">
                <params>
                    <param name="s" type="String"/>
                    <param name="set" type="BitSet"/>
                    <param name="fromIndex" type="int"/>
                </params>
                <comment line="626">
                    not ASCII                    
                </comment>
                <declaration name="slen" type="int" line="618"/>
                <declaration name="i" type="int" line="619"/>
                <scope line="620">
                    <declaration name="c" type="char" line="623"/>
                </scope>
            </method>
            <declaration name="alphaBitSet" type="BitSet" line="633"/>
            <declaration name="numericBitSet" type="BitSet" line="634"/>
            <declaration name="alphaNumericBitSet" type="BitSet" line="635"/>
            <declaration name="protocolBitSet" type="BitSet" line="636"/>
            <declaration name="hostNameBitSet" type="BitSet" line="637"/>
            <scope line="638"/>
            <declaration name="protocol" type="String" line="663"/>
            <javadoc line="663">
                The value returned by {@link #getProtocol()}.                
            </javadoc>
            <declaration name="host" type="String" line="668"/>
            <javadoc line="668">
                The value returned by {@link #getHost()}.                
            </javadoc>
            <declaration name="port" type="int" line="673"/>
            <javadoc line="673">
                The value returned by {@link #getPort()}.                
            </javadoc>
            <declaration name="urlPath" type="String" line="678"/>
            <javadoc line="678">
                The value returned by {@link #getURLPath()}.                
            </javadoc>
            <declaration name="toString" type="String" line="683"/>
            <javadoc line="683">
                Cached result of {@link #toString()}.                
            </javadoc>
            <declaration name="logger" type="ClassLogger" line="688"/>
        </class>
    </source>