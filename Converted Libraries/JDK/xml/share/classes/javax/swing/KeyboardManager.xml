<?xml version="1.0" encoding="UTF-8"?>
    <source package="javax.swing">
        <import package="java.util"/>
        <import package="java.awt"/>
        <import package="java.awt.event"/>
        <import package="java.applet"/>
        <import package="java.beans"/>
        <import package="javax.swing.event"/>
        <import package="sun.awt.EmbeddedFrame"/>
        <class name="KeyboardManager" line="9">
            <javadoc line="9">
                The KeyboardManager class is used to help dispatch keyboard actions for the
                  WHEN_IN_FOCUSED_WINDOW style actions.  Actions with other conditions are handled
                  directly in JComponent.
                  Here&apos;s a description of the symantics of how keyboard dispatching should work
                  atleast as I understand it.
                  KeyEvents are dispatched to the focused component.  The focus manager gets first
                  crack at processing this event.  If the focus manager doesn&apos;t want it, then
                  the JComponent calls super.processKeyEvent() this allows listeners a chance
                  to process the event.
                  If none of the listeners &quot;consumes&quot; the event then the keybindings get a shot.
                  This is where things start to get interesting.  First, KeyStokes defined with the
                  WHEN_FOCUSED condition get a chance.  If none of these want the event, then the component
                  walks though it&apos;s parents looked for actions of type WHEN_ANCESTOR_OF_FOCUSED_COMPONENT.
                  If no one has taken it yet, then it winds up here.  We then look for components registered
                  for WHEN_IN_FOCUSED_WINDOW events and fire to them.  Note that if none of those are found
                  then we pass the event to the menubars and let them have a crack at it.  They&apos;re handled differently.
                  Lastly, we check if we&apos;re looking at an internal frame.  If we are and no one wanted the event
                  then we move up to the InternalFrame&apos;s creator and see if anyone wants the event (and so on and so on).                
                <see>
                    InputMap                    
                </see>
            </javadoc>
            <declaration name="currentManager" type="KeyboardManager" line="31"/>
            <declaration name="containerMap" type="Hashtable&lt;Container,Hashtable&gt;" line="32"/>
            <javadoc line="32">
                maps top-level containers to a sub-hashtable full of keystrokes                
            </javadoc>
            <declaration name="componentKeyStrokeMap" type="Hashtable&lt;ComponentKeyStrokePair,Container&gt;" line="36"/>
            <javadoc line="36">
                Maps component/keystroke pairs to a topLevel container
                  This is mainly used for fast unregister operations                
            </javadoc>
            <method name="getCurrentManager" type="KeyboardManager" line="41"/>
            <method name="setCurrentManager" type="void" line="44">
                <params>
                    <param name="km" type="KeyboardManager"/>
                </params>
            </method>
            <javadoc line="47">
                register keystrokes here which are for the WHEN_IN_FOCUSED_WINDOW
                  case.
                  Other types of keystrokes will be handled by walking the hierarchy
                  That simplifies some potentially hairy stuff.                
            </javadoc>
            <method name="registerKeyStroke" type="void" line="53">
                <params>
                    <param name="k" type="KeyStroke"/>
                    <param name="c" type="JComponent"/>
                </params>
                <declaration name="topContainer" type="Container" line="54"/>
                <scope line="55"/>
                <declaration name="keyMap" type="Hashtable" line="58"/>
                <scope line="59"/>
                <declaration name="tmp" type="Object" line="62"/>
                <scope line="63"/>
                <scope line="66">
                    <declaration name="v" type="Vector" line="67"/>
                    <scope line="68"/>
                </scope>
                <scope line="72">
                    <scope line="73">
                        <declaration name="v" type="Vector&lt;JComponent&gt;" line="74"/>
                    </scope>
                </scope>
                <scope line="80"/>
                <scope line="85"/>
            </method>
            <javadoc line="89">
                Find the top focusable Window, Applet, or InternalFrame                
            </javadoc>
            <method name="getTopAncestor" type="Container" line="92">
                <params>
                    <param name="c" type="JComponent"/>
                </params>
                <scope line="93">
                    <scope line="94"/>
                </scope>
            </method>
            <method name="unregisterKeyStroke" type="void" line="100">
                <params>
                    <param name="ks" type="KeyStroke"/>
                    <param name="c" type="JComponent"/>
                </params>
                <declaration name="ckp" type="ComponentKeyStrokePair" line="101"/>
                <declaration name="topContainer" type="Container" line="102"/>
                <scope line="103"/>
                <declaration name="keyMap" type="Hashtable" line="106"/>
                <scope line="107"/>
                <declaration name="tmp" type="Object" line="111"/>
                <scope line="112"/>
                <scope line="116"/>
                <scope line="119">
                    <declaration name="v" type="Vector" line="120"/>
                    <scope line="122"/>
                </scope>
                <scope line="126"/>
                <scope line="130"/>
            </method>
            <javadoc line="134">
                This method is called when the focused component (and none of
                  its ancestors) want the key event.  This will look up the keystroke
                  to see if any chidren (or subchildren) of the specified container
                  want a crack at the event.
                  If one of them wants it, then it will &quot;DO-THE-RIGHT-THING&quot;                
            </javadoc>
            <method name="fireKeyboardAction" type="boolean" line="141">
                <params>
                    <param name="e" type="KeyEvent"/>
                    <param name="pressed" type="boolean"/>
                    <param name="topAncestor" type="Container"/>
                </params>
                <scope line="142"/>
                <declaration name="ks" type="KeyStroke" line="146"/>
                <declaration name="ksE" type="KeyStroke" line="147"/>
                <scope line="148"/>
                <scope line="151">
                    <scope line="152"/>
                </scope>
                <declaration name="keyMap" type="Hashtable" line="157"/>
                <scope line="158">
                    <declaration name="tmp" type="Object" line="159"/>
                    <scope line="160">
                        <scope line="162"/>
                    </scope>
                    <scope line="166"/>
                    <scope line="169"/>
                    <scope line="171">
                        <declaration name="c" type="JComponent" line="172"/>
                        <scope line="173"/>
                    </scope>
                    <scope line="177">
                        <declaration name="v" type="Vector" line="178"/>
                        <scope line="179">
                            <declaration name="c" type="JComponent" line="180"/>
                            <scope line="181"/>
                        </scope>
                    </scope>
                    <scope line="187"/>
                </scope>
                <scope line="192"/>
                <scope line="195">
                    <declaration name="v" type="Vector" line="196"/>
                    <scope line="197">
                        <declaration name="iter" type="Enumeration" line="198"/>
                        <scope line="199">
                            <declaration name="mb" type="JMenuBar" line="200"/>
                            <scope line="201">
                                <scope line="202"/>
                                <scope line="205"/>
                                <scope line="208"/>
                            </scope>
                        </scope>
                    </scope>
                </scope>
            </method>
            <method name="fireBinding" type="void" line="217">
                <params>
                    <param name="c" type="JComponent"/>
                    <param name="ks" type="KeyStroke"/>
                    <param name="e" type="KeyEvent"/>
                    <param name="pressed" type="boolean"/>
                </params>
                <scope line="218"/>
            </method>
            <method name="registerMenuBar" type="void" line="222">
                <params>
                    <param name="mb" type="JMenuBar"/>
                </params>
                <declaration name="top" type="Container" line="223"/>
                <scope line="224"/>
                <declaration name="keyMap" type="Hashtable" line="227"/>
                <scope line="228"/>
                <declaration name="menuBars" type="Vector" line="231"/>
                <scope line="232"/>
                <scope line="236"/>
            </method>
            <method name="unregisterMenuBar" type="void" line="240">
                <params>
                    <param name="mb" type="JMenuBar"/>
                </params>
                <declaration name="topContainer" type="Container" line="241"/>
                <scope line="242"/>
                <declaration name="keyMap" type="Hashtable" line="245"/>
                <scope line="246">
                    <declaration name="v" type="Vector" line="247"/>
                    <scope line="248">
                        <scope line="250">
                            <scope line="252"/>
                        </scope>
                    </scope>
                </scope>
            </method>
            <method name="registerNewTopContainer" type="Hashtable" line="259">
                <params>
                    <param name="topContainer" type="Container"/>
                </params>
                <declaration name="keyMap" type="Hashtable" line="260"/>
            </method>
            <class name="ComponentKeyStrokePair" line="264">
                <javadoc line="264">
                    This class is used to create keys for a hashtable
                      which looks up topContainers based on component, keystroke pairs
                      This is used to make unregistering KeyStrokes fast                    
                </javadoc>
                <declaration name="component" type="Object" line="270"/>
                <declaration name="keyStroke" type="Object" line="271"/>
                <method name="ComponentKeyStrokePair" type="constructor" line="272">
                    <params>
                        <param name="comp" type="Object"/>
                        <param name="key" type="Object"/>
                    </params>
                </method>
                <method name="equals" type="boolean" line="276">
                    <params>
                        <param name="o" type="Object"/>
                    </params>
                    <scope line="277"/>
                    <declaration name="ckp" type="ComponentKeyStrokePair" line="280"/>
                </method>
                <method name="hashCode" type="int" line="283"/>
            </class>
        </class>
    </source>