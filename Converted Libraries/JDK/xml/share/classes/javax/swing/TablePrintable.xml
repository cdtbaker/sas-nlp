<?xml version="1.0" encoding="UTF-8"?>
    <source package="javax.swing">
        <import package="javax.swing.table"/>
        <import package="java.awt"/>
        <import package="java.awt.print"/>
        <import package="java.awt.geom"/>
        <import package="java.text.MessageFormat"/>
        <class name="TablePrintable" line="7">
            <implements interface="Printable"/>
            <javadoc line="7">
                An implementation of &lt;code&gt;Printable&lt;/code&gt; for printing
                  &lt;code&gt;JTable&lt;/code&gt;s.
                  &lt;p&gt;
                  This implementation spreads table rows naturally in sequence
                  across multiple pages, fitting as many rows as possible per page.
                  The distribution of columns, on the other hand, is controlled by a
                  printing mode parameter passed to the constructor. When
                  &lt;code&gt;JTable.PrintMode.NORMAL&lt;/code&gt; is used, the implementation
                  handles columns in a similar manner to how it handles rows, spreading them
                  across multiple pages (in an order consistent with the table&apos;s
                  &lt;code&gt;ComponentOrientation&lt;/code&gt;).
                  When &lt;code&gt;JTable.PrintMode.FIT_WIDTH&lt;/code&gt; is given, the implementation
                  scales the output smaller if necessary, to ensure that all columns fit on
                  the page. (Note that width and height are scaled equally, ensuring that the
                  aspect ratio remains the same).
                  &lt;p&gt;
                  The portion of table printed on each page is headed by the
                  appropriate section of the table&apos;s &lt;code&gt;JTableHeader&lt;/code&gt;.
                  &lt;p&gt;
                  Header and footer text can be added to the output by providing
                  &lt;code&gt;MessageFormat&lt;/code&gt; instances to the constructor. The
                  printing code requests Strings from the formats by calling
                  their &lt;code&gt;format&lt;/code&gt; method with a single parameter:
                  an &lt;code&gt;Object&lt;/code&gt; array containing a single element of type
                  &lt;code&gt;Integer&lt;/code&gt;, representing the current page number.
                  &lt;p&gt;
                  There are certain circumstances where this &lt;code&gt;Printable&lt;/code&gt;
                  cannot fit items appropriately, resulting in clipped output.
                  These are:
                  &lt;ul&gt;
                  &lt;li&gt;In any mode, when the header or footer text is too wide to
                  fit completely in the printable area. The implementation
                  prints as much of the text as possible starting from the beginning,
                  as determined by the table&apos;s &lt;code&gt;ComponentOrientation&lt;/code&gt;.
                  &lt;li&gt;In any mode, when a row is too tall to fit in the
                  printable area. The upper most portion of the row
                  is printed and no lower border is shown.
                  &lt;li&gt;In &lt;code&gt;JTable.PrintMode.NORMAL&lt;/code&gt; when a column
                  is too wide to fit in the printable area. The center of the
                  column is printed and no left and right borders are shown.
                  &lt;/ul&gt;
                  &lt;p&gt;
                  It is entirely valid for a developer to wrap this &lt;code&gt;Printable&lt;/code&gt;
                  inside another in order to create complex reports and documents. They may
                  even request that different pages be rendered into different sized
                  printable areas. The implementation was designed to handle this by
                  performing most of its calculations on the fly. However, providing different
                  sizes works best when &lt;code&gt;JTable.PrintMode.FIT_WIDTH&lt;/code&gt; is used, or
                  when only the printable width is changed between pages. This is because when
                  it is printing a set of rows in &lt;code&gt;JTable.PrintMode.NORMAL&lt;/code&gt; and the
                  implementation determines a need to distribute columns across pages,
                  it assumes that all of those rows will fit on each subsequent page needed
                  to fit the columns.
                  &lt;p&gt;
                  It is the responsibility of the developer to ensure that the table is not
                  modified in any way after this &lt;code&gt;Printable&lt;/code&gt; is created (invalid
                  modifications include changes in: size, renderers, or underlying data).
                  The behavior of this &lt;code&gt;Printable&lt;/code&gt; is undefined if the table is
                  changed at any time after creation.                
                <author>
                    Shannon Hickey                    
                </author>
            </javadoc>
            <declaration name="table" type="JTable" line="70"/>
            <javadoc line="70">
                The table to print.                
            </javadoc>
            <declaration name="header" type="JTableHeader" line="74"/>
            <javadoc line="74">
                For quick reference to the table&apos;s header.                
            </javadoc>
            <declaration name="colModel" type="TableColumnModel" line="78"/>
            <javadoc line="78">
                For quick reference to the table&apos;s column model.                
            </javadoc>
            <declaration name="totalColWidth" type="int" line="82"/>
            <javadoc line="82">
                To save multiple calculations of total column width.                
            </javadoc>
            <declaration name="printMode" type="JTable.PrintMode" line="86"/>
            <javadoc line="86">
                The printing mode of this printable.                
            </javadoc>
            <declaration name="headerFormat" type="MessageFormat" line="90"/>
            <javadoc line="90">
                Provides the header text for the table.                
            </javadoc>
            <declaration name="footerFormat" type="MessageFormat" line="94"/>
            <javadoc line="94">
                Provides the footer text for the table.                
            </javadoc>
            <declaration name="last" type="int" line="98"/>
            <javadoc line="98">
                The most recent page index asked to print.                
            </javadoc>
            <declaration name="row" type="int" line="102"/>
            <javadoc line="102">
                The next row to print.                
            </javadoc>
            <declaration name="col" type="int" line="106"/>
            <javadoc line="106">
                The next column to print.                
            </javadoc>
            <declaration name="clip" type="Rectangle" line="110"/>
            <javadoc line="110">
                Used to store an area of the table to be printed.                
            </javadoc>
            <declaration name="hclip" type="Rectangle" line="114"/>
            <javadoc line="114">
                Used to store an area of the table&apos;s header to be printed.                
            </javadoc>
            <declaration name="tempRect" type="Rectangle" line="118"/>
            <javadoc line="118">
                Saves the creation of multiple rectangles.                
            </javadoc>
            <declaration name="H_F_SPACE" type="int" line="122"/>
            <javadoc line="122">
                Vertical space to leave between table and header/footer text.                
            </javadoc>
            <declaration name="HEADER_FONT_SIZE" type="float" line="126"/>
            <javadoc line="126">
                Font size for the header text.                
            </javadoc>
            <declaration name="FOOTER_FONT_SIZE" type="float" line="130"/>
            <javadoc line="130">
                Font size for the footer text.                
            </javadoc>
            <declaration name="headerFont" type="Font" line="134"/>
            <javadoc line="134">
                The font to use in rendering header text.                
            </javadoc>
            <declaration name="footerFont" type="Font" line="138"/>
            <javadoc line="138">
                The font to use in rendering footer text.                
            </javadoc>
            <javadoc line="142">
                Create a new &lt;code&gt;TablePrintable&lt;/code&gt; for the given
                  &lt;code&gt;JTable&lt;/code&gt;. Header and footer text can be specified using the
                  two &lt;code&gt;MessageFormat&lt;/code&gt; parameters. When called upon to provide
                  a String, each format is given the current page number.                
                <param>
                    table         the table to print                    
                </param>
                <param>
                    printMode     the printing mode for this printable                    
                </param>
                <param>
                    headerFormat  a &lt;code&gt;MessageFormat&lt;/code&gt; specifying the text to
                      be used in printing a header, or null for none                    
                </param>
                <param>
                    footerFormat  a &lt;code&gt;MessageFormat&lt;/code&gt; specifying the text to
                      be used in printing a footer, or null for none                    
                </param>
                <throws>
                    IllegalArgumentException if passed an invalid print mode                    
                </throws>
            </javadoc>
            <method name="TablePrintable" type="constructor" line="155">
                <params>
                    <param name="table" type="JTable"/>
                    <param name="printMode" type="JTable.PrintMode"/>
                    <param name="headerFormat" type="MessageFormat"/>
                    <param name="footerFormat" type="MessageFormat"/>
                </params>
                <scope line="160"/>
            </method>
            <javadoc line="169">
                Prints the specified page of the table into the given {@link Graphics}context, in the specified format.                
                <param>
                    graphics    the context into which the page is drawn                    
                </param>
                <param>
                    pageFormat  the size and orientation of the page being drawn                    
                </param>
                <param>
                    pageIndex   the zero based index of the page to be drawn                    
                </param>
                <return>
                    PAGE_EXISTS if the page is rendered successfully, or
                      NO_SUCH_PAGE if a non-existent page index is specified                    
                </return>
                <throws>
                    PrinterException if an error causes printing to be aborted                    
                </throws>
            </javadoc>
            <method name="print" type="int" line="178">
                <params>
                    <param name="graphics" type="Graphics"/>
                    <param name="pageFormat" type="PageFormat"/>
                    <param name="pageIndex" type="int"/>
                </params>
            </method>
            <javadoc line="276">
                A helper method that encapsulates common code for rendering the
                  header and footer text.                
                <param>
                    g2d       the graphics to draw into                    
                </param>
                <param>
                    text      the text to draw, non null                    
                </param>
                <param>
                    rect      the bounding rectangle for this text,
                      as calculated at the given font, non null                    
                </param>
                <param>
                    font      the font to draw the text in, non null                    
                </param>
                <param>
                    imgWidth  the width of the area to draw into                    
                </param>
            </javadoc>
            <method name="printText" type="void" line="286">
                <params>
                    <param name="g2d" type="Graphics2D"/>
                    <param name="text" type="String"/>
                    <param name="rect" type="Rectangle2D"/>
                    <param name="font" type="Font"/>
                    <param name="imgWidth" type="int"/>
                </params>
                <declaration name="tx" type="int" line="287"/>
                <scope line="288"/>
                <scope line="291"/>
                <scope line="294"/>
                <declaration name="ty" type="int" line="297"/>
            </method>
            <javadoc line="302">
                Calculate the area of the table to be printed for
                  the next page. This should only be called if there
                  are rows and columns left to print.
                  To avoid an infinite loop in printing, this will
                  always put at least one cell on each page.                
                <param>
                    pw  the width of the area to print in                    
                </param>
                <param>
                    ph  the height of the area to print in                    
                </param>
            </javadoc>
            <method name="findNextClip" type="void" line="311">
                <params>
                    <param name="pw" type="int"/>
                    <param name="ph" type="int"/>
                </params>
                <declaration name="ltr" type="boolean" line="312"/>
                <scope line="313">
                    <scope line="314"/>
                    <scope line="317"/>
                    <declaration name="rowCount" type="int" line="323"/>
                    <declaration name="rowHeight" type="int" line="324"/>
                    <scope line="325">
                        <scope line="327"/>
                    </scope>
                </scope>
                <scope line="334"/>
                <scope line="339"/>
                <declaration name="colCount" type="int" line="343"/>
                <declaration name="colWidth" type="int" line="344"/>
                <scope line="345">
                    <scope line="347"/>
                    <scope line="350"/>
                </scope>
            </method>
        </class>
    </source>