<?xml version="1.0" encoding="UTF-8"?>
    <source package="javax.swing.text.html">
        <import package="java.util.Enumeration"/>
        <import package="java.awt"/>
        <import package="javax.swing.SizeRequirements"/>
        <import package="javax.swing.border"/>
        <import package="javax.swing.event.DocumentEvent"/>
        <import package="javax.swing.text"/>
        <class name="BlockView" line="34">
            <extends class="BoxView"/>
            <javadoc line="34">
                A view implementation to display a block (as a box)
                  with CSS specifications.                
                <author>
                    Timothy Prinzing                    
                </author>
            </javadoc>
            <javadoc line="42">
                Creates a new view that represents an
                  html box.  This can be used for a number
                  of elements.                
                <param>
                    elem the element to create a view for                    
                </param>
                <param>
                    axis either View.X_AXIS or View.Y_AXIS                    
                </param>
            </javadoc>
            <method name="BlockView" type="constructor" line="50">
                <params>
                    <param name="elem" type="Element"/>
                    <param name="axis" type="int"/>
                </params>
            </method>
            <javadoc line="54">
                Establishes the parent view for this view.  This is
                  guaranteed to be called before any other methods if the
                  parent view is functioning properly.
                  &lt;p&gt;
                  This is implemented
                  to forward to the superclass as well as call the{@link #setPropertiesFromAttributes()}method to set the paragraph properties from the css
                  attributes.  The call is made at this time to ensure
                  the ability to resolve upward through the parents
                  view attributes.                
                <param>
                    parent the new parent, or null if the view is
                      being removed from a parent it was previously added
                      to                    
                </param>
            </javadoc>
            <method name="setParent" type="void" line="71">
                <params>
                    <param name="parent" type="View"/>
                </params>
                <scope line="73"/>
            </method>
            <javadoc line="78">
                Calculate the requirements of the block along the major
                  axis (i.e. the axis along with it tiles).  This is implemented
                  to provide the superclass behavior and then adjust it if the
                  CSS width or height attribute is specified and applicable to
                  the axis.                
            </javadoc>
            <method name="calculateMajorAxisRequirements" type="SizeRequirements" line="85">
                <params>
                    <param name="axis" type="int"/>
                    <param name="r" type="SizeRequirements"/>
                </params>
                <comment line="94">
                    Offset by the margins so that pref/min/max return the
                     right value.                    
                </comment>
                <scope line="86"/>
                <scope line="89"/>
                <scope line="92">
                    <declaration name="parentR" type="SizeRequirements" line="95"/>
                    <declaration name="margin" type="int" line="97"/>
                </scope>
            </method>
            <javadoc line="107">
                Calculate the requirements of the block along the minor
                  axis (i.e. the axis orthoginal to the axis along with it tiles).
                  This is implemented
                  to provide the superclass behavior and then adjust it if the
                  CSS width or height attribute is specified and applicable to
                  the axis.                
            </javadoc>
            <method name="calculateMinorAxisRequirements" type="SizeRequirements" line="115">
                <params>
                    <param name="axis" type="int"/>
                    <param name="r" type="SizeRequirements"/>
                </params>
                <comment line="123">
                    The requirements were not directly specified by attributes, so
                     compute the aggregate of the requirements of the children.  The
                     children that have a percentage value specified will be treated
                     as completely stretchable since that child is not limited in any
                     way.                    
                </comment>
                <comment line="130">
                    int min = 0;
                    long pref = 0;
                    int max = 0;
                    int n = getViewCount();
                    for (int i = 0; i &lt; n; i++) {
                    View v = getView(i);
                    min = Math.max((int) v.getMinimumSpan(axis), min);
                    pref = Math.max((int) v.getPreferredSpan(axis), pref);
                    if (
                    max = Math.max((int) v.getMaximumSpan(axis), max);
                    
                    }
                    r.preferred = (int) pref;
                    r.minimum = min;
                    r.maximum = max;                    
                </comment>
                <comment line="150">
                    Offset by the margins so that pref/min/max return the
                     right value.                    
                </comment>
                <comment line="162">
                    Set the alignment based upon the CSS properties if it is
                     specified.  For X_AXIS this would be text-align, for
                     Y_AXIS this would be vertical-align.                    
                </comment>
                <comment line="180">
                    Y_AXIS TBD                    
                </comment>
                <scope line="116"/>
                <scope line="120"/>
                <scope line="148">
                    <declaration name="parentR" type="SizeRequirements" line="151"/>
                    <declaration name="margin" type="int" line="153"/>
                </scope>
                <scope line="166">
                    <declaration name="o" type="Object" line="167"/>
                    <scope line="168">
                        <declaration name="align" type="String" line="169"/>
                        <scope line="170"/>
                        <scope line="172"/>
                        <scope line="174"/>
                    </scope>
                </scope>
            </method>
            <method name="isPercentage" type="boolean" line="183">
                <params>
                    <param name="axis" type="int"/>
                    <param name="a" type="AttributeSet"/>
                </params>
                <scope line="184">
                    <scope line="185"/>
                </scope>
                <scope line="188">
                    <scope line="189"/>
                </scope>
            </method>
            <javadoc line="196">
                Adjust the given requirements to the CSS width or height if
                  it is specified along the applicable axis.  Return true if the
                  size is exactly specified, false if the span is not specified
                  in an attribute or the size specified is a percentage.                
            </javadoc>
            <method name="spanSetFromAttributes" type="boolean" line="204">
                <params>
                    <param name="axis" type="int"/>
                    <param name="r" type="SizeRequirements"/>
                    <param name="cssWidth" type="CSS.LengthValue"/>
                    <param name="cssHeight" type="CSS.LengthValue"/>
                </params>
                <scope line="205">
                    <scope line="206"/>
                </scope>
                <scope line="210">
                    <scope line="211"/>
                </scope>
            </method>
            <javadoc line="219">
                Performs layout for the minor axis of the box (i.e. the
                  axis orthoginal to the axis that it represents). The results
                  of the layout (the offset and span for each children) are
                  placed in the given arrays which represent the allocations to
                  the children along the minor axis.                
                <param>
                    targetSpan the total span given to the view, which
                      whould be used to layout the childre.                    
                </param>
                <param>
                    axis the axis being layed out                    
                </param>
                <param>
                    offsets the offsets from the origin of the view for
                      each of the child views; this is a return value and is
                      filled in by the implementation of this method                    
                </param>
                <param>
                    spans the span of each child view; this is a return
                      value and is filled in by the implementation of this method                    
                </param>
            </javadoc>
            <method name="layoutMinorAxis" type="void" line="235">
                <params>
                    <param name="targetSpan" type="int"/>
                    <param name="axis" type="int"/>
                    <param name="offsets" type="int[]"/>
                    <param name="spans" type="int[]"/>
                </params>
                <comment line="244">
                    check for percentage span                    
                </comment>
                <comment line="248">
                    bound the span to the percentage specified                    
                </comment>
                <comment line="255">
                    assign the offset and span for the child                    
                </comment>
                <comment line="257">
                    can&apos;t make the child this wide, align it                    
                </comment>
                <comment line="262">
                    make it the target width, or as small as it can get.                    
                </comment>
                <declaration name="n" type="int" line="236"/>
                <declaration name="key" type="Object" line="237"/>
                <scope line="238">
                    <declaration name="v" type="View" line="239"/>
                    <declaration name="min" type="int" line="240"/>
                    <declaration name="max" type="int" line="241"/>
                    <declaration name="a" type="AttributeSet" line="244"/>
                    <declaration name="lv" type="CSS.LengthValue" line="245"/>
                    <scope line="246"/>
                    <scope line="250"/>
                    <scope line="255">
                        <declaration name="align" type="float" line="257"/>
                    </scope>
                    <scope line="260"/>
                </scope>
            </method>
            <javadoc line="269">
                Renders using the given rendering surface and area on that
                  surface.  This is implemented to delegate to the css box
                  painter to paint the border and background prior to the
                  interior.                
                <param>
                    g the rendering surface to use                    
                </param>
                <param>
                    allocation the allocated region to render into                    
                </param>
                <see>
                    View#paint                    
                </see>
            </javadoc>
            <method name="paint" type="void" line="279">
                <params>
                    <param name="g" type="Graphics"/>
                    <param name="allocation" type="Shape"/>
                </params>
                <declaration name="a" type="Rectangle" line="280"/>
            </method>
            <javadoc line="285">
                Fetches the attributes to use when rendering.  This is
                  implemented to multiplex the attributes specified in the
                  model with a StyleSheet.                
            </javadoc>
            <method name="getAttributes" type="AttributeSet" line="290">
                <scope line="291">
                    <declaration name="sheet" type="StyleSheet" line="292"/>
                </scope>
            </method>
            <javadoc line="298">
                Gets the resize weight.                
                <param>
                    axis may be either X_AXIS or Y_AXIS                    
                </param>
                <return>
                    the weight                    
                </return>
                <exception>
                    IllegalArgumentException for an invalid axis                    
                </exception>
            </javadoc>
            <method name="getResizeWeight" type="int" line="305">
                <params>
                    <param name="axis" type="int"/>
                </params>
            </method>
            <javadoc line="316">
                Gets the alignment.                
                <param>
                    axis may be either X_AXIS or Y_AXIS                    
                </param>
                <return>
                    the alignment                    
                </return>
            </javadoc>
            <method name="getAlignment" type="float" line="322">
                <params>
                    <param name="axis" type="int"/>
                </params>
                <scope line="327"/>
                <declaration name="span" type="float" line="330"/>
                <declaration name="v" type="View" line="331"/>
                <declaration name="above" type="float" line="332"/>
                <declaration name="a" type="float" line="333"/>
            </method>
            <method name="changedUpdate" type="void" line="340">
                <params>
                    <param name="changes" type="DocumentEvent"/>
                    <param name="a" type="Shape"/>
                    <param name="f" type="ViewFactory"/>
                </params>
                <declaration name="pos" type="int" line="342"/>
                <scope line="344"/>
            </method>
            <javadoc line="349">
                Determines the preferred span for this view along an
                  axis.                
                <param>
                    axis may be either &lt;code&gt;View.X_AXIS&lt;/code&gt;
                      or &lt;code&gt;View.Y_AXIS&lt;/code&gt;                    
                </param>
                <return>
                    the span the view would like to be rendered into &gt;= 0;
                      typically the view is told to render into the span
                      that is returned, although there is no guarantee;
                      the parent may choose to resize or break the view                    
                </return>
                <exception>
                    IllegalArgumentException for an invalid axis type                    
                </exception>
            </javadoc>
            <method name="getPreferredSpan" type="float" line="361">
                <params>
                    <param name="axis" type="int"/>
                </params>
            </method>
            <javadoc line="365">
                Determines the minimum span for this view along an
                  axis.                
                <param>
                    axis may be either &lt;code&gt;View.X_AXIS&lt;/code&gt;
                      or &lt;code&gt;View.Y_AXIS&lt;/code&gt;                    
                </param>
                <return>
                    the span the view would like to be rendered into &gt;= 0;
                      typically the view is told to render into the span
                      that is returned, although there is no guarantee;
                      the parent may choose to resize or break the view                    
                </return>
                <exception>
                    IllegalArgumentException for an invalid axis type                    
                </exception>
            </javadoc>
            <method name="getMinimumSpan" type="float" line="377">
                <params>
                    <param name="axis" type="int"/>
                </params>
            </method>
            <javadoc line="381">
                Determines the maximum span for this view along an
                  axis.                
                <param>
                    axis may be either &lt;code&gt;View.X_AXIS&lt;/code&gt;
                      or &lt;code&gt;View.Y_AXIS&lt;/code&gt;                    
                </param>
                <return>
                    the span the view would like to be rendered into &gt;= 0;
                      typically the view is told to render into the span
                      that is returned, although there is no guarantee;
                      the parent may choose to resize or break the view                    
                </return>
                <exception>
                    IllegalArgumentException for an invalid axis type                    
                </exception>
            </javadoc>
            <method name="getMaximumSpan" type="float" line="393">
                <params>
                    <param name="axis" type="int"/>
                </params>
            </method>
            <javadoc line="397">
                Update any cached values that come from attributes.                
            </javadoc>
            <method name="setPropertiesFromAttributes" type="void" line="400">
                <comment line="403">
                    update attributes                    
                </comment>
                <comment line="407">
                    Reset the painter                    
                </comment>
                <comment line="416">
                    Get the width/height                    
                </comment>
                <declaration name="sheet" type="StyleSheet" line="403"/>
                <scope line="408"/>
            </method>
            <method name="getStyleSheet" type="StyleSheet" line="420">
                <declaration name="doc" type="HTMLDocument" line="421"/>
            </method>
            <javadoc line="425">
                Constrains &lt;code&gt;want&lt;/code&gt; to fit in the minimum size specified
                  by &lt;code&gt;min&lt;/code&gt;.                
            </javadoc>
            <method name="constrainSize" type="void" line="430">
                <params>
                    <param name="axis" type="int"/>
                    <param name="want" type="SizeRequirements"/>
                    <param name="min" type="SizeRequirements"/>
                </params>
                <scope line="431"/>
            </method>
            <declaration name="attr" type="AttributeSet" line="437"/>
            <declaration name="painter" type="StyleSheet.BoxPainter" line="438"/>
            <declaration name="cssWidth" type="CSS.LengthValue" line="440"/>
            <declaration name="cssHeight" type="CSS.LengthValue" line="441"/>
        </class>
    </source>