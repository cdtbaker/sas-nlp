<?xml version="1.0" encoding="UTF-8"?>
    <source package="javax.swing.text">
        <import package="java.awt"/>
        <import package="java.text.BreakIterator"/>
        <import package="javax.swing.event"/>
        <import package="java.util.BitSet"/>
        <import package="java.util.Locale"/>
        <import package="javax.swing.UIManager"/>
        <import package="sun.swing.SwingUtilities2"/>
        <import package="sun.swing.SwingUtilities2.IMPLIED_CR"/>
        <class name="GlyphView" line="37">
            <extends class="View"/>
            <comment line="279">
                --- TabableView methods --------------------------------------                
            </comment>
            <comment line="335">
                --- View methods ---------------------------------------------                
            </comment>
            <comment line="958">
                checks if the paragraph is empty and updates impliedCR flag
                 accordingly                
            </comment>
            <comment line="1078">
                --- variables ------------------------------------------------                
            </comment>
            <comment line="1087">
                if it is an implied newline character                
            </comment>
            <implements interface="TabableView"/>
            <implements interface="Cloneable"/>
            <javadoc line="37">
                A GlyphView is a styled chunk of text that represents a view
                  mapped over an element in the text model. This view is generally
                  responsible for displaying text glyphs using character level
                  attributes in some way.
                  An implementation of the GlyphPainter class is used to do the
                  actual rendering and model/view translations.  This separates
                  rendering from layout and management of the association with
                  the model.
                  &lt;p&gt;
                  The view supports breaking for the purpose of formatting.
                  The fragments produced by breaking share the view that has
                  primary responsibility for the element (i.e. they are nested
                  classes and carry only a small amount of state of their own)
                  so they can share its resources.
                  &lt;p&gt;
                  Since this view
                  represents text that may have tabs embedded in it, it implements the
                  &lt;code&gt;TabableView&lt;/code&gt; interface.  Tabs will only be
                  expanded if this view is embedded in a container that does
                  tab expansion.  ParagraphView is an example of a container
                  that does tab expansion.
                  &lt;p&gt;                
                <since>
                    1.3                    
                </since>
                <author>
                    Timothy Prinzing                    
                </author>
            </javadoc>
            <javadoc line="67">
                Constructs a new view wrapped on an element.                
                <param>
                    elem the element                    
                </param>
            </javadoc>
            <method name="GlyphView" type="constructor" line="72">
                <params>
                    <param name="elem" type="Element"/>
                </params>
                <comment line="80">
                    if there was an implied CR                    
                </comment>
                <comment line="82">
                    if this is non-empty paragraph                    
                </comment>
                <declaration name="parent" type="Element" line="76"/>
                <declaration name="attr" type="AttributeSet" line="77"/>
            </method>
            <javadoc line="86">
                Creates a shallow copy.  This is used by the
                  createFragment and breakView methods.                
                <return>
                    the copy                    
                </return>
            </javadoc>
            <method name="clone" type="Object" line="92">
                <declaration name="o" type="Object" line="93"/>
                <scope line="94"/>
                <scope line="96"/>
            </method>
            <javadoc line="102">
                Fetch the currently installed glyph painter.
                  If a painter has not yet been installed, and
                  a default was not yet needed, null is returned.                
            </javadoc>
            <method name="getGlyphPainter" type="GlyphPainter" line="107"/>
            <javadoc line="111">
                Sets the painter to use for rendering glyphs.                
            </javadoc>
            <method name="setGlyphPainter" type="void" line="114">
                <params>
                    <param name="p" type="GlyphPainter"/>
                </params>
            </method>
            <javadoc line="118">
                Fetch a reference to the text that occupies
                  the given range.  This is normally used by
                  the GlyphPainter to determine what characters
                  it should render glyphs for.                
                <param>
                    p0  the starting document offset >= 0                    
                </param>
                <param>
                    p1  the ending document offset >= p0                    
                </param>
                <return>
                    the <code>Segment</code> containing the text                    
                </return>
            </javadoc>
            <method name="getText" type="Segment" line="128">
                <params>
                    <param name="p0" type="int"/>
                    <param name="p1" type="int"/>
                </params>
                <comment line="130">
                    When done with the returned Segment it should be released by
                     invoking:
                        SegmentCache.releaseSharedSegment(segment);                    
                </comment>
                <declaration name="text" type="Segment" line="132"/>
                <scope line="133">
                    <declaration name="doc" type="Document" line="134"/>
                </scope>
                <scope line="136"/>
            </method>
            <javadoc line="142">
                Fetch the background color to use to render the
                  glyphs.  If there is no background color, null should
                  be returned.  This is implemented to call
                  &lt;code&gt;StyledDocument.getBackground&lt;/code&gt; if the associated
                  document is a styled document, otherwise it returns null.                
            </javadoc>
            <method name="getBackground" type="Color" line="149">
                <declaration name="doc" type="Document" line="150"/>
                <scope line="151">
                    <declaration name="attr" type="AttributeSet" line="152"/>
                    <scope line="153"/>
                </scope>
            </method>
            <javadoc line="160">
                Fetch the foreground color to use to render the
                  glyphs.  If there is no foreground color, null should
                  be returned.  This is implemented to call
                  &lt;code&gt;StyledDocument.getBackground&lt;/code&gt; if the associated
                  document is a StyledDocument.  If the associated document
                  is not a StyledDocument, the associated components foreground
                  color is used.  If there is no associated component, null
                  is returned.                
            </javadoc>
            <method name="getForeground" type="Color" line="170">
                <declaration name="doc" type="Document" line="171"/>
                <scope line="172">
                    <declaration name="attr" type="AttributeSet" line="173"/>
                </scope>
                <declaration name="c" type="Component" line="176"/>
                <scope line="177"/>
            </method>
            <javadoc line="183">
                Fetch the font that the glyphs should be based
                  upon.  This is implemented to call
                  &lt;code&gt;StyledDocument.getFont&lt;/code&gt; if the associated
                  document is a StyledDocument.  If the associated document
                  is not a StyledDocument, the associated components font
                  is used.  If there is no associated component, null
                  is returned.                
            </javadoc>
            <method name="getFont" type="Font" line="192">
                <declaration name="doc" type="Document" line="193"/>
                <scope line="194">
                    <declaration name="attr" type="AttributeSet" line="195"/>
                </scope>
                <declaration name="c" type="Component" line="198"/>
                <scope line="199"/>
            </method>
            <javadoc line="205">
                Determine if the glyphs should be underlined.  If true,
                  an underline should be drawn through the baseline.                
            </javadoc>
            <method name="isUnderline" type="boolean" line="209">
                <declaration name="attr" type="AttributeSet" line="210"/>
            </method>
            <javadoc line="214">
                Determine if the glyphs should have a strikethrough
                  line.  If true, a line should be drawn through the center
                  of the glyphs.                
            </javadoc>
            <method name="isStrikeThrough" type="boolean" line="219">
                <declaration name="attr" type="AttributeSet" line="220"/>
            </method>
            <javadoc line="224">
                Determine if the glyphs should be rendered as superscript.                
            </javadoc>
            <method name="isSubscript" type="boolean" line="227">
                <declaration name="attr" type="AttributeSet" line="228"/>
            </method>
            <javadoc line="232">
                Determine if the glyphs should be rendered as subscript.                
            </javadoc>
            <method name="isSuperscript" type="boolean" line="235">
                <declaration name="attr" type="AttributeSet" line="236"/>
            </method>
            <javadoc line="240">
                Fetch the TabExpander to use if tabs are present in this view.                
            </javadoc>
            <method name="getTabExpander" type="TabExpander" line="243"/>
            <javadoc line="247">
                Check to see that a glyph painter exists.  If a painter
                  doesn&apos;t exist, a default glyph painter will be installed.                
            </javadoc>
            <method name="checkPainter" type="void" line="251">
                <comment line="255">
                    the classname should probably come from a property file.                    
                </comment>
                <scope line="252">
                    <scope line="253">
                        <declaration name="classname" type="String" line="255"/>
                        <scope line="256">
                            <declaration name="c" type="Class" line="257"/>
                            <declaration name="loader" type="ClassLoader" line="258"/>
                            <scope line="259"/>
                            <scope line="261"/>
                            <declaration name="o" type="Object" line="264"/>
                            <scope line="265"/>
                        </scope>
                        <scope line="268"/>
                    </scope>
                </scope>
            </method>
            <javadoc line="280">
                Determines the desired span when using the given
                  tab expansion implementation.                
                <param>
                    x the position the view would be located
                      at for the purpose of tab expansion >= 0.                    
                </param>
                <param>
                    e how to expand the tabs when encountered.                    
                </param>
                <return>
                    the desired span >= 0                    
                </return>
                <see>
                    TabableView#getTabbedSpan                    
                </see>
            </javadoc>
            <method name="getTabbedSpan" type="float" line="290">
                <params>
                    <param name="x" type="float"/>
                    <param name="e" type="TabExpander"/>
                </params>
                <comment line="298">
                    setting expander can change horizontal span of the view,
                     so we have to call preferenceChanged()                    
                </comment>
                <declaration name="old" type="TabExpander" line="293"/>
                <scope line="296"/>
                <declaration name="p0" type="int" line="303"/>
                <declaration name="p1" type="int" line="304"/>
                <declaration name="width" type="float" line="305"/>
            </method>
            <javadoc line="309">
                Determines the span along the same axis as tab
                  expansion for a portion of the view.  This is
                  intended for use by the TabExpander for cases
                  where the tab expansion involves aligning the
                  portion of text that doesn&apos;t have whitespace
                  relative to the tab stop.  There is therefore
                  an assumption that the range given does not
                  contain tabs.
                  &lt;p&gt;
                  This method can be called while servicing the
                  getTabbedSpan or getPreferredSize.  It has to
                  arrange for its own text buffer to make the
                  measurements.                
                <param>
                    p0 the starting document offset >= 0                    
                </param>
                <param>
                    p1 the ending document offset >= p0                    
                </param>
                <return>
                    the span >= 0                    
                </return>
            </javadoc>
            <method name="getPartialSpan" type="float" line="328">
                <params>
                    <param name="p0" type="int"/>
                    <param name="p1" type="int"/>
                </params>
                <declaration name="width" type="float" line="330"/>
            </method>
            <javadoc line="336">
                Fetches the portion of the model that this view is responsible for.                
                <return>
                    the starting offset into the model                    
                </return>
                <see>
                    View#getStartOffset                    
                </see>
            </javadoc>
            <method name="getStartOffset" type="int" line="342">
                <declaration name="e" type="Element" line="343"/>
            </method>
            <javadoc line="347">
                Fetches the portion of the model that this view is responsible for.                
                <return>
                    the ending offset into the model                    
                </return>
                <see>
                    View#getEndOffset                    
                </see>
            </javadoc>
            <method name="getEndOffset" type="int" line="353">
                <declaration name="e" type="Element" line="354"/>
            </method>
            <javadoc line="358">
                Lazily initializes the selections field                
            </javadoc>
            <method name="initSelections" type="void" line="361">
                <params>
                    <param name="p0" type="int"/>
                    <param name="p1" type="int"/>
                </params>
                <declaration name="viewPosCount" type="int" line="362"/>
                <scope line="363"/>
            </method>
            <javadoc line="370">
                Renders a portion of a text style run.                
                <param>
                    g the rendering surface to use                    
                </param>
                <param>
                    a the allocated region to render into                    
                </param>
            </javadoc>
            <method name="paint" type="void" line="376">
                <params>
                    <param name="g" type="Graphics"/>
                    <param name="a" type="Shape"/>
                </params>
                <comment line="413">
                    there&apos;s a highlighter (bug 4532590), and                    
                </comment>
                <comment line="415">
                    selected text color is different from regular foreground                    
                </comment>
                <comment line="427">
                    the selection is out of this view                    
                </comment>
                <comment line="434">
                    the whole view is selected                    
                </comment>
                <comment line="439">
                    the array is lazily created only when the view
                     is partially selected                    
                </comment>
                <comment line="448">
                    the array represents view positions [0, p1-p0+1]
                     later will iterate this array and sum its
                     elements. Positions with sum == 0 are not selected.                    
                </comment>
                <comment line="458">
                    the view is partially selected                    
                </comment>
                <comment line="463">
                    searching for the next selection start                    
                </comment>
                <comment line="467">
                    paint unselected text                    
                </comment>
                <comment line="472">
                    searching for next start position of unselected text                    
                </comment>
                <declaration name="paintedText" type="boolean" line="379"/>
                <declaration name="c" type="Component" line="380"/>
                <declaration name="p0" type="int" line="381"/>
                <declaration name="p1" type="int" line="382"/>
                <declaration name="alloc" type="Rectangle" line="383"/>
                <declaration name="bg" type="Color" line="384"/>
                <declaration name="fg" type="Color" line="385"/>
                <scope line="387"/>
                <scope line="392"/>
                <scope line="396">
                    <declaration name="tc" type="JTextComponent" line="397"/>
                    <declaration name="h" type="Highlighter" line="398"/>
                    <scope line="399"/>
                </scope>
                <scope line="405"/>
                <scope line="408">
                    <declaration name="tc" type="JTextComponent" line="409"/>
                    <declaration name="selFG" type="Color" line="410"/>
                    <scope line="415">
                        <declaration name="h" type="Highlighter.Highlight[]" line="417"/>
                        <scope line="418">
                            <declaration name="initialized" type="boolean" line="419"/>
                            <declaration name="viewSelectionCount" type="int" line="420"/>
                            <scope line="421">
                                <declaration name="highlight" type="Highlighter.Highlight" line="422"/>
                                <declaration name="hStart" type="int" line="423"/>
                                <declaration name="hEnd" type="int" line="424"/>
                                <scope line="425"/>
                                <scope line="429"/>
                                <scope line="432"/>
                                <scope line="440"/>
                            </scope>
                            <scope line="456">
                                <declaration name="curPos" type="int" line="458"/>
                                <declaration name="startPos" type="int" line="459"/>
                                <declaration name="viewLen" type="int" line="460"/>
                                <scope line="461">
                                    <scope line="465"/>
                                    <declaration name="checkSum" type="int" line="470"/>
                                </scope>
                            </scope>
                        </scope>
                    </scope>
                </scope>
            </method>
            <javadoc line="485">
                Paints the specified region of text in the specified color.                
            </javadoc>
            <method name="paintTextUsingColor" type="void" line="488">
                <params>
                    <param name="g" type="Graphics"/>
                    <param name="a" type="Shape"/>
                    <param name="c" type="Color"/>
                    <param name="p0" type="int"/>
                    <param name="p1" type="int"/>
                </params>
                <comment line="490">
                    render the glyphs                    
                </comment>
                <comment line="494">
                    render underline or strikethrough if set.                    
                </comment>
                <comment line="498">
                    calculate x coordinates                    
                </comment>
                <comment line="502">
                    strip whitespace on end                    
                </comment>
                <comment line="517">
                    calculate y coordinate                    
                </comment>
                <comment line="524">
                    move y coordinate above baseline                    
                </comment>
                <declaration name="underline" type="boolean" line="494"/>
                <declaration name="strike" type="boolean" line="495"/>
                <scope line="496">
                    <declaration name="alloc" type="Rectangle" line="498"/>
                    <declaration name="parent" type="View" line="499"/>
                    <scope line="500">
                        <declaration name="s" type="Segment" line="502"/>
                        <scope line="503"/>
                    </scope>
                    <declaration name="x0" type="int" line="509"/>
                    <declaration name="p" type="int" line="510"/>
                    <scope line="511"/>
                    <declaration name="x1" type="int" line="514"/>
                    <declaration name="y" type="int" line="517"/>
                    <scope line="518">
                        <declaration name="yTmp" type="int" line="519"/>
                    </scope>
                    <scope line="522">
                        <declaration name="yTmp" type="int" line="524"/>
                    </scope>
                </scope>
            </method>
            <javadoc line="531">
                Determines the minimum span for this view along an axis.
                  &lt;p&gt;This implementation returns the longest non-breakable area within
                  the view as a minimum span for {@code View.X_AXIS}.&lt;/p&gt;                
                <param>
                    axis  may be either {@code View.X_AXIS} or {@code View.Y_AXIS}                    
                </param>
                <return>
                    the minimum span the view can be rendered into                    
                </return>
                <throws>
                    IllegalArgumentException if the {@code axis} parameter is invalid                    
                </throws>
                <see>
                    javax.swing.text.View#getMinimumSpan                    
                </see>
            </javadoc>
            <method name="getMinimumSpan" type="float" line="543">
                <params>
                    <param name="axis" type="int"/>
                </params>
                <comment line="554">
                    the rest of the view is non-breakable                    
                </comment>
                <comment line="559">
                    Note: getBreakSpot returns the *last* breakspot                    
                </comment>
                <scope line="546">
                    <declaration name="p0" type="int" line="548"/>
                    <declaration name="p1" type="int" line="549"/>
                    <scope line="550">
                        <declaration name="breakSpot" type="int" line="551"/>
                        <scope line="552"/>
                    </scope>
                </scope>
            </method>
            <javadoc line="570">
                Determines the preferred span for this view along an
                  axis.                
                <param>
                    axis may be either View.X_AXIS or View.Y_AXIS                    
                </param>
                <return>
                    the span the view would like to be rendered into >= 0.
                      Typically the view is told to render into the span
                      that is returned, although there is no guarantee.
                      The parent may choose to resize or break the view.                    
                </return>
            </javadoc>
            <method name="getPreferredSpan" type="float" line="580">
                <params>
                    <param name="axis" type="int"/>
                </params>
                <scope line="581"/>
                <declaration name="p0" type="int" line="585"/>
                <declaration name="p1" type="int" line="586"/>
                <scope line="589"/>
                <declaration name="h" type="float" line="594"/>
                <scope line="595"/>
            </method>
            <javadoc line="604">
                Determines the desired alignment for this view along an
                  axis.  For the label, the alignment is along the font
                  baseline for the y axis, and the superclasses alignment
                  along the x axis.                
                <param>
                    axis may be either View.X_AXIS or View.Y_AXIS                    
                </param>
                <return>
                    the desired alignment.  This should be a value
                      between 0.0 and 1.0 inclusive, where 0 indicates alignment at the
                      origin and 1.0 indicates alignment to the full span
                      away from the origin.  An alignment of 0.5 would be the
                      center of the view.                    
                </return>
            </javadoc>
            <method name="getAlignment" type="float" line="617">
                <params>
                    <param name="axis" type="int"/>
                </params>
                <scope line="619">
                    <declaration name="sup" type="boolean" line="620"/>
                    <declaration name="sub" type="boolean" line="621"/>
                    <declaration name="h" type="float" line="622"/>
                    <declaration name="d" type="float" line="623"/>
                    <declaration name="a" type="float" line="624"/>
                    <declaration name="align" type="float" line="625"/>
                    <scope line="626"/>
                    <scope line="628"/>
                    <scope line="630"/>
                </scope>
            </method>
            <javadoc line="638">
                Provides a mapping from the document model coordinate space
                  to the coordinate space of the view mapped to it.                
                <param>
                    pos the position to convert >= 0                    
                </param>
                <param>
                    a   the allocated region to render into                    
                </param>
                <param>
                    b   either <code>Position.Bias.Forward</code>
                      or <code>Position.Bias.Backward</code>                    
                </param>
                <return>
                    the bounding box of the given position                    
                </return>
                <exception>
                    BadLocationException  if the given position does not represent a
                      valid location in the associated document                    
                </exception>
                <see>
                    View#modelToView                    
                </see>
            </javadoc>
            <method name="modelToView" type="Shape" line="651">
                <params>
                    <param name="pos" type="int"/>
                    <param name="a" type="Shape"/>
                    <param name="b" type="Position.Bias"/>
                </params>
            </method>
            <javadoc line="656">
                Provides a mapping from the view coordinate space to the logical
                  coordinate space of the model.                
                <param>
                    x the X coordinate >= 0                    
                </param>
                <param>
                    y the Y coordinate >= 0                    
                </param>
                <param>
                    a the allocated region to render into                    
                </param>
                <param>
                    biasReturn either <code>Position.Bias.Forward</code>
                      or <code>Position.Bias.Backward</code> is returned as the
                      zero-th element of this array                    
                </param>
                <return>
                    the location within the model that best represents the
                      given point of view >= 0                    
                </return>
                <see>
                    View#viewToModel                    
                </see>
            </javadoc>
            <method name="viewToModel" type="int" line="670">
                <params>
                    <param name="x" type="float"/>
                    <param name="y" type="float"/>
                    <param name="a" type="Shape"/>
                    <param name="biasReturn" type="Position.Bias[]"/>
                </params>
            </method>
            <javadoc line="675">
                Determines how attractive a break opportunity in
                  this view is.  This can be used for determining which
                  view is the most attractive to call &lt;code&gt;breakView&lt;/code&gt;
                  on in the process of formatting.  The
                  higher the weight, the more attractive the break.  A
                  value equal to or lower than &lt;code&gt;View.BadBreakWeight&lt;/code&gt;
                  should not be considered for a break.  A value greater
                  than or equal to &lt;code&gt;View.ForcedBreakWeight&lt;/code&gt; should
                  be broken.
                  &lt;p&gt;
                  This is implemented to forward to the superclass for
                  the Y_AXIS.  Along the X_AXIS the following values
                  may be returned.
                  &lt;dl&gt;
                  &lt;dt&gt;&lt;b&gt;View.ExcellentBreakWeight&lt;/b&gt;
                  &lt;dd&gt;if there is whitespace proceeding the desired break
                  location.
                  &lt;dt&gt;&lt;b&gt;View.BadBreakWeight&lt;/b&gt;
                  &lt;dd&gt;if the desired break location results in a break
                  location of the starting offset.
                  &lt;dt&gt;&lt;b&gt;View.GoodBreakWeight&lt;/b&gt;
                  &lt;dd&gt;if the other conditions don&apos;t occur.
                  &lt;/dl&gt;
                  This will normally result in the behavior of breaking
                  on a whitespace location if one can be found, otherwise
                  breaking between characters.                
                <param>
                    axis may be either View.X_AXIS or View.Y_AXIS                    
                </param>
                <param>
                    pos the potential location of the start of the
                      broken view >= 0.  This may be useful for calculating tab
                      positions.                    
                </param>
                <param>
                    len specifies the relative length from <em>pos</em>
                      where a potential break is desired >= 0.                    
                </param>
                <return>
                    the weight, which should be a value between
                      View.ForcedBreakWeight and View.BadBreakWeight.                    
                </return>
                <see>
                    LabelView                    
                </see>
                <see>
                    ParagraphView                    
                </see>
                <see>
                    View#BadBreakWeight                    
                </see>
                <see>
                    View#GoodBreakWeight                    
                </see>
                <see>
                    View#ExcellentBreakWeight                    
                </see>
                <see>
                    View#ForcedBreakWeight                    
                </see>
            </javadoc>
            <method name="getBreakWeight" type="int" line="718">
                <params>
                    <param name="axis" type="int"/>
                    <param name="pos" type="float"/>
                    <param name="len" type="float"/>
                </params>
                <scope line="719">
                    <declaration name="p0" type="int" line="721"/>
                    <declaration name="p1" type="int" line="722"/>
                </scope>
            </method>
            <javadoc line="730">
                Breaks this view on the given axis at the given length.
                  This is implemented to attempt to break on a whitespace
                  location, and returns a fragment with the whitespace at
                  the end.  If a whitespace location can&apos;t be found, the
                  nearest character is used.                
                <param>
                    axis may be either View.X_AXIS or View.Y_AXIS                    
                </param>
                <param>
                    p0 the location in the model where the
                      fragment should start it's representation >= 0.                    
                </param>
                <param>
                    pos the position along the axis that the
                      broken view would occupy >= 0.  This may be useful for
                      things like tab calculations.                    
                </param>
                <param>
                    len specifies the distance along the axis
                      where a potential break is desired >= 0.                    
                </param>
                <return>
                    the fragment of the view that represents the
                      given span, if the view can be broken.  If the view
                      doesn't support breaking behavior, the view itself is
                      returned.                    
                </return>
                <see>
                    View#breakView                    
                </see>
            </javadoc>
            <method name="breakView" type="View" line="751">
                <params>
                    <param name="axis" type="int"/>
                    <param name="p0" type="int"/>
                    <param name="pos" type="float"/>
                    <param name="len" type="float"/>
                </params>
                <comment line="761">
                    else, no break in the region, return a fragment of the
                     bounded region.                    
                </comment>
                <scope line="752">
                    <declaration name="p1" type="int" line="754"/>
                    <declaration name="breakSpot" type="int" line="755"/>
                    <scope line="757"/>
                    <scope line="762"/>
                    <declaration name="v" type="GlyphView" line="765"/>
                </scope>
            </method>
            <javadoc line="772">
                Returns a location to break at in the passed in region, or
                  BreakIterator.DONE if there isn&apos;t a good location to break at
                  in the specified region.                
            </javadoc>
            <method name="getBreakSpot" type="int" line="777">
                <params>
                    <param name="p0" type="int"/>
                    <param name="p1" type="int"/>
                </params>
                <comment line="780">
                    Re-calculate breakpoints for the whole view                    
                </comment>
                <comment line="786">
                    Breaker should work on the parent element because there may be
                     a valid breakpoint at the end edge of the view (space, etc.)                    
                </comment>
                <comment line="797">
                    Backward search should start from end+1 unless there&apos;s NO end+1                    
                </comment>
                <comment line="803">
                    The break spot is within the view                    
                </comment>
                <scope line="778">
                    <declaration name="start" type="int" line="780"/>
                    <declaration name="end" type="int" line="781"/>
                    <declaration name="bs" type="int[]" line="782"/>
                    <declaration name="ix" type="int" line="783"/>
                    <declaration name="parent" type="Element" line="787"/>
                    <declaration name="pstart" type="int" line="788"/>
                    <declaration name="pend" type="int" line="789"/>
                    <declaration name="s" type="Segment" line="791"/>
                    <declaration name="breaker" type="BreakIterator" line="793"/>
                    <declaration name="startFrom" type="int" line="797"/>
                    <scope line="798">
                        <scope line="801"/>
                        <scope line="804"/>
                    </scope>
                </scope>
                <declaration name="breakSpot" type="int" line="814"/>
                <scope line="815">
                    <declaration name="bsp" type="int" line="816"/>
                    <scope line="817">
                        <scope line="818"/>
                    </scope>
                </scope>
            </method>
            <javadoc line="827">
                Return break iterator appropriate for the current document.
                  For non-i18n documents a fast whitespace-based break iterator is used.                
            </javadoc>
            <method name="getBreaker" type="BreakIterator" line="832">
                <declaration name="doc" type="Document" line="833"/>
                <scope line="835">
                    <declaration name="c" type="Container" line="836"/>
                    <declaration name="locale" type="Locale" line="837"/>
                </scope>
                <scope line="839"/>
            </method>
            <javadoc line="844">
                Creates a view that represents a portion of the element.
                  This is potentially useful during formatting operations
                  for taking measurements of fragments of the view.  If
                  the view doesn&apos;t support fragmenting (the default), it
                  should return itself.
                  &lt;p&gt;
                  This view does support fragmenting.  It is implemented
                  to return a nested class that shares state in this view
                  representing only a portion of the view.                
                <param>
                    p0 the starting offset >= 0.  This should be a value
                      greater or equal to the element starting offset and
                      less than the element ending offset.                    
                </param>
                <param>
                    p1 the ending offset > p0.  This should be a value
                      less than or equal to the elements end offset and
                      greater than the elements starting offset.                    
                </param>
                <return>
                    the view fragment, or itself if the view doesn't
                      support breaking into fragments                    
                </return>
                <see>
                    LabelView                    
                </see>
            </javadoc>
            <method name="createFragment" type="View" line="865">
                <params>
                    <param name="p0" type="int"/>
                    <param name="p1" type="int"/>
                </params>
                <declaration name="elem" type="Element" line="867"/>
                <declaration name="v" type="GlyphView" line="868"/>
            </method>
            <javadoc line="876">
                Provides a way to determine the next visually represented model
                  location that one might place a caret.  Some views may not be
                  visible, they might not be in the same order found in the model, or
                  they just might not allow access to some of the locations in the
                  model.                
                <param>
                    pos the position to convert >= 0                    
                </param>
                <param>
                    a the allocated region to render into                    
                </param>
                <param>
                    direction the direction from the current position that can
                      be thought of as the arrow keys typically found on a keyboard.
                      This may be SwingConstants.WEST, SwingConstants.EAST,
                      SwingConstants.NORTH, or SwingConstants.SOUTH.                    
                </param>
                <return>
                    the location within the model that best represents the next
                      location visual position.                    
                </return>
                <exception>
                    BadLocationException                    
                </exception>
                <exception>
                    IllegalArgumentException for an invalid direction                    
                </exception>
            </javadoc>
            <method name="getNextVisualPositionFrom" type="int" line="897">
                <params>
                    <param name="pos" type="int"/>
                    <param name="b" type="Position.Bias"/>
                    <param name="a" type="Shape"/>
                    <param name="direction" type="int"/>
                    <param name="biasRet" type="Position.Bias[]"/>
                </params>
            </method>
            <javadoc line="902">
                Gives notification that something was inserted into
                  the document in a location that this view is responsible for.
                  This is implemented to call preferenceChanged along the
                  axis the glyphs are rendered.                
                <param>
                    e the change information from the associated document                    
                </param>
                <param>
                    a the current allocation of the view                    
                </param>
                <param>
                    f the factory to use to rebuild if the view has children                    
                </param>
                <see>
                    View#insertUpdate                    
                </see>
            </javadoc>
            <method name="insertUpdate" type="void" line="913">
                <params>
                    <param name="e" type="DocumentEvent"/>
                    <param name="a" type="Shape"/>
                    <param name="f" type="ViewFactory"/>
                </params>
            </method>
            <javadoc line="921">
                Gives notification that something was removed from the document
                  in a location that this view is responsible for.
                  This is implemented to call preferenceChanged along the
                  axis the glyphs are rendered.                
                <param>
                    e the change information from the associated document                    
                </param>
                <param>
                    a the current allocation of the view                    
                </param>
                <param>
                    f the factory to use to rebuild if the view has children                    
                </param>
                <see>
                    View#removeUpdate                    
                </see>
            </javadoc>
            <method name="removeUpdate" type="void" line="932">
                <params>
                    <param name="e" type="DocumentEvent"/>
                    <param name="a" type="Shape"/>
                    <param name="f" type="ViewFactory"/>
                </params>
            </method>
            <javadoc line="940">
                Gives notification from the document that attributes were changed
                  in a location that this view is responsible for.
                  This is implemented to call preferenceChanged along both the
                  horizontal and vertical axis.                
                <param>
                    e the change information from the associated document                    
                </param>
                <param>
                    a the current allocation of the view                    
                </param>
                <param>
                    f the factory to use to rebuild if the view has children                    
                </param>
                <see>
                    View#changedUpdate                    
                </see>
            </javadoc>
            <method name="changedUpdate" type="void" line="951">
                <params>
                    <param name="e" type="DocumentEvent"/>
                    <param name="a" type="Shape"/>
                    <param name="f" type="ViewFactory"/>
                </params>
            </method>
            <method name="syncCR" type="void" line="959">
                <scope line="960">
                    <declaration name="parent" type="Element" line="961"/>
                </scope>
            </method>
            <class name="JustificationInfo" line="966">
                <comment line="971">
                    justifiable content start                    
                </comment>
                <comment line="973">
                    justifiable content end                    
                </comment>
                <javadoc line="966">
                    Class to hold data needed to justify this GlyphView in a PargraphView.Row                    
                </javadoc>
                <declaration name="start" type="int" line="971"/>
                <declaration name="end" type="int" line="973"/>
                <declaration name="leadingSpaces" type="int" line="974"/>
                <declaration name="contentSpaces" type="int" line="975"/>
                <declaration name="trailingSpaces" type="int" line="976"/>
                <declaration name="hasTab" type="boolean" line="977"/>
                <declaration name="spaceMap" type="BitSet" line="978"/>
                <method name="JustificationInfo" type="constructor" line="984">
                    <params>
                        <param name="start" type="int"/>
                        <param name="end" type="int"/>
                        <param name="leadingSpaces" type="int"/>
                        <param name="contentSpaces" type="int"/>
                        <param name="trailingSpaces" type="int"/>
                        <param name="hasTab" type="boolean"/>
                        <param name="spaceMap" type="BitSet"/>
                    </params>
                </method>
            </class>
            <method name="getJustificationInfo" type="JustificationInfo" line="997">
                <params>
                    <param name="rowStartOffset" type="int"/>
                </params>
                <comment line="1002">
                    states for the parsing                    
                </comment>
                <comment line="1020">
                    we parse conent to the right of the rightmost TAB only.
                    we are looking for the trailing and leading spaces.
                    position after the leading spaces (startContentPosition)
                    position before the trailing spaces (endContentPosition)                    
                </comment>
                <comment line="1046">
                    do nothing                    
                </comment>
                <scope line="998"/>
                <declaration name="TRAILING" type="int" line="1002"/>
                <declaration name="CONTENT" type="int" line="1003"/>
                <declaration name="SPACES" type="int" line="1004"/>
                <declaration name="startOffset" type="int" line="1005"/>
                <declaration name="endOffset" type="int" line="1006"/>
                <declaration name="segment" type="Segment" line="1007"/>
                <declaration name="txtOffset" type="int" line="1008"/>
                <declaration name="txtEnd" type="int" line="1009"/>
                <declaration name="startContentPosition" type="int" line="1010"/>
                <declaration name="endContentPosition" type="int" line="1011"/>
                <declaration name="lastTabPosition" type="int" line="1012"/>
                <declaration name="trailingSpaces" type="int" line="1013"/>
                <declaration name="contentSpaces" type="int" line="1014"/>
                <declaration name="leadingSpaces" type="int" line="1015"/>
                <declaration name="hasTab" type="boolean" line="1016"/>
                <declaration name="spaceMap" type="BitSet" line="1017"/>
                <scope line="1023">
                    <scope line="1024">
                        <scope line="1026"/>
                        <scope line="1028"/>
                        <scope line="1031"/>
                    </scope>
                    <scope line="1034"/>
                    <scope line="1037">
                        <scope line="1038">
                            <scope line="1040"/>
                        </scope>
                        <scope line="1044"/>
                        <scope line="1046"/>
                    </scope>
                </scope>
                <declaration name="startJustifiableContent" type="int" line="1056"/>
                <scope line="1057"/>
                <declaration name="endJustifiableContent" type="int" line="1061"/>
                <scope line="1062"/>
            </method>
            <declaration name="selections" type="byte[]" line="1079"/>
            <javadoc line="1079">
                Used by paint() to store highlighted view positions                
            </javadoc>
            <declaration name="offset" type="int" line="1084"/>
            <declaration name="length" type="int" line="1085"/>
            <declaration name="impliedCR" type="boolean" line="1087"/>
            <declaration name="skipWidth" type="boolean" line="1088"/>
            <declaration name="expander" type="TabExpander" line="1090"/>
            <javadoc line="1090">
                how to expand tabs                
            </javadoc>
            <declaration name="minimumSpan" type="float" line="1095"/>
            <javadoc line="1095">
                Cached minimum x-span value                
            </javadoc>
            <declaration name="breakSpots" type="int[]" line="1098"/>
            <javadoc line="1098">
                Cached breakpoints within the view                
            </javadoc>
            <declaration name="x" type="int" line="1101"/>
            <javadoc line="1101">
                location for determining tab expansion against.                
            </javadoc>
            <declaration name="painter" type="GlyphPainter" line="1106"/>
            <javadoc line="1106">
                Glyph rendering functionality.                
            </javadoc>
            <declaration name="defaultPainter" type="GlyphPainter" line="1111"/>
            <javadoc line="1111">
                The prototype painter used by default.                
            </javadoc>
            <declaration name="justificationInfo" type="JustificationInfo" line="1116"/>
            <class name="GlyphPainter" line="1118">
                <comment line="971">
                    justifiable content start                    
                </comment>
                <comment line="973">
                    justifiable content end                    
                </comment>
                <javadoc line="1118">
                    A class to perform rendering of the glyphs.
                      This can be implemented to be stateless, or
                      to hold some information as a cache to
                      facilitate faster rendering and model/view
                      translation.  At a minimum, the GlyphPainter
                      allows a View implementation to perform its
                      duties independant of a particular version
                      of JVM and selection of capabilities (i.e.
                      shaping for i18n, etc).                    
                    <since>
                        1.3                        
                    </since>
                </javadoc>
                <method name="getSpan" type="float" line="1133"/>
                <javadoc line="1133">
                    Determine the span the glyphs given a start location
                      (for tab expansion).                    
                </javadoc>
                <method name="getHeight" type="float" line="1139"/>
                <method name="getAscent" type="float" line="1141"/>
                <method name="getDescent" type="float" line="1143"/>
                <method name="paint" type="void" line="1145"/>
                <javadoc line="1145">
                    Paint the glyphs representing the given range.                    
                </javadoc>
                <method name="modelToView" type="Shape" line="1150"/>
                <javadoc line="1150">
                    Provides a mapping from the document model coordinate space
                      to the coordinate space of the view mapped to it.
                      This is shared by the broken views.                    
                    <param>
                        v     the <code>GlyphView</code> containing the
                          destination coordinate space                        
                    </param>
                    <param>
                        pos   the position to convert                        
                    </param>
                    <param>
                        bias  either <code>Position.Bias.Forward</code>
                          or <code>Position.Bias.Backward</code>                        
                    </param>
                    <param>
                        a     Bounds of the View                        
                    </param>
                    <return>
                        the bounding box of the given position                        
                    </return>
                    <exception>
                        BadLocationException  if the given position does not represent a
                          valid location in the associated document                        
                    </exception>
                    <see>
                        View#modelToView                        
                    </see>
                </javadoc>
                <method name="viewToModel" type="int" line="1170"/>
                <javadoc line="1170">
                    Provides a mapping from the view coordinate space to the logical
                      coordinate space of the model.                    
                    <param>
                        v          the <code>GlyphView</code> to provide a mapping for                        
                    </param>
                    <param>
                        x          the X coordinate                        
                    </param>
                    <param>
                        y          the Y coordinate                        
                    </param>
                    <param>
                        a          the allocated region to render into                        
                    </param>
                    <param>
                        biasReturn either <code>Position.Bias.Forward</code>
                          or <code>Position.Bias.Backward</code>
                          is returned as the zero-th element of this array                        
                    </param>
                    <return>
                        the location within the model that best represents the
                          given point of view                        
                    </return>
                    <see>
                        View#viewToModel                        
                    </see>
                </javadoc>
                <method name="getBoundedPosition" type="int" line="1189"/>
                <javadoc line="1189">
                    Determines the model location that represents the
                      maximum advance that fits within the given span.
                      This could be used to break the given view.  The result
                      should be a location just shy of the given advance.  This
                      differs from viewToModel which returns the closest
                      position which might be proud of the maximum advance.                    
                    <param>
                        v the view to find the model location to break at.                        
                    </param>
                    <param>
                        p0 the location in the model where the
                          fragment should start it's representation >= 0.                        
                    </param>
                    <param>
                        x  the graphic location along the axis that the
                          broken view would occupy >= 0.  This may be useful for
                          things like tab calculations.                        
                    </param>
                    <param>
                        len specifies the distance into the view
                          where a potential break is desired >= 0.                        
                    </param>
                    <return>
                        the maximum model location possible for a break.                        
                    </return>
                    <see>
                        View#breakView                        
                    </see>
                </javadoc>
                <javadoc line="1210">
                    Create a painter to use for the given GlyphView.  If
                      the painter carries state it can create another painter
                      to represent a new GlyphView that is being created.  If
                      the painter doesn&apos;t hold any significant state, it can
                      return itself.  The default behavior is to return itself.                    
                    <param>
                        v  the <code>GlyphView</code> to provide a painter for                        
                    </param>
                    <param>
                        p0 the starting document offset >= 0                        
                    </param>
                    <param>
                        p1 the ending document offset >= p0                        
                    </param>
                </javadoc>
                <method name="getPainter" type="GlyphPainter" line="1220">
                    <params>
                        <param name="v" type="GlyphView"/>
                        <param name="p0" type="int"/>
                        <param name="p1" type="int"/>
                    </params>
                </method>
                <javadoc line="1224">
                    Provides a way to determine the next visually represented model
                      location that one might place a caret.  Some views may not be
                      visible, they might not be in the same order found in the model, or
                      they just might not allow access to some of the locations in the
                      model.                    
                    <param>
                        v the view to use                        
                    </param>
                    <param>
                        pos the position to convert >= 0                        
                    </param>
                    <param>
                        b   either <code>Position.Bias.Forward</code>
                          or <code>Position.Bias.Backward</code>                        
                    </param>
                    <param>
                        a the allocated region to render into                        
                    </param>
                    <param>
                        direction the direction from the current position that can
                          be thought of as the arrow keys typically found on a keyboard.
                          This may be SwingConstants.WEST, SwingConstants.EAST,
                          SwingConstants.NORTH, or SwingConstants.SOUTH.                        
                    </param>
                    <param>
                        biasRet  either <code>Position.Bias.Forward</code>
                          or <code>Position.Bias.Backward</code>
                          is returned as the zero-th element of this array                        
                    </param>
                    <return>
                        the location within the model that best represents the next
                          location visual position.                        
                    </return>
                    <exception>
                        BadLocationException                        
                    </exception>
                    <exception>
                        IllegalArgumentException for an invalid direction                        
                    </exception>
                </javadoc>
                <method name="getNextVisualPositionFrom" type="int" line="1251">
                    <params>
                        <param name="v" type="GlyphView"/>
                        <param name="pos" type="int"/>
                        <param name="b" type="Position.Bias"/>
                        <param name="a" type="Shape"/>
                        <param name="direction" type="int"/>
                        <param name="biasRet" type="Position.Bias[]"/>
                    </params>
                    <comment line="1262">
                        Presumably pos is between startOffset and endOffset,
                         since GlyphView is only one line, we won&apos;t contain
                         the position to the nort/south, therefore return -1.                        
                    </comment>
                    <comment line="1288">
                        End case for bidi text where newline is at beginning
                         of line.                        
                    </comment>
                    <comment line="1300">
                        Assumed not used in bidi text, GlyphPainter2 will
                         override as necessary, therefore return -1.                        
                    </comment>
                    <comment line="1314">
                        End case for bidi text where newline is at beginning
                         of line.                        
                    </comment>
                    <comment line="1319">
                        Assumed not used in bidi text, GlyphPainter2 will
                         override as necessary, therefore return -1.                        
                    </comment>
                    <declaration name="startOffset" type="int" line="1253"/>
                    <declaration name="endOffset" type="int" line="1254"/>
                    <declaration name="text" type="Segment" line="1255"/>
                    <scope line="1260"/>
                    <declaration name="container" type="Container" line="1266"/>
                    <scope line="1268">
                        <declaration name="c" type="Caret" line="1269"/>
                        <declaration name="magicPoint" type="Point" line="1270"/>
                        <scope line="1273"/>
                        <declaration name="value" type="int" line="1277"/>
                    </scope>
                    <scope line="1282">
                        <scope line="1283"/>
                    </scope>
                    <scope line="1291"/>
                    <scope line="1295"/>
                    <scope line="1298"/>
                    <scope line="1303"/>
                    <scope line="1308">
                        <scope line="1309"/>
                    </scope>
                    <scope line="1317"/>
                    <scope line="1323"/>
                </method>
            </class>
        </class>
    </source>