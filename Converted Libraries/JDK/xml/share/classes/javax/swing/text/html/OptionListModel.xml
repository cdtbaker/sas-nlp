<?xml version="1.0" encoding="UTF-8"?>
    <source package="javax.swing.text.html">
        <import package="javax.swing"/>
        <import package="javax.swing.event"/>
        <import package="java.util.EventListener"/>
        <import package="java.util.BitSet"/>
        <import package="java.io.Serializable"/>
        <class name="OptionListModel" line="34">
            <extends class="DefaultListModel"/>
            <comment line="169">
                Update first and last change indices                
            </comment>
            <comment line="175">
                Set the state at this index and update all relevant state.                
            </comment>
            <comment line="190">
                Clear the state at this index and update all relevant state.                
            </comment>
            <comment line="322">
                Change the selection with the effect of first clearing the values
                   in the inclusive range [clearMin, clearMax] then setting the values
                   in the inclusive range [setMin, setMax]. Do this in one pass so
                   that no values are cleared if they would later be set.                
            </comment>
            <implements interface="ListSelectionModel"/>
            <implements interface="Serializable"/>
            <javadoc line="34">
                This class extends DefaultListModel, and also implements
                  the ListSelectionModel interface, allowing for it to store state
                  relevant to a SELECT form element which is implemented as a List.
                  If SELECT has a size attribute whose value is greater than 1,
                  or if allows multiple selection then a JList is used to
                  represent it and the OptionListModel is used as its model.
                  It also stores the initial state of the JList, to ensure an
                  accurate reset, if the user requests a reset of the form.                
                <author>
                    Sunita Mani                    
                </author>
            </javadoc>
            <declaration name="MIN" type="int" line="50"/>
            <declaration name="MAX" type="int" line="51"/>
            <declaration name="selectionMode" type="int" line="52"/>
            <declaration name="minIndex" type="int" line="53"/>
            <declaration name="maxIndex" type="int" line="54"/>
            <declaration name="anchorIndex" type="int" line="55"/>
            <declaration name="leadIndex" type="int" line="56"/>
            <declaration name="firstChangedIndex" type="int" line="57"/>
            <declaration name="lastChangedIndex" type="int" line="58"/>
            <declaration name="isAdjusting" type="boolean" line="59"/>
            <declaration name="value" type="BitSet" line="60"/>
            <declaration name="initialValue" type="BitSet" line="61"/>
            <declaration name="listenerList" type="EventListenerList" line="62"/>
            <declaration name="leadAnchorNotificationEnabled" type="boolean" line="64"/>
            <method name="getMinSelectionIndex" type="int" line="66"/>
            <method name="getMaxSelectionIndex" type="int" line="68"/>
            <method name="getValueIsAdjusting" type="boolean" line="70"/>
            <method name="getSelectionMode" type="int" line="72"/>
            <method name="setSelectionMode" type="void" line="74">
                <params>
                    <param name="selectionMode" type="int"/>
                </params>
            </method>
            <method name="isSelectedIndex" type="boolean" line="86">
                <params>
                    <param name="index" type="int"/>
                </params>
            </method>
            <method name="isSelectionEmpty" type="boolean" line="90"/>
            <method name="addListSelectionListener" type="void" line="94">
                <params>
                    <param name="l" type="ListSelectionListener"/>
                </params>
            </method>
            <method name="removeListSelectionListener" type="void" line="98">
                <params>
                    <param name="l" type="ListSelectionListener"/>
                </params>
            </method>
            <javadoc line="102">
                Returns an array of all the &lt;code&gt;ListSelectionListener&lt;/code&gt;s added
                  to this OptionListModel with addListSelectionListener().                
                <return>
                    all of the <code>ListSelectionListener</code>s added or an empty
                      array if no listeners have been added                    
                </return>
                <since>
                    1.4                    
                </since>
            </javadoc>
            <method name="getListSelectionListeners" type="ListSelectionListener[]" line="110"/>
            <javadoc line="114">
                Notify listeners that we are beginning or ending a
                  series of value changes                
            </javadoc>
            <method name="fireValueChanged" type="void" line="118">
                <params>
                    <param name="isAdjusting" type="boolean"/>
                </params>
            </method>
            <javadoc line="123">
                Notify ListSelectionListeners that the value of the selection,
                  in the closed interval firstIndex,lastIndex, has changed.                
            </javadoc>
            <method name="fireValueChanged" type="void" line="127">
                <params>
                    <param name="firstIndex" type="int"/>
                    <param name="lastIndex" type="int"/>
                </params>
            </method>
            <javadoc line="131">
                @param firstIndex The first index in the interval.                
                <param>
                    lastIndex The last index in the interval.                    
                </param>
                <param>
                    isAdjusting True if this is the final change in a series of them.                    
                </param>
                <see>
                    EventListenerList                    
                </see>
            </javadoc>
            <method name="fireValueChanged" type="void" line="138">
                <params>
                    <param name="firstIndex" type="int"/>
                    <param name="lastIndex" type="int"/>
                    <param name="isAdjusting" type="boolean"/>
                </params>
                <declaration name="listeners" type="Object[]" line="139"/>
                <declaration name="e" type="ListSelectionEvent" line="140"/>
                <scope line="142">
                    <scope line="143">
                        <scope line="144"/>
                    </scope>
                </scope>
            </method>
            <method name="fireValueChanged" type="void" line="152">
                <comment line="156">
                    Change the values before sending the event to the
                     listeners in case the event causes a listener to make
                     another change to the selection.                    
                </comment>
                <scope line="153"/>
                <declaration name="oldFirstChangedIndex" type="int" line="160"/>
                <declaration name="oldLastChangedIndex" type="int" line="161"/>
            </method>
            <method name="markAsDirty" type="void" line="169">
                <params>
                    <param name="r" type="int"/>
                </params>
            </method>
            <method name="set" type="void" line="175">
                <params>
                    <param name="r" type="int"/>
                </params>
                <comment line="184">
                    Update minimum and maximum indices                    
                </comment>
                <scope line="176"/>
                <declaration name="option" type="Option" line="180"/>
            </method>
            <method name="clear" type="void" line="190">
                <params>
                    <param name="r" type="int"/>
                </params>
                <comment line="199">
                    Update minimum and maximum indices                    
                </comment>
                <comment line="200">
                    If (r &gt; minIndex) the minimum has not changed.
                    The case (r &lt; minIndex) is not possible because r&apos;th value was set.
                    We only need to check for the case when lowest entry has been cleared,
                    and in this case we need to search for the first value set above it.                    
                </comment>
                <comment line="213">
                    If (r &lt; maxIndex) the maximum has not changed.
                    The case (r &gt; maxIndex) is not possible because r&apos;th value was set.
                    We only need to check for the case when highest entry has been cleared,
                    and in this case we need to search for the first value set below it.                    
                </comment>
                <comment line="226">
                    Performance note: This method is called from inside a loop in
                    changeSelection() but we will only iterate in the loops
                    above on the basis of one iteration per deselected cell - in total.
                    Ie. the next time this method is called the work of the previous
                    deselection will not be repeated.
                    
                    We also don&apos;t need to worry about the case when the min and max
                    values are in their unassigned states. This cannot happen because
                    this method&apos;s initial check ensures that the selection was not empty
                    and therefore that the minIndex and maxIndex had &apos;real&apos; values.
                    
                    If we have cleared the whole selection, set the minIndex and maxIndex
                    to their cannonical values so that the next set command always works
                    just by using Math.min and Math.max.                    
                </comment>
                <scope line="191"/>
                <declaration name="option" type="Option" line="195"/>
                <scope line="206">
                    <scope line="207">
                        <scope line="208"/>
                    </scope>
                </scope>
                <scope line="219">
                    <scope line="220">
                        <scope line="221"/>
                    </scope>
                </scope>
                <scope line="241"/>
            </method>
            <javadoc line="247">
                Sets the value of the leadAnchorNotificationEnabled flag.                
                <see>
                    #isLeadAnchorNotificationEnabled()                    
                </see>
            </javadoc>
            <method name="setLeadAnchorNotificationEnabled" type="void" line="251">
                <params>
                    <param name="flag" type="boolean"/>
                </params>
            </method>
            <javadoc line="255">
                Returns the value of the leadAnchorNotificationEnabled flag.
                  When leadAnchorNotificationEnabled is true the model
                  generates notification events with bounds that cover all the changes to
                  the selection plus the changes to the lead and anchor indices.
                  Setting the flag to false causes a norrowing of the event&apos;s bounds to
                  include only the elements that have been selected or deselected since
                  the last change. Either way, the model continues to maintain the lead
                  and anchor variables internally. The default is true.                
                <return>
                    the value of the leadAnchorNotificationEnabled flag                    
                </return>
                <see>
                    #setLeadAnchorNotificationEnabled(boolean)                    
                </see>
            </javadoc>
            <method name="isLeadAnchorNotificationEnabled" type="boolean" line="267"/>
            <method name="updateLeadAnchorIndices" type="void" line="271">
                <params>
                    <param name="anchorIndex" type="int"/>
                    <param name="leadIndex" type="int"/>
                </params>
                <comment line="274">
                    The unassigned state.                    
                </comment>
                <comment line="281">
                    The unassigned state.                    
                </comment>
                <scope line="272">
                    <scope line="273">
                        <scope line="274"/>
                    </scope>
                    <scope line="280">
                        <scope line="281"/>
                    </scope>
                </scope>
            </method>
            <method name="contains" type="boolean" line="291">
                <params>
                    <param name="a" type="int"/>
                    <param name="b" type="int"/>
                    <param name="i" type="int"/>
                </params>
            </method>
            <method name="changeSelection" type="void" line="296">
                <params>
                    <param name="clearMin" type="int"/>
                    <param name="clearMax" type="int"/>
                    <param name="setMin" type="int"/>
                    <param name="setMax" type="int"/>
                    <param name="clearFirst" type="boolean"/>
                </params>
                <scope line="297">
                    <declaration name="shouldClear" type="boolean" line="299"/>
                    <declaration name="shouldSet" type="boolean" line="300"/>
                    <scope line="302">
                        <scope line="303"/>
                        <scope line="306"/>
                    </scope>
                    <scope line="311"/>
                    <scope line="314"/>
                </scope>
            </method>
            <method name="changeSelection" type="void" line="326">
                <params>
                    <param name="clearMin" type="int"/>
                    <param name="clearMax" type="int"/>
                    <param name="setMin" type="int"/>
                    <param name="setMax" type="int"/>
                </params>
            </method>
            <method name="clearSelection" type="void" line="330"/>
            <method name="setSelectionInterval" type="void" line="334">
                <params>
                    <param name="index0" type="int"/>
                    <param name="index1" type="int"/>
                </params>
                <scope line="335"/>
                <scope line="339"/>
                <declaration name="clearMin" type="int" line="345"/>
                <declaration name="clearMax" type="int" line="346"/>
                <declaration name="setMin" type="int" line="347"/>
                <declaration name="setMax" type="int" line="348"/>
            </method>
            <method name="addSelectionInterval" type="void" line="353">
                <params>
                    <param name="index0" type="int"/>
                    <param name="index1" type="int"/>
                </params>
                <scope line="354"/>
                <scope line="358"/>
                <declaration name="clearMin" type="int" line="365"/>
                <declaration name="clearMax" type="int" line="366"/>
                <declaration name="setMin" type="int" line="367"/>
                <declaration name="setMax" type="int" line="368"/>
            </method>
            <method name="removeSelectionInterval" type="void" line="374">
                <params>
                    <param name="index0" type="int"/>
                    <param name="index1" type="int"/>
                </params>
                <scope line="375"/>
                <declaration name="clearMin" type="int" line="381"/>
                <declaration name="clearMax" type="int" line="382"/>
                <declaration name="setMin" type="int" line="383"/>
                <declaration name="setMax" type="int" line="384"/>
            </method>
            <method name="setState" type="void" line="388">
                <params>
                    <param name="index" type="int"/>
                    <param name="state" type="boolean"/>
                </params>
                <scope line="389"/>
                <scope line="392"/>
            </method>
            <javadoc line="397">
                Insert length indices beginning before/after index. If the value
                  at index is itself selected, set all of the newly inserted
                  items, otherwise leave them unselected. This method is typically
                  called to sync the selection model with a corresponding change
                  in the data model.                
            </javadoc>
            <method name="insertIndexInterval" type="void" line="405">
                <params>
                    <param name="index" type="int"/>
                    <param name="length" type="int"/>
                    <param name="before" type="boolean"/>
                </params>
                <comment line="406">
                    The first new index will appear at insMinIndex and the last
                     one will appear at insMaxIndex                    
                </comment>
                <comment line="412">
                    Right shift the entire bitset by length, beginning with
                     index-1 if before is true, index+1 if it&apos;s false (i.e. with
                     insMinIndex).                    
                </comment>
                <comment line="420">
                    Initialize the newly inserted indices.                    
                </comment>
                <declaration name="insMinIndex" type="int" line="409"/>
                <declaration name="insMaxIndex" type="int" line="410"/>
                <scope line="416"/>
                <declaration name="setInsertedValues" type="boolean" line="422"/>
                <scope line="423"/>
            </method>
            <javadoc line="429">
                Remove the indices in the interval index0,index1 (inclusive) from
                  the selection model.  This is typically called to sync the selection
                  model width a corresponding change in the data model.  Note
                  that (as always) index0 can be greater than index1.                
            </javadoc>
            <method name="removeIndexInterval" type="void" line="436">
                <params>
                    <param name="index0" type="int"/>
                    <param name="index1" type="int"/>
                </params>
                <comment line="441">
                    Shift the entire bitset to the left to close the index0, index1
                     gap.                    
                </comment>
                <declaration name="rmMinIndex" type="int" line="437"/>
                <declaration name="rmMaxIndex" type="int" line="438"/>
                <declaration name="gapLength" type="int" line="439"/>
                <scope line="444"/>
            </method>
            <method name="setValueIsAdjusting" type="void" line="450">
                <params>
                    <param name="isAdjusting" type="boolean"/>
                </params>
                <scope line="451"/>
            </method>
            <method name="toString" type="String" line="458">
                <declaration name="s" type="String" line="459"/>
            </method>
            <javadoc line="463">
                Returns a clone of the receiver with the same selection.
                  &lt;code&gt;listenerLists&lt;/code&gt; are not duplicated.                
                <return>
                    a clone of the receiver                    
                </return>
                <exception>
                    CloneNotSupportedException if the receiver does not
                      both (a) implement the <code>Cloneable</code> interface
                      and (b) define a <code>clone</code> method                    
                </exception>
            </javadoc>
            <method name="clone" type="Object" line="472">
                <declaration name="clone" type="OptionListModel" line="473"/>
            </method>
            <method name="getAnchorSelectionIndex" type="int" line="479"/>
            <method name="getLeadSelectionIndex" type="int" line="483"/>
            <javadoc line="487">
                Set the anchor selection index, leaving all selection values unchanged.                
                <see>
                    #getAnchorSelectionIndex                    
                </see>
                <see>
                    #setLeadSelectionIndex                    
                </see>
            </javadoc>
            <method name="setAnchorSelectionIndex" type="void" line="493">
                <params>
                    <param name="anchorIndex" type="int"/>
                </params>
            </method>
            <javadoc line="497">
                Set the lead selection index, ensuring that values between the
                  anchor and the new lead are either all selected or all deselected.
                  If the value at the anchor index is selected, first clear all the
                  values in the range [anchor, oldLeadIndex], then select all the values
                  values in the range [anchor, newLeadIndex], where oldLeadIndex is the old
                  leadIndex and newLeadIndex is the new one.
                  &lt;p&gt;
                  If the value at the anchor index is not selected, do the same thing in reverse,
                  selecting values in the old range and deslecting values in the new one.
                  &lt;p&gt;
                  Generate a single event for this change and notify all listeners.
                  For the purposes of generating minimal bounds in this event, do the
                  operation in a single pass; that way the first and last index inside the
                  ListSelectionEvent that is broadcast will refer to cells that actually
                  changed value because of this method. If, instead, this operation were
                  done in two steps the effect on the selection state would be the same
                  but two events would be generated and the bounds around the changed values
                  would be wider, including cells that had been first cleared and only
                  to later be set.
                  &lt;p&gt;
                  This method can be used in the mouseDragged() method of a UI class
                  to extend a selection.                
                <see>
                    #getLeadSelectionIndex                    
                </see>
                <see>
                    #setAnchorSelectionIndex                    
                </see>
            </javadoc>
            <method name="setLeadSelectionIndex" type="void" line="524">
                <params>
                    <param name="leadIndex" type="int"/>
                </params>
                <declaration name="anchorIndex" type="int" line="525"/>
                <scope line="526"/>
                <declaration name="oldMin" type="int" line="530"/>
                <declaration name="oldMax" type="int" line="531"/>
                <declaration name="newMin" type="int" line="532"/>
                <declaration name="newMax" type="int" line="533"/>
                <scope line="534"/>
                <scope line="537"/>
            </method>
            <javadoc line="545">
                This method is responsible for storing the state
                  of the initial selection.  If the selectionMode
                  is the default, i.e allowing only for SINGLE_SELECTION,
                  then the very last OPTION that has the selected
                  attribute set wins.                
            </javadoc>
            <method name="setInitialSelection" type="void" line="552">
                <params>
                    <param name="i" type="int"/>
                </params>
                <comment line="557">
                    reset to empty                    
                </comment>
                <scope line="553"/>
                <scope line="556"/>
            </method>
            <javadoc line="563">
                Fetches the BitSet that represents the initial
                  set of selected items in the list.                
            </javadoc>
            <method name="getInitialSelection" type="BitSet" line="567"/>
        </class>
    </source>