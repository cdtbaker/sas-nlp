<?xml version="1.0" encoding="UTF-8"?>
    <source package="org.jcp.xml.dsig.internal.dom">
        <import package="javax.xml.crypto"/>
        <import package="javax.xml.crypto.dsig"/>
        <import package="javax.xml.crypto.dom.DOMCryptoContext"/>
        <import package="javax.xml.crypto.dom.DOMURIReference"/>
        <import package="java.io"/>
        <import package="java.net.URI"/>
        <import package="java.net.URISyntaxException"/>
        <import package="java.security"/>
        <import package="java.util"/>
        <import package="java.util.logging.Level"/>
        <import package="java.util.logging.Logger"/>
        <import package="org.w3c.dom.Attr"/>
        <import package="org.w3c.dom.Document"/>
        <import package="org.w3c.dom.Element"/>
        <import package="org.w3c.dom.Node"/>
        <import package="org.jcp.xml.dsig.internal.DigesterOutputStream"/>
        <import package="com.sun.org.apache.xml.internal.security.exceptions.Base64DecodingException"/>
        <import package="com.sun.org.apache.xml.internal.security.signature.XMLSignatureInput"/>
        <import package="com.sun.org.apache.xml.internal.security.utils.Base64"/>
        <import package="com.sun.org.apache.xml.internal.security.utils.UnsyncBufferedOutputStream"/>
        <class name="DOMReference" line="59">
            <extends class="DOMStructure"/>
            <implements interface="Reference"/>
            <implements interface="DOMURIReference"/>
            <javadoc line="59">
                DOM-based implementation of Reference.                
                <author>
                    Sean Mullan                    
                </author>
                <author>
                    Joyce Leung                    
                </author>
            </javadoc>
            <declaration name="useC14N11" type="boolean" line="68"/>
            <javadoc line="68">
                Look up useC14N11 system property. If true, an explicit C14N11 transform
                  will be added if necessary when generating the signature. See section
                  3.1.1 of http://www.w3.org/2007/xmlsec/Drafts/xmldsig-core/ for more info.
                  If true, overrides the same property if set in the XMLSignContext.                
            </javadoc>
            <anonymous_class line="76">
                <method name="run" type="Boolean" line="77"/>
            </anonymous_class>
            <declaration name="log" type="Logger" line="83"/>
            <declaration name="digestMethod" type="DigestMethod" line="85"/>
            <declaration name="id" type="String" line="86"/>
            <declaration name="transforms" type="List" line="87"/>
            <declaration name="allTransforms" type="List" line="88"/>
            <declaration name="appliedTransformData" type="Data" line="89"/>
            <declaration name="here" type="Attr" line="90"/>
            <declaration name="uri" type="String" line="91"/>
            <declaration name="type" type="String" line="92"/>
            <declaration name="digestValue" type="byte[]" line="93"/>
            <declaration name="calcDigestValue" type="byte[]" line="94"/>
            <declaration name="refElem" type="Element" line="95"/>
            <declaration name="digested" type="boolean" line="96"/>
            <declaration name="validated" type="boolean" line="97"/>
            <declaration name="validationStatus" type="boolean" line="98"/>
            <declaration name="derefData" type="Data" line="99"/>
            <declaration name="dis" type="InputStream" line="100"/>
            <declaration name="md" type="MessageDigest" line="101"/>
            <declaration name="provider" type="Provider" line="102"/>
            <javadoc line="104">
                Creates a &lt;code&gt;Reference&lt;/code&gt; from the specified parameters.                
                <param>
                    uri the URI (may be null)                    
                </param>
                <param>
                    type the type (may be null)                    
                </param>
                <param>
                    dm the digest method                    
                </param>
                <param>
                    transforms a list of {@link Transform}s. The list
                      is defensively copied to protect against subsequent modification.
                      May be <code>null</code> or empty.                    
                </param>
                <param>
                    id the reference ID (may be <code>null</code>)                    
                </param>
                <return>
                    a <code>Reference</code>                    
                </return>
                <throws>
                    NullPointerException if <code>dm</code> is <code>null</code>                    
                </throws>
                <throws>
                    ClassCastException if any of the <code>transforms</code> are
                      not of type <code>Transform</code>                    
                </throws>
            </javadoc>
            <method name="DOMReference" type="constructor" line="120">
                <params>
                    <param name="uri" type="String"/>
                    <param name="type" type="String"/>
                    <param name="dm" type="DigestMethod"/>
                    <param name="transforms" type="List"/>
                    <param name="id" type="String"/>
                    <param name="provider" type="Provider"/>
                </params>
            </method>
            <method name="DOMReference" type="constructor" line="126">
                <params>
                    <param name="uri" type="String"/>
                    <param name="type" type="String"/>
                    <param name="dm" type="DigestMethod"/>
                    <param name="appliedTransforms" type="List"/>
                    <param name="result" type="Data"/>
                    <param name="transforms" type="List"/>
                    <param name="id" type="String"/>
                    <param name="provider" type="Provider"/>
                </params>
            </method>
            <method name="DOMReference" type="constructor" line="133">
                <params>
                    <param name="uri" type="String"/>
                    <param name="type" type="String"/>
                    <param name="dm" type="DigestMethod"/>
                    <param name="appliedTransforms" type="List"/>
                    <param name="result" type="Data"/>
                    <param name="transforms" type="List"/>
                    <param name="id" type="String"/>
                    <param name="digestValue" type="byte[]"/>
                    <param name="provider" type="Provider"/>
                </params>
                <scope line="134"/>
                <scope line="138">
                    <declaration name="transformsCopy" type="List" line="139"/>
                    <scope line="140">
                        <scope line="141"/>
                    </scope>
                </scope>
                <scope line="148"/>
                <scope line="150">
                    <declaration name="transformsCopy" type="List" line="151"/>
                    <scope line="152">
                        <scope line="153"/>
                    </scope>
                </scope>
                <scope line="163">
                    <scope line="164"/>
                    <scope line="166"/>
                </scope>
                <scope line="172"/>
            </method>
            <javadoc line="180">
                Creates a &lt;code&gt;DOMReference&lt;/code&gt; from an element.                
                <param>
                    refElem a Reference element                    
                </param>
            </javadoc>
            <method name="DOMReference" type="constructor" line="186">
                <params>
                    <param name="refElem" type="Element"/>
                    <param name="context" type="XMLCryptoContext"/>
                    <param name="provider" type="Provider"/>
                </params>
                <comment line="188">
                    unmarshal Transforms, if specified                    
                </comment>
                <comment line="201">
                    unmarshal DigestMethod                    
                </comment>
                <comment line="205">
                    unmarshal DigestValue                    
                </comment>
                <comment line="213">
                    unmarshal attributes                    
                </comment>
                <declaration name="nextSibling" type="Element" line="188"/>
                <declaration name="transforms" type="List" line="189"/>
                <scope line="190">
                    <declaration name="transformElem" type="Element" line="191"/>
                    <scope line="192"/>
                </scope>
                <declaration name="dmElem" type="Element" line="201"/>
                <scope line="205">
                    <declaration name="dvElem" type="Element" line="206"/>
                </scope>
                <scope line="208"/>
            </method>
            <method name="getDigestMethod" type="DigestMethod" line="225"/>
            <method name="getId" type="String" line="229"/>
            <method name="getURI" type="String" line="233"/>
            <method name="getType" type="String" line="237"/>
            <method name="getTransforms" type="List" line="241"/>
            <method name="getDigestValue" type="byte[]" line="245"/>
            <method name="getCalculatedDigestValue" type="byte[]" line="249"/>
            <method name="marshal" type="void" line="255">
                <params>
                    <param name="parent" type="Node"/>
                    <param name="dsPrefix" type="String"/>
                    <param name="context" type="DOMCryptoContext"/>
                </params>
                <comment line="265">
                    set attributes                    
                </comment>
                <comment line="270">
                    create and append Transforms element                    
                </comment>
                <comment line="282">
                    create and append DigestMethod element                    
                </comment>
                <comment line="285">
                    create and append DigestValue element                    
                </comment>
                <scope line="256"/>
                <declaration name="ownerDoc" type="Document" line="259"/>
                <scope line="270">
                    <declaration name="transformsElem" type="Element" line="271"/>
                    <scope line="274">
                        <declaration name="transform" type="DOMStructure" line="275"/>
                    </scope>
                </scope>
                <scope line="285"/>
                <declaration name="digestValueElem" type="Element" line="288"/>
                <scope line="290"/>
            </method>
            <method name="digest" type="void" line="301">
                <params>
                    <param name="signContext" type="XMLSignContext"/>
                </params>
                <comment line="311">
                    insert digestValue into DigestValue element                    
                </comment>
                <declaration name="data" type="Data" line="302"/>
                <scope line="303"/>
                <scope line="305"/>
                <declaration name="encodedDV" type="String" line="311"/>
                <scope line="312"/>
                <declaration name="digestElem" type="Element" line="315"/>
                <scope line="316"/>
                <scope line="324"/>
            </method>
            <method name="validate" type="boolean" line="330">
                <params>
                    <param name="validateContext" type="XMLValidateContext"/>
                </params>
                <scope line="331"/>
                <scope line="334"/>
                <declaration name="data" type="Data" line="337"/>
                <scope line="340"/>
            </method>
            <method name="getDereferencedData" type="Data" line="352"/>
            <method name="getDigestInputStream" type="InputStream" line="356"/>
            <method name="dereference" type="Data" line="361">
                <params>
                    <param name="context" type="XMLCryptoContext"/>
                </params>
                <comment line="365">
                    use user-specified URIDereferencer if specified; otherwise use deflt                    
                </comment>
                <declaration name="data" type="Data" line="362"/>
                <declaration name="deref" type="URIDereferencer" line="365"/>
                <scope line="366"/>
                <scope line="369">
                    <scope line="371"/>
                </scope>
                <scope line="377"/>
            </method>
            <method name="transform" type="byte[]" line="385">
                <params>
                    <param name="dereferencedData" type="Data"/>
                    <param name="context" type="XMLCryptoContext"/>
                </params>
                <comment line="424">
                    explicitly use C14N 1.1 when generating signature
                     first check system property, then context property                    
                </comment>
                <scope line="387">
                    <scope line="388"/>
                    <scope line="391"/>
                </scope>
                <declaration name="dos" type="DigesterOutputStream" line="396"/>
                <declaration name="cache" type="Boolean" line="397"/>
                <scope line="399"/>
                <scope line="402"/>
                <declaration name="os" type="OutputStream" line="405"/>
                <declaration name="data" type="Data" line="406"/>
                <scope line="407">
                    <declaration name="transform" type="DOMTransform" line="408"/>
                    <scope line="409">
                        <scope line="410"/>
                        <scope line="412"/>
                    </scope>
                    <scope line="415"/>
                </scope>
                <scope line="420">
                    <scope line="421">
                        <declaration name="xi" type="XMLSignatureInput" line="422"/>
                        <declaration name="c14n11" type="boolean" line="425"/>
                        <declaration name="c14nalg" type="String" line="426"/>
                        <scope line="427">
                            <scope line="428">
                                <declaration name="prop" type="Boolean" line="429"/>
                                <scope line="432"/>
                            </scope>
                            <scope line="435"/>
                        </scope>
                        <scope line="439"/>
                        <scope line="441"/>
                        <scope line="444">
                            <declaration name="spi" type="TransformService" line="445"/>
                            <scope line="446"/>
                            <scope line="448"/>
                        </scope>
                        <scope line="455"/>
                        <scope line="459">
                            <declaration name="t" type="DOMTransform" line="460"/>
                            <declaration name="transformsElem" type="Element" line="462"/>
                            <declaration name="dsPrefix" type="String" line="463"/>
                            <scope line="464"/>
                            <scope line="470"/>
                        </scope>
                        <scope line="476"/>
                    </scope>
                    <scope line="481"/>
                </scope>
                <scope line="485"/>
            </method>
            <method name="getHere" type="Node" line="490"/>
            <method name="equals" type="boolean" line="494">
                <params>
                    <param name="o" type="Object"/>
                </params>
                <scope line="495"/>
                <scope line="499"/>
                <declaration name="oref" type="Reference" line="502"/>
                <declaration name="idsEqual" type="boolean" line="504"/>
                <declaration name="urisEqual" type="boolean" line="506"/>
                <declaration name="typesEqual" type="boolean" line="508"/>
                <declaration name="digestValuesEqual" type="boolean" line="510"/>
            </method>
            <method name="isDigested" type="boolean" line="517"/>
            <method name="copyDerefData" type="Data" line="521">
                <params>
                    <param name="dereferencedData" type="Data"/>
                </params>
                <comment line="524">
                    need to make a copy of the Data                    
                </comment>
                <comment line="534">
                    log a warning                    
                </comment>
                <comment line="547">
                    log a warning                    
                </comment>
                <scope line="522">
                    <declaration name="ad" type="ApacheData" line="524"/>
                    <declaration name="xsi" type="XMLSignatureInput" line="525"/>
                    <scope line="526">
                        <scope line="527">
                            <declaration name="s" type="Set" line="528"/>
                            <anonymous_class line="529">
                                <method name="iterator" type="Iterator" line="530"/>
                            </anonymous_class>
                        </scope>
                        <scope line="532"/>
                    </scope>
                    <scope line="538"/>
                    <scope line="541">
                        <scope line="542"/>
                        <scope line="545"/>
                    </scope>
                </scope>
            </method>
        </class>
    </source>