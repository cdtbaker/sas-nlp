<?xml version="1.0" encoding="UTF-8"?>
    <source package="java.math">
        <class name="BitSieve" line="28">
            <javadoc line="28">
                A simple bit sieve used for finding prime number candidates. Allows setting
                  and clearing of bits in a storage array. The size of the sieve is assumed to
                  be constant to reduce overhead. All the bits of a new bitSieve are zero, and
                  bits are removed from it by setting them.
                  To reduce storage space and increase efficiency, no even numbers are
                  represented in the sieve (each bit in the sieve represents an odd number).
                  The relationship between the index of a bit and the number it represents is
                  given by
                  N = offset + (2index + 1);
                  Where N is the integer represented by a bit in the sieve, offset is some
                  even integer offset indicating where the sieve begins, and index is the
                  index of a bit in the sieve array.                
                <see>
                    BigInteger                    
                </see>
                <author>
                    Michael McCloskey                    
                </author>
                <since>
                    1.3                    
                </since>
            </javadoc>
            <declaration name="bits" type="long" line="48"/>
            <javadoc line="48">
                Stores the bits in this bitSieve.                
            </javadoc>
            <declaration name="length" type="int" line="53"/>
            <javadoc line="53">
                Length is how many bits this sieve holds.                
            </javadoc>
            <declaration name="smallSieve" type="BitSieve" line="58"/>
            <javadoc line="58">
                A small sieve used to filter out multiples of small primes in a search
                  sieve.                
            </javadoc>
            <javadoc line="64">
                Construct a &quot;small sieve&quot; with a base of 0.  This constructor is
                  used internally to generate the set of &quot;small primes&quot; whose multiples
                  are excluded from sieves generated by the main (package private)
                  constructor, BitSieve(BigInteger base, int searchLen).  The length
                  of the sieve generated by this constructor was chosen for performance;
                  it controls a tradeoff between how much time is spent constructing
                  other sieves, and how much time is wasted testing composite candidates
                  for primality.  The length was chosen experimentally to yield good
                  performance.                
            </javadoc>
            <method name="BitSieve" type="constructor" line="75">
                <comment line="79">
                    Mark 1 as composite                    
                </comment>
                <comment line="84">
                    Find primes and remove their multiples from sieve                    
                </comment>
                <declaration name="nextIndex" type="int" line="81"/>
                <declaration name="nextPrime" type="int" line="82"/>
                <scope line="85"/>
            </method>
            <javadoc line="92">
                Construct a bit sieve of searchLen bits used for finding prime number
                  candidates. The new sieve begins at the specified base, which must
                  be even.                
            </javadoc>
            <method name="BitSieve" type="constructor" line="97">
                <params>
                    <param name="base" type="BigInteger"/>
                    <param name="searchLen" type="int"/>
                </params>
                <comment line="98">
                    Candidates are indicated by clear bits in the sieve. As a candidates
                     nonprimality is calculated, a bit is set in the sieve to eliminate
                     it. To reduce storage space and increase efficiency, no even numbers
                     are represented in the sieve (each bit in the sieve represents an
                     odd number).                    
                </comment>
                <comment line="112">
                    Construct the large sieve at an even offset specified by base                    
                </comment>
                <comment line="116">
                    Calculate base mod convertedStep                    
                </comment>
                <comment line="119">
                    Take each multiple of step out of sieve                    
                </comment>
                <comment line="125">
                    Find next prime from small sieve                    
                </comment>
                <declaration name="start" type="int" line="107"/>
                <declaration name="step" type="int" line="109"/>
                <declaration name="convertedStep" type="int" line="110"/>
                <declaration name="b" type="MutableBigInteger" line="113"/>
                <declaration name="q" type="MutableBigInteger" line="114"/>
                <scope line="115"/>
            </method>
            <javadoc line="131">
                Given a bit index return unit index containing it.                
            </javadoc>
            <method name="unitIndex" type="int" line="134">
                <params>
                    <param name="bitIndex" type="int"/>
                </params>
            </method>
            <javadoc line="138">
                Return a unit that masks the specified bit in its unit.                
            </javadoc>
            <method name="bit" type="long" line="141">
                <params>
                    <param name="bitIndex" type="int"/>
                </params>
            </method>
            <javadoc line="145">
                Get the value of the bit at the specified index.                
            </javadoc>
            <method name="get" type="boolean" line="148">
                <params>
                    <param name="bitIndex" type="int"/>
                </params>
                <declaration name="unitIndex" type="int" line="149"/>
            </method>
            <javadoc line="153">
                Set the bit at the specified index.                
            </javadoc>
            <method name="set" type="void" line="156">
                <params>
                    <param name="bitIndex" type="int"/>
                </params>
                <declaration name="unitIndex" type="int" line="157"/>
            </method>
            <javadoc line="161">
                This method returns the index of the first clear bit in the search
                  array that occurs at or after start. It will not search past the
                  specified limit. It returns -1 if there is no such clear bit.                
            </javadoc>
            <method name="sieveSearch" type="int" line="166">
                <params>
                    <param name="limit" type="int"/>
                    <param name="start" type="int"/>
                </params>
                <declaration name="index" type="int" line="170"/>
                <scope line="171"/>
            </method>
            <javadoc line="179">
                Sieve a single set of multiples out of the sieve. Begin to remove
                  multiples of the specified step starting at the specified start index,
                  up to the specified limit.                
            </javadoc>
            <method name="sieveSingle" type="void" line="184">
                <params>
                    <param name="limit" type="int"/>
                    <param name="start" type="int"/>
                    <param name="step" type="int"/>
                </params>
                <scope line="185"/>
            </method>
            <javadoc line="191">
                Test probable primes in the sieve and return successful candidates.                
            </javadoc>
            <method name="retrieve" type="BigInteger" line="194">
                <params>
                    <param name="initValue" type="BigInteger"/>
                    <param name="certainty" type="int"/>
                    <param name="random" type="java.util.Random"/>
                </params>
                <comment line="195">
                    Examine the sieve one long at a time to find possible primes                    
                </comment>
                <declaration name="offset" type="int" line="196"/>
                <scope line="197">
                    <declaration name="nextLong" type="long" line="198"/>
                    <scope line="199">
                        <scope line="200">
                            <declaration name="candidate" type="BigInteger" line="201"/>
                        </scope>
                    </scope>
                </scope>
            </method>
        </class>
    </source>