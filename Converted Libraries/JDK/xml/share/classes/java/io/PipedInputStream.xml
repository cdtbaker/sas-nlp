<?xml version="1.0" encoding="UTF-8"?>
    <source package="java.io">
        <class name="PipedInputStream" line="28">
            <extends class="InputStream"/>
            <comment line="56">
                REMIND: identification of the read and write sides needs to be
                more sophisticated.  Either using thread groups (but what about
                pipes within a thread?) or using finalization (but it may be a                
            </comment>
            <javadoc line="28">
                A piped input stream should be connected
                  to a piped output stream; the piped  input
                  stream then provides whatever data bytes
                  are written to the piped output  stream.
                  Typically, data is read from a &lt;code&gt;PipedInputStream&lt;/code&gt;
                  object by one thread  and data is written
                  to the corresponding &lt;code&gt;PipedOutputStream&lt;/code&gt;
                  by some  other thread. Attempting to use
                  both objects from a single thread is not
                  recommended, as it may deadlock the thread.
                  The piped input stream contains a buffer,
                  decoupling read operations from write operations,
                  within limits.
                  A pipe is said to be &lt;a name=BROKEN&gt; &lt;i&gt;broken&lt;/i&gt; &lt;/a&gt; if a
                  thread that was providing data bytes to the connected
                  piped output stream is no longer alive.                
                <author>
                    James Gosling                    
                </author>
                <see>
                    java.io.PipedOutputStream                    
                </see>
                <since>
                    JDK1.0                    
                </since>
            </javadoc>
            <declaration name="closedByWriter" type="boolean" line="51"/>
            <declaration name="closedByReader" type="boolean" line="52"/>
            <declaration name="connected" type="boolean" line="53"/>
            <declaration name="readSide" type="Thread" line="59"/>
            <declaration name="writeSide" type="Thread" line="60"/>
            <declaration name="DEFAULT_PIPE_SIZE" type="int" line="62"/>
            <declaration name="PIPE_SIZE" type="int" line="64"/>
            <javadoc line="64">
                The default size of the pipe&apos;s circular input buffer.                
                <since>
                    JDK1.1                    
                </since>
            </javadoc>
            <declaration name="buffer" type="byte" line="73"/>
            <javadoc line="73">
                The circular buffer into which incoming data is placed.                
                <since>
                    JDK1.1                    
                </since>
            </javadoc>
            <declaration name="in" type="int" line="79"/>
            <javadoc line="79">
                The index of the position in the circular buffer at which the
                  next byte of data will be stored when received from the connected
                  piped output stream. &lt;code&gt;in&amp;lt;0&lt;/code&gt; implies the buffer is empty,
                  &lt;code&gt;in==out&lt;/code&gt; implies the buffer is full                
                <since>
                    JDK1.1                    
                </since>
            </javadoc>
            <declaration name="out" type="int" line="88"/>
            <javadoc line="88">
                The index of the position in the circular buffer at which the next
                  byte of data will be read by this piped input stream.                
                <since>
                    JDK1.1                    
                </since>
            </javadoc>
            <javadoc line="95">
                Creates a &lt;code&gt;PipedInputStream&lt;/code&gt; so
                  that it is connected to the piped output
                  stream &lt;code&gt;src&lt;/code&gt;. Data bytes written
                  to &lt;code&gt;src&lt;/code&gt; will then be  available
                  as input from this stream.                
                <param>
                    src   the stream to connect to.                    
                </param>
                <exception>
                    IOException  if an I/O error occurs.                    
                </exception>
            </javadoc>
            <method name="PipedInputStream" type="constructor" line="105">
                <params>
                    <param name="src" type="PipedOutputStream"/>
                </params>
            </method>
            <javadoc line="109">
                Creates a &lt;code&gt;PipedInputStream&lt;/code&gt; so that it is
                  connected to the piped output stream
                  &lt;code&gt;src&lt;/code&gt; and uses the specified pipe size for
                  the pipe&apos;s buffer.
                  Data bytes written to &lt;code&gt;src&lt;/code&gt; will then
                  be available as input from this stream.                
                <param>
                    src   the stream to connect to.                    
                </param>
                <param>
                    pipeSize the size of the pipe&apos;s buffer.                    
                </param>
                <exception>
                    IOException  if an I/O error occurs.                    
                </exception>
                <exception>
                    IllegalArgumentException if &lt;code&gt;pipeSize &lt;= 0&lt;/code&gt;.                    
                </exception>
                <since>
                    1.6                    
                </since>
            </javadoc>
            <method name="PipedInputStream" type="constructor" line="124">
                <params>
                    <param name="src" type="PipedOutputStream"/>
                    <param name="pipeSize" type="int"/>
                </params>
            </method>
            <javadoc line="129">
                Creates a &lt;code&gt;PipedInputStream&lt;/code&gt; so
                  that it is not yet {@linkplain #connect(java.io.PipedOutputStream)connected}.
                  It must be {@linkplain java.io.PipedOutputStream#connect(java.io.PipedInputStream) connected} to a
                  &lt;code&gt;PipedOutputStream&lt;/code&gt; before being used.                
            </javadoc>
            <method name="PipedInputStream" type="constructor" line="137"/>
            <javadoc line="141">
                Creates a &lt;code&gt;PipedInputStream&lt;/code&gt; so that it is not yet{@linkplain #connect(java.io.PipedOutputStream) connected} and
                  uses the specified pipe size for the pipe&apos;s buffer.
                  It must be {@linkplain java.io.PipedOutputStream#connect(java.io.PipedInputStream)connected} to a &lt;code&gt;PipedOutputStream&lt;/code&gt; before being used.                
                <param>
                    pipeSize the size of the pipe&apos;s buffer.                    
                </param>
                <exception>
                    IllegalArgumentException if &lt;code&gt;pipeSize &lt;= 0&lt;/code&gt;.                    
                </exception>
                <since>
                    1.6                    
                </since>
            </javadoc>
            <method name="PipedInputStream" type="constructor" line="153">
                <params>
                    <param name="pipeSize" type="int"/>
                </params>
            </method>
            <method name="initPipe" type="void" line="157">
                <params>
                    <param name="pipeSize" type="int"/>
                </params>
                <scope line="158"/>
            </method>
            <javadoc line="164">
                Causes this piped input stream to be connected
                  to the piped  output stream &lt;code&gt;src&lt;/code&gt;.
                  If this object is already connected to some
                  other piped output  stream, an &lt;code&gt;IOException&lt;/code&gt;
                  is thrown.
                  &lt;p&gt;
                  If &lt;code&gt;src&lt;/code&gt; is an
                  unconnected piped output stream and &lt;code&gt;snk&lt;/code&gt;
                  is an unconnected piped input stream, they
                  may be connected by either the call:
                  &lt;p&gt;
                  &lt;pre&gt;&lt;code&gt;snk.connect(src)&lt;/code&gt; &lt;/pre&gt;
                  &lt;p&gt;
                  or the call:
                  &lt;p&gt;
                  &lt;pre&gt;&lt;code&gt;src.connect(snk)&lt;/code&gt; &lt;/pre&gt;
                  &lt;p&gt;
                  The two
                  calls have the same effect.                
                <param>
                    src   The piped output stream to connect to.                    
                </param>
                <exception>
                    IOException  if an I/O error occurs.                    
                </exception>
            </javadoc>
            <method name="connect" type="void" line="188">
                <params>
                    <param name="src" type="PipedOutputStream"/>
                </params>
            </method>
            <javadoc line="192">
                Receives a byte of data.  This method will block if no input is
                  available.                
                <param>
                    b the byte being received                    
                </param>
                <exception>
                    IOException If the pipe is &lt;a href=#BROKEN&gt; &lt;code&gt;broken&lt;/code&gt;&lt;/a&gt;,{@link #connect(java.io.PipedOutputStream) unconnected},
                      closed, or if an I/O error occurs.                    
                </exception>
                <since>
                    JDK1.1                    
                </since>
            </javadoc>
            <method name="receive" type="void" line="201">
                <params>
                    <param name="b" type="int"/>
                </params>
                <scope line="206"/>
                <scope line="211"/>
            </method>
            <javadoc line="216">
                Receives data into an array of bytes.  This method will
                  block until some input is available.                
                <param>
                    b the buffer into which the data is received                    
                </param>
                <param>
                    off the start offset of the data                    
                </param>
                <param>
                    len the maximum number of bytes received                    
                </param>
                <exception>
                    IOException If the pipe is &lt;a href=#BROKEN&gt; broken&lt;/a&gt;,{@link #connect(java.io.PipedOutputStream) unconnected},
                      closed,or if an I/O error occurs.                    
                </exception>
            </javadoc>
            <method name="receive" type="void" line="226">
                <params>
                    <param name="b" type="byte"/>
                    <param name="off" type="int"/>
                    <param name="len" type="int"/>
                </params>
                <declaration name="bytesToTransfer" type="int" line="229"/>
                <scope line="230">
                    <declaration name="nextTransferAmount" type="int" line="233"/>
                    <scope line="234"/>
                    <scope line="236">
                        <scope line="237"/>
                        <scope line="240"/>
                    </scope>
                    <scope line="251"/>
                </scope>
            </method>
            <method name="checkStateForReceive" type="void" line="257">
                <scope line="258"/>
                <scope line="260"/>
                <scope line="262"/>
            </method>
            <method name="awaitSpace" type="void" line="267">
                <comment line="272">
                                        
                </comment>
                <scope line="268">
                    <scope line="273"/>
                    <scope line="275"/>
                </scope>
            </method>
            <javadoc line="281">
                Notifies all waiting threads that the last byte of data has been
                  received.                
            </javadoc>
            <method name="receivedLast" type="void" line="285"/>
            <javadoc line="290">
                Reads the next byte of data from this piped input stream. The
                  value byte is returned as an &lt;code&gt;int&lt;/code&gt; in the range
                  &lt;code&gt;0&lt;/code&gt; to &lt;code&gt;255&lt;/code&gt;.
                  This method blocks until input data is available, the end of the
                  stream is detected, or an exception is thrown.                
                <return>
                    the next byte of data, or &lt;code&gt;-1&lt;/code&gt; if the end of the
                      stream is reached.                    
                </return>
                <exception>
                    IOException  if the pipe is{@link #connect(java.io.PipedOutputStream) unconnected},
                      &lt;a href=#BROKEN&gt; &lt;code&gt;broken&lt;/code&gt;&lt;/a&gt;, closed,
                      or if an I/O error occurs.                    
                </exception>
            </javadoc>
            <method name="read" type="int" line="304">
                <comment line="319">
                                        
                </comment>
                <comment line="325">
                                        
                </comment>
                <comment line="338">
                                        
                </comment>
                <scope line="305"/>
                <scope line="307"/>
                <scope line="310"/>
                <declaration name="trials" type="int" line="315"/>
                <scope line="316">
                    <scope line="317"/>
                    <scope line="321"/>
                    <scope line="326"/>
                    <scope line="328"/>
                </scope>
                <declaration name="ret" type="int" line="332"/>
                <scope line="333"/>
                <scope line="336"/>
            </method>
            <javadoc line="344">
                Reads up to &lt;code&gt;len&lt;/code&gt; bytes of data from this piped input
                  stream into an array of bytes. Less than &lt;code&gt;len&lt;/code&gt; bytes
                  will be read if the end of the data stream is reached or if
                  &lt;code&gt;len&lt;/code&gt; exceeds the pipe&apos;s buffer size.
                  If &lt;code&gt;len &lt;/code&gt; is zero, then no bytes are read and 0 is returned;
                  otherwise, the method blocks until at least 1 byte of input is
                  available, end of the stream has been detected, or an exception is
                  thrown.                
                <param>
                    b     the buffer into which the data is read.                    
                </param>
                <param>
                    off   the start offset in the destination array &lt;code&gt;b&lt;/code&gt;                    
                </param>
                <param>
                    len   the maximum number of bytes read.                    
                </param>
                <return>
                    the total number of bytes read into the buffer, or
                      &lt;code&gt;-1&lt;/code&gt; if there is no more data because the end of
                      the stream has been reached.                    
                </return>
                <exception>
                    NullPointerException If &lt;code&gt;b&lt;/code&gt; is &lt;code&gt;null&lt;/code&gt;.                    
                </exception>
                <exception>
                    IndexOutOfBoundsException If &lt;code&gt;off&lt;/code&gt; is negative,
                      &lt;code&gt;len&lt;/code&gt; is negative, or &lt;code&gt;len&lt;/code&gt; is greater than
                      &lt;code&gt;b.length - off&lt;/code&gt;                    
                </exception>
                <exception>
                    IOException if the pipe is &lt;a href=#BROKEN&gt; &lt;code&gt;broken&lt;/code&gt;&lt;/a&gt;,{@link #connect(java.io.PipedOutputStream) unconnected},
                      closed, or if an I/O error occurs.                    
                </exception>
            </javadoc>
            <method name="read" type="int" line="368">
                <params>
                    <param name="b" type="byte"/>
                    <param name="off" type="int"/>
                    <param name="len" type="int"/>
                </params>
                <comment line="378">
                                        
                </comment>
                <comment line="395">
                    A byte is read beforehand outside the loop                    
                </comment>
                <comment line="408">
                                        
                </comment>
                <scope line="369"/>
                <scope line="371"/>
                <scope line="373"/>
                <declaration name="c" type="int" line="378"/>
                <scope line="379"/>
                <declaration name="rlen" type="int" line="383"/>
                <scope line="384">
                    <declaration name="available" type="int" line="386"/>
                    <scope line="388"/>
                    <scope line="390"/>
                    <scope line="395"/>
                    <scope line="403"/>
                    <scope line="406"/>
                </scope>
            </method>
            <javadoc line="414">
                Returns the number of bytes that can be read from this input
                  stream without blocking.                
                <return>
                    the number of bytes that can be read from this input stream
                      without blocking, or {@code 0} if this input stream has been
                      closed by invoking its {@link #close()} method, or if the pipe
                      is {@link #connect(java.io.PipedOutputStream) unconnected}, or
                      &lt;a href=#BROKEN&gt; &lt;code&gt;broken&lt;/code&gt;&lt;/a&gt;.                    
                </return>
                <exception>
                    IOException  if an I/O error occurs.                    
                </exception>
                <since>
                    JDK1.0.2                    
                </since>
            </javadoc>
            <method name="available" type="int" line="427"/>
            <javadoc line="438">
                Closes this piped input stream and releases any system resources
                  associated with the stream.                
                <exception>
                    IOException  if an I/O error occurs.                    
                </exception>
            </javadoc>
            <method name="close" type="void" line="444">
                <scope line="446"/>
            </method>
        </class>
    </source>