<?xml version="1.0" encoding="UTF-8"?>
    <source package="java.awt.image">
        <import package="java.awt.image.ImageConsumer"/>
        <import package="java.awt.image.ColorModel"/>
        <import package="java.util.Hashtable"/>
        <import package="java.awt.Rectangle"/>
        <class name="AreaAveragingScaleFilter" line="33">
            <extends class="ReplicateScaleFilter"/>
            <javadoc line="33">
                An ImageFilter class for scaling images using a simple area averaging
                  algorithm that produces smoother results than the nearest neighbor
                  algorithm.
                  &lt;p&gt;This class extends the basic ImageFilter Class to scale an existing
                  image and provide a source for a new image containing the resampled
                  image.  The pixels in the source image are blended to produce pixels
                  for an image of the specified size.  The blending process is analogous
                  to scaling up the source image to a multiple of the destination size
                  using pixel replication and then scaling it back down to the destination
                  size by simply averaging all the pixels in the supersized image that
                  fall within a given pixel of the destination image.  If the data from
                  the source is not delivered in TopDownLeftRight order then the filter
                  will back off to a simple pixel replication behavior and utilize the
                  requestTopDownLeftRightResend() method to refilter the pixels in a
                  better way at the end.
                  &lt;p&gt;It is meant to be used in conjunction with a FilteredImageSource
                  object to produce scaled versions of existing images.  Due to
                  implementation dependencies, there may be differences in pixel values
                  of an image filtered on different platforms.                
                <see>
                    FilteredImageSource                    
                </see>
                <see>
                    ReplicateScaleFilter                    
                </see>
                <see>
                    ImageFilter                    
                </see>
                <author>
                    Jim Graham                    
                </author>
            </javadoc>
            <declaration name="rgbmodel" type="ColorModel" line="61"/>
            <declaration name="neededHints" type="int" line="62"/>
            <declaration name="passthrough" type="boolean" line="65"/>
            <declaration name="reds" type="float" line="66"/>
            <declaration name="savedy" type="int" line="67"/>
            <declaration name="savedyrem" type="int" line="68"/>
            <javadoc line="70">
                Constructs an AreaAveragingScaleFilter that scales the pixels from
                  its source Image as specified by the width and height parameters.                
                <param>
                    width the target width to scale the image                    
                </param>
                <param>
                    height the target height to scale the image                    
                </param>
            </javadoc>
            <method name="AreaAveragingScaleFilter" type="constructor" line="76">
                <params>
                    <param name="width" type="int"/>
                    <param name="height" type="int"/>
                </params>
            </method>
            <javadoc line="80">
                Detect if the data is being delivered with the necessary hints
                  to allow the averaging algorithm to do its work.
                  &lt;p&gt;
                  Note: This method is intended to be called by the
                  &lt;code&gt;ImageProducer&lt;/code&gt; of the &lt;code&gt;Image&lt;/code&gt; whose
                  pixels are being filtered.  Developers using
                  this class to filter pixels from an image should avoid calling
                  this method directly since that operation could interfere
                  with the filtering operation.                
                <see>
                    ImageConsumer#setHints                    
                </see>
            </javadoc>
            <method name="setHints" type="void" line="92">
                <params>
                    <param name="hints" type="int"/>
                </params>
            </method>
            <method name="makeAccumBuffers" type="void" line="97"/>
            <method name="calcRow" type="int[]" line="104">
                <comment line="119">
                    un-premultiply the components (by modifying mult here, we
                     are effectively doing the divide by mult and divide by
                     alpha in the same step)                    
                </comment>
                <declaration name="origmult" type="float" line="105"/>
                <scope line="106"/>
                <declaration name="outpix" type="int[]" line="109"/>
                <scope line="110">
                    <declaration name="mult" type="float" line="111"/>
                    <declaration name="a" type="int" line="112"/>
                    <scope line="113"/>
                    <scope line="115"/>
                    <scope line="117"/>
                    <declaration name="r" type="int" line="123"/>
                    <declaration name="g" type="int" line="124"/>
                    <declaration name="b" type="int" line="125"/>
                    <scope line="126"/>
                    <scope line="126"/>
                    <scope line="127"/>
                    <scope line="127"/>
                    <scope line="128"/>
                    <scope line="128"/>
                </scope>
            </method>
            <method name="accumPixels" type="void" line="136">
                <params>
                    <param name="x" type="int"/>
                    <param name="y" type="int"/>
                    <param name="w" type="int"/>
                    <param name="h" type="int"/>
                    <param name="model" type="ColorModel"/>
                    <param name="pixels" type="Object"/>
                    <param name="off" type="int"/>
                    <param name="scansize" type="int"/>
                </params>
                <comment line="178">
                    getRGB() always returns non-premultiplied components                    
                </comment>
                <comment line="184">
                    premultiply the components if necessary                    
                </comment>
                <scope line="137"/>
                <declaration name="sy" type="int" line="140"/>
                <declaration name="syrem" type="int" line="141"/>
                <declaration name="dy" type="int" line="142"/>
                <scope line="143"/>
                <scope line="146"/>
                <scope line="150">
                    <declaration name="amty" type="int" line="151"/>
                    <scope line="152">
                        <scope line="153"/>
                    </scope>
                    <scope line="158"/>
                    <scope line="160"/>
                    <declaration name="sx" type="int" line="163"/>
                    <declaration name="dx" type="int" line="164"/>
                    <declaration name="sxrem" type="int" line="165"/>
                    <declaration name="dxrem" type="int" line="166"/>
                    <declaration name="a" type="float" line="167"/>
                    <scope line="168">
                        <scope line="169">
                            <declaration name="rgb" type="int" line="171"/>
                            <scope line="172"/>
                            <scope line="174"/>
                            <scope line="184">
                                <declaration name="ascale" type="float" line="185"/>
                            </scope>
                        </scope>
                        <declaration name="amtx" type="int" line="191"/>
                        <scope line="192"/>
                        <scope line="194"/>
                        <declaration name="mult" type="float" line="197"/>
                        <scope line="202"/>
                        <scope line="205"/>
                    </scope>
                    <scope line="210">
                        <declaration name="outpix" type="int" line="211"/>
                        <scope line="212"/>
                    </scope>
                    <scope line="217"/>
                    <scope line="220"/>
                </scope>
            </method>
            <javadoc line="230">
                Combine the components for the delivered byte pixels into the
                  accumulation arrays and send on any averaged data for rows of
                  pixels that are complete.  If the correct hints were not
                  specified in the setHints call then relay the work to our
                  superclass which is capable of scaling pixels regardless of
                  the delivery hints.
                  &lt;p&gt;
                  Note: This method is intended to be called by the
                  &lt;code&gt;ImageProducer&lt;/code&gt; of the &lt;code&gt;Image&lt;/code&gt;
                  whose pixels are being filtered.  Developers using
                  this class to filter pixels from an image should avoid calling
                  this method directly since that operation could interfere
                  with the filtering operation.                
                <see>
                    ReplicateScaleFilter                    
                </see>
            </javadoc>
            <method name="setPixels" type="void" line="248">
                <params>
                    <param name="x" type="int"/>
                    <param name="y" type="int"/>
                    <param name="w" type="int"/>
                    <param name="h" type="int"/>
                    <param name="model" type="ColorModel"/>
                    <param name="pixels" type="byte"/>
                    <param name="off" type="int"/>
                    <param name="scansize" type="int"/>
                </params>
                <scope line="249"/>
                <scope line="251"/>
            </method>
            <javadoc line="256">
                Combine the components for the delivered int pixels into the
                  accumulation arrays and send on any averaged data for rows of
                  pixels that are complete.  If the correct hints were not
                  specified in the setHints call then relay the work to our
                  superclass which is capable of scaling pixels regardless of
                  the delivery hints.
                  &lt;p&gt;
                  Note: This method is intended to be called by the
                  &lt;code&gt;ImageProducer&lt;/code&gt; of the &lt;code&gt;Image&lt;/code&gt;
                  whose pixels are being filtered.  Developers using
                  this class to filter pixels from an image should avoid calling
                  this method directly since that operation could interfere
                  with the filtering operation.                
                <see>
                    ReplicateScaleFilter                    
                </see>
            </javadoc>
            <method name="setPixels" type="void" line="274">
                <params>
                    <param name="x" type="int"/>
                    <param name="y" type="int"/>
                    <param name="w" type="int"/>
                    <param name="h" type="int"/>
                    <param name="model" type="ColorModel"/>
                    <param name="pixels" type="int"/>
                    <param name="off" type="int"/>
                    <param name="scansize" type="int"/>
                </params>
                <scope line="275"/>
                <scope line="277"/>
            </method>
        </class>
    </source>