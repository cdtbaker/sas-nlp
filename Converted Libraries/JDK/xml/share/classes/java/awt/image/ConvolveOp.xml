<?xml version="1.0" encoding="UTF-8"?>
    <source package="java.awt.image">
        <import package="java.awt.color.ICC_Profile"/>
        <import package="java.awt.geom.Rectangle2D"/>
        <import package="java.awt.Rectangle"/>
        <import package="java.awt.RenderingHints"/>
        <import package="java.awt.geom.Point2D"/>
        <import package="sun.awt.image.ImagingLib"/>
        <class name="ConvolveOp" line="35">
            <comment line="73">
                Edge condition constants.                
            </comment>
            <implements interface="BufferedImageOp"/>
            <implements interface="RasterOp"/>
            <javadoc line="35">
                This class implements a convolution from the source
                  to the destination.
                  Convolution using a convolution kernel is a spatial operation that
                  computes the output pixel from an input pixel by multiplying the kernel
                  with the surround of the input pixel.
                  This allows the output pixel to be affected by the immediate neighborhood
                  in a way that can be mathematically specified with a kernel.
                  &lt;p&gt;
                  This class operates with BufferedImage data in which color components are
                  premultiplied with the alpha component.  If the Source BufferedImage has
                  an alpha component, and the color components are not premultiplied with
                  the alpha component, then the data are premultiplied before being
                  convolved.  If the Destination has color components which are not
                  premultiplied, then alpha is divided out before storing into the
                  Destination (if alpha is 0, the color components are set to 0).  If the
                  Destination has no alpha component, then the resulting alpha is discarded
                  after first dividing it out of the color components.
                  &lt;p&gt;
                  Rasters are treated as having no alpha channel.  If the above treatment
                  of the alpha channel in BufferedImages is not desired, it may be avoided
                  by getting the Raster of a source BufferedImage and using the filter method
                  of this class which works with Rasters.
                  &lt;p&gt;
                  If a RenderingHints object is specified in the constructor, the
                  color rendering hint and the dithering hint may be used when color
                  conversion is required.
                  &lt;p&gt;
                  Note that the Source and the Destination may not be the same object.                
                <see>
                    Kernel                    
                </see>
                <see>
                    java.awt.RenderingHints#KEY_COLOR_RENDERING                    
                </see>
                <see>
                    java.awt.RenderingHints#KEY_DITHERING                    
                </see>
            </javadoc>
            <declaration name="kernel" type="Kernel" line="69"/>
            <declaration name="edgeHint" type="int" line="70"/>
            <declaration name="hints" type="RenderingHints" line="71"/>
            <declaration name="EDGE_ZERO_FILL" type="int" line="76"/>
            <javadoc line="76">
                Pixels at the edge of the destination image are set to zero.  This
                  is the default.                
            </javadoc>
            <declaration name="EDGE_NO_OP" type="int" line="83"/>
            <javadoc line="83">
                Pixels at the edge of the source image are copied to
                  the corresponding pixels in the destination without modification.                
            </javadoc>
            <javadoc line="89">
                Constructs a ConvolveOp given a Kernel, an edge condition, and a
                  RenderingHints object (which may be null).                
                <param>
                    kernel the specified <code>Kernel</code>                    
                </param>
                <param>
                    edgeCondition the specified edge condition                    
                </param>
                <param>
                    hints the specified <code>RenderingHints</code> object                    
                </param>
                <see>
                    Kernel                    
                </see>
                <see>
                    #EDGE_NO_OP                    
                </see>
                <see>
                    #EDGE_ZERO_FILL                    
                </see>
                <see>
                    java.awt.RenderingHints                    
                </see>
            </javadoc>
            <method name="ConvolveOp" type="constructor" line="100">
                <params>
                    <param name="kernel" type="Kernel"/>
                    <param name="edgeCondition" type="int"/>
                    <param name="hints" type="RenderingHints"/>
                </params>
            </method>
            <javadoc line="106">
                Constructs a ConvolveOp given a Kernel.  The edge condition
                  will be EDGE_ZERO_FILL.                
                <param>
                    kernel the specified <code>Kernel</code>                    
                </param>
                <see>
                    Kernel                    
                </see>
                <see>
                    #EDGE_ZERO_FILL                    
                </see>
            </javadoc>
            <method name="ConvolveOp" type="constructor" line="113">
                <params>
                    <param name="kernel" type="Kernel"/>
                </params>
            </method>
            <javadoc line="118">
                Returns the edge condition.                
                <return>
                    the edge condition of this <code>ConvolveOp</code>.                    
                </return>
                <see>
                    #EDGE_NO_OP                    
                </see>
                <see>
                    #EDGE_ZERO_FILL                    
                </see>
            </javadoc>
            <method name="getEdgeCondition" type="int" line="124"/>
            <javadoc line="128">
                Returns the Kernel.                
                <return>
                    the <code>Kernel</code> of this <code>ConvolveOp</code>.                    
                </return>
            </javadoc>
            <method name="getKernel" type="Kernel" line="132"/>
            <javadoc line="136">
                Performs a convolution on BufferedImages.  Each component of the
                  source image will be convolved (including the alpha component, if
                  present).
                  If the color model in the source image is not the same as that
                  in the destination image, the pixels will be converted
                  in the destination.  If the destination image is null,
                  a BufferedImage will be created with the source ColorModel.
                  The IllegalArgumentException may be thrown if the source is the
                  same as the destination.                
                <param>
                    src the source <code>BufferedImage</code> to filter                    
                </param>
                <param>
                    dst the destination <code>BufferedImage</code> for the
                      filtered <code>src</code>                    
                </param>
                <return>
                    the filtered <code>BufferedImage</code>                    
                </return>
                <throws>
                    NullPointerException if <code>src</code> is <code>null</code>                    
                </throws>
                <throws>
                    IllegalArgumentException if <code>src</code> equals
                      <code>dst</code>                    
                </throws>
                <throws>
                    ImagingOpException if <code>src</code> cannot be filtered                    
                </throws>
            </javadoc>
            <method name="filter" type="BufferedImage" line="155">
                <params>
                    <param name="src" type="BufferedImage"/>
                    <param name="dst" type="BufferedImage"/>
                </params>
                <comment line="169">
                    Can&apos;t convolve an IndexColorModel.  Need to expand it                    
                </comment>
                <scope line="156"/>
                <scope line="159"/>
                <declaration name="needToConvert" type="boolean" line="164"/>
                <declaration name="srcCM" type="ColorModel" line="165"/>
                <declaration name="dstCM" type="ColorModel" line="166"/>
                <declaration name="origDst" type="BufferedImage" line="167"/>
                <scope line="170">
                    <declaration name="icm" type="IndexColorModel" line="171"/>
                </scope>
                <scope line="176"/>
                <scope line="181">
                    <scope line="185"/>
                    <scope line="190"/>
                </scope>
                <scope line="196"/>
                <scope line="200">
                    <declaration name="ccop" type="ColorConvertOp" line="201"/>
                </scope>
                <scope line="204">
                    <declaration name="g" type="java.awt.Graphics2D" line="205"/>
                    <scope line="206"/>
                    <scope line="208"/>
                </scope>
            </method>
            <javadoc line="216">
                Performs a convolution on Rasters.  Each band of the source Raster
                  will be convolved.
                  The source and destination must have the same number of bands.
                  If the destination Raster is null, a new Raster will be created.
                  The IllegalArgumentException may be thrown if the source is
                  the same as the destination.                
                <param>
                    src the source <code>Raster</code> to filter                    
                </param>
                <param>
                    dst the destination <code>WritableRaster</code> for the
                      filtered <code>src</code>                    
                </param>
                <return>
                    the filtered <code>WritableRaster</code>                    
                </return>
                <throws>
                    NullPointerException if <code>src</code> is <code>null</code>                    
                </throws>
                <throws>
                    ImagingOpException if <code>src</code> and <code>dst</code>
                      do not have the same number of bands                    
                </throws>
                <throws>
                    ImagingOpException if <code>src</code> cannot be filtered                    
                </throws>
                <throws>
                    IllegalArgumentException if <code>src</code> equals
                      <code>dst</code>                    
                </throws>
            </javadoc>
            <method name="filter" type="WritableRaster" line="234">
                <params>
                    <param name="src" type="Raster"/>
                    <param name="dst" type="WritableRaster"/>
                </params>
                <scope line="235"/>
                <scope line="238"/>
                <scope line="242"/>
                <scope line="247"/>
            </method>
            <javadoc line="254">
                Creates a zeroed destination image with the correct size and number
                  of bands.  If destCM is null, an appropriate ColorModel will be used.                
                <param>
                    src       Source image for the filter operation.                    
                </param>
                <param>
                    destCM    ColorModel of the destination.  Can be null.                    
                </param>
                <return>
                    a destination <code>BufferedImage</code> with the correct
                      size and number of bands.                    
                </return>
            </javadoc>
            <method name="createCompatibleDestImage" type="BufferedImage" line="263">
                <params>
                    <param name="src" type="BufferedImage"/>
                    <param name="destCM" type="ColorModel"/>
                </params>
                <comment line="273">
                    Not much support for ICM                    
                </comment>
                <comment line="277">
                    Create destination image as similar to the source
                      as it possible...                    
                </comment>
                <comment line="285">
                    This is the case when destination color model
                     was explicitly specified (and it may be not compatible
                     with source raster structure) or source is indexed image.
                     We should use destination color model to create compatible
                     destination raster here.                    
                </comment>
                <declaration name="image" type="BufferedImage" line="264"/>
                <declaration name="w" type="int" line="266"/>
                <declaration name="h" type="int" line="267"/>
                <declaration name="wr" type="WritableRaster" line="269"/>
                <scope line="271">
                    <scope line="274"/>
                    <scope line="276"/>
                </scope>
                <scope line="284"/>
            </method>
            <javadoc line="300">
                Creates a zeroed destination Raster with the correct size and number
                  of bands, given this source.                
            </javadoc>
            <method name="createCompatibleDestRaster" type="WritableRaster" line="304">
                <params>
                    <param name="src" type="Raster"/>
                </params>
            </method>
            <javadoc line="308">
                Returns the bounding box of the filtered destination image.  Since
                  this is not a geometric operation, the bounding box does not
                  change.                
            </javadoc>
            <method name="getBounds2D" type="Rectangle2D" line="313">
                <params>
                    <param name="src" type="BufferedImage"/>
                </params>
            </method>
            <javadoc line="317">
                Returns the bounding box of the filtered destination Raster.  Since
                  this is not a geometric operation, the bounding box does not
                  change.                
            </javadoc>
            <method name="getBounds2D" type="Rectangle2D" line="322">
                <params>
                    <param name="src" type="Raster"/>
                </params>
            </method>
            <javadoc line="326">
                Returns the location of the destination point given a
                  point in the source.  If dstPt is non-null, it will
                  be used to hold the return value.  Since this is not a geometric
                  operation, the srcPt will equal the dstPt.                
            </javadoc>
            <method name="getPoint2D" type="Point2D" line="332">
                <params>
                    <param name="srcPt" type="Point2D"/>
                    <param name="dstPt" type="Point2D"/>
                </params>
                <scope line="333"/>
            </method>
            <javadoc line="341">
                Returns the rendering hints for this op.                
            </javadoc>
            <method name="getRenderingHints" type="RenderingHints" line="344"/>
        </class>
    </source>