<?xml version="1.0" encoding="UTF-8"?>
    <source package="">
        <import package="java.applet.Applet"/>
        <import package="java.awt.Image"/>
        <import package="java.awt.Graphics"/>
        <import package="java.awt.Dimension"/>
        <import package="java.awt.event.MouseEvent"/>
        <import package="java.awt.event.MouseListener"/>
        <import package="java.awt.event.MouseMotionListener"/>
        <import package="java.net.URL"/>
        <import package="java.awt.image.IndexColorModel"/>
        <import package="java.awt.image.MemoryImageSource"/>
        <import package="java.io.BufferedReader"/>
        <import package="java.io.IOException"/>
        <import package="java.io.InputStream"/>
        <import package="java.io.InputStreamReader"/>
        <import package="java.io.StreamTokenizer"/>
        <import package="java.util.HashMap"/>
        <import package="java.util.Map"/>
        <import package="java.util.logging.Level"/>
        <import package="java.util.logging.Logger"/>
        <class name="XYZChemModel" line="58">
            <comment line="140">
                end XYZChemModel()                
            </comment>
            <comment line="384">
                                
            </comment>
            <javadoc line="58">
                The representation of a Chemical .xyz model                
            </javadoc>
            <declaration name="vert" type="float" line="61"/>
            <declaration name="atoms" type="Atom" line="62"/>
            <declaration name="tvert" type="int" line="63"/>
            <declaration name="ZsortMap" type="int" line="64"/>
            <declaration name="nvert" type="int" line="65"/>
            <declaration name="atomTable" type="Map&lt;String,Atom&gt;" line="66"/>
            <declaration name="defaultAtom" type="Atom" line="67"/>
            <scope line="69"/>
            <declaration name="transformed" type="boolean" line="79"/>
            <declaration name="mat" type="Matrix3D" line="80"/>
            <declaration name="xmin" type="float" line="81"/>
            <method name="XYZChemModel" type="constructor" line="83"/>
            <javadoc line="89">
                Create a Chemical model by parsing an input stream                
            </javadoc>
            <method name="XYZChemModel" type="constructor" line="90">
                <params>
                    <param name="is" type="InputStream"/>
                </params>
                <comment line="126">
                    end Switch                    
                </comment>
                <comment line="128">
                    end while                    
                </comment>
                <comment line="132">
                    end Try                    
                </comment>
                <declaration name="st" type="StreamTokenizer" line="92"/>
                <scope line="97">
                    <scope line="99">
                        <declaration name="name" type="String" line="106"/>
                        <declaration name="x" type="double" line="107"/>
                        <scope line="110">
                            <scope line="112">
                                <scope line="114"/>
                            </scope>
                        </scope>
                        <scope line="121"/>
                    </scope>
                </scope>
                <scope line="132"/>
                <scope line="135"/>
            </method>
            <javadoc line="141">
                Add a vertex to this model                
            </javadoc>
            <method name="addVert" type="int" line="142">
                <params>
                    <param name="name" type="String"/>
                    <param name="x" type="float"/>
                    <param name="y" type="float"/>
                    <param name="z" type="float"/>
                </params>
                <declaration name="i" type="int" line="143"/>
                <scope line="144">
                    <scope line="145"/>
                    <scope line="149">
                        <declaration name="nv" type="float" line="151"/>
                        <declaration name="na" type="Atom" line="154"/>
                    </scope>
                </scope>
                <declaration name="a" type="Atom" line="159"/>
                <scope line="160"/>
            </method>
            <javadoc line="171">
                Transform all the points in this model                
            </javadoc>
            <method name="transform" type="void" line="172">
                <scope line="173"/>
                <scope line="176"/>
            </method>
            <javadoc line="183">
                Paint this model to a graphics context.  It uses the matrix associated
                  with this model to map from model space to screen space.
                  The next version of the browser should have double buffering,
                  which will make this much nicer                
            </javadoc>
            <method name="paint" type="void" line="187">
                <params>
                    <param name="g" type="Graphics"/>
                </params>
                <comment line="202">
                    I use a bubble sort since from one iteration to the next, the sort
                     order is pretty stable, so I just use what I had last time as a
                     &quot;guess&quot; of the sorted order.  With luck, this reduces O(N log N)
                     to O(N)                    
                </comment>
                <comment line="238">
                    g.drawString(names[i], v[j], v[j+1]);                    
                </comment>
                <comment line="240">
                    g.drawImage(iBall, v[j] - (iBall.width &gt;&gt; 1), v[j + 1] -
                     (iBall.height &gt;&gt; 1));                    
                </comment>
                <scope line="188"/>
                <declaration name="v" type="int" line="192"/>
                <declaration name="zs" type="int" line="193"/>
                <scope line="194">
                    <scope line="196"/>
                </scope>
                <scope line="208">
                    <declaration name="flipped" type="boolean" line="209"/>
                    <scope line="210">
                        <declaration name="a" type="int" line="211"/>
                        <declaration name="b" type="int" line="212"/>
                        <scope line="213"/>
                    </scope>
                    <scope line="219"/>
                </scope>
                <declaration name="lim" type="int" line="224"/>
                <scope line="225"/>
                <scope line="228">
                    <declaration name="j" type="int" line="229"/>
                    <declaration name="grey" type="int" line="230"/>
                    <scope line="231"/>
                    <scope line="234"/>
                </scope>
            </method>
            <javadoc line="244">
                Find the bounding box of this model                
            </javadoc>
            <method name="findBB" type="void" line="245">
                <scope line="246"/>
                <declaration name="v" type="float" line="249"/>
                <declaration name="_xmin" type="float" line="250"/>
                <declaration name="_ymin" type="float" line="251"/>
                <declaration name="_zmin" type="float" line="252"/>
                <scope line="253">
                    <declaration name="x" type="float" line="254"/>
                    <scope line="255"/>
                    <scope line="258"/>
                    <declaration name="y" type="float" line="261"/>
                    <scope line="262"/>
                    <scope line="265"/>
                    <declaration name="z" type="float" line="268"/>
                    <scope line="269"/>
                    <scope line="272"/>
                </scope>
            </method>
        </class>
        <class name="XYZApp" line="286">
            <extends class="Applet"/>
            <comment line="140">
                end XYZChemModel()                
            </comment>
            <comment line="384">
                                
            </comment>
            <implements interface="Runnable"/>
            <implements interface="MouseListener"/>
            <implements interface="MouseMotionListener"/>
            <javadoc line="286">
                An applet to put a Chemical model into a page                
            </javadoc>
            <declaration name="md" type="XYZChemModel" line="291"/>
            <declaration name="painted" type="boolean" line="292"/>
            <declaration name="xfac" type="float" line="293"/>
            <declaration name="prevx" type="int" line="294"/>
            <declaration name="scalefudge" type="float" line="295"/>
            <declaration name="amat" type="Matrix3D" line="296"/>
            <declaration name="mdname" type="String" line="297"/>
            <declaration name="message" type="String" line="298"/>
            <declaration name="backBuffer" type="Image" line="299"/>
            <declaration name="backGC" type="Graphics" line="300"/>
            <declaration name="backSize" type="Dimension" line="301"/>
            <method name="newBackBuffer" type="void" line="303">
                <scope line="305"/>
            </method>
            <method name="init" type="void" line="313">
                <scope line="315"/>
                <scope line="317"/>
                <scope line="321"/>
            </method>
            <method name="destroy" type="void" line="332"/>
            <method name="run" type="void" line="338">
                <declaration name="is" type="InputStream" line="339"/>
                <scope line="340">
                    <declaration name="m" type="XYZChemModel" line="343"/>
                    <declaration name="xw" type="float" line="347"/>
                    <declaration name="yw" type="float" line="348"/>
                    <declaration name="zw" type="float" line="349"/>
                    <scope line="350"/>
                    <scope line="353"/>
                    <declaration name="f1" type="float" line="356"/>
                    <declaration name="f2" type="float" line="357"/>
                </scope>
                <scope line="359"/>
                <scope line="364">
                    <scope line="365"/>
                </scope>
                <scope line="368"/>
            </method>
            <method name="start" type="void" line="374">
                <scope line="375"/>
            </method>
            <method name="stop" type="void" line="381"/>
            <method name="mouseClicked" type="void" line="386">
                <params>
                    <param name="e" type="MouseEvent"/>
                </params>
            </method>
            <method name="mousePressed" type="void" line="390">
                <params>
                    <param name="e" type="MouseEvent"/>
                </params>
            </method>
            <method name="mouseReleased" type="void" line="397">
                <params>
                    <param name="e" type="MouseEvent"/>
                </params>
            </method>
            <method name="mouseEntered" type="void" line="401">
                <params>
                    <param name="e" type="MouseEvent"/>
                </params>
            </method>
            <method name="mouseExited" type="void" line="405">
                <params>
                    <param name="e" type="MouseEvent"/>
                </params>
            </method>
            <method name="mouseDragged" type="void" line="409">
                <params>
                    <param name="e" type="MouseEvent"/>
                </params>
                <declaration name="x" type="int" line="410"/>
                <declaration name="y" type="int" line="411"/>
                <declaration name="xtheta" type="float" line="413"/>
                <declaration name="ytheta" type="float" line="414"/>
                <scope line="418"/>
            </method>
            <method name="mouseMoved" type="void" line="428">
                <params>
                    <param name="e" type="MouseEvent"/>
                </params>
            </method>
            <method name="update" type="void" line="432">
                <params>
                    <param name="g" type="Graphics"/>
                </params>
                <scope line="433"/>
            </method>
            <method name="paint" type="void" line="440">
                <params>
                    <param name="g" type="Graphics"/>
                </params>
                <comment line="448">
                    md.mat.scale(xfac, -xfac, 8 * xfac / getSize().width);                    
                </comment>
                <scope line="441">
                    <scope line="451">
                        <scope line="452"/>
                    </scope>
                    <scope line="459"/>
                </scope>
                <scope line="463"/>
            </method>
            <method name="setPainted" type="void" line="469"/>
            <method name="getAppletInfo" type="String" line="475"/>
            <method name="getParameterInfo" type="String[][]" line="481">
                <declaration name="info" type="String[][]" line="482"/>
            </method>
        </class>
        <class name="Atom" line="494">
            <comment line="140">
                end XYZChemModel()                
            </comment>
            <comment line="384">
                                
            </comment>
            <declaration name="applet" type="Applet" line="496"/>
            <declaration name="data" type="byte[]" line="497"/>
            <declaration name="R" type="int" line="498"/>
            <declaration name="hx" type="int" line="499"/>
            <declaration name="hy" type="int" line="500"/>
            <declaration name="bgGrey" type="int" line="501"/>
            <declaration name="nBalls" type="int" line="502"/>
            <declaration name="maxr" type="int" line="503"/>
            <declaration name="Rl" type="int" line="504"/>
            <declaration name="Gl" type="int" line="505"/>
            <declaration name="Bl" type="int" line="506"/>
            <declaration name="balls" type="Image" line="507"/>
            <scope line="509">
                <declaration name="mr" type="int" line="511"/>
                <scope line="512">
                    <declaration name="x0" type="int" line="513"/>
                    <declaration name="p" type="int" line="514"/>
                    <scope line="515">
                        <declaration name="x" type="int" line="516"/>
                        <declaration name="y" type="int" line="517"/>
                        <declaration name="r" type="int" line="518"/>
                        <scope line="519"/>
                    </scope>
                </scope>
            </scope>
            <method name="setApplet" type="void" line="528">
                <params>
                    <param name="app" type="Applet"/>
                </params>
            </method>
            <method name="Atom" type="constructor" line="532">
                <params>
                    <param name="Rl" type="int"/>
                    <param name="Gl" type="int"/>
                    <param name="Bl" type="int"/>
                </params>
            </method>
            <method name="blend" type="int" line="538">
                <params>
                    <param name="fg" type="int"/>
                    <param name="bg" type="int"/>
                    <param name="fgfactor" type="float"/>
                </params>
            </method>
            <method name="Setup" type="void" line="542">
                <declaration name="red" type="byte" line="544"/>
                <declaration name="green" type="byte" line="546"/>
                <declaration name="blue" type="byte" line="548"/>
                <scope line="550">
                    <declaration name="b" type="float" line="551"/>
                    <scope line="552">
                        <declaration name="d" type="float" line="553"/>
                    </scope>
                    <declaration name="model" type="IndexColorModel" line="558"/>
                </scope>
            </method>
            <method name="paint" type="void" line="565">
                <params>
                    <param name="gc" type="Graphics"/>
                    <param name="x" type="int"/>
                    <param name="y" type="int"/>
                    <param name="r" type="int"/>
                </params>
                <declaration name="ba" type="Image" line="566"/>
                <scope line="567"/>
                <declaration name="i" type="Image" line="571"/>
                <declaration name="size" type="int" line="572"/>
            </method>
        </class>
    </source>