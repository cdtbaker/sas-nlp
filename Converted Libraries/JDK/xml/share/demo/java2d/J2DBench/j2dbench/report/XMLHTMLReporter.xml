<?xml version="1.0" encoding="UTF-8"?>
    <source package="
 * XMLHTMLReporter.java
 * Generates HTML reports from XML results
 * @author Rakesh Menon
 */
package j2dbench.report">
        <import package="java.io"/>
        <import package="java.util"/>
        <import package="java.text.DecimalFormat"/>
        <import package="java.text.SimpleDateFormat"/>
        <javadoc line="32">
            XMLHTMLReporter.java
              Generates HTML reports from XML results            
            <author>
                Rakesh Menon                
            </author>
        </javadoc>
        <class name="XMLHTMLReporter" line="47">
            <declaration name="HTMLGEN_FILE_NEW" type="int" line="49"/>
            <javadoc line="49">
                Flag to indicate - Generate new report or append to existing report                
            </javadoc>
            <declaration name="HTMLGEN_FILE_UPDATE" type="int" line="53"/>
            <declaration name="resultsDir" type="String" line="55"/>
            <javadoc line="55">
                Path to results directory where all results are stored                
            </javadoc>
            <declaration name="groups" type="List" line="60"/>
            <javadoc line="60">
                Holds the groups and corresponding group-display-names                
            </javadoc>
            <declaration name="groupNames" type="Map" line="64"/>
            <declaration name="LEVEL" type="int" line="66"/>
            <javadoc line="66">
                Level at which tests are grouped to be displayed in summary                
            </javadoc>
            <declaration name="color" type="String[]" line="71"/>
            <javadoc line="71">
                Color -&gt; Better, Same, Worse                
            </javadoc>
            <declaration name="baseBuild" type="String" line="76"/>
            <javadoc line="76">
                String for holding base-build and target-build version                
            </javadoc>
            <declaration name="targetBuild" type="String" line="80"/>
            <declaration name="decimalFormat" type="DecimalFormat" line="82"/>
            <declaration name="dateFormat" type="SimpleDateFormat" line="84"/>
            <method name="setGroupLevel" type="void" line="87">
                <params>
                    <param name="level" type="int"/>
                </params>
            </method>
            <javadoc line="91">
                Add Test Group to the list                
            </javadoc>
            <method name="addGroup" type="void" line="94">
                <params>
                    <param name="testName" type="String"/>
                </params>
                <declaration name="testNameSplit" type="String" line="96"/>
                <declaration name="group" type="String" line="97"/>
                <scope line="98"/>
                <scope line="102"/>
            </method>
            <javadoc line="108">
                Generate a Display Name for this group                
            </javadoc>
            <method name="getDisplayGroupName" type="String" line="111">
                <params>
                    <param name="group" type="String"/>
                </params>
                <declaration name="groupSplit" type="String" line="113"/>
                <declaration name="groupName" type="StringBuffer" line="115"/>
                <declaration name="tempName" type="String" line="116"/>
                <scope line="118">
                    <scope line="121"/>
                    <scope line="123"/>
                </scope>
            </method>
            <javadoc line="131">
                Get the group to which this testcase belongs                
            </javadoc>
            <method name="getGroup" type="String" line="134">
                <params>
                    <param name="testName" type="String"/>
                </params>
                <declaration name="testNameSplit" type="String" line="136"/>
                <declaration name="group" type="String" line="137"/>
                <scope line="138"/>
            </method>
            <javadoc line="145">
                Opens a File and returns a PrintWriter instance based on new/update
                  option specified in argument.                
            </javadoc>
            <method name="openFile" type="PrintWriter" line="149">
                <params>
                    <param name="name" type="String"/>
                    <param name="nSwitch" type="int"/>
                </params>
                <comment line="157">
                    HTMLGEN_FILE_NEW                    
                </comment>
                <comment line="160">
                    HTMLGEN_FILE_UPDATE                    
                </comment>
                <declaration name="file" type="FileOutputStream" line="151"/>
                <declaration name="writer" type="OutputStreamWriter" line="152"/>
                <scope line="154"/>
                <scope line="164"/>
            </method>
            <javadoc line="172">
                Generate an HTML report based on the XML results file passed -
                  J2DBench_Results.html                
            </javadoc>
            <method name="generateReport" type="void" line="176">
                <params>
                    <param name="resultsDir" type="String"/>
                    <param name="xmlFileName" type="String"/>
                </params>
                <comment line="225">
                    System Properties                    
                </comment>
                <scope line="178">
                    <declaration name="strhtml" type="String" line="180"/>
                    <declaration name="strstr" type="String" line="181"/>
                    <declaration name="tempstr2" type="String[]" line="182"/>
                    <declaration name="tempstr" type="String[]" line="183"/>
                    <declaration name="srsh" type="J2DAnalyzer.SingleResultSetHolder" line="186"/>
                    <declaration name="enum_" type="Enumeration" line="189"/>
                    <declaration name="keyvector" type="Vector" line="190"/>
                    <scope line="191"/>
                    <declaration name="keys" type="String" line="194"/>
                    <declaration name="reportFile" type="File" line="198"/>
                    <declaration name="writer" type="PrintWriter" line="199"/>
                    <declaration name="key" type="String" line="228"/>
                    <declaration name="value" type="String" line="229"/>
                    <declaration name="sysProps" type="Map" line="230"/>
                    <declaration name="iter" type="Iterator" line="231"/>
                    <scope line="232"/>
                    <scope line="261">
                        <declaration name="testResult" type="J2DAnalyzer.ResultHolder" line="263"/>
                        <declaration name="map" type="Map" line="271"/>
                        <scope line="273"/>
                    </scope>
                </scope>
                <scope line="294"/>
            </method>
            <javadoc line="299">
                Generate the reports from the base &amp; target result XML                
            </javadoc>
            <method name="generateComparisonReport" type="void" line="304">
                <params>
                    <param name="resultsDir" type="String"/>
                    <param name="baseXMLFileName" type="String"/>
                    <param name="targetXMLFileName" type="String"/>
                </params>
                <comment line="309">
                    Get Base XML File ResultSetHolder                    
                </comment>
                <comment line="322">
                    Get Target XML File ResultSetHolder                    
                </comment>
                <comment line="399">
                    Add the Test to Group List                    
                </comment>
                <declaration name="baseSRSH" type="J2DAnalyzer.SingleResultSetHolder" line="310"/>
                <declaration name="baseEnum_" type="Enumeration" line="312"/>
                <declaration name="baseKeyvector" type="Vector" line="313"/>
                <scope line="314"/>
                <declaration name="baseKeys" type="String" line="317"/>
                <declaration name="targetSRSH" type="J2DAnalyzer.SingleResultSetHolder" line="323"/>
                <declaration name="targetEnum_" type="Enumeration" line="326"/>
                <declaration name="targetKeyvector" type="Vector" line="327"/>
                <scope line="328"/>
                <declaration name="targetKeys" type="String" line="331"/>
                <declaration name="reportFile" type="File" line="339"/>
                <declaration name="writer" type="PrintWriter" line="340"/>
                <declaration name="header" type="String" line="343"/>
                <declaration name="startTags" type="StringBuffer" line="349"/>
                <declaration name="worseResultTags" type="StringBuffer" line="367"/>
                <declaration name="sameResultTags" type="StringBuffer" line="368"/>
                <declaration name="betterResultTags" type="StringBuffer" line="369"/>
                <declaration name="consolBaseRes" type="Map" line="371"/>
                <declaration name="consolTargetResult" type="Map" line="372"/>
                <declaration name="testCaseBaseResult" type="Map" line="374"/>
                <declaration name="testCaseResultCount" type="Map" line="375"/>
                <declaration name="testCaseTargetResult" type="Map" line="376"/>
                <scope line="378">
                    <declaration name="baseTCR" type="J2DAnalyzer.ResultHolder" line="380"/>
                    <declaration name="targetTCR" type="J2DAnalyzer.ResultHolder" line="382"/>
                    <declaration name="curTestCountObj" type="Object" line="385"/>
                    <declaration name="curTestCount" type="int" line="386"/>
                    <scope line="387"/>
                    <declaration name="baseScore" type="double" line="403"/>
                    <declaration name="targetScore" type="double" line="404"/>
                    <declaration name="selColorIndex" type="int" line="406"/>
                    <declaration name="tagBuffer" type="StringBuffer" line="408"/>
                    <declaration name="map" type="Map" line="418"/>
                    <declaration name="iter" type="Iterator" line="419"/>
                    <scope line="420">
                        <declaration name="key" type="Object" line="421"/>
                        <declaration name="value" type="Object" line="422"/>
                    </scope>
                    <declaration name="curTotalScoreObj" type="Object" line="451"/>
                    <declaration name="curTotalScore" type="double" line="452"/>
                    <scope line="453"/>
                    <scope line="461"/>
                </scope>
            </method>
            <javadoc line="514">
                Generate Group-Summary report - Summary_Report.html                
            </javadoc>
            <method name="generateGroupSummaryReport" type="void" line="524">
                <params>
                    <param name="baseSRSH" type="J2DAnalyzer.SingleResultSetHolder"/>
                    <param name="targetSRSH" type="J2DAnalyzer.SingleResultSetHolder"/>
                    <param name="consolBaseResult" type="Map"/>
                    <param name="consolTargetResult" type="Map"/>
                    <param name="testCaseBaseResult" type="Map"/>
                    <param name="testCaseResultCount" type="Map"/>
                    <param name="testCaseTargetResult" type="Map"/>
                </params>
                <declaration name="groupSummaryReportFile" type="File" line="526"/>
                <declaration name="writer" type="PrintWriter" line="528"/>
                <declaration name="header" type="String" line="532"/>
                <declaration name="baseValuesMap" type="Map" line="540"/>
                <declaration name="targetValuesMap" type="Map" line="541"/>
                <declaration name="tempGroup" type="String" line="543"/>
                <scope line="544"/>
                <declaration name="key" type="Object" line="551"/>
                <declaration name="baseValue" type="double" line="552"/>
                <declaration name="resultsIter" type="Iterator" line="553"/>
                <scope line="555">
                    <declaration name="curTotalScoreObj" type="Object" line="564"/>
                    <declaration name="curTotalScore" type="double" line="565"/>
                    <scope line="568"/>
                    <scope line="576"/>
                </scope>
                <declaration name="betterResultTags" type="StringBuffer" line="596"/>
                <declaration name="sameResultTags" type="StringBuffer" line="597"/>
                <declaration name="worseResultTags" type="StringBuffer" line="598"/>
                <declaration name="speedup" type="double" line="602"/>
                <scope line="604">
                    <declaration name="selColorIndex" type="int" line="612"/>
                    <declaration name="tcFileName" type="String" line="614"/>
                </scope>
            </method>
            <javadoc line="691">
                Generate Testcase Summary Report - Testcase_Summary_Report.html                
            </javadoc>
            <method name="generateTestCaseSummaryReport" type="void" line="701">
                <params>
                    <param name="baseSRSH" type="J2DAnalyzer.SingleResultSetHolder"/>
                    <param name="targetSRSH" type="J2DAnalyzer.SingleResultSetHolder"/>
                    <param name="consolBaseResult" type="Map"/>
                    <param name="consolTargetResult" type="Map"/>
                    <param name="testCaseBaseResult" type="Map"/>
                    <param name="testCaseResultCount" type="Map"/>
                    <param name="testCaseTargetResult" type="Map"/>
                </params>
                <declaration name="tcSummaryReportFile" type="File" line="703"/>
                <declaration name="writer" type="PrintWriter" line="705"/>
                <declaration name="header" type="String" line="708"/>
                <declaration name="testResultsStartBuffer" type="StringBuffer" line="714"/>
                <declaration name="testResultsScoreBuffer" type="StringBuffer" line="724"/>
                <declaration name="betterResultTags" type="StringBuffer" line="729"/>
                <declaration name="sameResultTags" type="StringBuffer" line="730"/>
                <declaration name="worseResultTags" type="StringBuffer" line="731"/>
                <declaration name="baseValue" type="Double" line="733"/>
                <declaration name="curGroupName" type="String" line="735"/>
                <declaration name="curTestName" type="String" line="736"/>
                <declaration name="groupNameArray" type="Object[]" line="738"/>
                <declaration name="testCaseList" type="Object[]" line="741"/>
                <scope line="750">
                    <scope line="752"/>
                    <declaration name="tableTags" type="String" line="791"/>
                    <scope line="793">
                        <scope line="797"/>
                    </scope>
                </scope>
            </method>
            <javadoc line="826">
                |----------|------------------------|--------------------------|-----------|
                  | Testcase | Score for &lt;base build&gt; | Score for &lt;target build&gt; | % Speedup |
                  |----------|------------------------|--------------------------|-----------|                
            </javadoc>
            <method name="getTestResultsTableForSummary" type="String" line="835">
                <params>
                    <param name="testName" type="String"/>
                    <param name="baseScore" type="double"/>
                    <param name="targetScore" type="double"/>
                </params>
                <declaration name="totalScore" type="double" line="837"/>
                <declaration name="fileName" type="String" line="839"/>
                <declaration name="selColorIndex" type="int" line="842"/>
                <declaration name="buffer" type="StringBuffer" line="844"/>
            </method>
            <javadoc line="867">
                |-------------------|-------------------|-----------------|-------------------|--------|
                  | Tests Performance | BETTER  (Num / %) | SAME  (Num / %) | WORSE  ( Num / %) | Total  |
                  |-------------------|-------------------|-----------------|-------------------|--------|                
            </javadoc>
            <method name="getStatusTableForSummary" type="String" line="876">
                <params>
                    <param name="curGroupName" type="String"/>
                    <param name="testName" type="String"/>
                    <param name="nBetter" type="int"/>
                    <param name="nSame" type="int"/>
                    <param name="nWorse" type="int"/>
                </params>
                <declaration name="fileName" type="String" line="878"/>
                <declaration name="totalTests" type="int" line="881"/>
                <declaration name="buffer" type="StringBuffer" line="883"/>
            </method>
            <javadoc line="908">
                |-------------------|-----------------|------------------------------|
                  | Tests performance | Number of tests | % from total number of tests |
                  |-------------------|-----------------|------------------------------|                
            </javadoc>
            <method name="getPerformanceTableForTestcase" type="String" line="915">
                <params>
                    <param name="testName" type="String"/>
                    <param name="nBetter" type="int"/>
                    <param name="nSame" type="int"/>
                    <param name="nWorse" type="int"/>
                </params>
                <declaration name="buffer" type="StringBuffer" line="917"/>
                <declaration name="totalTests" type="int" line="919"/>
            </method>
            <javadoc line="965">
                |-----------|---------|--------------------|----------------------|------------|
                  | Num Units | Options | &lt;base build&gt; Score | &lt;target build&gt; Score | % Speedup  |
                  |-----------|---------|--------------------|----------------------|------------|
                  String[0] = getStatusTableForSummary()
                  String[1] = getTestResultsTableForSummary()
                  Generate Testcase Report - testcases/&lt;testcase name&gt;.html                
            </javadoc>
            <method name="generateTestCaseReport" type="String[]" line="982">
                <params>
                    <param name="curGroupName" type="String"/>
                    <param name="key" type="Object"/>
                    <param name="baseSRSH" type="J2DAnalyzer.SingleResultSetHolder"/>
                    <param name="targetSRSH" type="J2DAnalyzer.SingleResultSetHolder"/>
                    <param name="testCaseResultCount" type="Map"/>
                    <param name="testCaseBaseResult" type="Map"/>
                    <param name="testCaseTargetResult" type="Map"/>
                </params>
                <declaration name="numBetterTestCases" type="int" line="984"/>
                <declaration name="numWorseTestCases" type="int" line="985"/>
                <declaration name="numSameTestCases" type="int" line="986"/>
                <declaration name="tcStartTags" type="StringBuffer" line="988"/>
                <declaration name="worseTestcaseResultTags" type="StringBuffer" line="1002"/>
                <declaration name="sameTestcaseResultTags" type="StringBuffer" line="1004"/>
                <declaration name="betterTestcaseResultTags" type="StringBuffer" line="1006"/>
                <declaration name="curTestCountObj" type="Object" line="1009"/>
                <declaration name="curTestCount" type="int" line="1010"/>
                <scope line="1011"/>
                <declaration name="fileName" type="String" line="1015"/>
                <declaration name="testcaseReportFile" type="File" line="1017"/>
                <declaration name="writer" type="PrintWriter" line="1019"/>
                <declaration name="header" type="String" line="1022"/>
                <declaration name="totalBaseScore" type="double" line="1028"/>
                <declaration name="totalTargetScore" type="double" line="1029"/>
                <scope line="1031">
                    <declaration name="baseTCR" type="J2DAnalyzer.ResultHolder" line="1033"/>
                    <declaration name="targetTCR" type="J2DAnalyzer.ResultHolder" line="1036"/>
                    <declaration name="baseScore" type="double" line="1040"/>
                    <declaration name="targetScore" type="double" line="1041"/>
                    <declaration name="tcTagBuffer" type="StringBuffer" line="1043"/>
                    <declaration name="selColorIndex" type="int" line="1045"/>
                    <declaration name="map" type="Map" line="1051"/>
                    <declaration name="iter" type="Iterator" line="1052"/>
                    <declaration name="subKey" type="Object" line="1053"/>
                    <scope line="1055"/>
                </scope>
                <declaration name="performanceTable" type="String" line="1095"/>
                <declaration name="statusTable" type="String" line="1144"/>
                <declaration name="testResultsTable" type="String" line="1149"/>
            </method>
            <javadoc line="1156">
                Returns footer tag for HTML files                
            </javadoc>
            <method name="getFooter" type="String" line="1159">
                <declaration name="buffer" type="StringBuffer" line="1161"/>
            </method>
            <javadoc line="1189">
                Returns header tag for HTML files                
            </javadoc>
            <method name="getHeader" type="String" line="1197">
                <params>
                    <param name="baseSRSH" type="J2DAnalyzer.SingleResultSetHolder"/>
                    <param name="targetSRSH" type="J2DAnalyzer.SingleResultSetHolder"/>
                    <param name="title" type="String"/>
                    <param name="sysPropLoc" type="String"/>
                </params>
                <comment line="1205">
                    System Properties                    
                </comment>
                <declaration name="buffer" type="StringBuffer" line="1199"/>
                <declaration name="headerTitle" type="String" line="1201"/>
                <declaration name="sysProps" type="Map" line="1210"/>
            </method>
            <javadoc line="1225">
                Returns start tag and title tag for HTML files                
            </javadoc>
            <method name="getHeaderTitle" type="String" line="1228">
                <params>
                    <param name="title" type="String"/>
                </params>
                <declaration name="buffer" type="StringBuffer" line="1230"/>
            </method>
            <javadoc line="1248">
                Generats System-Properties HTML file - System_Property.html                
            </javadoc>
            <method name="generateSysPropsReport" type="void" line="1253">
                <params>
                    <param name="srsh" type="J2DAnalyzer.SingleResultSetHolder"/>
                </params>
                <declaration name="sysPropsFile" type="File" line="1255"/>
                <declaration name="writer" type="PrintWriter" line="1257"/>
                <declaration name="headerTitle" type="String" line="1260"/>
                <declaration name="key" type="String" line="1268"/>
                <declaration name="value" type="String" line="1269"/>
                <declaration name="sysProps" type="Map" line="1270"/>
                <declaration name="iter" type="Iterator" line="1271"/>
                <scope line="1272"/>
            </method>
            <javadoc line="1287">
                Returns the index of color from color array based on the results
                  Can change this implementation so as to select based on some analysis.                
            </javadoc>
            <method name="selectColor" type="int" line="1291">
                <params>
                    <param name="baseScore" type="double"/>
                    <param name="targetScore" type="double"/>
                </params>
                <declaration name="res" type="double" line="1293"/>
                <scope line="1295"/>
                <scope line="1297"/>
                <scope line="1299"/>
            </method>
            <javadoc line="1304">
                Calculate Speedup Percentage -&gt;
                  ((target_score - base_score)  100) / baseScore
                  Can change this implementation so as to provide some analysis.                
            </javadoc>
            <method name="calculateSpeedupPercentage" type="double" line="1311">
                <params>
                    <param name="baseScore" type="double"/>
                    <param name="targetScore" type="double"/>
                </params>
            </method>
            <method name="printUsage" type="void" line="1315">
                <declaration name="usage" type="String" line="1316"/>
            </method>
            <javadoc line="1341">
                main                
            </javadoc>
            <method name="main" type="void" line="1344">
                <params>
                    <param name="args" type="String"/>
                </params>
                <comment line="1353">
                    ---- Analysis Mode ----
                    BEST    = 1;
                    WORST   = 2;
                    AVERAGE = 3;
                    MIDAVG  = 4;                    
                </comment>
                <declaration name="resDir" type="String" line="1346"/>
                <declaration name="baseXML" type="String" line="1347"/>
                <declaration name="targetXML" type="String" line="1348"/>
                <declaration name="resultXML" type="String" line="1349"/>
                <declaration name="group" type="int" line="1350"/>
                <declaration name="analyzerMode" type="int" line="1358"/>
                <scope line="1360">
                    <scope line="1362">
                        <scope line="1365"/>
                        <scope line="1370"/>
                        <scope line="1375"/>
                        <scope line="1380"/>
                        <scope line="1385"/>
                        <scope line="1391">
                            <declaration name="strAnalyzerMode" type="String" line="1393"/>
                            <scope line="1394"/>
                            <scope line="1396"/>
                            <scope line="1398"/>
                            <scope line="1400"/>
                            <scope line="1402"/>
                        </scope>
                    </scope>
                </scope>
                <scope line="1409"/>
                <scope line="1413">
                    <scope line="1418"/>
                    <scope line="1421"/>
                    <scope line="1423"/>
                </scope>
                <scope line="1426"/>
            </method>
        </class>
    </source>