<?xml version="1.0" encoding="UTF-8"?>
    <source package="sun.print">
        <import package="java.io.BufferedReader"/>
        <import package="java.io.InputStream"/>
        <import package="java.io.InputStreamReader"/>
        <import package="java.io.IOException"/>
        <import package="java.util.ArrayList"/>
        <import package="java.security.AccessController"/>
        <import package="java.security.PrivilegedActionException"/>
        <import package="java.security.PrivilegedExceptionAction"/>
        <import package="javax.print.DocFlavor"/>
        <import package="javax.print.MultiDocPrintService"/>
        <import package="javax.print.PrintService"/>
        <import package="javax.print.PrintServiceLookup"/>
        <import package="javax.print.attribute.Attribute"/>
        <import package="javax.print.attribute.AttributeSet"/>
        <import package="javax.print.attribute.HashPrintRequestAttributeSet"/>
        <import package="javax.print.attribute.HashPrintServiceAttributeSet"/>
        <import package="javax.print.attribute.PrintRequestAttribute"/>
        <import package="javax.print.attribute.PrintRequestAttributeSet"/>
        <import package="javax.print.attribute.PrintServiceAttribute"/>
        <import package="javax.print.attribute.PrintServiceAttributeSet"/>
        <import package="javax.print.attribute.standard.PrinterName"/>
        <class name="Win32PrintServiceLookup" line="50">
            <extends class="PrintServiceLookup"/>
            <comment line="55">
                                
            </comment>
            <comment line="56">
                                
            </comment>
            <comment line="63">
                The singleton win32 print lookup service.
                 Code that is aware of this field and wants to use it must first
                 see if its null, and if so instantiate it by calling a method such as
                 javax.print.PrintServiceLookup.defaultPrintService() so that the
                 same instance is stored there.                
            </comment>
            <comment line="71">
                                
            </comment>
            <comment line="102">
                Want the PrintService which is default print service to have
                 equality of reference with the equivalent in list of print services
                 This isn&apos;t required by the API and there&apos;s a risk doing this will
                 lead people to assume its guaranteed.                
            </comment>
            <comment line="260">
                return empty array as don&apos;t support multi docs                
            </comment>
            <declaration name="defaultPrinter" type="String" line="52"/>
            <declaration name="defaultPrintService" type="PrintService" line="53"/>
            <declaration name="printers" type="String[]" line="54"/>
            <declaration name="printServices" type="PrintService[]" line="55"/>
            <scope line="57"/>
            <declaration name="win32PrintLUS" type="Win32PrintServiceLookup" line="68"/>
            <method name="getWin32PrintLUS" type="Win32PrintServiceLookup" line="71">
                <comment line="73">
                    This call is internally synchronized.
                     When it returns an instance of this class will have
                     been instantiated - else there&apos;s a JDK internal error.                    
                </comment>
                <scope line="72"/>
            </method>
            <method name="Win32PrintServiceLookup" type="constructor" line="82">
                <comment line="89">
                    There&apos;s no capability for Win98 to refresh printers.                    
                </comment>
                <comment line="90">
                    See &quot;OpenPrinter&quot; for more info.                    
                </comment>
                <comment line="94">
                    start the printer listener thread                    
                </comment>
                <comment line="98">
                                        
                </comment>
                <scope line="84">
                    <declaration name="osName" type="String" line="87"/>
                    <scope line="91"/>
                    <declaration name="thr" type="PrinterChangeListener" line="95"/>
                </scope>
            </method>
            <method name="getPrintServices" type="PrintService[]" line="106">
                <declaration name="security" type="SecurityManager" line="107"/>
                <scope line="108"/>
                <scope line="111"/>
            </method>
            <method name="refreshServices" type="void" line="117">
                <comment line="120">
                    In Windows it is safe to assume no default if printers == null so we                    
                </comment>
                <comment line="121">
                    don&apos;t get the default.                    
                </comment>
                <comment line="152">
                    Look for deleted services and invalidate these                    
                </comment>
                <scope line="119"/>
                <declaration name="newServices" type="PrintService[]" line="126"/>
                <declaration name="defService" type="PrintService" line="127"/>
                <scope line="128">
                    <scope line="130"/>
                    <scope line="132">
                        <scope line="133"/>
                        <scope line="135">
                            <declaration name="j" type="int" line="136"/>
                            <scope line="137">
                                <scope line="139"/>
                            </scope>
                            <scope line="145"/>
                        </scope>
                    </scope>
                </scope>
                <scope line="153">
                    <scope line="154">
                        <scope line="156"/>
                    </scope>
                </scope>
            </method>
            <method name="getPrintServiceByName" type="PrintService" line="165">
                <params>
                    <param name="name" type="String"/>
                </params>
                <comment line="170">
                                        
                </comment>
                <scope line="167"/>
                <scope line="169">
                    <declaration name="printServices" type="PrintService[]" line="171"/>
                    <scope line="172">
                        <scope line="173"/>
                    </scope>
                </scope>
            </method>
            <method name="matchingService" type="boolean" line="182">
                <params>
                    <param name="service" type="PrintService"/>
                    <param name="serviceSet" type="PrintServiceAttributeSet"/>
                </params>
                <scope line="183">
                    <declaration name="attrs" type="Attribute[]" line="184"/>
                    <declaration name="serviceAttr" type="Attribute" line="185"/>
                    <scope line="186">
                        <scope line="189"/>
                    </scope>
                </scope>
            </method>
            <method name="getPrintServices" type="PrintService[]" line="198">
                <params>
                    <param name="flavor" type="DocFlavor"/>
                    <param name="attributes" type="AttributeSet"/>
                </params>
                <comment line="222">
                    Special case: If client is asking for a particular printer
                     (by name) then we can save time by getting just that service
                     to check against the rest of the specified attributes.                    
                </comment>
                <declaration name="security" type="SecurityManager" line="200"/>
                <scope line="201"/>
                <declaration name="requestSet" type="PrintRequestAttributeSet" line="204"/>
                <declaration name="serviceSet" type="PrintServiceAttributeSet" line="205"/>
                <scope line="207">
                    <declaration name="attrs" type="Attribute[]" line="212"/>
                    <scope line="213">
                        <scope line="214"/>
                        <scope line="216"/>
                    </scope>
                </scope>
                <declaration name="services" type="PrintService[]" line="227"/>
                <scope line="228">
                    <declaration name="name" type="PrinterName" line="229"/>
                    <declaration name="service" type="PrintService" line="230"/>
                    <scope line="231"/>
                    <scope line="233"/>
                </scope>
                <scope line="237"/>
                <scope line="241"/>
                <scope line="243">
                    <declaration name="matchingServices" type="ArrayList" line="244"/>
                    <scope line="245">
                        <scope line="246">
                            <scope line="248"/>
                        </scope>
                        <scope line="251"/>
                    </scope>
                </scope>
            </method>
            <method name="getMultiDocPrintServices" type="MultiDocPrintService[]" line="264">
                <params>
                    <param name="flavors" type="DocFlavor[]"/>
                    <param name="attributes" type="AttributeSet"/>
                </params>
                <declaration name="security" type="SecurityManager" line="265"/>
                <scope line="266"/>
            </method>
            <method name="getDefaultPrintService" type="PrintService" line="273">
                <comment line="280">
                    Windows does not have notification for a change in default                    
                </comment>
                <comment line="281">
                    so we always get the latest.                    
                </comment>
                <comment line="293">
                    Not the same as default so proceed to get new PrintService.                    
                </comment>
                <comment line="295">
                    clear defaultPrintService                    
                </comment>
                <declaration name="security" type="SecurityManager" line="274"/>
                <scope line="275"/>
                <scope line="283"/>
                <scope line="288"/>
                <scope line="298">
                    <scope line="299">
                        <scope line="300"/>
                    </scope>
                </scope>
                <scope line="307"/>
            </method>
            <class name="PrinterChangeListener" line="313">
                <extends class="Thread"/>
                <declaration name="chgObj" type="long" line="314"/>
                <method name="PrinterChangeListener" type="constructor" line="315"/>
                <method name="run" type="void" line="319">
                    <comment line="322">
                        wait for configuration to change                        
                    </comment>
                    <scope line="320">
                        <scope line="321">
                            <scope line="323">
                                <scope line="324"/>
                                <scope line="326"/>
                            </scope>
                            <scope line="329"/>
                        </scope>
                    </scope>
                </method>
            </class>
            <method name="getDefaultPrinterName" type="String" line="338"/>
            <method name="getAllPrinterNames" type="String[]" line="339"/>
            <method name="notifyFirstPrinterChange" type="long" line="340"/>
            <method name="notifyClosePrinterChange" type="void" line="341"/>
            <method name="notifyPrinterChange" type="int" line="342"/>
        </class>
    </source>