<?xml version="1.0" encoding="UTF-8"?>
    <source package="sun.nio.ch">
        <import package="java.nio.channels"/>
        <import package="java.util"/>
        <import package="sun.misc.Unsafe"/>
        <class name="PendingIoCache" line="32">
            <comment line="46">
                typedef struct _OVERLAPPED {
                     DWORD  Internal;
                     DWORD  InternalHigh;
                     DWORD  Offset;
                     DWORD  OffsetHigh;
                     HANDLE hEvent;
                 } OVERLAPPED;                
            </comment>
            <comment line="57">
                set to true when closed                
            </comment>
            <comment line="60">
                set to true when thread is waiting for all I/O operations to complete                
            </comment>
            <comment line="63">
                maps OVERLAPPED to PendingFuture                
            </comment>
            <comment line="67">
                per-channel cache of OVERLAPPED structures                
            </comment>
            <javadoc line="32">
                Maintains a mapping of pending I/O requests (identified by the address of
                  an OVERLAPPED structure) to Futures.                
            </javadoc>
            <declaration name="unsafe" type="Unsafe" line="38"/>
            <declaration name="addressSize" type="int" line="39"/>
            <method name="dependsArch" type="int" line="41">
                <params>
                    <param name="value32" type="int"/>
                    <param name="value64" type="int"/>
                </params>
            </method>
            <declaration name="SIZEOF_OVERLAPPED" type="int" line="54"/>
            <declaration name="closed" type="boolean" line="57"/>
            <declaration name="closePending" type="boolean" line="60"/>
            <declaration name="pendingIoMap" type="Map&amp;lt;Long,PendingFuture&amp;gt;" line="63"/>
            <declaration name="overlappedCache" type="long[]" line="67"/>
            <declaration name="overlappedCacheCount" type="int" line="68"/>
            <method name="PendingIoCache" type="constructor" line="70"/>
            <method name="add" type="long" line="73">
                <params>
                    <param name="result" type="PendingFuture&lt;?,?&gt;"/>
                </params>
                <scope line="74">
                    <declaration name="ov" type="long" line="77"/>
                    <scope line="78"/>
                    <scope line="80"/>
                </scope>
            </method>
            <method name="remove" type="PendingFuture&lt;V,A&gt;" line="89">
                <params>
                    <param name="overlapped" type="long"/>
                </params>
                <comment line="97">
                    cache full or channel closing                    
                </comment>
                <comment line="100">
                    notify closing thread.                    
                </comment>
                <scope line="90">
                    <declaration name="res" type="PendingFuture&amp;lt;V,A&amp;gt;" line="91"/>
                    <scope line="92">
                        <scope line="93"/>
                        <scope line="95"/>
                        <scope line="100"/>
                    </scope>
                </scope>
            </method>
            <method name="close" type="void" line="108">
                <comment line="114">
                    handle case where I/O operations that have not completed.                    
                </comment>
                <comment line="118">
                    release memory for any cached OVERLAPPED structures                    
                </comment>
                <comment line="123">
                    done                    
                </comment>
                <scope line="109">
                    <scope line="118"/>
                </scope>
            </method>
            <method name="clearPendingIoMap" type="void" line="127">
                <comment line="131">
                    wait up to 50ms for the I/O operations to complete                    
                </comment>
                <comment line="142">
                    cause all pending I/O operations to fail
                     simulate the failure of all pending I/O operations.                    
                </comment>
                <comment line="148">
                    make I/O port aware of the stale OVERLAPPED structure                    
                </comment>
                <comment line="152">
                    execute a task that invokes the result handler&apos;s failed method                    
                </comment>
            </method>
        </class>
    </source>