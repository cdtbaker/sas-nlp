<?xml version="1.0" encoding="UTF-8"?>
    <source package="sun.nio.ch">
        <import package="java.io.IOException"/>
        <import package="java.net.InetAddress"/>
        <import package="java.net.InetSocketAddress"/>
        <import package="java.nio"/>
        <import package="java.nio.channels"/>
        <import package="java.nio.channels.spi"/>
        <import package="java.security.AccessController"/>
        <import package="java.security.PrivilegedExceptionAction"/>
        <import package="java.security.PrivilegedActionException"/>
        <import package="java.util.Random"/>
        <class name="PipeImpl" line="43">
            <extends class="Pipe"/>
            <comment line="52">
                Source and sink channels                
            </comment>
            <comment line="56">
                Random object for handshake values                
            </comment>
            <javadoc line="43">
                A simple Pipe implementation based on a socket connection.                
            </javadoc>
            <declaration name="source" type="SourceChannel" line="52"/>
            <declaration name="sink" type="SinkChannel" line="53"/>
            <declaration name="rnd" type="Random" line="56"/>
            <scope line="58">
                <declaration name="someBytes" type="byte[]" line="60"/>
                <declaration name="resultOK" type="boolean" line="61"/>
                <scope line="62"/>
                <scope line="64"/>
            </scope>
            <class name="Initializer" line="69">
                <implements interface="PrivilegedExceptionAction">
                    <type_params>
                        <type_param name="Void"/>
                    </type_params>
                </implements>
                <declaration name="sp" type="SelectorProvider" line="73"/>
                <method name="Initializer" type="constructor" line="75">
                    <params>
                        <param name="sp" type="SelectorProvider"/>
                    </params>
                </method>
                <method name="run" type="Void" line="79">
                    <comment line="85">
                        loopback address                        
                    </comment>
                    <comment line="89">
                        bind ServerSocketChannel to a port on the loopback address                        
                    </comment>
                    <comment line="93">
                        Establish connection (assumes connections are eagerly                        
                    </comment>
                    <comment line="94">
                        accepted)                        
                    </comment>
                    <comment line="104">
                        Get a connection and verify it is legitimate                        
                    </comment>
                    <comment line="115">
                        Create source and sink channels                        
                    </comment>
                    <declaration name="ssc" type="ServerSocketChannel" line="80"/>
                    <declaration name="sc1" type="SocketChannel" line="81"/>
                    <declaration name="sc2" type="SocketChannel" line="82"/>
                    <scope line="84">
                        <declaration name="lb" type="InetAddress" line="86"/>
                        <declaration name="sa" type="InetSocketAddress" line="95"/>
                        <declaration name="bb" type="ByteBuffer" line="99"/>
                        <declaration name="secret" type="long" line="100"/>
                        <scope line="105"/>
                    </scope>
                    <scope line="118">
                        <scope line="119"/>
                        <scope line="124"/>
                        <declaration name="x" type="IOException" line="125"/>
                    </scope>
                    <scope line="129">
                        <scope line="130"/>
                        <scope line="133"/>
                    </scope>
                </method>
            </class>
            <method name="PipeImpl" type="constructor" line="139">
                <params>
                    <param name="sp" type="SelectorProvider"/>
                </params>
                <scope line="140"/>
                <scope line="142"/>
            </method>
            <method name="source" type="SourceChannel" line="148"/>
            <method name="sink" type="SinkChannel" line="152"/>
        </class>
    </source>