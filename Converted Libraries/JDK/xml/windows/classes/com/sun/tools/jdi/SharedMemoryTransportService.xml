<?xml version="1.0" encoding="UTF-8"?>
    <source package="com.sun.tools.jdi">
        <import package="com.sun.jdi"/>
        <import package="com.sun.jdi.connect"/>
        <import package="com.sun.jdi.connect.spi"/>
        <import package="java.io.IOException"/>
        <import package="java.util.Map"/>
        <import package="java.util.ResourceBundle"/>
        <class name="SharedMemoryTransportService" line="36">
            <extends class="TransportService"/>
            <comment line="185">
                handshake with the target VM                
            </comment>
            <declaration name="messages" type="ResourceBundle" line="37"/>
            <class name="SharedMemoryListenKey" line="39">
                <extends class="ListenKey"/>
                <javadoc line="39">
                    The listener returned by startListening                    
                </javadoc>
                <declaration name="id" type="long" line="43"/>
                <declaration name="name" type="String" line="44"/>
                <method name="SharedMemoryListenKey" type="constructor" line="46">
                    <params>
                        <param name="id" type="long"/>
                        <param name="name" type="String"/>
                    </params>
                </method>
                <method name="id" type="long" line="51"/>
                <method name="setId" type="void" line="55">
                    <params>
                        <param name="id" type="long"/>
                    </params>
                </method>
                <method name="address" type="String" line="59"/>
                <method name="toString" type="String" line="63"/>
            </class>
            <method name="SharedMemoryTransportService" type="constructor" line="68"/>
            <method name="name" type="String" line="73"/>
            <method name="defaultAddress" type="String" line="77"/>
            <javadoc line="81">
                Return localized description of this transport service                
            </javadoc>
            <method name="description" type="String" line="84">
                <scope line="85">
                    <scope line="86"/>
                </scope>
            </method>
            <method name="capabilities" type="Capabilities" line="93"/>
            <method name="initialize" type="void" line="97"/>
            <method name="startListening0" type="long" line="98"/>
            <method name="attach0" type="long" line="99"/>
            <method name="stopListening0" type="void" line="100"/>
            <method name="accept0" type="long" line="101"/>
            <method name="name" type="String" line="102"/>
            <method name="attach" type="Connection" line="104">
                <params>
                    <param name="address" type="String"/>
                    <param name="attachTimeout" type="long"/>
                    <param name="handshakeTimeout" type="long"/>
                </params>
                <scope line="105"/>
                <declaration name="id" type="long" line="108"/>
                <declaration name="conn" type="SharedMemoryConnection" line="109"/>
            </method>
            <method name="startListening" type="TransportService.ListenKey" line="114">
                <params>
                    <param name="address" type="String"/>
                </params>
                <scope line="115"/>
                <declaration name="id" type="long" line="118"/>
            </method>
            <method name="startListening" type="ListenKey" line="122"/>
            <method name="stopListening" type="void" line="126">
                <params>
                    <param name="listener" type="ListenKey"/>
                </params>
                <comment line="140">
                    invalidate the id                    
                </comment>
                <scope line="127"/>
                <declaration name="id" type="long" line="131"/>
                <declaration name="key" type="SharedMemoryListenKey" line="132"/>
                <scope line="133">
                    <scope line="135"/>
                </scope>
            </method>
            <method name="accept" type="Connection" line="145">
                <params>
                    <param name="listener" type="ListenKey"/>
                    <param name="acceptTimeout" type="long"/>
                    <param name="handshakeTimeout" type="long"/>
                </params>
                <comment line="160">
                    in theory another thread could call stopListening before
                     accept0 is called. In that case accept0 will try to accept
                     with an invalid &quot;transport id&quot; - this should result in an
                     IOException.                    
                </comment>
                <scope line="146"/>
                <declaration name="transportId" type="long" line="150"/>
                <declaration name="key" type="SharedMemoryListenKey" line="151"/>
                <scope line="152">
                    <scope line="154"/>
                </scope>
                <declaration name="connectId" type="long" line="164"/>
                <declaration name="conn" type="SharedMemoryConnection" line="165"/>
            </method>
        </class>
        <class name="SharedMemoryConnection" line="171">
            <extends class="Connection"/>
            <comment line="185">
                handshake with the target VM                
            </comment>
            <declaration name="id" type="long" line="172"/>
            <declaration name="receiveLock" type="Object" line="173"/>
            <declaration name="sendLock" type="Object" line="174"/>
            <declaration name="closeLock" type="Object" line="175"/>
            <declaration name="closed" type="boolean" line="176"/>
            <method name="receiveByte0" type="byte" line="178"/>
            <method name="sendByte0" type="void" line="179"/>
            <method name="close0" type="void" line="180"/>
            <method name="receivePacket0" type="byte[]" line="181"/>
            <method name="sendPacket0" type="void" line="182"/>
            <method name="handshake" type="void" line="185">
                <params>
                    <param name="handshakeTimeout" type="long"/>
                </params>
                <declaration name="hello" type="byte[]" line="186"/>
                <scope line="188"/>
                <scope line="191">
                    <declaration name="b" type="byte" line="192"/>
                    <scope line="193"/>
                </scope>
            </method>
            <method name="SharedMemoryConnection" type="constructor" line="200">
                <params>
                    <param name="id" type="long"/>
                </params>
            </method>
            <method name="close" type="void" line="204">
                <scope line="205">
                    <scope line="206"/>
                </scope>
            </method>
            <method name="isOpen" type="boolean" line="213">
                <scope line="214"/>
            </method>
            <method name="readPacket" type="byte[]" line="219">
                <comment line="226">
                    only one thread may be reading at a time                    
                </comment>
                <scope line="220"/>
                <declaration name="b" type="byte" line="223"/>
                <scope line="224">
                    <scope line="226"/>
                </scope>
                <scope line="229">
                    <scope line="230"/>
                    <scope line="232"/>
                </scope>
            </method>
            <method name="writePacket" type="void" line="239">
                <params>
                    <param name="b" type="byte"/>
                </params>
                <comment line="245">
                    Check the packet size                    
                </comment>
                <comment line="260">
                    Check that the byte array contains the complete packet                    
                </comment>
                <comment line="268">
                    only one thread may be writing at a time                    
                </comment>
                <scope line="240"/>
                <scope line="247"/>
                <declaration name="b0" type="int" line="250"/>
                <declaration name="b1" type="int" line="251"/>
                <declaration name="b2" type="int" line="252"/>
                <declaration name="b3" type="int" line="253"/>
                <declaration name="len" type="int" line="254"/>
                <scope line="255"/>
                <scope line="262"/>
                <scope line="266">
                    <scope line="268"/>
                </scope>
                <scope line="271">
                    <scope line="272"/>
                    <scope line="274"/>
                </scope>
            </method>
        </class>
        <class name="SharedMemoryTransportServiceCapabilities" line="282">
            <extends class="TransportService.Capabilities"/>
            <comment line="185">
                handshake with the target VM                
            </comment>
            <method name="supportsMultipleConnections" type="boolean" line="284"/>
            <method name="supportsAttachTimeout" type="boolean" line="288"/>
            <method name="supportsAcceptTimeout" type="boolean" line="292"/>
            <method name="supportsHandshakeTimeout" type="boolean" line="296"/>
        </class>
    </source>