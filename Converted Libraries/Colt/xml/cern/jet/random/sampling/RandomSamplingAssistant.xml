<?xml version="1.0" encoding="UTF-8"?>
    <source package="cern.jet.random.sampling">
        <import package="cern.colt.list.BooleanArrayList"/>
        <import package="cern.jet.random.engine.RandomEngine"/>
        <class name="RandomSamplingAssistant" line="13">
            <extends class="cern.colt.PersistentObject"/>
            <comment line="26">
                public class RandomSamplingAssistant extends Object implements java.io.Serializable {                
            </comment>
            <javadoc line="13">
                Conveniently computes a stable &lt;i&gt;Simple Random Sample Without Replacement (SRSWOR)&lt;/i&gt; subsequence of &lt;tt&gt;n&lt;/tt&gt; elements from a given input sequence of &lt;tt&gt;N&lt;/tt&gt; elements;
                  Example: Computing a sublist of &lt;tt&gt;n=3&lt;/tt&gt; random elements from a list &lt;tt&gt;(1,...,50)&lt;/tt&gt; may yield the sublist &lt;tt&gt;(7,13,47)&lt;/tt&gt;.
                  The subsequence is guaranteed to be &lt;i&gt;stable&lt;/i&gt;, i.e. elements never change position relative to each other.
                  Each element from the &lt;tt&gt;N&lt;/tt&gt; elements has the same probability to be included in the &lt;tt&gt;n&lt;/tt&gt; chosen elements.
                  This class is a convenience adapter for &lt;tt&gt;RandomSampler&lt;/tt&gt; using blocks.                
                <see>
                    RandomSampler                    
                </see>
                <author>
                    wolfgang.hoschek@cern.ch                    
                </author>
                <version>
                    1.0, 02/05/99                    
                </version>
            </javadoc>
            <declaration name="sampler" type="RandomSampler" line="26"/>
            <declaration name="buffer" type="long[]" line="27"/>
            <declaration name="bufferPosition" type="int" line="28"/>
            <declaration name="skip" type="long" line="30"/>
            <declaration name="n" type="long" line="31"/>
            <declaration name="MAX_BUFFER_SIZE" type="int" line="33"/>
            <javadoc line="34">
                Constructs a random sampler that samples &lt;tt&gt;n&lt;/tt&gt; random elements from an input sequence of &lt;tt&gt;N&lt;/tt&gt; elements.                
                <param>
                    n the total number of elements to choose (must be &gt;= 0).                    
                </param>
                <param>
                    N number of elements to choose from (must be &gt;= n).                    
                </param>
                <param>
                    randomGenerator a random number generator. Set this parameter to <tt>null</tt> to use the default random number generator.                    
                </param>
            </javadoc>
            <method name="RandomSamplingAssistant" type="constructor" line="41">
                <params>
                    <param name="n" type="long"/>
                    <param name="N" type="long"/>
                    <param name="randomGenerator" type="RandomEngine"/>
                </params>
                <comment line="45">
                    start with the right offset                    
                </comment>
            </method>
            <javadoc line="49">
                Returns a deep copy of the receiver.                
            </javadoc>
            <method name="clone" type="Object" line="52">
                <declaration name="copy" type="RandomSamplingAssistant" line="53"/>
            </method>
            <javadoc line="57">
                Not yet commented.                
            </javadoc>
            <method name="fetchNextBlock" type="void" line="60">
                <scope line="61">
                    <declaration name="last" type="long" line="62"/>
                </scope>
            </method>
            <javadoc line="68">
                Returns the used random generator.                
            </javadoc>
            <method name="getRandomGenerator" type="RandomEngine" line="71"/>
            <javadoc line="74">
                Tests random sampling.                
            </javadoc>
            <method name="main" type="void" line="77">
                <params>
                    <param name="args" type="String"/>
                </params>
                <comment line="80">
                    test(n,N);                    
                </comment>
                <declaration name="n" type="long" line="78"/>
                <declaration name="N" type="long" line="79"/>
            </method>
            <javadoc line="83">
                Just shows how this class can be used; samples n elements from and int[] array.                
            </javadoc>
            <method name="sampleArray" type="int[]" line="86">
                <params>
                    <param name="n" type="int"/>
                    <param name="elements" type="int[]"/>
                </params>
                <declaration name="assistant" type="RandomSamplingAssistant" line="87"/>
                <declaration name="sample" type="int[]" line="88"/>
                <declaration name="j" type="int" line="89"/>
                <declaration name="length" type="int" line="90"/>
                <scope line="91"/>
            </method>
            <javadoc line="96">
                Returns whether the next element of the input sequence shall be sampled (picked) or not.                
                <return>
                    <tt>true</tt> if the next element shall be sampled (picked), <tt>false</tt> otherwise.                    
                </return>
            </javadoc>
            <method name="sampleNextElement" type="boolean" line="100">
                <comment line="101">
                    reject                    
                </comment>
                <comment line="102">
                    reject                    
                </comment>
                <comment line="104">
                    accept                    
                </comment>
                <scope line="106"/>
                <scope line="110"/>
            </method>
            <javadoc line="116">
                Tests the methods of this class.
                  To do benchmarking, comment the lines printing stuff to the console.                
            </javadoc>
            <method name="test" type="void" line="120">
                <params>
                    <param name="n" type="long"/>
                    <param name="N" type="long"/>
                </params>
                <declaration name="assistant" type="RandomSamplingAssistant" line="121"/>
                <declaration name="sample" type="cern.colt.list.LongArrayList" line="123"/>
                <declaration name="timer" type="cern.colt.Timer" line="124"/>
                <scope line="126">
                    <scope line="127"/>
                </scope>
            </method>
            <javadoc line="137">
                Tests the methods of this class.
                  To do benchmarking, comment the lines printing stuff to the console.                
            </javadoc>
            <method name="testArraySampling" type="void" line="141">
                <params>
                    <param name="n" type="int"/>
                    <param name="N" type="int"/>
                </params>
                <comment line="151">
                    System.out.print(&quot;\nElements = [&quot;);
                    for (int i=0; i&lt;N-1; i++) System.out.print(elements[i]+&quot;, &quot;);
                    System.out.print(elements[N-1]);
                    System.out.println(&quot;]&quot;);
                    
                    
                    System.out.print(&quot;\nSample = [&quot;);
                    for (int i=0; i&lt;n-1; i++) System.out.print(sample[i]+&quot;, &quot;);
                    System.out.print(sample[n-1]);
                    System.out.println(&quot;]&quot;);                    
                </comment>
                <declaration name="elements" type="int[]" line="142"/>
                <declaration name="timer" type="cern.colt.Timer" line="145"/>
                <declaration name="sample" type="int[]" line="147"/>
            </method>
            <javadoc line="166">
                Returns whether the next elements of the input sequence shall be sampled (picked) or not.
                  one is chosen from the first block, one from the second, ..., one from the last block.                
                <param>
                    acceptList a bitvector which will be filled with <tt>true</tt> where sampling shall occur and <tt>false</tt> where it shall not occur.                    
                </param>
            </javadoc>
            <method name="xsampleNextElements" type="void" line="171">
                <params>
                    <param name="acceptList" type="BooleanArrayList"/>
                </params>
                <comment line="172">
                    manually inlined                    
                </comment>
                <comment line="179">
                    reject                    
                </comment>
                <comment line="183">
                    reject                    
                </comment>
                <comment line="185">
                    accept                    
                </comment>
                <declaration name="length" type="int" line="173"/>
                <declaration name="accept" type="boolean[]" line="174"/>
                <scope line="175">
                    <scope line="176"/>
                    <scope line="180"/>
                    <scope line="187"/>
                    <scope line="191"/>
                </scope>
            </method>
        </class>
    </source>