<?xml version="1.0" encoding="UTF-8"?>
    <source package="cern.jet.random">
        <import package="cern.jet.random.engine.RandomEngine"/>
        <class name="Empirical" line="12">
            <extends class="AbstractContinousDistribution"/>
            <comment line="38">
                cumulative distribution function                
            </comment>
            <javadoc line="12">
                Empirical distribution.
                  &lt;p&gt;
                  The probability distribution function (pdf) must be provided by the user as an array of positive real numbers. 
                  The pdf does not need to be provided in the form of relative probabilities, absolute probabilities are also accepted.
                  &lt;p&gt;
                  If &lt;tt&gt;interpolationType == LINEAR_INTERPOLATION&lt;/tt&gt; a linear interpolation within the bin is computed, resulting in a constant density within each bin.
                  &lt;dt&gt;
                  If &lt;tt&gt;interpolationType == NO_INTERPOLATION&lt;/tt&gt; no interpolation is performed and the result is a discrete distribution.  
                  &lt;p&gt;
                  Instance methods operate on a user supplied uniform random number generator; they are unsynchronized.
                  &lt;dt&gt;
                  Static methods operate on a default uniform random number generator; they are synchronized.
                  &lt;p&gt;
                  &lt;b&gt;Implementation:&lt;/b&gt;
                  A uniform random number is generated using a user supplied generator.
                  The uniform number is then transformed to the user&apos;s distribution using the cumulative probability distribution constructed from the pdf.
                  The cumulative distribution is inverted using a binary search for the nearest bin boundary. 
                  &lt;p&gt;
                  This is a port of &lt;A HREF=&quot;http://wwwinfo.cern.ch/asd/lhc++/clhep/manual/RefGuide/Random/RandGeneral.html&quot;&gt;RandGeneral&lt;/A&gt; used in &lt;A HREF=&quot;http://wwwinfo.cern.ch/asd/lhc++/clhep&quot;&gt;CLHEP 1.4.0&lt;/A&gt; (C++).                
                <author>
                    wolfgang.hoschek@cern.ch                    
                </author>
                <version>
                    1.0, 09/24/99                    
                </version>
            </javadoc>
            <declaration name="cdf" type="double[]" line="37"/>
            <declaration name="interpolationType" type="int" line="38"/>
            <declaration name="LINEAR_INTERPOLATION" type="int" line="40"/>
            <declaration name="NO_INTERPOLATION" type="int" line="41"/>
            <javadoc line="42">
                Constructs an Empirical distribution.
                  The probability distribution function (pdf) is an array of positive real numbers. 
                  It need not be provided in the form of relative probabilities, absolute probabilities are also accepted.
                  The &lt;tt&gt;pdf&lt;/tt&gt; must satisfy both of the following conditions
                  &lt;ul&gt;
                  &lt;li&gt;&lt;tt&gt;0.0 &amp;lt;= pdf[i] : 0&amp;lt;=i&amp;lt;=pdf.length-1&lt;/tt&gt;
                  &lt;li&gt;&lt;tt&gt;0.0 &amp;lt; Sum(pdf[i]) : 0&amp;lt;=i&amp;lt;=pdf.length-1&lt;/tt&gt;
                  &lt;/ul&gt;                
                <param>
                    pdf the probability distribution function.                    
                </param>
                <param>
                    interpolationType can be either <tt>Empirical.NO_INTERPOLATION</tt> or <tt>Empirical.LINEAR_INTERPOLATION</tt>.                    
                </param>
                <param>
                    randomGenerator a uniform random number generator.                    
                </param>
                <throws>
                    IllegalArgumentException if at least one of the three conditions above is violated.                    
                </throws>
            </javadoc>
            <method name="Empirical" type="constructor" line="56">
                <params>
                    <param name="pdf" type="double[]"/>
                    <param name="interpolationType" type="int"/>
                    <param name="randomGenerator" type="RandomEngine"/>
                </params>
            </method>
            <javadoc line="60">
                Returns the cumulative distribution function.                
            </javadoc>
            <method name="cdf" type="double" line="63">
                <params>
                    <param name="k" type="int"/>
                </params>
            </method>
            <javadoc line="68">
                Returns a deep copy of the receiver; the copy will produce identical sequences.
                  After this call has returned, the copy and the receiver have equal but separate state.                
                <return>
                    a copy of the receiver.                    
                </return>
            </javadoc>
            <method name="clone" type="Object" line="74">
                <declaration name="copy" type="Empirical" line="75"/>
            </method>
            <javadoc line="79">
                Returns a random number from the distribution.                
            </javadoc>
            <method name="nextDouble" type="double" line="82">
                <comment line="84">
                    Non-existing pdf                    
                </comment>
                <comment line="86">
                    binary search in cumulative distribution function:                    
                </comment>
                <comment line="88">
                    largest k such that I[k] is known to be &lt;= rand                    
                </comment>
                <comment line="89">
                    largest k such that I[k] is known to be &gt;  rand                    
                </comment>
                <comment line="92">
                    div 2                    
                </comment>
                <comment line="96">
                    after this binary search, nabove is always nbelow+1 and they straddle rand:                    
                </comment>
                <comment line="103">
                    binMeasure is always aProbFunc[nbelow],                    
                </comment>
                <comment line="104">
                    but we don&apos;t have aProbFunc any more so we subtract.                    
                </comment>
                <comment line="107">
                    rand lies right in a bin of measure 0.  Simply return the center                    
                </comment>
                <comment line="108">
                    of the range of that bin.  (Any value between k/N and (k+1)/N is                    
                </comment>
                <comment line="109">
                    equally good, in this rare case.)                    
                </comment>
                <comment line="116">
                    illegal interpolation type                    
                </comment>
                <declaration name="rand" type="double" line="83"/>
                <declaration name="nBins" type="int" line="87"/>
                <declaration name="nbelow" type="int" line="88"/>
                <declaration name="nabove" type="int" line="89"/>
                <scope line="91">
                    <declaration name="middle" type="int" line="92"/>
                </scope>
                <scope line="98"/>
                <scope line="101">
                    <declaration name="binMeasure" type="double" line="102"/>
                    <scope line="106"/>
                    <declaration name="binFraction" type="double" line="113"/>
                </scope>
            </method>
            <javadoc line="118">
                Returns the probability distribution function.                
            </javadoc>
            <method name="pdf" type="double" line="121">
                <params>
                    <param name="x" type="double"/>
                </params>
                <comment line="123">
                    if (x &lt; 0 || x &gt; cdf.length-2) return 0.0;                    
                </comment>
                <comment line="124">
                    int k = (int) x;                    
                </comment>
                <comment line="125">
                    return cdf[k-1] - cdf[k];                    
                </comment>
            </method>
            <javadoc line="127">
                Returns the probability distribution function.                
            </javadoc>
            <method name="pdf" type="double" line="130">
                <params>
                    <param name="k" type="int"/>
                </params>
            </method>
            <javadoc line="134">
                Sets the distribution parameters.
                  The &lt;tt&gt;pdf&lt;/tt&gt; must satisfy both of the following conditions
                  &lt;ul&gt;
                  &lt;li&gt;&lt;tt&gt;0.0 &amp;lt;= pdf[i] : 0 &amp;lt; =i &amp;lt;= pdf.length-1&lt;/tt&gt;
                  &lt;li&gt;&lt;tt&gt;0.0 &amp;lt; Sum(pdf[i]) : 0 &amp;lt;=i &amp;lt;= pdf.length-1&lt;/tt&gt;
                  &lt;/ul&gt;                
                <param>
                    pdf probability distribution function.                    
                </param>
                <param>
                    interpolationType can be either <tt>Empirical.NO_INTERPOLATION</tt> or <tt>Empirical.LINEAR_INTERPOLATION</tt>.                    
                </param>
                <throws>
                    IllegalArgumentException if at least one of the three conditions above is violated.                    
                </throws>
            </javadoc>
            <method name="setState" type="void" line="145">
                <params>
                    <param name="pdf" type="double[]"/>
                    <param name="interpolationType" type="int"/>
                </params>
                <comment line="154">
                    throw new IllegalArgumentException(&quot;Non-existing pdf&quot;);                    
                </comment>
                <comment line="158">
                    compute cumulative distribution function (cdf) from probability distribution function (pdf)                    
                </comment>
                <comment line="172">
                    cdf is now cached...                    
                </comment>
                <scope line="147"/>
                <scope line="152"/>
                <declaration name="nBins" type="int" line="159"/>
                <scope line="163">
                    <declaration name="prob" type="double" line="164"/>
                </scope>
                <scope line="169"/>
            </method>
            <javadoc line="174">
                Returns a String representation of the receiver.                
            </javadoc>
            <method name="toString" type="String" line="177">
                <declaration name="interpolation" type="String" line="178"/>
            </method>
            <javadoc line="183">
                Not yet commented.                
                <return>
                    int                    
                </return>
            </javadoc>
            <method name="xnBins" type="int" line="187"/>
        </class>
    </source>