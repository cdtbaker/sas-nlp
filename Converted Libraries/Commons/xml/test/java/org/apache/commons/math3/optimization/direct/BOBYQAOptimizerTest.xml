<?xml version="1.0" encoding="UTF-8"?>
    <source package="org.apache.commons.math3.optimization.direct">
        <import package="java.util.Arrays"/>
        <import package="java.util.Random"/>
        <import package="org.apache.commons.math3.analysis.MultivariateFunction"/>
        <import package="org.apache.commons.math3.exception.DimensionMismatchException"/>
        <import package="org.apache.commons.math3.exception.TooManyEvaluationsException"/>
        <import package="org.apache.commons.math3.exception.NumberIsTooLargeException"/>
        <import package="org.apache.commons.math3.exception.NumberIsTooSmallException"/>
        <import package="org.apache.commons.math3.optimization.GoalType"/>
        <import package="org.apache.commons.math3.optimization.PointValuePair"/>
        <import package="org.apache.commons.math3.optimization.InitialGuess"/>
        <import package="org.apache.commons.math3.optimization.SimpleBounds"/>
        <import package="org.apache.commons.math3.util.FastMath"/>
        <import package="org.junit.Assert"/>
        <import package="org.junit.Ignore"/>
        <import package="org.junit.Test"/>
        <class name="BOBYQAOptimizerTest" line="36">
            <comment line="239">
                See MATH-728
                 TODO: this test is temporarily disabled for 3.2 release as a bug in Cobertura
                       makes it run for several hours before completing                
            </comment>
            <javadoc line="36">
                Test for {@link BOBYQAOptimizer}.                
            </javadoc>
            <declaration name="DIM" type="int" line="41"/>
            <method name="testInitOutOfBounds" type="void" line="44">
                <declaration name="startPoint" type="double[]" line="45"/>
                <declaration name="boundaries" type="double[][]" line="46"/>
            </method>
            <method name="testBoundariesDimensionMismatch" type="void" line="53">
                <declaration name="startPoint" type="double[]" line="54"/>
                <declaration name="boundaries" type="double[][]" line="55"/>
            </method>
            <method name="testProblemDimensionTooSmall" type="void" line="62">
                <declaration name="startPoint" type="double[]" line="63"/>
            </method>
            <method name="testMaxEvaluations" type="void" line="70">
                <declaration name="lowMaxEval" type="int" line="71"/>
                <declaration name="startPoint" type="double[]" line="72"/>
                <declaration name="boundaries" type="double[][]" line="73"/>
            </method>
            <method name="testRosen" type="void" line="80">
                <declaration name="startPoint" type="double[]" line="81"/>
                <declaration name="boundaries" type="double[][]" line="82"/>
                <declaration name="expected" type="PointValuePair" line="83"/>
            </method>
            <method name="testMaximize" type="void" line="90">
                <declaration name="startPoint" type="double[]" line="91"/>
                <declaration name="boundaries" type="double[][]" line="92"/>
                <declaration name="expected" type="PointValuePair" line="93"/>
            </method>
            <method name="testEllipse" type="void" line="105">
                <declaration name="startPoint" type="double[]" line="106"/>
                <declaration name="boundaries" type="double[][]" line="107"/>
                <declaration name="expected" type="PointValuePair" line="108"/>
            </method>
            <method name="testElliRotated" type="void" line="116">
                <declaration name="startPoint" type="double[]" line="117"/>
                <declaration name="boundaries" type="double[][]" line="118"/>
                <declaration name="expected" type="PointValuePair" line="119"/>
            </method>
            <method name="testCigar" type="void" line="127">
                <declaration name="startPoint" type="double[]" line="128"/>
                <declaration name="boundaries" type="double[][]" line="129"/>
                <declaration name="expected" type="PointValuePair" line="130"/>
            </method>
            <method name="testTwoAxes" type="void" line="138">
                <declaration name="startPoint" type="double[]" line="139"/>
                <declaration name="boundaries" type="double[][]" line="140"/>
                <declaration name="expected" type="PointValuePair" line="141"/>
            </method>
            <method name="testCigTab" type="void" line="149">
                <declaration name="startPoint" type="double[]" line="150"/>
                <declaration name="boundaries" type="double[][]" line="151"/>
                <declaration name="expected" type="PointValuePair" line="152"/>
            </method>
            <method name="testSphere" type="void" line="160">
                <declaration name="startPoint" type="double[]" line="161"/>
                <declaration name="boundaries" type="double[][]" line="162"/>
                <declaration name="expected" type="PointValuePair" line="163"/>
            </method>
            <method name="testTablet" type="void" line="171">
                <declaration name="startPoint" type="double[]" line="172"/>
                <declaration name="boundaries" type="double[][]" line="173"/>
                <declaration name="expected" type="PointValuePair" line="174"/>
            </method>
            <method name="testDiffPow" type="void" line="182">
                <declaration name="startPoint" type="double[]" line="183"/>
                <declaration name="boundaries" type="double[][]" line="184"/>
                <declaration name="expected" type="PointValuePair" line="185"/>
            </method>
            <method name="testSsDiffPow" type="void" line="193">
                <declaration name="startPoint" type="double[]" line="194"/>
                <declaration name="boundaries" type="double[][]" line="195"/>
                <declaration name="expected" type="PointValuePair" line="196"/>
            </method>
            <method name="testAckley" type="void" line="204">
                <declaration name="startPoint" type="double[]" line="205"/>
                <declaration name="boundaries" type="double[][]" line="206"/>
                <declaration name="expected" type="PointValuePair" line="207"/>
            </method>
            <method name="testRastrigin" type="void" line="215">
                <declaration name="startPoint" type="double[]" line="216"/>
                <declaration name="boundaries" type="double[][]" line="218"/>
                <declaration name="expected" type="PointValuePair" line="219"/>
            </method>
            <method name="testConstrainedRosen" type="void" line="227">
                <declaration name="startPoint" type="double[]" line="228"/>
                <declaration name="boundaries" type="double[][]" line="230"/>
                <declaration name="expected" type="PointValuePair" line="231"/>
            </method>
            <method name="testConstrainedRosenWithMoreInterpolationPoints" type="void" line="242">
                <comment line="248">
                    This should have been 78 because in the code the hard limit is
                     said to be
                       ((DIM + 1) * (DIM + 2)) / 2 - (2 * DIM + 1)
                     i.e. 78 in this case, but the test fails for 48, 59, 62, 63, 64,
                     65, 66, ...                    
                </comment>
                <declaration name="startPoint" type="double[]" line="243"/>
                <declaration name="boundaries" type="double[][]" line="244"/>
                <declaration name="expected" type="PointValuePair" line="245"/>
                <declaration name="maxAdditionalPoints" type="int" line="252"/>
                <scope line="254"/>
            </method>
            <javadoc line="264">
                @param func Function to optimize.                
                <param>
                    startPoint Starting point.                    
                </param>
                <param>
                    boundaries Upper / lower point limit.                    
                </param>
                <param>
                    goal Minimization or maximization.                    
                </param>
                <param>
                    fTol Tolerance relative error on the objective function.                    
                </param>
                <param>
                    pointTol Tolerance for checking that the optimum is correct.                    
                </param>
                <param>
                    maxEvaluations Maximum number of evaluations.                    
                </param>
                <param>
                    expected Expected point / value.                    
                </param>
            </javadoc>
            <method name="doTest" type="void" line="281">
                <params>
                    <param name="func" type="MultivariateFunction"/>
                    <param name="startPoint" type="double[]"/>
                    <param name="boundaries" type="double[][]"/>
                    <param name="goal" type="GoalType"/>
                    <param name="fTol" type="double"/>
                    <param name="pointTol" type="double"/>
                    <param name="maxEvaluations" type="int"/>
                    <param name="expected" type="PointValuePair"/>
                </params>
            </method>
            <javadoc line="294">
                @param func Function to optimize.                
                <param>
                    startPoint Starting point.                    
                </param>
                <param>
                    boundaries Upper / lower point limit.                    
                </param>
                <param>
                    goal Minimization or maximization.                    
                </param>
                <param>
                    fTol Tolerance relative error on the objective function.                    
                </param>
                <param>
                    pointTol Tolerance for checking that the optimum is correct.                    
                </param>
                <param>
                    maxEvaluations Maximum number of evaluations.                    
                </param>
                <param>
                    additionalInterpolationPoints Number of interpolation to used
                      in addition to the default (2  dim + 1).                    
                </param>
                <param>
                    expected Expected point / value.                    
                </param>
            </javadoc>
            <method name="doTest" type="void" line="315">
                <params>
                    <param name="func" type="MultivariateFunction"/>
                    <param name="startPoint" type="double[]"/>
                    <param name="boundaries" type="double[][]"/>
                    <param name="goal" type="GoalType"/>
                    <param name="fTol" type="double"/>
                    <param name="pointTol" type="double"/>
                    <param name="maxEvaluations" type="int"/>
                    <param name="additionalInterpolationPoints" type="int"/>
                    <param name="expected" type="PointValuePair"/>
                    <param name="assertMsg" type="String"/>
                </params>
                <comment line="318">
                    System.out.println(func.getClass().getName() + &quot; BEGIN&quot;); // XXX                    
                </comment>
                <comment line="321">
                    MultivariateOptimizer optim =
                                new PowellOptimizer(1e-13, FastMath.ulp(1d));
                            PointValuePair result = optim.optimize(100000, func, goal, startPoint);                    
                </comment>
                <comment line="334">
                    System.out.println(func.getClass().getName() + &quot; = &quot;
                                  + optim.getEvaluations() + &quot; f(&quot;);
                            for (double x: result.getPoint())  System.out.print(x + &quot; &quot;);
                            System.out.println(&quot;) = &quot; +  result.getValue());                    
                </comment>
                <comment line="344">
                    System.out.println(func.getClass().getName() + &quot; END&quot;); // XXX                    
                </comment>
                <declaration name="dim" type="int" line="319"/>
                <declaration name="lB" type="double[]" line="323"/>
                <declaration name="uB" type="double[]" line="324"/>
                <declaration name="numIterpolationPoints" type="int" line="325"/>
                <declaration name="optim" type="BOBYQAOptimizer" line="326"/>
                <declaration name="result" type="PointValuePair" line="327"/>
                <scope line="338"/>
            </method>
            <method name="point" type="double[]" line="346">
                <params>
                    <param name="n" type="int"/>
                    <param name="value" type="double"/>
                </params>
                <declaration name="ds" type="double[]" line="347"/>
            </method>
            <method name="boundaries" type="double[][]" line="353">
                <params>
                    <param name="dim" type="int"/>
                    <param name="lower" type="double"/>
                    <param name="upper" type="double"/>
                </params>
                <declaration name="boundaries" type="double[][]" line="354"/>
            </method>
            <class name="Sphere" line="362">
                <comment line="500">
                    private int fcount = 0;                    
                </comment>
                <comment line="589">
                    use not always the same basis                    
                </comment>
                <implements interface="MultivariateFunction"/>
                <method name="value" type="double" line="364">
                    <params>
                        <param name="x" type="double[]"/>
                    </params>
                    <declaration name="f" type="double" line="365"/>
                </method>
            </class>
            <class name="Cigar" line="372">
                <comment line="500">
                    private int fcount = 0;                    
                </comment>
                <comment line="589">
                    use not always the same basis                    
                </comment>
                <implements interface="MultivariateFunction"/>
                <declaration name="factor" type="double" line="373"/>
                <method name="Cigar" type="constructor" line="375"/>
                <method name="Cigar" type="constructor" line="379">
                    <params>
                        <param name="axisratio" type="double"/>
                    </params>
                </method>
                <method name="value" type="double" line="383">
                    <params>
                        <param name="x" type="double[]"/>
                    </params>
                    <declaration name="f" type="double" line="384"/>
                </method>
            </class>
            <class name="Tablet" line="391">
                <comment line="500">
                    private int fcount = 0;                    
                </comment>
                <comment line="589">
                    use not always the same basis                    
                </comment>
                <implements interface="MultivariateFunction"/>
                <declaration name="factor" type="double" line="392"/>
                <method name="Tablet" type="constructor" line="394"/>
                <method name="Tablet" type="constructor" line="398">
                    <params>
                        <param name="axisratio" type="double"/>
                    </params>
                </method>
                <method name="value" type="double" line="402">
                    <params>
                        <param name="x" type="double[]"/>
                    </params>
                    <declaration name="f" type="double" line="403"/>
                </method>
            </class>
            <class name="CigTab" line="410">
                <comment line="500">
                    private int fcount = 0;                    
                </comment>
                <comment line="589">
                    use not always the same basis                    
                </comment>
                <implements interface="MultivariateFunction"/>
                <declaration name="factor" type="double" line="411"/>
                <method name="CigTab" type="constructor" line="413"/>
                <method name="CigTab" type="constructor" line="417">
                    <params>
                        <param name="axisratio" type="double"/>
                    </params>
                </method>
                <method name="value" type="double" line="421">
                    <params>
                        <param name="x" type="double[]"/>
                    </params>
                    <declaration name="end" type="int" line="422"/>
                    <declaration name="f" type="double" line="423"/>
                </method>
            </class>
            <class name="TwoAxes" line="430">
                <comment line="500">
                    private int fcount = 0;                    
                </comment>
                <comment line="589">
                    use not always the same basis                    
                </comment>
                <implements interface="MultivariateFunction"/>
                <declaration name="factor" type="double" line="432"/>
                <method name="TwoAxes" type="constructor" line="434"/>
                <method name="TwoAxes" type="constructor" line="438">
                    <params>
                        <param name="axisratio" type="double"/>
                    </params>
                </method>
                <method name="value" type="double" line="442">
                    <params>
                        <param name="x" type="double[]"/>
                    </params>
                    <declaration name="f" type="double" line="443"/>
                </method>
            </class>
            <class name="ElliRotated" line="450">
                <comment line="500">
                    private int fcount = 0;                    
                </comment>
                <comment line="589">
                    use not always the same basis                    
                </comment>
                <implements interface="MultivariateFunction"/>
                <declaration name="B" type="Basis" line="451"/>
                <declaration name="factor" type="double" line="452"/>
                <method name="ElliRotated" type="constructor" line="454"/>
                <method name="ElliRotated" type="constructor" line="458">
                    <params>
                        <param name="axisratio" type="double"/>
                    </params>
                </method>
                <method name="value" type="double" line="462">
                    <params>
                        <param name="x" type="double[]"/>
                    </params>
                    <declaration name="f" type="double" line="463"/>
                </method>
            </class>
            <class name="Elli" line="471">
                <comment line="500">
                    private int fcount = 0;                    
                </comment>
                <comment line="589">
                    use not always the same basis                    
                </comment>
                <implements interface="MultivariateFunction"/>
                <declaration name="factor" type="double" line="473"/>
                <method name="Elli" type="constructor" line="475"/>
                <method name="Elli" type="constructor" line="479">
                    <params>
                        <param name="axisratio" type="double"/>
                    </params>
                </method>
                <method name="value" type="double" line="483">
                    <params>
                        <param name="x" type="double[]"/>
                    </params>
                    <declaration name="f" type="double" line="484"/>
                </method>
            </class>
            <class name="MinusElli" line="491">
                <comment line="500">
                    private int fcount = 0;                    
                </comment>
                <comment line="589">
                    use not always the same basis                    
                </comment>
                <implements interface="MultivariateFunction"/>
                <declaration name="elli" type="Elli" line="492"/>
                <method name="value" type="double" line="493">
                    <params>
                        <param name="x" type="double[]"/>
                    </params>
                </method>
            </class>
            <class name="DiffPow" line="498">
                <comment line="500">
                    private int fcount = 0;                    
                </comment>
                <comment line="589">
                    use not always the same basis                    
                </comment>
                <implements interface="MultivariateFunction"/>
                <method name="value" type="double" line="500">
                    <params>
                        <param name="x" type="double[]"/>
                    </params>
                    <comment line="506">
                        System.out.print(&quot;&quot; + (fcount++) + &quot;) &quot;);
                                    for (int i = 0; i &lt; x.length; i++)
                                        System.out.print(x[i] +  &quot; &quot;);
                                    System.out.println(&quot; = &quot; + f);                        
                    </comment>
                    <declaration name="f" type="double" line="501"/>
                </method>
            </class>
            <class name="SsDiffPow" line="513">
                <comment line="500">
                    private int fcount = 0;                    
                </comment>
                <comment line="589">
                    use not always the same basis                    
                </comment>
                <implements interface="MultivariateFunction"/>
                <method name="value" type="double" line="515">
                    <params>
                        <param name="x" type="double[]"/>
                    </params>
                    <declaration name="f" type="double" line="516"/>
                </method>
            </class>
            <class name="Rosen" line="521">
                <comment line="500">
                    private int fcount = 0;                    
                </comment>
                <comment line="589">
                    use not always the same basis                    
                </comment>
                <implements interface="MultivariateFunction"/>
                <method name="value" type="double" line="523">
                    <params>
                        <param name="x" type="double[]"/>
                    </params>
                    <declaration name="f" type="double" line="524"/>
                </method>
            </class>
            <class name="Ackley" line="532">
                <comment line="500">
                    private int fcount = 0;                    
                </comment>
                <comment line="589">
                    use not always the same basis                    
                </comment>
                <implements interface="MultivariateFunction"/>
                <declaration name="axisratio" type="double" line="533"/>
                <method name="Ackley" type="constructor" line="535">
                    <params>
                        <param name="axra" type="double"/>
                    </params>
                </method>
                <method name="Ackley" type="constructor" line="539"/>
                <method name="value" type="double" line="543">
                    <params>
                        <param name="x" type="double[]"/>
                    </params>
                    <declaration name="f" type="double" line="544"/>
                    <declaration name="res2" type="double" line="545"/>
                    <declaration name="fac" type="double" line="546"/>
                    <scope line="547"/>
                </method>
            </class>
            <class name="Rastrigin" line="558">
                <comment line="500">
                    private int fcount = 0;                    
                </comment>
                <comment line="589">
                    use not always the same basis                    
                </comment>
                <implements interface="MultivariateFunction"/>
                <declaration name="axisratio" type="double" line="560"/>
                <declaration name="amplitude" type="double" line="561"/>
                <method name="Rastrigin" type="constructor" line="563"/>
                <method name="Rastrigin" type="constructor" line="567">
                    <params>
                        <param name="axisratio" type="double"/>
                        <param name="amplitude" type="double"/>
                    </params>
                </method>
                <method name="value" type="double" line="572">
                    <params>
                        <param name="x" type="double[]"/>
                    </params>
                    <declaration name="f" type="double" line="573"/>
                    <declaration name="fac" type="double" line="574"/>
                    <scope line="575"/>
                </method>
            </class>
            <class name="Basis" line="586">
                <comment line="500">
                    private int fcount = 0;                    
                </comment>
                <comment line="589">
                    use not always the same basis                    
                </comment>
                <declaration name="basis" type="double[][]" line="587"/>
                <declaration name="rand" type="Random" line="588"/>
                <method name="Rotate" type="double[]" line="590">
                    <params>
                        <param name="x" type="double[]"/>
                    </params>
                    <declaration name="y" type="double[]" line="592"/>
                    <scope line="593"/>
                </method>
                <method name="GenBasis" type="void" line="601">
                    <params>
                        <param name="DIM" type="int"/>
                    </params>
                    <comment line="609">
                                                
                    </comment>
                    <comment line="612">
                                                
                    </comment>
                    <comment line="615">
                                                
                    </comment>
                    <comment line="618">
                                                
                    </comment>
                    <comment line="620">
                                                
                    </comment>
                    <comment line="622">
                                                
                    </comment>
                    <comment line="624">
                                                
                    </comment>
                    <declaration name="sp" type="double" line="605"/>
                    <declaration name="i" type="int" line="606"/>
                    <scope line="610">
                        <scope line="615"/>
                    </scope>
                </method>
            </class>
        </class>
    </source>