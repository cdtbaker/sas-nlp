<?xml version="1.0" encoding="UTF-8"?>
    <source package="org.apache.commons.math3.ode">
        <import package="org.apache.commons.math3.exception.MaxCountExceededException"/>
        <import package="org.apache.commons.math3.ode.sampling.StepHandler"/>
        <import package="org.apache.commons.math3.ode.sampling.StepInterpolator"/>
        <import package="org.apache.commons.math3.util.FastMath"/>
        <class name="TestProblemHandler" line="25">
            <implements interface="StepHandler"/>
            <javadoc line="25">
                This class is used to handle steps for the test problems
                  integrated during the junit tests for the ODE integrators.                
            </javadoc>
            <declaration name="problem" type="TestProblemAbstract" line="32"/>
            <javadoc line="32">
                Associated problem.                
            </javadoc>
            <declaration name="maxValueError" type="double" line="35"/>
            <javadoc line="35">
                Maximal errors encountered during the integration.                
            </javadoc>
            <declaration name="maxTimeError" type="double" line="37"/>
            <declaration name="lastError" type="double" line="39"/>
            <javadoc line="39">
                Error at the end of the integration.                
            </javadoc>
            <declaration name="lastTime" type="double" line="42"/>
            <javadoc line="42">
                Time at the end of integration.                
            </javadoc>
            <declaration name="integrator" type="ODEIntegrator" line="45"/>
            <javadoc line="45">
                ODE solver used.                
            </javadoc>
            <declaration name="expectedStepStart" type="double" line="48"/>
            <javadoc line="48">
                Expected start for step.                
            </javadoc>
            <javadoc line="51">
                Simple constructor.                
                <param>
                    problem problem for which steps should be handled                    
                </param>
                <param>
                    integrator ODE solver used                    
                </param>
            </javadoc>
            <method name="TestProblemHandler" type="constructor" line="56">
                <params>
                    <param name="problem" type="TestProblemAbstract"/>
                    <param name="integrator" type="ODEIntegrator"/>
                </params>
            </method>
            <method name="init" type="void" line="65">
                <params>
                    <param name="t0" type="double"/>
                    <param name="y0" type="double[]"/>
                    <param name="t" type="double"/>
                </params>
            </method>
            <method name="handleStep" type="void" line="72">
                <params>
                    <param name="interpolator" type="StepInterpolator"/>
                    <param name="isLast" type="boolean"/>
                </params>
                <comment line="76">
                    multistep integrators do not handle the first steps themselves                    
                </comment>
                <comment line="77">
                    so we have to make sure the integrator we look at has really started its work                    
                </comment>
                <comment line="79">
                    the step should either start at the end of the integrator step                    
                </comment>
                <comment line="80">
                    or at an event if the step is split into several substeps                    
                </comment>
                <comment line="94">
                    store the error at the last step                    
                </comment>
                <comment line="105">
                    walk through the step                    
                </comment>
                <comment line="113">
                    update the errors                    
                </comment>
                <declaration name="start" type="double" line="74"/>
                <scope line="75">
                    <scope line="78">
                        <declaration name="stepError" type="double" line="81"/>
                        <scope line="82"/>
                    </scope>
                </scope>
                <declaration name="pT" type="double" line="90"/>
                <declaration name="cT" type="double" line="91"/>
                <declaration name="errorScale" type="double[]" line="92"/>
                <scope line="95">
                    <declaration name="interpolatedY" type="double[]" line="96"/>
                    <declaration name="theoreticalY" type="double[]" line="97"/>
                    <scope line="98">
                        <declaration name="error" type="double" line="99"/>
                    </scope>
                </scope>
                <scope line="106">
                    <declaration name="time" type="double" line="108"/>
                    <declaration name="interpolatedY" type="double[]" line="110"/>
                    <declaration name="theoreticalY" type="double[]" line="111"/>
                    <scope line="114">
                        <declaration name="error" type="double" line="115"/>
                    </scope>
                </scope>
            </method>
            <javadoc line="121">
                Get the maximal value error encountered during integration.                
                <return>
                    maximal value error                    
                </return>
            </javadoc>
            <method name="getMaximalValueError" type="double" line="125"/>
            <javadoc line="129">
                Get the maximal time error encountered during integration.                
                <return>
                    maximal time error                    
                </return>
            </javadoc>
            <method name="getMaximalTimeError" type="double" line="133"/>
            <javadoc line="137">
                Get the error at the end of the integration.                
                <return>
                    error at the end of the integration                    
                </return>
            </javadoc>
            <method name="getLastError" type="double" line="141"/>
            <javadoc line="145">
                Get the time at the end of the integration.                
                <return>
                    time at the end of the integration.                    
                </return>
            </javadoc>
            <method name="getLastTime" type="double" line="149"/>
        </class>
    </source>