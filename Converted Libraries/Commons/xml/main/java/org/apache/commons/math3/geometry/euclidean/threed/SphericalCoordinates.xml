<?xml version="1.0" encoding="UTF-8"?>
    <source package="org.apache.commons.math3.geometry.euclidean.threed">
        <import package="java.io.Serializable"/>
        <import package="org.apache.commons.math3.util.FastMath"/>
        <class name="SphericalCoordinates" line="4">
            <implements interface="Serializable"/>
            <javadoc line="4">
                This class provides conversions related to &lt;a
                  href=&quot;http://mathworld.wolfram.com/SphericalCoordinates.html&quot;&gt;spherical coordinates&lt;/a&gt;.
                  &lt;p&gt;
                  The conventions used here are the mathematical ones, i.e. spherical coordinates are
                  related to Cartesian coordinates as follows:
                  &lt;/p&gt;
                  &lt;ul&gt;
                  &lt;li&gt;x = r cos(&amp;theta;) sin(&amp;Phi;)&lt;/li&gt;
                  &lt;li&gt;y = r sin(&amp;theta;) sin(&amp;Phi;)&lt;/li&gt;
                  &lt;li&gt;z = r cos(&amp;Phi;)&lt;/li&gt;
                  &lt;/ul&gt;
                  &lt;ul&gt;
                  &lt;li&gt;r       = &amp;radic;(x&lt;sup&gt;2&lt;/sup&gt;+y&lt;sup&gt;2&lt;/sup&gt;+z&lt;sup&gt;2&lt;/sup&gt;)&lt;/li&gt;
                  &lt;li&gt;&amp;theta; = atan2(y, x)&lt;/li&gt;
                  &lt;li&gt;&amp;Phi;   = acos(z/r)&lt;/li&gt;
                  &lt;/ul&gt;
                  &lt;p&gt;
                  r is the radius, &amp;theta; is the azimuthal angle in the x-y plane and &amp;Phi; is the polar
                  (co-latitude) angle. These conventions are &lt;em&gt;different&lt;/em&gt; from the conventions used
                  in physics (and in particular in spherical harmonics) where the meanings of &amp;theta; and
                  &amp;Phi; are reversed.
                  &lt;/p&gt;
                  &lt;p&gt;
                  This class provides conversion of coordinates and also of gradient and Hessian
                  between spherical and Cartesian coordinates.
                  &lt;/p&gt;                
                <since>
                    3.2                    
                </since>
                <version>
                    $Id: SphericalCoordinates.java 1443364 2013-02-07 09:28:04Z luc $                    
                </version>
            </javadoc>
            <declaration name="serialVersionUID" type="long" line="35"/>
            <javadoc line="35">
                Serializable UID.                
            </javadoc>
            <declaration name="v" type="Vector3D" line="39"/>
            <javadoc line="39">
                Cartesian coordinates.                
            </javadoc>
            <declaration name="r" type="double" line="43"/>
            <javadoc line="43">
                Radius.                
            </javadoc>
            <declaration name="theta" type="double" line="47"/>
            <javadoc line="47">
                Azimuthal angle in the x-y plane &amp;theta;.                
            </javadoc>
            <declaration name="phi" type="double" line="51"/>
            <javadoc line="51">
                Polar angle (co-latitude) &amp;Phi;.                
            </javadoc>
            <declaration name="jacobian" type="double[][]" line="55"/>
            <javadoc line="55">
                Jacobian of (r, &amp;theta; &amp;Phi).                
            </javadoc>
            <declaration name="rHessian" type="double[][]" line="59"/>
            <javadoc line="59">
                Hessian of radius.                
            </javadoc>
            <declaration name="thetaHessian" type="double[][]" line="63"/>
            <javadoc line="63">
                Hessian of azimuthal angle in the x-y plane &amp;theta;.                
            </javadoc>
            <declaration name="phiHessian" type="double[][]" line="67"/>
            <javadoc line="67">
                Hessian of polar (co-latitude) angle &amp;Phi;.                
            </javadoc>
            <javadoc line="71">
                Build a spherical coordinates transformer from Cartesian coordinates.                
                <param>
                    v Cartesian coordinates                    
                </param>
            </javadoc>
            <method name="SphericalCoordinates" type="constructor" line="75">
                <params>
                    <param name="v" type="Vector3D"/>
                </params>
            </method>
            <javadoc line="81">
                Build a spherical coordinates transformer from spherical coordinates.                
                <param>
                    r radius                    
                </param>
                <param>
                    theta azimuthal angle in x-y plane                    
                </param>
                <param>
                    phi polar (co-latitude) angle                    
                </param>
            </javadoc>
            <method name="SphericalCoordinates" type="constructor" line="87">
                <params>
                    <param name="r" type="double"/>
                    <param name="theta" type="double"/>
                    <param name="phi" type="double"/>
                </params>
                <declaration name="cosTheta" type="double" line="88"/>
                <declaration name="sinTheta" type="double" line="89"/>
                <declaration name="cosPhi" type="double" line="90"/>
                <declaration name="sinPhi" type="double" line="91"/>
            </method>
            <javadoc line="97">
                Get the Cartesian coordinates.                
                <return>
                    Cartesian coordinates                    
                </return>
            </javadoc>
            <method name="getCartesian" type="Vector3D" line="101"/>
            <javadoc line="104">
                Get the radius.                
                <return>
                    radius r                    
                </return>
                <see>
                    #getTheta()                    
                </see>
                <see>
                    #getPhi()                    
                </see>
            </javadoc>
            <method name="getR" type="double" line="110"/>
            <javadoc line="113">
                Get the azimuthal angle in x-y plane.                
                <return>
                    azimuthal angle in x-y plane &theta;                    
                </return>
                <see>
                    #getR()                    
                </see>
                <see>
                    #getPhi()                    
                </see>
            </javadoc>
            <method name="getTheta" type="double" line="119"/>
            <javadoc line="122">
                Get the polar (co-latitude) angle.                
                <return>
                    polar (co-latitude) angle &Phi;                    
                </return>
                <see>
                    #getR()                    
                </see>
                <see>
                    #getTheta()                    
                </see>
            </javadoc>
            <method name="getPhi" type="double" line="128"/>
            <javadoc line="131">
                Convert a gradient with respect to spherical coordinates into a gradient
                  with respect to Cartesian coordinates.                
                <param>
                    sGradient gradient with respect to spherical coordinates
                      {df/dr, df/d&theta;, df/d&Phi;}                    
                </param>
                <return>
                    gradient with respect to Cartesian coordinates
                      {df/dx, df/dy, df/dz}                    
                </return>
            </javadoc>
            <method name="toCartesianGradient" type="double[]" line="139">
                <params>
                    <param name="sGradient" type="double[]"/>
                </params>
            </method>
            <javadoc line="143">
                Convert a Hessian with respect to spherical coordinates into a Hessian
                  with respect to Cartesian coordinates.
                  &lt;p&gt;
                  As Hessian are always symmetric, we use only the lower left part of the provided
                  spherical Hessian, so the upper part may not be initialized. However, we still
                  do fill up the complete array we create, with guaranteed symmetry.
                  &lt;/p&gt;                
                <param>
                    sHessian Hessian with respect to spherical coordinates
                      {{d<sup>2</sup>f/dr<sup>2</sup>, d<sup>2</sup>f/drd&theta;, d<sup>2</sup>f/drd&Phi;},
                      {d<sup>2</sup>f/drd&theta;, d<sup>2</sup>f/d&theta;<sup>2</sup>, d<sup>2</sup>f/d&theta;d&Phi;},
                      {d<sup>2</sup>f/drd&Phi;, d<sup>2</sup>f/d&theta;d&Phi;, d<sup>2</sup>f/d&Phi;<sup>2</sup>}                    
                </param>
                <param>
                    sGradient gradient with respect to spherical coordinates
                      {df/dr, df/d&theta;, df/d&Phi;}                    
                </param>
                <return>
                    Hessian with respect to Cartesian coordinates
                      {{d<sup>2</sup>f/dx<sup>2</sup>, d<sup>2</sup>f/dxdy, d<sup>2</sup>f/dxdz},
                      {d<sup>2</sup>f/dxdy, d<sup>2</sup>f/dy<sup>2</sup>, d<sup>2</sup>f/dydz},
                      {d<sup>2</sup>f/dxdz, d<sup>2</sup>f/dydz, d<sup>2</sup>f/dz<sup>2</sup>}}                    
                </return>
            </javadoc>
            <method name="toCartesianHessian" type="double[][]" line="162">
                <params>
                    <param name="sHessian" type="double[][]"/>
                    <param name="sGradient" type="double[]"/>
                </params>
                <declaration name="hj" type="double[][]" line="165"/>
                <declaration name="cHessian" type="double[][]" line="166"/>
            </method>
            <javadoc line="192">
                Lazy evaluation of (r, &amp;theta;, &amp;phi;) Jacobian.                
            </javadoc>
            <method name="computeJacobian" type="void" line="195">
                <scope line="196">
                    <declaration name="x" type="double" line="197"/>
                    <declaration name="y" type="double" line="198"/>
                    <declaration name="z" type="double" line="199"/>
                    <declaration name="rho2" type="double" line="200"/>
                    <declaration name="rho" type="double" line="201"/>
                    <declaration name="r2" type="double" line="202"/>
                </scope>
            </method>
            <javadoc line="214">
                Lazy evaluation of Hessians.                
            </javadoc>
            <method name="computeHessians" type="void" line="217">
                <scope line="218">
                    <declaration name="x" type="double" line="219"/>
                    <declaration name="y" type="double" line="220"/>
                    <declaration name="z" type="double" line="221"/>
                    <declaration name="x2" type="double" line="222"/>
                    <declaration name="y2" type="double" line="223"/>
                    <declaration name="z2" type="double" line="224"/>
                    <declaration name="rho2" type="double" line="225"/>
                    <declaration name="rho" type="double" line="226"/>
                    <declaration name="r2" type="double" line="227"/>
                    <declaration name="xOr" type="double" line="228"/>
                    <declaration name="yOr" type="double" line="229"/>
                    <declaration name="zOr" type="double" line="230"/>
                    <declaration name="xOrho2" type="double" line="231"/>
                    <declaration name="yOrho2" type="double" line="232"/>
                    <declaration name="xOr3" type="double" line="233"/>
                    <declaration name="yOr3" type="double" line="234"/>
                    <declaration name="zOr3" type="double" line="235"/>
                    <declaration name="rhor2" type="double" line="251"/>
                    <declaration name="rho2r2" type="double" line="252"/>
                    <declaration name="rhor4" type="double" line="253"/>
                    <declaration name="rho3r4" type="double" line="254"/>
                    <declaration name="r2P2rho2" type="double" line="255"/>
                </scope>
            </method>
            <javadoc line="268">
                Replace the instance with a data transfer object for serialization.                
                <return>
                    data transfer object that will be serialized                    
                </return>
            </javadoc>
            <method name="writeReplace" type="Object" line="272"/>
            <class name="DataTransferObject" line="275">
                <implements interface="Serializable"/>
                <javadoc line="275">
                    Internal class used only for serialization.                    
                </javadoc>
                <declaration name="serialVersionUID" type="long" line="279"/>
                <javadoc line="279">
                    Serializable UID.                    
                </javadoc>
                <declaration name="x" type="double" line="283"/>
                <javadoc line="283">
                    Abscissa.                    
                    <serial>
                                                
                    </serial>
                </javadoc>
                <declaration name="y" type="double" line="288"/>
                <javadoc line="288">
                    Ordinate.                    
                    <serial>
                                                
                    </serial>
                </javadoc>
                <declaration name="z" type="double" line="293"/>
                <javadoc line="293">
                    Height.                    
                    <serial>
                                                
                    </serial>
                </javadoc>
                <javadoc line="298">
                    Simple constructor.                    
                    <param>
                        x abscissa                        
                    </param>
                    <param>
                        y ordinate                        
                    </param>
                    <param>
                        z height                        
                    </param>
                </javadoc>
                <method name="DataTransferObject" type="constructor" line="304">
                    <params>
                        <param name="x" type="double"/>
                        <param name="y" type="double"/>
                        <param name="z" type="double"/>
                    </params>
                </method>
                <javadoc line="309">
                    Replace the deserialized data transfer object with a {@link SphericalCoordinates}.                    
                    <return>
                        replacement {@link SphericalCoordinates}                        
                    </return>
                </javadoc>
                <method name="readResolve" type="Object" line="313"/>
            </class>
        </class>
    </source>