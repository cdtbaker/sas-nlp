<?xml version="1.0" encoding="UTF-8"?>
    <source package="org.apache.commons.math3.optim.nonlinear.scalar.noderiv">
        <import package="java.util.ArrayList"/>
        <import package="java.util.Arrays"/>
        <import package="java.util.List"/>
        <import package="org.apache.commons.math3.exception.DimensionMismatchException"/>
        <import package="org.apache.commons.math3.exception.NotPositiveException"/>
        <import package="org.apache.commons.math3.exception.NotStrictlyPositiveException"/>
        <import package="org.apache.commons.math3.exception.OutOfRangeException"/>
        <import package="org.apache.commons.math3.exception.TooManyEvaluationsException"/>
        <import package="org.apache.commons.math3.linear.Array2DRowRealMatrix"/>
        <import package="org.apache.commons.math3.linear.EigenDecomposition"/>
        <import package="org.apache.commons.math3.linear.MatrixUtils"/>
        <import package="org.apache.commons.math3.linear.RealMatrix"/>
        <import package="org.apache.commons.math3.optim.ConvergenceChecker"/>
        <import package="org.apache.commons.math3.optim.OptimizationData"/>
        <import package="org.apache.commons.math3.optim.nonlinear.scalar.GoalType"/>
        <import package="org.apache.commons.math3.optim.PointValuePair"/>
        <import package="org.apache.commons.math3.optim.nonlinear.scalar.MultivariateOptimizer"/>
        <import package="org.apache.commons.math3.random.RandomGenerator"/>
        <import package="org.apache.commons.math3.util.FastMath"/>
        <import package="org.apache.commons.math3.util.MathArrays"/>
        <class name="CMAESOptimizer" line="42">
            <extends class="MultivariateOptimizer"/>
            <comment line="85">
                global search parameters                
            </comment>
            <comment line="93">
                population size                
            </comment>
            <comment line="127">
                termination criteria                
            </comment>
            <comment line="141">
                selection strategy parameters                
            </comment>
            <comment line="143">
                                
            </comment>
            <comment line="149">
                                
            </comment>
            <comment line="151">
                dynamic strategy parameters and constants                
            </comment>
            <comment line="171">
                CMA internal values - updated each generation                
            </comment>
            <comment line="1014">
                -----Matrix utility functions similar to the Matlab build in functions------                
            </comment>
            <javadoc line="42">
                An implementation of the active Covariance Matrix Adaptation Evolution Strategy (CMA-ES)
                  for non-linear, non-convex, non-smooth, global function minimization.
                  &lt;p&gt;
                  The CMA-Evolution Strategy (CMA-ES) is a reliable stochastic optimization method
                  which should be applied if derivative-based methods, e.g. quasi-Newton BFGS or
                  conjugate gradient, fail due to a rugged search landscape (e.g. noise, local
                  optima, outlier, etc.) of the objective function. Like a
                  quasi-Newton method, the CMA-ES learns and applies a variable metric
                  on the underlying search space. Unlike a quasi-Newton method, the
                  CMA-ES neither estimates nor uses gradients, making it considerably more
                  reliable in terms of finding a good, or even close to optimal, solution.
                  &lt;p&gt;
                  In general, on smooth objective functions the CMA-ES is roughly ten times
                  slower than BFGS (counting objective function evaluations, no gradients provided).
                  For up to &lt;math&gt;N=10&lt;/math&gt; variables also the derivative-free simplex
                  direct search method (Nelder and Mead) can be faster, but it is
                  far less reliable than CMA-ES.
                  &lt;p&gt;
                  The CMA-ES is particularly well suited for non-separable
                  and/or badly conditioned problems. To observe the advantage of CMA compared
                  to a conventional evolution strategy, it will usually take about
                  &lt;math&gt;30 N&lt;/math&gt; function evaluations. On difficult problems the complete
                  optimization (a single run) is expected to take &lt;em&gt;roughly&lt;/em&gt; between
                  &lt;math&gt;30 N&lt;/math&gt; and &lt;math&gt;300 N&lt;sup&gt;2&lt;/sup&gt;&lt;/math&gt;
                  function evaluations.
                  &lt;p&gt;
                  This implementation is translated and adapted from the Matlab version
                  of the CMA-ES algorithm as implemented in module {@code cmaes.m} version 3.51.
                  &lt;p&gt;
                  For more information, please refer to the following links:
                  &lt;ul&gt;
                  &lt;li&gt;&lt;a href=&quot;http://www.lri.fr/~hansen/cmaes.m&quot;&gt;Matlab code&lt;/a&gt;&lt;/li&gt;
                  &lt;li&gt;&lt;a href=&quot;http://www.lri.fr/~hansen/cmaesintro.html&quot;&gt;Introduction to CMA-ES&lt;/a&gt;&lt;/li&gt;
                  &lt;li&gt;&lt;a href=&quot;http://en.wikipedia.org/wiki/CMA-ES&quot;&gt;Wikipedia&lt;/a&gt;&lt;/li&gt;
                  &lt;/ul&gt;                
                <version>
                    $Id: CMAESOptimizer.java 1573506 2014-03-03 09:58:29Z luc $                    
                </version>
                <since>
                    3.0                    
                </since>
            </javadoc>
            <declaration name="lambda" type="int" line="85"/>
            <javadoc line="85">
                Population size, offspring number. The primary strategy parameter to play
                  with, which can be increased from its default value. Increasing the
                  population size improves global search properties in exchange to speed.
                  Speed decreases, as a rule, at most linearly with increasing population
                  size. It is advisable to begin with the default small population size.                
            </javadoc>
            <declaration name="isActiveCMA" type="boolean" line="93"/>
            <javadoc line="93">
                Covariance update mechanism, default is active CMA. isActiveCMA = true
                  turns on &quot;active CMA&quot; with a negative update of the covariance matrix and
                  checks for positive definiteness. OPTS.CMA.active = 2 does not check for
                  pos. def. and is numerically faster. Active CMA usually speeds up the
                  adaptation.                
            </javadoc>
            <declaration name="checkFeasableCount" type="int" line="101"/>
            <javadoc line="101">
                Determines how often a new random offspring is generated in case it is
                  not feasible / beyond the defined limits, default is 0.                
            </javadoc>
            <declaration name="inputSigma" type="double[]" line="106"/>
            <javadoc line="106">
                @see Sigma                
            </javadoc>
            <declaration name="dimension" type="int" line="110"/>
            <javadoc line="110">
                Number of objective variables/problem dimension                
            </javadoc>
            <declaration name="diagonalOnly" type="int" line="112"/>
            <javadoc line="112">
                Defines the number of initial iterations, where the covariance matrix
                  remains diagonal and the algorithm has internally linear time complexity.
                  diagonalOnly = 1 means keeping the covariance matrix always diagonal and
                  this setting also exhibits linear space complexity. This can be
                  particularly useful for dimension &gt; 100.                
                <see>
                    &lt;a href=&quot;http://hal.archives-ouvertes.fr/inria-00287367/en&quot;&gt;A Simple Modification in CMA-ES&lt;/a&gt;                    
                </see>
            </javadoc>
            <declaration name="isMinimize" type="boolean" line="121"/>
            <javadoc line="121">
                Number of objective variables/problem dimension                
            </javadoc>
            <declaration name="generateStatistics" type="boolean" line="123"/>
            <javadoc line="123">
                Indicates whether statistic data is collected.                
            </javadoc>
            <declaration name="maxIterations" type="int" line="127"/>
            <javadoc line="127">
                Maximal number of iterations allowed.                
            </javadoc>
            <declaration name="stopFitness" type="double" line="129"/>
            <javadoc line="129">
                Limit for fitness value.                
            </javadoc>
            <declaration name="stopTolUpX" type="double" line="131"/>
            <javadoc line="131">
                Stop if x-changes larger stopTolUpX.                
            </javadoc>
            <declaration name="stopTolX" type="double" line="133"/>
            <javadoc line="133">
                Stop if x-change smaller stopTolX.                
            </javadoc>
            <declaration name="stopTolFun" type="double" line="135"/>
            <javadoc line="135">
                Stop if fun-changes smaller stopTolFun.                
            </javadoc>
            <declaration name="stopTolHistFun" type="double" line="137"/>
            <javadoc line="137">
                Stop if back fun-changes smaller stopTolHistFun.                
            </javadoc>
            <declaration name="mu" type="int" line="141"/>
            <javadoc line="141">
                Number of parents/points for recombination.                
            </javadoc>
            <declaration name="logMu2" type="double" line="143"/>
            <javadoc line="143">
                log(mu + 0.5), stored for efficiency.                
            </javadoc>
            <declaration name="weights" type="RealMatrix" line="145"/>
            <javadoc line="145">
                Array for weighted recombination.                
            </javadoc>
            <declaration name="mueff" type="double" line="147"/>
            <javadoc line="147">
                Variance-effectiveness of sum w_i x_i.                
            </javadoc>
            <declaration name="sigma" type="double" line="151"/>
            <javadoc line="151">
                Overall standard deviation - search volume.                
            </javadoc>
            <declaration name="cc" type="double" line="153"/>
            <javadoc line="153">
                Cumulation constant.                
            </javadoc>
            <declaration name="cs" type="double" line="155"/>
            <javadoc line="155">
                Cumulation constant for step-size.                
            </javadoc>
            <declaration name="damps" type="double" line="157"/>
            <javadoc line="157">
                Damping for step-size.                
            </javadoc>
            <declaration name="ccov1" type="double" line="159"/>
            <javadoc line="159">
                Learning rate for rank-one update.                
            </javadoc>
            <declaration name="ccovmu" type="double" line="161"/>
            <javadoc line="161">
                Learning rate for rank-mu update&apos;                
            </javadoc>
            <declaration name="chiN" type="double" line="163"/>
            <javadoc line="163">
                Expectation of ||N(0,I)|| == norm(randn(N,1)).                
            </javadoc>
            <declaration name="ccov1Sep" type="double" line="165"/>
            <javadoc line="165">
                Learning rate for rank-one update - diagonalOnly                
            </javadoc>
            <declaration name="ccovmuSep" type="double" line="167"/>
            <javadoc line="167">
                Learning rate for rank-mu update - diagonalOnly                
            </javadoc>
            <declaration name="xmean" type="RealMatrix" line="171"/>
            <javadoc line="171">
                Objective variables.                
            </javadoc>
            <declaration name="pc" type="RealMatrix" line="173"/>
            <javadoc line="173">
                Evolution path.                
            </javadoc>
            <declaration name="ps" type="RealMatrix" line="175"/>
            <javadoc line="175">
                Evolution path for sigma.                
            </javadoc>
            <declaration name="normps" type="double" line="177"/>
            <javadoc line="177">
                Norm of ps, stored for efficiency.                
            </javadoc>
            <declaration name="B" type="RealMatrix" line="179"/>
            <javadoc line="179">
                Coordinate system.                
            </javadoc>
            <declaration name="D" type="RealMatrix" line="181"/>
            <javadoc line="181">
                Scaling.                
            </javadoc>
            <declaration name="BD" type="RealMatrix" line="183"/>
            <javadoc line="183">
                BD, stored for efficiency.                
            </javadoc>
            <declaration name="diagD" type="RealMatrix" line="185"/>
            <javadoc line="185">
                Diagonal of sqrt(D), stored for efficiency.                
            </javadoc>
            <declaration name="C" type="RealMatrix" line="187"/>
            <javadoc line="187">
                Covariance matrix.                
            </javadoc>
            <declaration name="diagC" type="RealMatrix" line="189"/>
            <javadoc line="189">
                Diagonal of C, used for diagonalOnly.                
            </javadoc>
            <declaration name="iterations" type="int" line="191"/>
            <javadoc line="191">
                Number of iterations already performed.                
            </javadoc>
            <declaration name="fitnessHistory" type="double[]" line="194"/>
            <javadoc line="194">
                History queue of best values.                
            </javadoc>
            <declaration name="historySize" type="int" line="196"/>
            <javadoc line="196">
                Size of history queue of best values.                
            </javadoc>
            <declaration name="random" type="RandomGenerator" line="199"/>
            <javadoc line="199">
                Random generator.                
            </javadoc>
            <declaration name="statisticsSigmaHistory" type="List&amp;lt;Double&amp;gt;" line="202"/>
            <javadoc line="202">
                History of sigma values.                
            </javadoc>
            <declaration name="statisticsMeanHistory" type="List&amp;lt;RealMatrix&amp;gt;" line="204"/>
            <javadoc line="204">
                History of mean matrix.                
            </javadoc>
            <declaration name="statisticsFitnessHistory" type="List&amp;lt;Double&amp;gt;" line="206"/>
            <javadoc line="206">
                History of fitness values.                
            </javadoc>
            <declaration name="statisticsDHistory" type="List&amp;lt;RealMatrix&amp;gt;" line="208"/>
            <javadoc line="208">
                History of D matrix.                
            </javadoc>
            <javadoc line="211">
                @param maxIterations Maximal number of iterations.                
                <param>
                    stopFitness Whether to stop if objective function value is smaller than{@code stopFitness}.                    
                </param>
                <param>
                    isActiveCMA Chooses the covariance matrix update method.                    
                </param>
                <param>
                    diagonalOnly Number of initial iterations, where the covariance matrix
                      remains diagonal.                    
                </param>
                <param>
                    checkFeasableCount Determines how often new random objective variables are
                      generated in case they are out of bounds.                    
                </param>
                <param>
                    random Random generator.                    
                </param>
                <param>
                    generateStatistics Whether statistic data is collected.                    
                </param>
                <param>
                    checker Convergence checker.                    
                </param>
                <since>
                    3.1                    
                </since>
            </javadoc>
            <method name="CMAESOptimizer" type="constructor" line="233">
                <params>
                    <param name="maxIterations" type="int"/>
                    <param name="stopFitness" type="double"/>
                    <param name="isActiveCMA" type="boolean"/>
                    <param name="diagonalOnly" type="int"/>
                    <param name="checkFeasableCount" type="int"/>
                    <param name="random" type="RandomGenerator"/>
                    <param name="generateStatistics" type="boolean"/>
                    <param name="checker" type="ConvergenceChecker&lt;PointValuePair&gt;"/>
                </params>
            </method>
            <javadoc line="244">
                @return History of sigma values.                
            </javadoc>
            <method name="getStatisticsSigmaHistory" type="List&lt;Double&gt;" line="247"/>
            <javadoc line="251">
                @return History of mean matrix.                
            </javadoc>
            <method name="getStatisticsMeanHistory" type="List&lt;RealMatrix&gt;" line="254"/>
            <javadoc line="258">
                @return History of fitness values.                
            </javadoc>
            <method name="getStatisticsFitnessHistory" type="List&lt;Double&gt;" line="261"/>
            <javadoc line="265">
                @return History of D matrix.                
            </javadoc>
            <method name="getStatisticsDHistory" type="List&lt;RealMatrix&gt;" line="268"/>
            <class name="Sigma" line="272">
                <implements interface="OptimizationData"/>
                <javadoc line="272">
                    Input sigma values.
                      They define the initial coordinate-wise standard deviations for
                      sampling new search points around the initial guess.
                      It is suggested to set them to the estimated distance from the
                      initial to the desired optimum.
                      Small values induce the search to be more local (and very small
                      values are more likely to find a local optimum close to the initial
                      guess).
                      Too small values might however lead to early termination.                    
                </javadoc>
                <declaration name="sigma" type="double[]" line="284"/>
                <javadoc line="284">
                    Sigma values.                    
                </javadoc>
                <javadoc line="287">
                    @param s Sigma values.                    
                    <throws>
                        NotPositiveException if any of the array entries is smaller
                          than zero.                        
                    </throws>
                </javadoc>
                <method name="Sigma" type="constructor" line="293">
                    <params>
                        <param name="s" type="double[]"/>
                    </params>
                    <scope line="294">
                        <scope line="295"/>
                    </scope>
                </method>
                <javadoc line="303">
                    @return the sigma values.                    
                </javadoc>
                <method name="getSigma" type="double[]" line="306"/>
            </class>
            <class name="PopulationSize" line="311">
                <implements interface="OptimizationData"/>
                <javadoc line="311">
                    Population size.
                      The number of offspring is the primary strategy parameter.
                      In the absence of better clues, a good default could be an
                      integer close to {@code 4 + 3 ln(n)}, where {@code n} is the
                      number of optimized parameters.
                      Increasing the population size improves global search properties
                      at the expense of speed (which in general decreases at most
                      linearly with increasing population size).                    
                </javadoc>
                <declaration name="lambda" type="int" line="322"/>
                <javadoc line="322">
                    Population size.                    
                </javadoc>
                <javadoc line="325">
                    @param size Population size.                    
                    <throws>
                        NotStrictlyPositiveException if {@code size &lt;= 0}.                        
                    </throws>
                </javadoc>
                <method name="PopulationSize" type="constructor" line="330">
                    <params>
                        <param name="size" type="int"/>
                    </params>
                    <scope line="331"/>
                </method>
                <javadoc line="337">
                    @return the population size.                    
                </javadoc>
                <method name="getPopulationSize" type="int" line="340"/>
            </class>
            <javadoc line="345">
                {@inheritDoc}                
                <param>
                    optData Optimization data. In addition to those documented in{@link MultivariateOptimizer#parseOptimizationData(OptimizationData[])MultivariateOptimizer}, this method will register the following data:
                      &lt;ul&gt;
                      &lt;li&gt;{@link Sigma}&lt;/li&gt;
                      &lt;li&gt;{@link PopulationSize}&lt;/li&gt;
                      &lt;/ul&gt;                    
                </param>
                <return>
                    {@inheritDoc}                    
                </return>
                <throws>
                    TooManyEvaluationsException if the maximal number of
                      evaluations is exceeded.                    
                </throws>
                <throws>
                    DimensionMismatchException if the initial guess, target, and weight
                      arguments have inconsistent dimensions.                    
                </throws>
            </javadoc>
            <method name="optimize" type="PointValuePair" line="364">
                <params>
                    <param name="optData" type="OptimizationData"/>
                </params>
                <comment line="366">
                    Set up base class and perform computation.                    
                </comment>
            </method>
            <javadoc line="369">
                {@inheritDoc}                
            </javadoc>
            <method name="doOptimize" type="PointValuePair" line="371">
                <comment line="373">
                    -------------------- Initialization --------------------------------                    
                </comment>
                <comment line="377">
                    number of objective variables/problem dimension                    
                </comment>
                <comment line="389">
                    -------------------- Generation Loop --------------------------------                    
                </comment>
                <comment line="395">
                    Generate and evaluate lambda offspring                    
                </comment>
                <comment line="400">
                    generate random offspring                    
                </comment>
                <comment line="406">
                    m + sig * Normal(0,C)                    
                </comment>
                <comment line="415">
                    regenerate random arguments for row                    
                </comment>
                <comment line="420">
                    compute fitness                    
                </comment>
                <comment line="426">
                    Compute fitnesses by adding value and penalty after scaling by value range.                    
                </comment>
                <comment line="432">
                    Sort by fitness and compute weighted mean into xmean                    
                </comment>
                <comment line="434">
                    Calculate new xmean, this is selection and recombination                    
                </comment>
                <comment line="435">
                    for speed up of Eq. (2) and (3)                    
                </comment>
                <comment line="446">
                    Adapt step size sigma - Eq. (5)                    
                </comment>
                <comment line="460">
                    handle termination criteria
                     Break, if fitness is good enough                    
                </comment>
                <comment line="491">
                    condition number of the covariance matrix exceeds 1e14                    
                </comment>
                <comment line="495">
                    user defined termination                    
                </comment>
                <comment line="506">
                    Adjust step size in case of equal function values (flat fitness)                    
                </comment>
                <comment line="514">
                    store best in history                    
                </comment>
                <declaration name="fitfun" type="FitnessFunction" line="374"/>
                <declaration name="guess" type="double[]" line="375"/>
                <declaration name="valuePenalty" type="ValuePenaltyPair" line="380"/>
                <declaration name="bestValue" type="double" line="381"/>
                <declaration name="optimum" type="PointValuePair" line="383"/>
                <declaration name="lastResult" type="PointValuePair" line="386"/>
                <scope line="391">
                    <declaration name="arz" type="RealMatrix" line="395"/>
                    <declaration name="arx" type="RealMatrix" line="396"/>
                    <declaration name="fitness" type="double[]" line="397"/>
                    <declaration name="valuePenaltyPairs" type="ValuePenaltyPair[]" line="398"/>
                    <scope line="400">
                        <declaration name="arxk" type="RealMatrix" line="401"/>
                        <scope line="402">
                            <scope line="403"/>
                            <scope line="406"/>
                            <scope line="411"/>
                        </scope>
                        <scope line="418"/>
                        <scope line="420"/>
                    </scope>
                    <declaration name="valueRange" type="double" line="426"/>
                    <scope line="427"/>
                    <declaration name="arindex" type="int[]" line="432"/>
                    <declaration name="xold" type="RealMatrix" line="434"/>
                    <declaration name="bestArx" type="RealMatrix" line="435"/>
                    <declaration name="bestArz" type="RealMatrix" line="437"/>
                    <declaration name="zmean" type="RealMatrix" line="438"/>
                    <declaration name="hsig" type="boolean" line="439"/>
                    <scope line="440"/>
                    <scope line="442"/>
                    <declaration name="bestFitness" type="double" line="447"/>
                    <declaration name="worstFitness" type="double" line="448"/>
                    <scope line="449">
                        <scope line="455"/>
                    </scope>
                    <scope line="461"/>
                    <declaration name="sqrtDiagC" type="double[]" line="464"/>
                    <declaration name="pcCol" type="double[]" line="465"/>
                    <scope line="466">
                        <scope line="467"/>
                        <scope line="470"/>
                    </scope>
                    <scope line="474">
                        <scope line="475"/>
                    </scope>
                    <declaration name="historyBest" type="double" line="479"/>
                    <declaration name="historyWorst" type="double" line="480"/>
                    <scope line="483"/>
                    <scope line="487"/>
                    <scope line="491"/>
                    <scope line="495">
                        <declaration name="current" type="PointValuePair" line="496"/>
                        <scope line="500"/>
                    </scope>
                    <scope line="506"/>
                    <scope line="510"/>
                    <scope line="515"/>
                </scope>
            </method>
            <javadoc line="525">
                Scans the list of (required and optional) optimization data that
                  characterize the problem.                
                <param>
                    optData Optimization data. The following data will be looked for:
                      &lt;ul&gt;
                      &lt;li&gt;{@link Sigma}&lt;/li&gt;
                      &lt;li&gt;{@link PopulationSize}&lt;/li&gt;
                      &lt;/ul&gt;                    
                </param>
            </javadoc>
            <method name="parseOptimizationData" type="void" line="536">
                <params>
                    <param name="optData" type="OptimizationData"/>
                </params>
                <comment line="538">
                    Allow base class to register its own data.                    
                </comment>
                <comment line="541">
                    The existing values (as set by the previous call) are reused if
                     not provided in the argument list.                    
                </comment>
                <scope line="542">
                    <scope line="543"/>
                    <scope line="547"/>
                </scope>
            </method>
            <javadoc line="556">
                Checks dimensions and values of boundaries and inputSigma if defined.                
            </javadoc>
            <method name="checkParameters" type="void" line="559">
                <declaration name="init" type="double[]" line="560"/>
                <declaration name="lB" type="double[]" line="561"/>
                <declaration name="uB" type="double[]" line="562"/>
                <scope line="564">
                    <scope line="565"/>
                    <scope line="568">
                        <scope line="569"/>
                    </scope>
                </scope>
            </method>
            <javadoc line="576">
                Initialization of the dynamic search parameters                
                <param>
                    guess Initial guess for the arguments of the fitness function.                    
                </param>
            </javadoc>
            <method name="initializeCMA" type="void" line="581">
                <params>
                    <param name="guess" type="double[]"/>
                </params>
                <comment line="586">
                    initialize sigma                    
                </comment>
                <comment line="592">
                    overall standard deviation                    
                </comment>
                <comment line="594">
                    initialize termination criteria                    
                </comment>
                <comment line="600">
                    initialize selection strategy parameters                    
                </comment>
                <comment line="601">
                    number of parents/points for recombination                    
                </comment>
                <comment line="612">
                    variance-effectiveness of sum w_i x_i                    
                </comment>
                <comment line="614">
                    initialize dynamic strategy parameters and constants                    
                </comment>
                <comment line="621">
                    minor increment                    
                </comment>
                <comment line="629">
                    intialize CMA internal values - updated each generation                    
                </comment>
                <comment line="630">
                    objective variables                    
                </comment>
                <comment line="633">
                    evolution paths for C and sigma                    
                </comment>
                <comment line="634">
                    B defines the coordinate system                    
                </comment>
                <comment line="638">
                    diagonal D defines the scaling                    
                </comment>
                <comment line="640">
                    covariance                    
                </comment>
                <comment line="642">
                    history of fitness values                    
                </comment>
                <scope line="582"/>
                <declaration name="sigmaArray" type="double[][]" line="586"/>
                <scope line="587"/>
                <declaration name="insigma" type="RealMatrix" line="590"/>
                <declaration name="sumw" type="double" line="603"/>
                <declaration name="sumwq" type="double" line="604"/>
                <scope line="605">
                    <declaration name="w" type="double" line="606"/>
                </scope>
                <scope line="642"/>
            </method>
            <javadoc line="647">
                Update of the evolution paths ps and pc.                
                <param>
                    zmean Weighted row matrix of the gaussian random numbers generating
                      the current offspring.                    
                </param>
                <param>
                    xold xmean matrix of the previous generation.                    
                </param>
                <return>
                    hsig flag indicating a small correction.                    
                </return>
            </javadoc>
            <method name="updateEvolutionPaths" type="boolean" line="655">
                <params>
                    <param name="zmean" type="RealMatrix"/>
                    <param name="xold" type="RealMatrix"/>
                </params>
                <declaration name="hsig" type="boolean" line="660"/>
                <scope line="664"/>
            </method>
            <javadoc line="670">
                Update of the covariance matrix C for diagonalOnly &gt; 0                
                <param>
                    hsig Flag indicating a small correction.                    
                </param>
                <param>
                    bestArz Fitness-sorted matrix of the gaussian random values of the
                      current offspring.                    
                </param>
            </javadoc>
            <method name="updateCovarianceDiagonalOnly" type="void" line="678">
                <params>
                    <param name="hsig" type="boolean"/>
                    <param name="bestArz" type="RealMatrix"/>
                </params>
                <comment line="680">
                    minor correction if hsig==false                    
                </comment>
                <comment line="683">
                    regard old matrix                    
                </comment>
                <comment line="684">
                    plus rank one update                    
                </comment>
                <comment line="685">
                    plus rank mu update                    
                </comment>
                <comment line="687">
                    replaces eig(C)                    
                </comment>
                <comment line="690">
                    full covariance matrix from now on                    
                </comment>
                <declaration name="oldFac" type="double" line="680"/>
                <scope line="688"/>
            </method>
            <javadoc line="697">
                Update of the covariance matrix C.                
                <param>
                    hsig Flag indicating a small correction.                    
                </param>
                <param>
                    bestArx Fitness-sorted matrix of the argument vectors producing the
                      current offspring.                    
                </param>
                <param>
                    arz Unsorted matrix containing the gaussian random values of the
                      current offspring.                    
                </param>
                <param>
                    arindex Indices indicating the fitness-order of the current offspring.                    
                </param>
                <param>
                    xold xmean matrix of the previous generation.                    
                </param>
            </javadoc>
            <method name="updateCovariance" type="void" line="710">
                <params>
                    <param name="hsig" type="boolean"/>
                    <param name="bestArx" type="RealMatrix"/>
                    <param name="arz" type="RealMatrix"/>
                    <param name="arindex" type="int[]"/>
                    <param name="xold" type="RealMatrix"/>
                </params>
                <comment line="715">
                    mu difference vectors                    
                </comment>
                <comment line="717">
                    rank one update                    
                </comment>
                <comment line="718">
                    minor correction if hsig==false                    
                </comment>
                <comment line="722">
                    Adapt covariance matrix C active CMA                    
                </comment>
                <comment line="725">
                    keep at least 0.66 in all directions, small popsize are most
                     critical                    
                </comment>
                <comment line="728">
                    where to make up for the variance loss                    
                </comment>
                <comment line="730">
                    prepare vectors, compute negative updating matrix Cneg                    
                </comment>
                <comment line="741">
                    check and set learning rate negccov                    
                </comment>
                <comment line="752">
                    regard old matrix                    
                </comment>
                <comment line="753">
                    plus rank one update                    
                </comment>
                <comment line="754">
                    plus rank mu update                    
                </comment>
                <comment line="759">
                    Adapt covariance matrix C - nonactive                    
                </comment>
                <comment line="760">
                    regard old matrix                    
                </comment>
                <comment line="761">
                    plus rank one update                    
                </comment>
                <comment line="762">
                    plus rank mu update                    
                </comment>
                <declaration name="negccov" type="double" line="711"/>
                <scope line="712">
                    <declaration name="arpos" type="RealMatrix" line="713"/>
                    <declaration name="roneu" type="RealMatrix" line="715"/>
                    <declaration name="oldFac" type="double" line="718"/>
                    <scope line="720">
                        <declaration name="negminresidualvariance" type="double" line="726"/>
                        <declaration name="negalphaold" type="double" line="728"/>
                        <declaration name="arReverseIndex" type="int[]" line="730"/>
                        <declaration name="arzneg" type="RealMatrix" line="731"/>
                        <declaration name="arnorms" type="RealMatrix" line="732"/>
                        <declaration name="idxnorms" type="int[]" line="733"/>
                        <declaration name="arnormsSorted" type="RealMatrix" line="734"/>
                        <declaration name="idxReverse" type="int[]" line="735"/>
                        <declaration name="arnormsReverse" type="RealMatrix" line="736"/>
                        <declaration name="idxInv" type="int[]" line="738"/>
                        <declaration name="arnormsInv" type="RealMatrix" line="739"/>
                        <declaration name="negcovMax" type="double" line="741"/>
                        <scope line="743"/>
                        <declaration name="artmp" type="RealMatrix" line="747"/>
                        <declaration name="Cneg" type="RealMatrix" line="748"/>
                    </scope>
                    <scope line="757"/>
                </scope>
            </method>
            <javadoc line="769">
                Update B and D from C.                
                <param>
                    negccov Negative covariance factor.                    
                </param>
            </javadoc>
            <method name="updateBD" type="void" line="774">
                <params>
                    <param name="negccov" type="double"/>
                </params>
                <comment line="778">
                    to achieve O(N^2)                    
                </comment>
                <comment line="780">
                    enforce symmetry to prevent complex numbers                    
                </comment>
                <comment line="782">
                    eigen decomposition, B==normalized eigenvectors                    
                </comment>
                <comment line="801">
                    D contains standard deviations now                    
                </comment>
                <comment line="802">
                    O(n^2)                    
                </comment>
                <scope line="776">
                    <declaration name="eig" type="EigenDecomposition" line="780"/>
                    <scope line="784">
                        <scope line="785">
                            <scope line="786"/>
                        </scope>
                        <declaration name="tfac" type="double" line="790"/>
                    </scope>
                    <scope line="794">
                        <declaration name="tfac" type="double" line="795"/>
                    </scope>
                </scope>
            </method>
            <javadoc line="805">
                Pushes the current best fitness value in a history queue.                
                <param>
                    vals History queue.                    
                </param>
                <param>
                    val Current best fitness value.                    
                </param>
            </javadoc>
            <method name="push" type="void" line="811">
                <params>
                    <param name="vals" type="double[]"/>
                    <param name="val" type="double"/>
                </params>
                <scope line="812"/>
            </method>
            <javadoc line="818">
                Sorts fitness values.                
                <param>
                    doubles Array of values to be sorted.                    
                </param>
                <return>
                    a sorted array of indices pointing into doubles.                    
                </return>
            </javadoc>
            <method name="sortedIndices" type="int[]" line="824">
                <params>
                    <param name="doubles" type="double[]"/>
                </params>
                <declaration name="dis" type="DoubleIndex[]" line="825"/>
                <scope line="826"/>
                <declaration name="indices" type="int[]" line="830"/>
                <scope line="831"/>
            </method>
            <javadoc line="836">
                Get range of values.                
                <param>
                    vpPairs Array of valuePenaltyPairs to get range from.                    
                </param>
                <return>
                    a double equal to maximum value minus minimum value.                    
                </return>
            </javadoc>
            <method name="valueRange" type="double" line="842">
                <params>
                    <param name="vpPairs" type="ValuePenaltyPair[]"/>
                </params>
                <declaration name="max" type="double" line="843"/>
                <declaration name="min" type="double" line="844"/>
                <scope line="845">
                    <scope line="846"/>
                    <scope line="849"/>
                </scope>
            </method>
            <class name="DoubleIndex" line="856">
                <implements interface="Comparable">
                    <type_params>
                        <type_param name="DoubleIndex"/>
                    </type_params>
                </implements>
                <javadoc line="856">
                    Used to sort fitness values. Sorting is always in lower value first
                      order.                    
                </javadoc>
                <declaration name="value" type="double" line="861"/>
                <javadoc line="861">
                    Value to compare.                    
                </javadoc>
                <declaration name="index" type="int" line="863"/>
                <javadoc line="863">
                    Index into sorted array.                    
                </javadoc>
                <javadoc line="866">
                    @param value Value to compare.                    
                    <param>
                        index Index into sorted array.                        
                    </param>
                </javadoc>
                <method name="DoubleIndex" type="constructor" line="870">
                    <params>
                        <param name="value" type="double"/>
                        <param name="index" type="int"/>
                    </params>
                </method>
                <javadoc line="875">
                    {@inheritDoc}                    
                </javadoc>
                <method name="compareTo" type="int" line="876">
                    <params>
                        <param name="o" type="DoubleIndex"/>
                    </params>
                </method>
                <javadoc line="880">
                    {@inheritDoc}                    
                </javadoc>
                <method name="equals" type="boolean" line="882">
                    <params>
                        <param name="other" type="Object"/>
                    </params>
                    <scope line="884"/>
                    <scope line="888"/>
                </method>
                <javadoc line="895">
                    {@inheritDoc}                    
                </javadoc>
                <method name="hashCode" type="int" line="897">
                    <declaration name="bits" type="long" line="898"/>
                </method>
            </class>
            <class name="ValuePenaltyPair" line="902">
                <javadoc line="902">
                    Stores the value and penalty (for repair of out of bounds point).                    
                </javadoc>
                <declaration name="value" type="double" line="906"/>
                <javadoc line="906">
                    Objective function value.                    
                </javadoc>
                <declaration name="penalty" type="double" line="908"/>
                <javadoc line="908">
                    Penalty value for repair of out out of bounds points.                    
                </javadoc>
                <javadoc line="911">
                    @param value Function value.                    
                    <param>
                        penalty Out-of-bounds penalty.                        
                    </param>
                </javadoc>
                <method name="ValuePenaltyPair" type="constructor" line="915">
                    <params>
                        <param name="value" type="double"/>
                        <param name="penalty" type="double"/>
                    </params>
                </method>
            </class>
            <class name="FitnessFunction" line="922">
                <javadoc line="922">
                    Normalizes fitness values to the range [0,1]. Adds a penalty to the
                      fitness value if out of range.                    
                </javadoc>
                <declaration name="isRepairMode" type="boolean" line="927"/>
                <javadoc line="927">
                    Flag indicating whether the objective variables are forced into their
                      bounds if defined                    
                </javadoc>
                <javadoc line="933">
                    Simple constructor.                    
                </javadoc>
                <method name="FitnessFunction" type="constructor" line="935"/>
                <javadoc line="939">
                    @param point Normalized objective variables.                    
                    <return>
                        the objective value + penalty for violated bounds.                        
                    </return>
                </javadoc>
                <method name="value" type="ValuePenaltyPair" line="943">
                    <params>
                        <param name="point" type="double[]"/>
                    </params>
                    <declaration name="value" type="double" line="944"/>
                    <declaration name="penalty" type="double" line="945"/>
                    <scope line="946">
                        <declaration name="repaired" type="double[]" line="947"/>
                    </scope>
                    <scope line="950"/>
                </method>
                <javadoc line="958">
                    @param x Normalized objective variables.                    
                    <return>
                        {@code true} if in bounds.                        
                    </return>
                </javadoc>
                <method name="isFeasible" type="boolean" line="962">
                    <params>
                        <param name="x" type="double[]"/>
                    </params>
                    <declaration name="lB" type="double[]" line="963"/>
                    <declaration name="uB" type="double[]" line="964"/>
                    <scope line="966">
                        <scope line="967"/>
                        <scope line="970"/>
                    </scope>
                </method>
                <javadoc line="977">
                    @param x Normalized objective variables.                    
                    <return>
                        the repaired (i.e. all in bounds) objective variables.                        
                    </return>
                </javadoc>
                <method name="repair" type="double[]" line="981">
                    <params>
                        <param name="x" type="double[]"/>
                    </params>
                    <declaration name="lB" type="double[]" line="982"/>
                    <declaration name="uB" type="double[]" line="983"/>
                    <declaration name="repaired" type="double[]" line="985"/>
                    <scope line="986">
                        <scope line="987"/>
                        <scope line="989"/>
                        <scope line="991"/>
                    </scope>
                </method>
                <javadoc line="998">
                    @param x Normalized objective variables.                    
                    <param>
                        repaired Repaired objective variables.                        
                    </param>
                    <return>
                        Penalty value according to the violation of the bounds.                        
                    </return>
                </javadoc>
                <method name="penalty" type="double" line="1003">
                    <params>
                        <param name="x" type="double[]"/>
                        <param name="repaired" type="double[]"/>
                    </params>
                    <declaration name="penalty" type="double" line="1004"/>
                    <scope line="1005">
                        <declaration name="diff" type="double" line="1006"/>
                    </scope>
                </method>
            </class>
            <javadoc line="1015">
                @param m Input matrix                
                <return>
                    Matrix representing the element-wise logarithm of m.                    
                </return>
            </javadoc>
            <method name="log" type="RealMatrix" line="1019">
                <params>
                    <param name="m" type="RealMatrix"/>
                </params>
                <declaration name="d" type="double[][]" line="1020"/>
                <scope line="1021">
                    <scope line="1022"/>
                </scope>
            </method>
            <javadoc line="1029">
                @param m Input matrix.                
                <return>
                    Matrix representing the element-wise square root of m.                    
                </return>
            </javadoc>
            <method name="sqrt" type="RealMatrix" line="1033">
                <params>
                    <param name="m" type="RealMatrix"/>
                </params>
                <declaration name="d" type="double[][]" line="1034"/>
                <scope line="1035">
                    <scope line="1036"/>
                </scope>
            </method>
            <javadoc line="1043">
                @param m Input matrix.                
                <return>
                    Matrix representing the element-wise square of m.                    
                </return>
            </javadoc>
            <method name="square" type="RealMatrix" line="1047">
                <params>
                    <param name="m" type="RealMatrix"/>
                </params>
                <declaration name="d" type="double[][]" line="1048"/>
                <scope line="1049">
                    <scope line="1050">
                        <declaration name="e" type="double" line="1051"/>
                    </scope>
                </scope>
            </method>
            <javadoc line="1058">
                @param m Input matrix 1.                
                <param>
                    n Input matrix 2.                    
                </param>
                <return>
                    the matrix where the elements of m and n are element-wise multiplied.                    
                </return>
            </javadoc>
            <method name="times" type="RealMatrix" line="1063">
                <params>
                    <param name="m" type="RealMatrix"/>
                    <param name="n" type="RealMatrix"/>
                </params>
                <declaration name="d" type="double[][]" line="1064"/>
                <scope line="1065">
                    <scope line="1066"/>
                </scope>
            </method>
            <javadoc line="1073">
                @param m Input matrix 1.                
                <param>
                    n Input matrix 2.                    
                </param>
                <return>
                    Matrix where the elements of m and n are element-wise divided.                    
                </return>
            </javadoc>
            <method name="divide" type="RealMatrix" line="1078">
                <params>
                    <param name="m" type="RealMatrix"/>
                    <param name="n" type="RealMatrix"/>
                </params>
                <declaration name="d" type="double[][]" line="1079"/>
                <scope line="1080">
                    <scope line="1081"/>
                </scope>
            </method>
            <javadoc line="1088">
                @param m Input matrix.                
                <param>
                    cols Columns to select.                    
                </param>
                <return>
                    Matrix representing the selected columns.                    
                </return>
            </javadoc>
            <method name="selectColumns" type="RealMatrix" line="1093">
                <params>
                    <param name="m" type="RealMatrix"/>
                    <param name="cols" type="int[]"/>
                </params>
                <declaration name="d" type="double[][]" line="1094"/>
                <scope line="1095">
                    <scope line="1096"/>
                </scope>
            </method>
            <javadoc line="1103">
                @param m Input matrix.                
                <param>
                    k Diagonal position.                    
                </param>
                <return>
                    Upper triangular part of matrix.                    
                </return>
            </javadoc>
            <method name="triu" type="RealMatrix" line="1108">
                <params>
                    <param name="m" type="RealMatrix"/>
                    <param name="k" type="int"/>
                </params>
                <declaration name="d" type="double[][]" line="1109"/>
                <scope line="1110">
                    <scope line="1111"/>
                </scope>
            </method>
            <javadoc line="1118">
                @param m Input matrix.                
                <return>
                    Row matrix representing the sums of the rows.                    
                </return>
            </javadoc>
            <method name="sumRows" type="RealMatrix" line="1122">
                <params>
                    <param name="m" type="RealMatrix"/>
                </params>
                <declaration name="d" type="double[][]" line="1123"/>
                <scope line="1124">
                    <declaration name="sum" type="double" line="1125"/>
                    <scope line="1126"/>
                </scope>
            </method>
            <javadoc line="1134">
                @param m Input matrix.                
                <return>
                    the diagonal n-by-n matrix if m is a column matrix or the column
                      matrix representing the diagonal if m is a n-by-n matrix.                    
                </return>
            </javadoc>
            <method name="diag" type="RealMatrix" line="1139">
                <params>
                    <param name="m" type="RealMatrix"/>
                </params>
                <scope line="1140">
                    <declaration name="d" type="double[][]" line="1141"/>
                    <scope line="1142"/>
                </scope>
                <scope line="1146">
                    <declaration name="d" type="double[][]" line="1147"/>
                    <scope line="1148"/>
                </scope>
            </method>
            <javadoc line="1155">
                Copies a column from m1 to m2.                
                <param>
                    m1 Source matrix.                    
                </param>
                <param>
                    col1 Source column.                    
                </param>
                <param>
                    m2 Target matrix.                    
                </param>
                <param>
                    col2 Target column.                    
                </param>
            </javadoc>
            <method name="copyColumn" type="void" line="1164">
                <params>
                    <param name="m1" type="RealMatrix"/>
                    <param name="col1" type="int"/>
                    <param name="m2" type="RealMatrix"/>
                    <param name="col2" type="int"/>
                </params>
                <scope line="1165"/>
            </method>
            <javadoc line="1170">
                @param n Number of rows.                
                <param>
                    m Number of columns.                    
                </param>
                <return>
                    n-by-m matrix filled with 1.                    
                </return>
            </javadoc>
            <method name="ones" type="RealMatrix" line="1175">
                <params>
                    <param name="n" type="int"/>
                    <param name="m" type="int"/>
                </params>
                <declaration name="d" type="double[][]" line="1176"/>
                <scope line="1177"/>
            </method>
            <javadoc line="1183">
                @param n Number of rows.                
                <param>
                    m Number of columns.                    
                </param>
                <return>
                    n-by-m matrix of 0 values out of diagonal, and 1 values on
                      the diagonal.                    
                </return>
            </javadoc>
            <method name="eye" type="RealMatrix" line="1189">
                <params>
                    <param name="n" type="int"/>
                    <param name="m" type="int"/>
                </params>
                <declaration name="d" type="double[][]" line="1190"/>
                <scope line="1191">
                    <scope line="1192"/>
                </scope>
            </method>
            <javadoc line="1199">
                @param n Number of rows.                
                <param>
                    m Number of columns.                    
                </param>
                <return>
                    n-by-m matrix of zero values.                    
                </return>
            </javadoc>
            <method name="zeros" type="RealMatrix" line="1204">
                <params>
                    <param name="n" type="int"/>
                    <param name="m" type="int"/>
                </params>
            </method>
            <javadoc line="1208">
                @param mat Input matrix.                
                <param>
                    n Number of row replicates.                    
                </param>
                <param>
                    m Number of column replicates.                    
                </param>
                <return>
                    a matrix which replicates the input matrix in both directions.                    
                </return>
            </javadoc>
            <method name="repmat" type="RealMatrix" line="1214">
                <params>
                    <param name="mat" type="RealMatrix"/>
                    <param name="n" type="int"/>
                    <param name="m" type="int"/>
                </params>
                <declaration name="rd" type="int" line="1215"/>
                <declaration name="cd" type="int" line="1216"/>
                <declaration name="d" type="double[][]" line="1217"/>
                <scope line="1218">
                    <scope line="1219"/>
                </scope>
            </method>
            <javadoc line="1226">
                @param start Start value.                
                <param>
                    end End value.                    
                </param>
                <param>
                    step Step size.                    
                </param>
                <return>
                    a sequence as column matrix.                    
                </return>
            </javadoc>
            <method name="sequence" type="RealMatrix" line="1232">
                <params>
                    <param name="start" type="double"/>
                    <param name="end" type="double"/>
                    <param name="step" type="double"/>
                </params>
                <declaration name="size" type="int" line="1233"/>
                <declaration name="d" type="double[][]" line="1234"/>
                <declaration name="value" type="double" line="1235"/>
                <scope line="1236"/>
            </method>
            <javadoc line="1243">
                @param m Input matrix.                
                <return>
                    the maximum of the matrix element values.                    
                </return>
            </javadoc>
            <method name="max" type="double" line="1247">
                <params>
                    <param name="m" type="RealMatrix"/>
                </params>
                <declaration name="max" type="double" line="1248"/>
                <scope line="1249">
                    <scope line="1250">
                        <declaration name="e" type="double" line="1251"/>
                        <scope line="1252"/>
                    </scope>
                </scope>
            </method>
            <javadoc line="1260">
                @param m Input matrix.                
                <return>
                    the minimum of the matrix element values.                    
                </return>
            </javadoc>
            <method name="min" type="double" line="1264">
                <params>
                    <param name="m" type="RealMatrix"/>
                </params>
                <declaration name="min" type="double" line="1265"/>
                <scope line="1266">
                    <scope line="1267">
                        <declaration name="e" type="double" line="1268"/>
                        <scope line="1269"/>
                    </scope>
                </scope>
            </method>
            <javadoc line="1277">
                @param m Input array.                
                <return>
                    the maximum of the array values.                    
                </return>
            </javadoc>
            <method name="max" type="double" line="1281">
                <params>
                    <param name="m" type="double[]"/>
                </params>
                <declaration name="max" type="double" line="1282"/>
                <scope line="1283">
                    <scope line="1284"/>
                </scope>
            </method>
            <javadoc line="1291">
                @param m Input array.                
                <return>
                    the minimum of the array values.                    
                </return>
            </javadoc>
            <method name="min" type="double" line="1295">
                <params>
                    <param name="m" type="double[]"/>
                </params>
                <declaration name="min" type="double" line="1296"/>
                <scope line="1297">
                    <scope line="1298"/>
                </scope>
            </method>
            <javadoc line="1305">
                @param indices Input index array.                
                <return>
                    the inverse of the mapping defined by indices.                    
                </return>
            </javadoc>
            <method name="inverse" type="int[]" line="1309">
                <params>
                    <param name="indices" type="int[]"/>
                </params>
                <declaration name="inverse" type="int[]" line="1310"/>
                <scope line="1311"/>
            </method>
            <javadoc line="1317">
                @param indices Input index array.                
                <return>
                    the indices in inverse order (last is first).                    
                </return>
            </javadoc>
            <method name="reverse" type="int[]" line="1321">
                <params>
                    <param name="indices" type="int[]"/>
                </params>
                <declaration name="reverse" type="int[]" line="1322"/>
                <scope line="1323"/>
            </method>
            <javadoc line="1329">
                @param size Length of random array.                
                <return>
                    an array of Gaussian random numbers.                    
                </return>
            </javadoc>
            <method name="randn" type="double[]" line="1333">
                <params>
                    <param name="size" type="int"/>
                </params>
                <declaration name="randn" type="double[]" line="1334"/>
                <scope line="1335"/>
            </method>
            <javadoc line="1341">
                @param size Number of rows.                
                <param>
                    popSize Population size.                    
                </param>
                <return>
                    a 2-dimensional matrix of Gaussian random numbers.                    
                </return>
            </javadoc>
            <method name="randn1" type="RealMatrix" line="1346">
                <params>
                    <param name="size" type="int"/>
                    <param name="popSize" type="int"/>
                </params>
                <declaration name="d" type="double[][]" line="1347"/>
                <scope line="1348">
                    <scope line="1349"/>
                </scope>
            </method>
        </class>
    </source>