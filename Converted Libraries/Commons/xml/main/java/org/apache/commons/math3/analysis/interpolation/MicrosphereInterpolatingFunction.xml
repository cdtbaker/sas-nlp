<?xml version="1.0" encoding="UTF-8"?>
    <source package="org.apache.commons.math3.analysis.interpolation">
        <import package="java.util.ArrayList"/>
        <import package="java.util.HashMap"/>
        <import package="java.util.List"/>
        <import package="java.util.Map"/>
        <import package="org.apache.commons.math3.analysis.MultivariateFunction"/>
        <import package="org.apache.commons.math3.exception.DimensionMismatchException"/>
        <import package="org.apache.commons.math3.exception.NoDataException"/>
        <import package="org.apache.commons.math3.exception.NullArgumentException"/>
        <import package="org.apache.commons.math3.linear.ArrayRealVector"/>
        <import package="org.apache.commons.math3.linear.RealVector"/>
        <import package="org.apache.commons.math3.random.UnitSphereRandomVectorGenerator"/>
        <import package="org.apache.commons.math3.util.FastMath"/>
        <class name="MicrosphereInterpolatingFunction" line="14">
            <implements interface="MultivariateFunction"/>
            <javadoc line="14">
                Interpolating function that implements the
                  &lt;a href=&quot;http://www.dudziak.com/microsphere.php&quot;&gt;Microsphere Projection&lt;/a&gt;.                
                <version>
                    $Id: MicrosphereInterpolatingFunction.java 1455194 2013-03-11 15:45:54Z luc $                    
                </version>
            </javadoc>
            <declaration name="dimension" type="int" line="20"/>
            <javadoc line="20">
                Space dimension.                
            </javadoc>
            <declaration name="microsphere" type="List&lt;MicrosphereSurfaceElement&gt;" line="24"/>
            <javadoc line="24">
                Internal accounting data for the interpolation algorithm.
                  Each element of the list corresponds to one surface element of
                  the microsphere.                
            </javadoc>
            <declaration name="brightnessExponent" type="double" line="30"/>
            <javadoc line="30">
                Exponent used in the power law that computes the weights of the
                  sample data.                
            </javadoc>
            <declaration name="samples" type="Map&lt;RealVector,Double&gt;" line="35"/>
            <javadoc line="35">
                Sample data.                
            </javadoc>
            <class name="MicrosphereSurfaceElement" line="39">
                <javadoc line="39">
                    Class for storing the accounting data needed to perform the
                      microsphere projection.                    
                </javadoc>
                <declaration name="normal" type="RealVector" line="44"/>
                <javadoc line="44">
                    Normal vector characterizing a surface element.                    
                </javadoc>
                <declaration name="brightestIllumination" type="double" line="48"/>
                <javadoc line="48">
                    Illumination received from the brightest sample.                    
                </javadoc>
                <declaration name="brightestSample" type="Map.Entry&lt;RealVector,Double&gt;" line="52"/>
                <javadoc line="52">
                    Brightest sample.                    
                </javadoc>
                <javadoc line="56">
                    @param n Normal vector characterizing a surface element
                      of the microsphere.                    
                </javadoc>
                <method name="MicrosphereSurfaceElement" type="constructor" line="60">
                    <params>
                        <param name="n" type="double[]"/>
                    </params>
                </method>
                <javadoc line="63">
                    Return the normal vector.                    
                    <return>
                        the normal vector                        
                    </return>
                </javadoc>
                <method name="normal" type="RealVector" line="67"/>
                <javadoc line="70">
                    Reset &quot;illumination&quot; and &quot;sampleIndex&quot;.                    
                </javadoc>
                <method name="reset" type="void" line="73"/>
                <javadoc line="77">
                    Store the illumination and index of the brightest sample.                    
                    <param>
                        illuminationFromSample illumination received from sample                        
                    </param>
                    <param>
                        sample current sample illuminating the element                        
                    </param>
                </javadoc>
                <method name="store" type="void" line="82">
                    <params>
                        <param name="illuminationFromSample" type="double"/>
                        <param name="sample" type="Map.Entry<RealVector,Double>"/>
                    </params>
                    <scope line="83"/>
                </method>
                <javadoc line="88">
                    Get the illumination of the element.                    
                    <return>
                        the illumination.                        
                    </return>
                </javadoc>
                <method name="illumination" type="double" line="92"/>
                <javadoc line="95">
                    Get the sample illuminating the element the most.                    
                    <return>
                        the sample.                        
                    </return>
                </javadoc>
                <method name="sample" type="Map.Entry<RealVector,Double>" line="99"/>
            </class>
            <javadoc line="103">
                @param xval Arguments for the interpolation points.{@code xval[i][0]} is the first component of interpolation point{@code i}, {@code xval[i][1]} is the second component, and so on
                  until {@code xval[i][d-1]}, the last component of that interpolation
                  point (where {@code dimension} is thus the dimension of the sampled
                  space).                
                <param>
                    yval Values for the interpolation points.                    
                </param>
                <param>
                    brightnessExponent Brightness dimming factor.                    
                </param>
                <param>
                    microsphereElements Number of surface elements of the
                      microsphere.                    
                </param>
                <param>
                    rand Unit vector generator for creating the microsphere.                    
                </param>
                <throws>
                    DimensionMismatchException if the lengths of {@code yval} and{@code xval} (equal to {@code n}, the number of interpolation points)
                      do not match, or the the arrays {@code xval[0]} ... {@code xval[n]},
                      have lengths different from {@code dimension}.                    
                </throws>
                <throws>
                    NoDataException if there an array has zero-length.                    
                </throws>
                <throws>
                    NullArgumentException if an argument is {@code null}.                    
                </throws>
            </javadoc>
            <method name="MicrosphereInterpolatingFunction" type="constructor" line="119">
                <params>
                    <param name="xval" type="double[][]"/>
                    <param name="yval" type="double[]"/>
                    <param name="brightnessExponent" type="int"/>
                    <param name="microsphereElements" type="int"/>
                    <param name="rand" type="UnitSphereRandomVectorGenerator"/>
                </params>
                <scope line="120"/>
                <scope line="123"/>
                <scope line="126"/>
                <scope line="129"/>
                <scope line="135">
                    <declaration name="xvalI" type="double[]" line="136"/>
                    <scope line="137"/>
                    <scope line="140"/>
                </scope>
                <scope line="146"/>
            </method>
            <javadoc line="150">
                @param point Interpolation point.                
                <return>
                    the interpolated value.                    
                </return>
                <throws>
                    DimensionMismatchException if point dimension does not math sample                    
                </throws>
            </javadoc>
            <method name="value" type="double" line="155">
                <params>
                    <param name="point" type="double[]"/>
                </params>
                <declaration name="p" type="RealVector" line="156"/>
                <scope line="157"/>
                <scope line="160">
                    <declaration name="diff" type="RealVector" line="161"/>
                    <declaration name="diffNorm" type="double" line="162"/>
                    <scope line="163"/>
                    <scope line="166">
                        <declaration name="w" type="double" line="167"/>
                    </scope>
                </scope>
                <declaration name="value" type="double" line="171"/>
                <declaration name="totalWeight" type="double" line="172"/>
                <scope line="173">
                    <declaration name="iV" type="double" line="174"/>
                    <declaration name="sd" type="Map.Entry&lt;RealVector,Double&gt;" line="175"/>
                    <scope line="176"/>
                </scope>
            </method>
            <javadoc line="183">
                Compute the cosine of the angle between 2 vectors.                
                <param>
                    v Vector.                    
                </param>
                <param>
                    w Vector.                    
                </param>
                <return>
                    the cosine of the angle between {@code v} and {@code w}.                    
                </return>
            </javadoc>
            <method name="cosAngle" type="double" line="189">
                <params>
                    <param name="v" type="RealVector"/>
                    <param name="w" type="RealVector"/>
                </params>
            </method>
        </class>
    </source>