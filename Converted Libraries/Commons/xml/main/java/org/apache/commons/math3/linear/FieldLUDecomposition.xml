<?xml version="1.0" encoding="UTF-8"?>
    <source package="org.apache.commons.math3.linear">
        <import package="org.apache.commons.math3.Field"/>
        <import package="org.apache.commons.math3.FieldElement"/>
        <import package="org.apache.commons.math3.exception.DimensionMismatchException"/>
        <import package="org.apache.commons.math3.util.MathArrays"/>
        <class name="FieldLUDecomposition" line="25">
            <type_params>
                <type_param name="T"/>
            </type_params>
            <javadoc line="25">
                Calculates the LUP-decomposition of a square matrix.
                  &lt;p&gt;The LUP-decomposition of a matrix A consists of three matrices
                  L, U and P that satisfy: PA = LU, L is lower triangular, and U is
                  upper triangular and P is a permutation matrix. All matrices are
                  m&amp;times;m.&lt;/p&gt;
                  &lt;p&gt;Since {@link FieldElement field elements} do not provide an ordering
                  operator, the permutation matrix is computed here only in order to avoid
                  a zero pivot element, no attempt is done to get the largest pivot
                  element.&lt;/p&gt;
                  &lt;p&gt;This class is based on the class with similar name from the
                  &lt;a href=&quot;http://math.nist.gov/javanumerics/jama/&quot;&gt;JAMA&lt;/a&gt; library.&lt;/p&gt;
                  &lt;ul&gt;
                  &lt;li&gt;a {@link #getP() getP} method has been added,&lt;/li&gt;
                  &lt;li&gt;the {@code det} method has been renamed as {@link #getDeterminant()getDeterminant},&lt;/li&gt;
                  &lt;li&gt;the {@code getDoublePivot} method has been removed (but the int based{@link #getPivot() getPivot} method has been kept),&lt;/li&gt;
                  &lt;li&gt;the {@code solve} and {@code isNonSingular} methods have been replaced
                  by a {@link #getSolver() getSolver} method and the equivalent methods
                  provided by the returned {@link DecompositionSolver}.&lt;/li&gt;
                  &lt;/ul&gt;                
                <param>
                    &lt;T&gt;
                       the type of the field elements                    
                </param>
                <see>
                    &lt;a href=&quot;http://mathworld.wolfram.com/LUDecomposition.html&quot;&gt;MathWorld&lt;/a&gt;                    
                </see>
                <see>
                    &lt;a href=&quot;http://en.wikipedia.org/wiki/LU_decomposition&quot;&gt;Wikipedia&lt;/a&gt;                    
                </see>
                <version>
                    $Id: FieldLUDecomposition.java 1449528 2013-02-24 19:06:20Z luc $                    
                </version>
                <since>
                    2.0 (changed to concrete class in 3.0)                    
                </since>
            </javadoc>
            <declaration name="field" type="Field&amp;lt;T&amp;gt;" line="56"/>
            <javadoc line="56">
                Field to which the elements belong.                
            </javadoc>
            <declaration name="lu" type="T[][]" line="59"/>
            <javadoc line="59">
                Entries of LU decomposition.                
            </javadoc>
            <declaration name="pivot" type="int[]" line="62"/>
            <javadoc line="62">
                Pivot permutation associated with LU decomposition.                
            </javadoc>
            <declaration name="even" type="boolean" line="65"/>
            <javadoc line="65">
                Parity of the permutation associated with the LU decomposition.                
            </javadoc>
            <declaration name="singular" type="boolean" line="68"/>
            <javadoc line="68">
                Singularity indicator.                
            </javadoc>
            <declaration name="cachedL" type="FieldMatrix&amp;lt;T&amp;gt;" line="71"/>
            <javadoc line="71">
                Cached value of L.                
            </javadoc>
            <declaration name="cachedU" type="FieldMatrix&amp;lt;T&amp;gt;" line="74"/>
            <javadoc line="74">
                Cached value of U.                
            </javadoc>
            <declaration name="cachedP" type="FieldMatrix&amp;lt;T&amp;gt;" line="77"/>
            <javadoc line="77">
                Cached value of P.                
            </javadoc>
            <javadoc line="80">
                Calculates the LU-decomposition of the given matrix.                
                <param>
                    matrix The matrix to decompose.                    
                </param>
                <throws>
                    NonSquareMatrixException if matrix is not square                    
                </throws>
            </javadoc>
            <method name="FieldLUDecomposition" type="constructor" line="85">
                <params>
                    <param name="matrix" type="FieldMatrix&lt;T&gt;"/>
                </params>
                <comment line="100">
                    Initialize permutation array and parity                    
                </comment>
                <comment line="107">
                    Loop over columns                    
                </comment>
                <comment line="112">
                    upper                    
                </comment>
                <comment line="122">
                    lower                    
                </comment>
                <comment line="123">
                    permutation row                    
                </comment>
                <comment line="133">
                    try to select a better permutation choice                    
                </comment>
                <comment line="138">
                    Singularity check                    
                </comment>
                <comment line="144">
                    Pivot if necessary                    
                </comment>
                <comment line="158">
                    Divide the lower elements by the &quot;winning&quot; diagonal elt.                    
                </comment>
                <scope line="86"/>
                <declaration name="m" type="int" line="91"/>
                <scope line="100"/>
                <scope line="107">
                    <declaration name="sum" type="T" line="109"/>
                    <scope line="112">
                        <declaration name="luRow" type="T[]" line="113"/>
                        <scope line="115"/>
                    </scope>
                    <declaration name="nonZero" type="int" line="122"/>
                    <scope line="123">
                        <declaration name="luRow" type="T[]" line="124"/>
                        <scope line="126"/>
                        <scope line="131"/>
                    </scope>
                    <scope line="138"/>
                    <scope line="144">
                        <declaration name="tmp" type="T" line="145"/>
                        <scope line="146"/>
                        <declaration name="temp" type="int" line="151"/>
                    </scope>
                    <declaration name="luDiag" type="T" line="158"/>
                    <scope line="159">
                        <declaration name="luRow" type="T[]" line="160"/>
                    </scope>
                </scope>
            </method>
            <javadoc line="167">
                Returns the matrix L of the decomposition.
                  &lt;p&gt;L is a lower-triangular matrix&lt;/p&gt;                
                <return>
                    the L matrix (or null if decomposed matrix is singular)                    
                </return>
            </javadoc>
            <method name="getL" type="FieldMatrix&lt;T&gt;" line="172">
                <scope line="173">
                    <declaration name="m" type="int" line="174"/>
                    <scope line="176">
                        <declaration name="luI" type="T[]" line="177"/>
                        <scope line="178"/>
                    </scope>
                </scope>
            </method>
            <javadoc line="187">
                Returns the matrix U of the decomposition.
                  &lt;p&gt;U is an upper-triangular matrix&lt;/p&gt;                
                <return>
                    the U matrix (or null if decomposed matrix is singular)                    
                </return>
            </javadoc>
            <method name="getU" type="FieldMatrix&lt;T&gt;" line="192">
                <scope line="193">
                    <declaration name="m" type="int" line="194"/>
                    <scope line="196">
                        <declaration name="luI" type="T[]" line="197"/>
                        <scope line="198"/>
                    </scope>
                </scope>
            </method>
            <javadoc line="206">
                Returns the P rows permutation matrix.
                  &lt;p&gt;P is a sparse matrix with exactly one element set to 1.0 in
                  each row and each column, all other elements being set to 0.0.&lt;/p&gt;
                  &lt;p&gt;The positions of the 1 elements are given by the {@link #getPivot()pivot permutation vector}.&lt;/p&gt;                
                <return>
                    the P rows permutation matrix (or null if decomposed matrix is singular)                    
                </return>
                <see>
                    #getPivot()                    
                </see>
            </javadoc>
            <method name="getP" type="FieldMatrix&lt;T&gt;" line="215">
                <scope line="216">
                    <declaration name="m" type="int" line="217"/>
                    <scope line="219"/>
                </scope>
            </method>
            <javadoc line="226">
                Returns the pivot permutation vector.                
                <return>
                    the pivot permutation vector                    
                </return>
                <see>
                    #getP()                    
                </see>
            </javadoc>
            <method name="getPivot" type="int[]" line="231"/>
            <javadoc line="235">
                Return the determinant of the matrix.                
                <return>
                    determinant of the matrix                    
                </return>
            </javadoc>
            <method name="getDeterminant" type="T" line="239">
                <scope line="240"/>
                <scope line="242">
                    <declaration name="m" type="int" line="243"/>
                    <declaration name="determinant" type="T" line="244"/>
                    <scope line="245"/>
                </scope>
            </method>
            <javadoc line="252">
                Get a solver for finding the A &amp;times; X = B solution in exact linear sense.                
                <return>
                    a solver                    
                </return>
            </javadoc>
            <method name="getSolver" type="FieldDecompositionSolver&lt;T&gt;" line="256"/>
            <class name="Solver" line="260">
                <type_params>
                    <type_param name="T"/>
                </type_params>
                <implements interface="FieldDecompositionSolver">
                    <type_params>
                        <type_param name="T"/>
                    </type_params>
                </implements>
                <javadoc line="260">
                    Specialized solver.                    
                </javadoc>
                <declaration name="field" type="Field&amp;lt;T&amp;gt;" line="263"/>
                <javadoc line="263">
                    Field to which the elements belong.                    
                </javadoc>
                <declaration name="lu" type="T[][]" line="266"/>
                <javadoc line="266">
                    Entries of LU decomposition.                    
                </javadoc>
                <declaration name="pivot" type="int[]" line="269"/>
                <javadoc line="269">
                    Pivot permutation associated with LU decomposition.                    
                </javadoc>
                <declaration name="singular" type="boolean" line="272"/>
                <javadoc line="272">
                    Singularity indicator.                    
                </javadoc>
                <javadoc line="275">
                    Build a solver from decomposed matrix.                    
                    <param>
                        field field to which the matrix elements belong                        
                    </param>
                    <param>
                        lu entries of LU decomposition                        
                    </param>
                    <param>
                        pivot pivot permutation associated with LU decomposition                        
                    </param>
                    <param>
                        singular singularity indicator                        
                    </param>
                </javadoc>
                <method name="Solver" type="constructor" line="283">
                    <params>
                        <param name="field" type="Field&lt;T&gt;"/>
                        <param name="lu" type="T[][]"/>
                        <param name="pivot" type="int[]"/>
                        <param name="singular" type="boolean"/>
                    </params>
                </method>
                <javadoc line="290">
                    {@inheritDoc}                    
                </javadoc>
                <method name="isNonSingular" type="boolean" line="291"/>
                <javadoc line="295">
                    {@inheritDoc}                    
                </javadoc>
                <method name="solve" type="FieldVector&lt;T&gt;" line="296">
                    <params>
                        <param name="b" type="FieldVector&lt;T&gt;"/>
                    </params>
                    <comment line="310">
                        Apply permutations to b                        
                    </comment>
                    <comment line="316">
                        Solve LY = b                        
                    </comment>
                    <comment line="324">
                        Solve UX = Y                        
                    </comment>
                    <scope line="297"/>
                    <scope line="299">
                        <declaration name="m" type="int" line="301"/>
                        <scope line="302"/>
                        <scope line="305"/>
                        <declaration name="bp" type="T[]" line="310"/>
                        <scope line="311"/>
                        <scope line="316">
                            <declaration name="bpCol" type="T" line="317"/>
                            <scope line="318"/>
                        </scope>
                        <scope line="324">
                            <declaration name="bpCol" type="T" line="326"/>
                            <scope line="327"/>
                        </scope>
                    </scope>
                </method>
                <javadoc line="337">
                    Solve the linear equation A &amp;times; X = B.
                      &lt;p&gt;The A matrix is implicit here. It is &lt;/p&gt;                    
                    <param>
                        b right-hand side of the equation A &amp;times; X = B                        
                    </param>
                    <return>
                        a vector X such that A &amp;times; X = B                        
                    </return>
                    <throws>
                        DimensionMismatchException if the matrices dimensions do not match.                        
                    </throws>
                    <throws>
                        SingularMatrixException if the decomposed matrix is singular.                        
                    </throws>
                </javadoc>
                <method name="solve" type="ArrayFieldVector&lt;T&gt;" line="344">
                    <params>
                        <param name="b" type="ArrayFieldVector&lt;T&gt;"/>
                    </params>
                    <comment line="355">
                        Apply permutations to b                        
                    </comment>
                    <comment line="361">
                        Solve LY = b                        
                    </comment>
                    <comment line="369">
                        Solve UX = Y                        
                    </comment>
                    <declaration name="m" type="int" line="345"/>
                    <declaration name="length" type="int" line="346"/>
                    <scope line="347"/>
                    <scope line="350"/>
                    <declaration name="bp" type="T[]" line="355"/>
                    <scope line="356"/>
                    <scope line="361">
                        <declaration name="bpCol" type="T" line="362"/>
                        <scope line="363"/>
                    </scope>
                    <scope line="369">
                        <declaration name="bpCol" type="T" line="371"/>
                        <scope line="372"/>
                    </scope>
                </method>
                <javadoc line="380">
                    {@inheritDoc}                    
                </javadoc>
                <method name="solve" type="FieldMatrix&lt;T&gt;" line="381">
                    <params>
                        <param name="b" type="FieldMatrix&lt;T&gt;"/>
                    </params>
                    <comment line="393">
                        Apply permutations to b                        
                    </comment>
                    <comment line="403">
                        Solve LY = b                        
                    </comment>
                    <comment line="415">
                        Solve UX = Y                        
                    </comment>
                    <declaration name="m" type="int" line="382"/>
                    <scope line="383"/>
                    <scope line="386"/>
                    <declaration name="nColB" type="int" line="390"/>
                    <declaration name="bp" type="T[][]" line="393"/>
                    <scope line="394">
                        <declaration name="bpRow" type="T[]" line="395"/>
                        <declaration name="pRow" type="int" line="396"/>
                        <scope line="397"/>
                    </scope>
                    <scope line="403">
                        <declaration name="bpCol" type="T[]" line="404"/>
                        <scope line="405">
                            <declaration name="bpI" type="T[]" line="406"/>
                            <declaration name="luICol" type="T" line="407"/>
                            <scope line="408"/>
                        </scope>
                    </scope>
                    <scope line="415">
                        <declaration name="bpCol" type="T[]" line="416"/>
                        <declaration name="luDiag" type="T" line="417"/>
                        <scope line="418"/>
                        <scope line="421">
                            <declaration name="bpI" type="T[]" line="422"/>
                            <declaration name="luICol" type="T" line="423"/>
                            <scope line="424"/>
                        </scope>
                    </scope>
                </method>
                <javadoc line="434">
                    {@inheritDoc}                    
                </javadoc>
                <method name="getInverse" type="FieldMatrix&lt;T&gt;" line="435">
                    <declaration name="m" type="int" line="436"/>
                    <declaration name="one" type="T" line="437"/>
                    <declaration name="identity" type="FieldMatrix&amp;lt;T&amp;gt;" line="438"/>
                    <scope line="439"/>
                </method>
            </class>
        </class>
    </source>